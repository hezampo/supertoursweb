<?php

/**
 * ToursController web
 */
Doo::loadController('I18nController');
Doo::loadHelper('class.phpmailer');
Doo::loadController('RecaptController');
Doo::loadHelper('DooPDF');
//print_r($_SESSION ["toursbooking"]);

class ToursControllerWeb extends DooController {

    public $data;
    public $flag;

    public function index() {
        $this->data['rootUrl'] = Doo::conf()->APP_URL;
        unset($_SESSION["toursbooking"]);
        unset($_SESSION['step_onedaytour_one']);
        unset($_SESSION['onedaytour']);
        unset($_SESSION["grupos"]);
        unset($_SESSION["grupos1"]);
        $this->renderc('/page/1-day-tour', $this->data);
    }

    public function close_session() {
        // Destruir todas las variables de sesión.
        $_SESSION = array();

        // Si se desea destruir la sesión completamente, borre también la cookie de sesión.
        // Nota: ¡Esto destruirá la sesión, y no la información de la sesión!
        if (ini_get("session.use_cookies")) {
            $params = session_get_cookie_params();
            setcookie(session_name(), '', time() - 42000, $params["path"], $params["domain"], $params["secure"], $params["httponly"]);
        }
        //Finalmente, destruir la sesión.
        session_destroy();
        return Doo::conf()->APP_URL . "";
    }

    //mandarPax/tour mandarPaxTour
    public function mandarPaxTour() {
        $adult = $this->params["adult"];
        $child = $this->params["child"];
        $fecha1 = $this->params["fecha1"];
        $trip1 = $this->params["trip1"];
        $totalPax = ($adult + ($child == null ? 0 : $child));
        //echo 'total pax ' . $totalPax . ' fecha salida ' . $fecha1 . ' en el trip ' . $trip1;
    }

    public function mandarPaxTourRetorno() {
        $adult = $this->params["adult"];
        $child = $this->params["child"];
        ($child == null ? 0 : $child);
        $fecha1 = $this->params["fecha1"];
        $trip1 = $this->params["trip1"];
        $totalPax = ($adult + ($child == null ? 0 : $child));
        //echo 'total pax ' . $totalPax . ' fecha salida ' . $fecha1 . ' en el trip ' . $trip1;
    }

    public function login(){
        if (!empty($_POST['usuario']) && !empty($_POST['password']) AND !empty($_POST['usuario']) && !empty($_POST['password'])) {
            
            $user = trim($_POST['usuario']);
            $pass = trim($_POST['password']);
                $u = $this->db()->find('Clientes', array('where' => 'username = ? and password = ? ',
                'limit' => 1,
                'select' => 'id,username,firstname,lastname,state,address,zip,tipo_client,city,country,phone,celphone',
                'param' => array($user, $pass)
                    )
            );
            $this->data['rootUrl'] = Doo::conf()->APP_URL;

            if($u == NULL){
                $this->data['error'] = "Acceso denegado";
                return Doo::conf()->APP_URL . "tours/userlog2";
            }else{
                $login = new stdclass ();
                $login->username = $u->username;
                $login->username2 = $u->username;
                $login->firstname = $u->firstname;
                $login->lastname = $u->lastname;
                $login->state = $u->state;
                $login->address = $u->address;
                $login->zip = $u->zip;
                $login->tipo_client = $u->tipo_client;
                $login->city = $u->city;
                $login->country = $u->country;
                $login->phone = $u->phone;
                $login->id = $u->id;

               $_SESSION['user'] = $login;
				unset($_SESSION['signup2']);
				unset($_SESSION['infoforms']);
				unset($_SESSION ['toursinvi']);
				unset($_SESSION ['toursinvimulti']);
            //    return Doo::conf()->APP_URL . "tours/userlog2";
            return Doo::conf()->APP_URL . "confirmation_onedaytour";
            }
            // echo '<pre>';
            // print_r($u);
            // echo '</pre>';
            // die;
        }else{
            return Doo::conf()->APP_URL . "tours/userlog2";
        }


    }

    public function insertaruso(){
        // date_default_timezone_set('America/New_York');
        $id_user = $_SESSION['booking']['iden'];
        $idpromo = 7;
        if(isset($this->params['trip1'])){
            $trip1 = $this->params['trip1'];
        }
        if(isset($this->params['trip2'])){
            $trip2 = $this->params['trip2'];
        }
        if(isset($this->params['fechatrip1'])){
            // $fecha = $this->params['fechatrip'];
            list($mes, $dia, $anio) = explode('-', $this->params['fechatrip1']);
            $fecha_trip1 = $anio . '-' . $mes . '-' . $dia;
        }
        
        if(isset($this->params['fechatrip2'])){
            // $fecha = $this->params['fechatrip'];
            list($mes, $dia, $anio) = explode('-', $this->params['fechatrip2']);
            $fecha_trip2 = $anio . '-' . $mes . '-' . $dia;
        }
        if(isset($this->params['totalpax'])){
            $totalpax = $this->params['totalpax'];
        }
        if(isset($this->params['tipo'])){
            $tipo = $this->params['tipo'];
        }
        // echo '<pre>';
        // print_r($_SESSION);
        // echo '</pre>';

        if($this->params['tipo'] == 1)//TRIPS 100 200 300
        {
            
            $bCuenta=0;

               $sql1 = "SELECT * FROM reservas_trip_puestos WHERE usuario = '" . $id_user . "' AND tipo = '1'";
               $re1 = Doo::db()->query($sql1);
               $result1 = $re1->rowCount();

            if($result1 == 0){
                $z = "SELECT now() as timet";
                $zrt = Doo::db()->query($z);
                foreach ($zrt as $t):
                    $Tt=$t['timet'];
                endforeach;
                $_SESSION['booking']['dateT1']=$Tt;

                $insert = "INSERT INTO reservas_trip_puestos (id, trip_to, tipo, fecha_trip, cantidad, fecha_usado, usuario, estado, fecha_actividad,tarifa) 
                VALUES(NULL, $trip1, $tipo, '".$fecha_trip1."', $totalpax, now(), $id_user, 'USING', now(),$idpromo)";
            Doo::db()->query($insert);
            }else{
                $z = "SELECT now() as timet";
                $zrt = Doo::db()->query($z);
                foreach ($zrt as $t):
                    $Tt=$t['timet'];
                endforeach;
                $_SESSION['booking']['dateT1']=$Tt;

                $sqlUpdate = "UPDATE reservas_trip_puestos SET cantidad = '" . $totalpax . "', fecha_trip = '" . $fecha_trip1 . "', fecha_usado = NOW(), estado='USING',fecha_actividad = NOW(),tarifa = 7,trip_to = $trip1 WHERE usuario = '" . $id_user . "' AND tipo = $tipo ";
            // print_r($sqlUpdate);
            // die;
                Doo::db()->query($sqlUpdate);
            }
            echo $trip1;


        }else //TRIPS 101 201 301
        {
            $bCuenta=0;
            // if($tidaun!=''){
               $sql2 = "SELECT * FROM reservas_trip_puestos WHERE usuario = '" . $id_user . "' AND tipo = '2'";
               $re2 = Doo::db()->query($sql2);
               $result2 = $re2->rowCount();
            // }else{
                // $bCuenta=$bCuenta;
            // }
            // print_r($result2);
            // die;
                
            if($result2 == 0){
                $z = "SELECT now() as timet";
                $zrt = Doo::db()->query($z);
                foreach ($zrt as $t):
                    $Tt=$t['timet'];
                endforeach;
                $_SESSION['booking']['dateT2']=$Tt;

                $insert = "INSERT INTO reservas_trip_puestos (id, trip_to, tipo, fecha_trip, cantidad, fecha_usado, usuario, estado, fecha_actividad,tarifa) 
                VALUES(NULL, $trip2, $tipo, '".$fecha_trip2."', $totalpax, now(), $id_user, 'USING', now(),$idpromo)";
            Doo::db()->query($insert);
            }else{
                $z = "SELECT now() as timet";
                $zrt = Doo::db()->query($z);
                foreach ($zrt as $t):
                    $Tt=$t['timet'];
                endforeach;
                $_SESSION['booking']['dateT2']=$Tt;
                $sqlUpdate = "UPDATE reservas_trip_puestos SET cantidad = '" . $totalpax . "', fecha_trip = '" . $fecha_trip2 . "', fecha_usado = NOW(), estado='USING',fecha_actividad = NOW(),tarifa = 7,trip_to = $trip2 WHERE usuario = '" . $id_user . "' AND tipo = $tipo ";
            // print_r($this->params);
            // die;
                Doo::db()->query($sqlUpdate);
            }
            echo $trip2;

        }
    }

    public function selpicdro(){
        // print_r($this->params);
        // die;
        $id2 =$this->params['id2'];
        $idarea = $this->params['idarea'];
        $trip = $this->params['trip'];
        $tripsspd = 'AND trip'.$trip.' = 1';
        $sql2 = "SELECT DISTINCT id,id_area,CONCAT_WS(' ',place,address) AS pickup FROM pickup_dropoff WHERE id_area = $idarea AND (SELECT FIND_IN_SET('2', type_pick)) > 0 $tripsspd AND active_web = 1 ORDER BY posicion ASC";//active_web = 1 
        // echo $idarea;
        $rs2 = Doo::db()->query($sql2);
        $pickup = $rs2->fetchAll();
// print_r($sql2);
// die;
        //print_r($this->params);
        if($id2 == 1){
        echo '<div class="form-group row">
            <label for="inputPassword" class="col-sm-2 col-form-label ">Pick up Point:</label>
            <div class="col-sm-10">
                    <div class="col-lg-12 col-md-12">
                        <div class="form-group">
                        <select class="form-control form-control-sm" id="pickup" name="pickup">';
                foreach ($pickup as $e2) {
                        echo "<option value=".$e2["id"].">".$e2["pickup"]."</option>";
                }
            echo '</select>
                    </div>
                </div>
            </div>
            <input name="sarrival" type="hidden"  value="1"/>
        </div>';

        }else{
            
        echo '<div class="form-group row">
            <label for="inputPassword" class="col-sm-2 col-form-label ">Drop off Point:</label>
            <div class="col-sm-10">
                    <div class="col-lg-12 col-md-12">
                        <div class="form-group">
                        <select class="form-control form-control-sm" id="pickup2" name="pickup2">';
            foreach ($pickup as $e2) {
                    echo "<option value=".$e2["id"].">".$e2["pickup"]."</option>";
                        // echo "<option value='0'>Wait For you Return Area</option>";

            }
            echo '</select>
                    </div>
                </div>
            </div>
            <input name="sdeparture" type="hidden"  value="1"/>
        </div>';
        }
        // echo ' $("#pickup").change(function(){
        //     alert();
        // })';
    }

    public function selare(){
        
        $id = $this->params["id"];
        $id2 = $this->params["id2"];
        $id3 = $this->params['id3'];
        $id4 = $this->params['id4'];
        $paxs = $this->params['paxs'];
        $corte = $this->params["corte"];
        echo '<script>';
        echo 'var url = "'.Doo::conf()->APP_URL.'"; ';
        echo '</script>';
        $url = Doo::conf()->APP_URL;
        // print_r($this->params);
        $sql = "SELECT DISTINCT t1.trip_to AS id, t2.nombre
        FROM routes t1
        LEFT JOIN areas t2 ON ( t1.trip_to = t2.id ) 
        WHERE t1.trip_from =1 AND t2.id <> 13 AND t2.id <> 16 ORDER BY t2.orden ASC";
        $rs = Doo::db()->query($sql);
        $to_areas = $rs->fetchAll();
        if ($id2 == 1) {
            echo '
            <div class="card" align="center" id-"trips2">
            <div class="card-body">
            
            <div id="pickup_exexten">
                <div class="form-group row">
                <label for="staticEmail" class="col-sm-2 col-form-label">Departure Area:</label>
                <div class="col-sm-10">
                            <div class="col-lg-9 col-md-9">
                            <div class="form-group">
                                <select class="form-control form-control-sm" id="area" name="area">';
                                echo "<option value='0' selected>Choose...</option>";
                                foreach ($to_areas as $e) {
                                    if($e["id"] != 17){
                                        echo "<option value=".$e["id"].">".$e["nombre"]."</option>";
                                    }
                                }
                                echo '</select>
                            </div>
                        </div>
                </div>
                
            </div>
        </div>';

        // echo '<script>';
        // echo '$("#area").change(function(){
        //     var idarea = $("#area").val();
        //     $("#area2").val(idarea);
        //     var l = url+"tours/question19/'.$id2.'/"+idarea;
        //     console.log(idarea);
        //     $("#pickup").load(l);
        //     $("#pickup2").load(l);
        //     });
        // </script>';
        echo '<script>';
        echo '
            $("#area").change(function(){
                var idarea = $("#area").val();
                $("#idareas1").val(idarea);
               //alert(idarea);
            }); ';
        echo '</script>';
        // echo '<div class="form-group row">
        //     <label for="inputPassword" class="col-sm-2 col-form-label ">Pick up Point:</label>
        //     <div class="col-sm-10">
        //             <div class="col-lg-12 col-md-12">
        //                 <div class="form-group">
        //                 <select class="form-control form-control-sm" id="pickup" name="pickup">';
        //                 echo "<option value='0'>Wait For you Departure Area</option>";
        //                 echo '</select>
        //                 </div>
        //             </div>
        //     </div>
        // </div>
        //     </div>
        // </div>';

        echo '<br>';
        echo '<button type="button" class="btn btn-primary btn-lg btn-block" style="border-radius: 0px;" id="buscartrip1">SELECT THE DEPARTURE TIME</button>';


        echo '<script>
            var s = $("#indexSelect2").val();
            if(s == 0){
                var bus = true;
            }else{
                var bus = false;
            }

            if(s == 1){
                var air = true;
            }else{
                var air = false;
            }

            if(s == 2){
                var car = true;
            }else{
                var car = false;
            }
            $("#buscartrip1").click(function(){
                var idarea = $("#area").val();
                var pickup = $("#pickup").val();
                //alert(pickup);
                // if(pickup == null){
                //     alert("SELECT A PICKUP POINT");
                //     return false;
                // }
                $("#idarea").val(idarea);
                $("#idpickup").val(pickup);
                if(idarea != 0 && pickup != 0){
                var l = url+"tours/question2/'.$id.'/'.$id2.'/'.$id3.'/'.$id4.'/'.$corte.'/'.$paxs.'/"+idarea ;
                //alert(pickup);
                $("#conte").empty().html("<img src='.$url.'global/images/loading.gif   width=300px height=250 id=gif/>");
                //  $("#conte").empty().html("LOADING");
                 $("#conte").load(l);
                }else{
                    alert("WAIT FOR YOU RETURN AREA...");
                }
            })
            
            var ddData2 = [
            {
                text: "Super Tours Bus",
                value: 2,
                selected: bus,
                                            
                description: "BUS TO MIAMI?",
                imageSrc: "' . $url . 'global/img/BUS2.png"
            },
            {
                text: "Airport (Transfer Out - MCO)",
                value: 2,
                selected: air,
                description: "FROM ORLANDO INT`L AIRPORT (TRANSFER OUT - MCO)?",
                imageSrc: "' . $url . 'global/img/icon-plane.png"
            },
            {
                text: "By Car",
                value: 2,
                selected: car,
                // description: "BY CAR?",
                imageSrc: "' . $url . 'global/img/car.png"
            }
            // {
            //     text: "Super Tours Vip",
            //     value: 2,
            //     selected: false,
            //     description: "Super Tours Vip?",
            //     imageSrc: "' . $url . 'global/img/vip.jpg"
            // }
            ];		
            $("#select2").ddslick("destroy");

            $("#select2").ddslick({
            data: ddData2,
            imagePosition: "left",
            selectText: "Method of arrival to Orlando?",
            onSelected: function (data) {
                var id = data.selectedIndex;
                $("#indexSelect2").val(id);
                selectTrip2();
            }
            });
            $(".trip1").change(function() {
            var id = 0;
            var trip_no = $(this).val();
            $("#pickups").load("' . $url . 'tours/question14/" + id + "/" + trip_no,function(){
            insertreserva2(trip_no);
            });
            });
            </script>';


        }


        if($id2 == 2){
            echo '
            <div class="card" align="center" id-"trips2">
            <div class="card-body">
            
            <div id="pickup_exexten">
                <div class="form-group row">
                <label for="staticEmail" class="col-sm-2 col-form-label">Return Area :</label>
                <div class="col-sm-10">
                            <div class="col-lg-9 col-md-9">
                            <div class="form-group">
                                <select class="form-control form-control-sm" id="area2" name="area2">';
                                echo "<option value='0' selected>Choose...</option>";
                                    foreach ($to_areas as $e) {
                                        if($e["id"] != 17){
                                        echo "<option value=".$e["id"].">".$e["nombre"]."</option>";
                                        }
                                    }
                                echo '</select>
                            </div>
                        </div>
                </div>
                
            </div>
        </div>';
        echo '<script>';
        echo '
            $("#area2").change(function(){
                var idarea2 = $("#area2").val();
                $("#idareas2").val(idarea2);
               //alert(idarea2 );
            }); ';
        echo '</script>';
        // echo '<script>';
        // echo 'var url = "'.Doo::conf()->APP_URL.'"; ';
        // echo '$("#area2").change(function(){
        //     var idarea = $("#area2").val();
        //     var l = url+"tours/question19/'.$id2.'/"+idarea;
        //     console.log(idarea);

        //     $("#pickup2").load(l);
        //     });
        // </script>';


        // echo '<div class="form-group row">
        //     <label for="inputPassword" class="col-sm-2 col-form-label ">Drop off Point:</label>
        //     <div class="col-sm-10">
        //             <div class="col-lg-12 col-md-12">
        //                 <div class="form-group">
        //                 <select class="form-control form-control-sm" id="pickup2" name="pickup2">';
        //                 echo "<option value='0'>Wait For you Return Area</option>";
        //                 echo '</select>
        //                 </div>
        //             </div>
        //     </div>
        // </div>

        //     </div>
        // </div>';

            echo '<br>';
            echo '<button id="buscartrip2" type="button" class="btn btn-primary btn-lg btn-block" style="border-radius: 0px;">SELECT THE RETURN TIME</button>';
            echo '<script>            
            $("#buscartrip2").click(function(){
                var idarea2 = $("#area2").val();
                var pickup2 = $("#pickup2").val();
                // if(pickup2 == null){
                //     alert("SELECT A DROPOFF POINT");
                //     return false;
                // }
                $("#idarea2").val(idarea2)
                $("#idpickup2").val(pickup2)
                if(idarea2 != 0 && pickup2 != 0){
                var l = url+"tours/question2/'.$id.'/'.$id2.'/'.$id3.'/'.$id4.'/'.$corte.'/'.$paxs.'/"+idarea2 ;
                // alert(l);
                $("#conte2").empty().html("<img src='.$url.'global/images/loading.gif   width=300px height=250 id=gif/>");
                //  $("#conte2").empty().html("LOADING");
                 $("#conte2").load(l);
                 
                }else{
                    alert("WAIT FOR YOU DEPARTURE AREA...");
                }
            }) </script>';
        }

    }

    public function question() {

        if (isset($_SESSION['data_agency'])) {
            Doo::loadModel("Agency");
            $dat = new Agency($_SESSION['data_agency']);
            $type = $dat->type_rate;
        } else {
            $type = 0;
        }
        try {
            $id = $this->params["id"];
            $id2 = $this->params["id2"];
            $id3 = $this->params["id3"];
            $id4 = $this->params["id4"];
            $paxs = $this->params['paxs'];
            $idarea = $this->params['idarea'];
            $corte = $this->params["corte"]; 

            $url = Doo::conf()->APP_URL;

            $tiempo = false;
            $mensaje = '';
            // print_r($this->params["id3"]);
            // die;
            if (isset($this->params["id3"])) {
                $fecha = $this->params["id3"];
                list ($mes, $dia, $anyo) = explode("-", $fecha);
                $fecha2 = $anyo . "-" . $mes . "-" . $dia;
                $f0 = strtotime(date('Y-m-d h:i A'));
                $f1 = strtotime($fecha2);
                $resultado = ($f1 - $f0);
                $resultado = ($resultado / 60 / 60) + 1;
                $resultado = round($resultado);
                //echo 'resultado =>'.$resultado;
                if ($resultado > 7) {
                    $tiempo = true;
                    $mensaje = '';
                } else {
                    echo '<button type="button" class="btn btn-primary btn-lg btn-block" style="border-radius: 0px;" id="backtoarea">BACK</button>';
                    echo '<script>';
                    echo 'var url = "'.Doo::conf()->APP_URL.'"; ';
                    echo '</script>';
                    echo '<br>';
                    echo '<script>    
                    $("#backtoarea").click(function(){
                        $("#conte").empty().html("<img src="'.$url.'global/images/loading.gif"   width="300px" height="250" id="gif"/>");
                        var l = url+"tours/question18/'.$id.'/'.$id2.'/'.$id3.'/'.$id4.'/'.$corte.'/'.$paxs.'/0" ;
                        alert(l);
                        $("#conte").load(l);
                    })
                    </script>';
                    $tiempo = false;
                    $mensaje = "The maximum period for reservation of one-day-tours be until 05:00 PM the day prior to the date of departure";
                }
            }

            if ($this->params["corte"] == 0) {
                if ($id == 0 && $id2 == 1 && isset($fecha)) {
                  
                    
                    list($mes, $dia, $anio) = explode("-", $fecha);
                    $fecha1 = $anio . '-' . $mes . '-' . $dia;
                    
                    $sql = "SELECT DISTINCT
                      t1.trip_no,
                      t2.id,
                      t2.fecha_ini,
                      t4.nombre AS trip_from,
                      t5.nombre AS trip_to,
                      t2.trip_departure,
                      t2.trip_arrival,
                      t1.estado,
                      t2.type_rate 
                    FROM
                      programacion t1 
                      LEFT JOIN routes t2 
                        ON (t1.trip_no = t2.trip_no) 
                      LEFT JOIN trips t3 
                        ON (t1.trip_no = t3.trip_no) 
                      LEFT JOIN areas t4 
                        ON (t2.trip_from = t4.id) 
                      LEFT JOIN areas t5 
                        ON (t2.trip_to = t5.id) 
                    WHERE t2.trip_from = $idarea 
                      AND t2.trip_to = '1' 
                      AND t2.anno = '" . $anio . "' 
                      AND t2.fecha_ini = '" . $fecha1 . "' 
                      AND t2.type_rate = '0' 
                      AND t1.estado = '1' 
                    ORDER BY t2.trip_departure ASC";
                    $anno = explode("-", $fecha);
                    $rs = Doo::db()->query($sql);
                    $llegada = $rs->fetchAll();
                    //echo $sql;

                    echo '<script> $("#conte").css("display", "block");$("#pickups").css("display", "none");</script>';
                    echo '<div align="center" > 
                            <table id="tablares1" width="100%" border="1" class="table-light table-sm table-hover table2 table table-bordered table-striped">
                                <thead>
                                    <tr style="height: 37px;">
                                        <th width="10%" style="text-align: center;"><b>Select</b></th>
                                        <th width="10%" style="text-align: center;"><b>Trip</b></th>
                                        <th width="15%" style="text-align: center;"><b>Departure</b></th>
                                        <th  width="15%" style="text-align: center;"><b>Arrive</b></th>
                                        <th style="display:none" width="33%" style="text-align: center;"><b>Equipment</b></th>
                                    </tr>
                                </thead>';
                    if (count($llegada) > 0 && $tiempo) {

                        $contador = 0;
                        Doo::loadController('MainController');
                        $main = new MainController();
                        
                        foreach ($llegada as $e) {
                            $sqlcap_301 = "SELECT DISTINCT seats_remain,capacity, capacity2, capacity3, capacity4, capacity5 FROM routes WHERE fecha_ini = '$fecha2' AND fecha_fin = '$fecha2'  AND trip_no = ".$e['trip_no']." ";
                            $rscap_301 = Doo::db()->query($sqlcap_301);
                            $capac_301 = $rscap_301->fetchAll();
                            foreach ($capac_301 as $c) {
                                $capacity = $c['capacity'];
                                $capacity2 = $c['capacity2'];
                                $capacity3 = $c['capacity3'];
                                $capacity4 = $c['capacity4'];
                                $capacity5 = $c['capacity5'];
                                // $seat = $capacity + $capacity2 +$capacity3 +$capacity4 +$capacity5;
                            }
                            $sql2 = "SELECT
                            SUM(cantidad) AS cantTours
                            FROM reservas_trip_puestos WHERE fecha_trip = ?
                            AND trip_to = ".$e['trip_no']."
                            AND (tipo = '1' OR tipo = '2')
                            AND ( estado = 'USING' OR estado = 'RENEWED' )  ";
                            $rs2 = Doo::db()->query($sql2, array($fecha2));
                            $puestos2 = $rs2->fetchAll(PDO::FETCH_ASSOC);
                            $cantTours12 =  $puestos2[0]['cantTours'];
                
                            $sql_spcida = "SELECT
                            (sum(pax_r) + sum(pax2_r)) AS superespecial
                            FROM reservas  WHERE trip_no = ".$e['trip_no']." AND fecha_salida = ?
                            AND estado != 'QUOTE'
                            AND estado != 'CANCELED'
                            AND estado != 'NOT SHOW W/ CHARGE'
                            AND estado != 'NOT SHOW W/O CHARGE'
                            AND estado != 'NO SHOW'
                            AND type_tour = 'MULTI'";
                            $trips = Doo::db()->query($sql_spcida, array($fecha2));
                            $r_spcida = $trips->fetchAll();
                            $superespecial = $r_spcida[0]['superespecial'];
        
                
                            $totalCapacity = ($capacity + $capacity2 + $capacity3 + $capacity4 + $capacity5);
                            $totalseat = $totalCapacity - $cantTours12 - $superespecial - $paxs ;
        

                            // $disponible = $main->disponible($e['trip_no'], $fecha2);
                            
                            // echo '<pre>';
                            // print_r($totalseat);echo '<pre>';
                            // //print_r($disponible);
                            // echo '</pre>';

                            if ($totalseat >= 0) {
                                echo '<tr>';
                                echo '<td style="text-align: center; height: 28px;">
                              <div class="custom-control custom-radio">
                                <input type="radio" id="trip' . $e['trip_no'] . '" name="trip1" class="custom-control-input trip1" value="' . $e['trip_no'] . '" value="' . $e['trip_no'] . '">
                                <label class="custom-control-label" for="trip' . $e['trip_no'] . '"></label>
                              </div>
                                <input name="sarrival" type="hidden"  value="1"/>
                             </td>';

                            echo '<td style="text-align: center;font-weight: bold;color: white;background-color: #1f2b58;text-align: center"><b>' . $e ['trip_no'] . '</b></td>
                                    <td style="text-align: center; height: 28px;" nowrap="nowrap" ><b>' . date("g:i A", strtotime($e['trip_departure'])) . '</b></td>
                                    <td style=" text-align: center; height: 28px;" nowrap="nowrap" ><b>' . date("g:i A", strtotime($e ['trip_arrival'])) . '</b></td>
                                    <td style="display:none; text-align: center; height: 28px;" nowrap="nowrap" style="font-size:11px;" ><b>' . $e['equipment'] . '</b></td>
                                </tr>';
                            } else {
                            echo '<tr class="nodisponible"  >';
                            echo '<td style="text-align: center; height: 28px;">
                                        <div class="custom-control custom-radio">
                                            <input title="The Trip ' . $e['trip_no'] . ' does not have positions available" type="radio" id="trip' . $e['trip_no'] . '" name="trip1" class="custom-control-input trip1" value="' . $e['trip_no'] . '" value="' . $e['trip_no'] . '" disabled>
                                            <label class="custom-control-label" for="trip' . $e['trip_no'] . '"></label>
                                        </div>
                                <input name="sarrival" type="hidden"  value="1"/>
                                </td>';

                            echo '<td style="text-align: center;font-weight: bold;color: white;background-color: #1f2b58;text-align: center"><b>' . $e ['trip_no'] . '</b></td>
                                <td style="text-align: center; height: 28px; color:#C8C8C8" nowrap="nowrap" ><b>SOUL OUT</b></td>
                                <td style="display:none; text-align: center; height: 28px; color:#C8C8C8" nowrap="nowrap" ><b>SOUL OUT</b></td>
                                <td style="text-align: center; height: 28px; color:#C8C8C8" nowrap="nowrap" style="font-size:11px;" ><b>SOUL OUT</b></td>
                                </tr>';
                            }

                            $contador++;
                        }
                        echo '<button type="button" class="btn btn-primary btn-lg btn-block" style="border-radius: 0px;" id="backtoarea">BACK</button>';
                        
                        echo '<script>'; 
                        echo 'var url = "'.Doo::conf()->APP_URL.'"; ';
                        echo '</script>';
                        echo '<br>';
                        echo '<script>  var s = $("#indexSelect2").val();
                        if(s == 0){
                            var bus = true;
                        }else{
                            var bus = false;
                        }

                        if(s == 1){
                            var air = true;
                        }else{
                            var air = false;
                        }

                        if(s == 2){
                            var car = true;
                        }else{
                            var car = false;
                        }
                        $("#backtoarea").click(function(){
                            
                            $("#idareas1").val("");
                            $("#tripsselecteds1").val("");
                            
                        $("#idareas2").val("");
                        $("#tripsselecteds2").val("");
                            soltartrip(2);
                            soltartrip(1);
                            $("#conte").empty().html("<img src='.$url.'global/images/loading.gif   width=300px height=250 id=gif/>");
                            // $("#conte").empty().html("LOADING");
                            var l = url+"tours/question18/'.$id.'/'.$id2.'/'.$id3.'/'.$id4.'/'.$corte.'/'.$paxs.'/0" ;
                            // alert(l);
                            $("#conte").load(l);
                        })
                        </script>';


                    } else {
                        echo '<tr>
				 <td colspan="7" style="    text-align: center;">No tours available</td> 
			      </tr>';
                    }
                   
                    echo '
							</table>
							<b style="color:#F00" >' . $mensaje . '</b>
							</div>
							<script>
						
						var ddData2 = [
						{
							text: "Super Tours Bus",
							value: 2,
							selected: bus,
                                                        
							description: "BUS TO MIAMI?",
							imageSrc: "' . $url . 'global/img/BUS2.png"
						},
						{
							text: "Airport (Transfer Out - MCO)",
							value: 2,
							selected: air,
							description: "FROM ORLANDO INT`L AIRPORT (TRANSFER OUT - MCO)?",
							imageSrc: "' . $url . 'global/img/icon-plane.png"
						},
						{
							text: "By Car",
							value: 2,
							selected: car,
							// description: "BY CAR?",
							imageSrc: "' . $url . 'global/img/car.png"
						}
                        // {
                        //     text: "Super Tours Vip",
                        //     value: 2,
                        //     selected: false,
                        //     description: "Super Tours Vip?",
                        //     imageSrc: "' . $url . 'global/img/vip.jpg"
                        // }
					];		
					 $("#select2").ddslick("destroy");
                        var inc = 0;
					 $("#select2").ddslick({
						data: ddData2,
						imagePosition: "left",
						selectText: "Method of arrival to Orlando?",
						onSelected: function (data) {
							var id = data.selectedIndex;
                            $("#indexSelect2").val(id);
                            var ses = $("#indexSelect1").val();
                            // alert("inc "+inc );
                            if(inc == 0){
                             inc++;
                            }else{
                             //selectTrip2();
                            }
						}
					});
					$(".trip1").change(function() {
                        // alert();
                    // var id = 0;
                    
                     var trip_no = $(this).val();
                    //alert(trip_no);
                     insertreserva2(trip_no);
                     
                    $("#tripsselecteds1").val(trip_no);
                         var idarea = $("#idareas1").val();
                         //$("#area2").val(idarea);
                         var l = url+"tours/question19/"+trip_no+"/'.$id2.'/"+idarea;
                         console.log(l);
                         $("#tablares1 ").load(l);
                         
                         //$("#pickup2").load(l);
                    //  $("#conte").empty().css({"font-size":"medium", "font-weight":"bolder"}).html(" <ul class=list-group> <li class=list-group-item>Trip Selected: "+trip_no+" </li> <li class=list-group-item>Departure Date: '.$fecha2.'</li> <li class=list-group-item><button type=button class=btn >Back</button></li></ul> ");
                     /* $("#pickups").load("' . $url . 'tours/question14/" + id + "/" + trip_no,function(){
                        insertreserva2(trip_no);
                      });*/
                     
                      
                      
					});
					</script>';
                }
                if ($id == 0 && $id2 == 2 && isset($fecha)) {
                    //echo 'fecha dos => '.$fecha;
                    list($mes, $dia, $anio) = explode("-", $id4);
                    $fecha3 = $anio . '-' . $mes . '-' . $dia;
                    //echo 'fecha consulta => '.$fecha1; 

                    // echo $idarea;
                    $sql = 'SELECT DISTINCT
                            t1.trip_no,
                            t2.id,
                            t2.fecha_ini,
                            t4.nombre AS trip_from,
                            t5.nombre AS trip_to,
                            t2.trip_departure,
                            t2.trip_arrival,
                            t1.estado,
                            t2.type_rate 
                            FROM programacion t1
                            LEFT JOIN routes t2 ON (t1.trip_no = t2.trip_no)
                            LEFT JOIN trips  t3 ON (t1.trip_no = t3.trip_no)
                            LEFT JOIN areas  t4 ON (t2.trip_from = t4.id)
                            LEFT JOIN areas  t5 ON  (t2.trip_to  = t5.id)
                            WHERE t2.type_rate = "0" 
                            AND t2.trip_from = "1" 
                            AND t2.trip_to = "'.$idarea.'" 
                            AND t2.fecha_ini = "' . $fecha3 . '" 
                            AND t2.anno = "' . $anio . '" 
                            AND t2.trip_departure > "" 
                            AND t1.estado = "1" ORDER BY t2.trip_departure ASC';

                    $anno = explode("-", $fecha);
                    $rs = Doo::db()->query($sql, array(
                        $fecha, $anno[2]
                    ));

                    // print_r($sql);
                    $salida = $rs->fetchAll();

                    echo '<div align="center" >
                            <table id="tablares2" width="100%" border="1" class="table-light table-sm table-hover table2 table table-bordered table-striped">
                                <thead>
                                    <tr style="text-align: center; height: 37px;">
                                        <th width="10%" style="text-align: center;"><b>Select</b></th>
                                        <th width="10%" style="text-align: center;"><b>Trip</b></th>
                                        <th width="15%" style="text-align: center;"><b>Departure</b></th>
                                        <th  width="15%" style="text-align: center;"><b>Arrive</b></th>
                                        <th style="display:none" width="33%" style="text-align: center;"><b>Equipment</b></th>
                                    </tr>
                                </thead>';
                    if (count($salida) > 0 && $tiempo) {
                        $contador = 0;
                        Doo::loadController('MainController');
                        $main = new MainController();
                        list ($mes, $dia, $anyo) = explode("-", $id3);
                        $fecha2 = $anyo . "-" . $mes . "-" . $dia;
                        foreach ($salida as $e) {
                            $disponible = $main->disponible($e['trip_no'], $fecha2);

                            $sqlcap_301 = "SELECT DISTINCT seats_remain,capacity, capacity2, capacity3, capacity4, capacity5 FROM routes WHERE fecha_ini = '".$fecha3."' AND fecha_fin = '".$fecha3."'  AND trip_no = ".$e['trip_no']." ";
                            $rscap_301 = Doo::db()->query($sqlcap_301);
                            $capac_301 = $rscap_301->fetchAll();
                            foreach ($capac_301 as $c) {
                                $capacity = $c['capacity'];
                                $capacity2 = $c['capacity2'];
                                $capacity3 = $c['capacity3'];
                                $capacity4 = $c['capacity4'];
                                $capacity5 = $c['capacity5'];
                                // $seat = $capacity + $capacity2 +$capacity3 +$capacity4 +$capacity5;
                            }
                            $sql2 = "SELECT
                            SUM(cantidad) AS cantTours
                            FROM reservas_trip_puestos WHERE fecha_trip = '".$fecha3."'
                            AND trip_to = ".$e['trip_no']."
                            AND (tipo = '1' OR tipo = '2')
                            AND ( estado = 'USING' OR estado = 'RENEWED' )  ";
                            $rs2 = Doo::db()->query($sql2, array());
                            $puestos2 = $rs2->fetchAll(PDO::FETCH_ASSOC);
                            $cantTours12 =  $puestos2[0]['cantTours'];
                
                            $sql_spcida = "SELECT
                            (sum(pax) + sum(pax2)) AS superespecial
                            FROM reservas  WHERE trip_no = ".$e['trip_no']." AND fecha_salida = '".$fecha3."'
                            AND estado != 'QUOTE'
                            AND estado != 'CANCELED'
                            AND estado != 'NOT SHOW W/ CHARGE'
                            AND estado != 'NOT SHOW W/O CHARGE'
                            AND estado != 'NO SHOW'
                            AND type_tour = 'MULTI'";
                            $trips = Doo::db()->query($sql_spcida, array());
                            $r_spcida = $trips->fetchAll();
                            $superespecial = $r_spcida[0]['superespecial'];
        
                
                            $totalCapacity2 = ($capacity + $capacity2 + $capacity3 + $capacity4 + $capacity5);
                            $totalseat2 = $totalCapacity2 - $cantTours12 - $superespecial - $paxs ;
        
                            
                            // echo '<pre>';
                            // // print_r($sql);echo '<pre>';
                            // print_r($totalseat2);
                            // echo '</pre>';
                            if ($totalseat2 >= 0) {
                                echo '<tr >';
                                echo '<td style="text-align: center; height: 28px;">
                                <div class="custom-control custom-radio">
                                  <input type="radio" id="trip' . $e['trip_no'] . '" name="trip2" class="custom-control-input trip2" value="' . $e['trip_no'] . '" value="' . $e['trip_no'] . '">
                                  <label class="custom-control-label" for="trip' . $e['trip_no'] . '" ></label>
                                </div>
                                  <input name="sdeparture" type="hidden"  value="1"/>
                               </td>';
                               echo '<td style="text-align: center; height: 28px; font-weight: bold;color: white;background-color: #008445;text-align: center"><b>' . $e['trip_no'] . '</b></td>
                               <td style="text-align: center; height: 28px;" nowrap="nowrap"  ><b>' . date("g:i A", strtotime($e['trip_departure'])) . '</b></td>
                               <td style=" text-align: center; height: 28px;" nowrap="nowrap"  ><b>' . date("g:i A", strtotime($e ['trip_arrival'])) . '</b></td>
                               <td style="display:none; text-align: center; height: 28px;" nowrap="nowrap" style="font-size:11px;"><b>' . $e ['equipment'] . '</b></td>
                                </tr>';

                            } else {
                                
                                echo '<tr >';
                                echo '<td style="text-align: center; height: 28px;">
                                <div class="custom-control custom-radio">
                                  <input type="radio" id="trip' . $e['trip_no'] . '" name="trip2" class="custom-control-input trip2" value="' . $e['trip_no'] . '" value="' . $e['trip_no'] . '" disabled>
                                  <label class="custom-control-label" for="trip' . $e['trip_no'] . '"></label>
                                </div>
                                  <input name="sdeparture" type="hidden"  value="1"/>
                               </td>';


                               echo '<td style="text-align: center; height: 28px; font-weight: bold;color: white;background-color: #dc3545;text-align: center"><b>' . $e['trip_no'] . '</b></td>
                               <td style="text-align: center; height: 28px;" nowrap="nowrap"  ><b>SOUL OUT</b></td>
                               <td style="display:none; text-align: center; height: 28px;" nowrap="nowrap"  ><b>SOUL OUT</b></td>
                               <td style="text-align: center; height: 28px;" nowrap="nowrap" style="font-size:11px;"><b>SOUL OUT</b></td> </tr>';

                            }

                            $contador++;
                        }
                        echo '<button type="button" class="btn btn-primary btn-lg btn-block" style="border-radius: 0px;" id="backtoarea2">BACK</button>';
                        echo '<script>';
                        echo 'var url = "'.Doo::conf()->APP_URL.'"; ';
                        echo '</script>';
                        echo '<br>';
                        echo '<script>    
                        $("#backtoarea2").click(function(){
                            soltartrip(1);
                            
                    $("#idareas2").val("");
                    $("#tripsselecteds2").val("");
                            $("#conte2").empty().html("<img src='.$url.'global/images/loading.gif   width=300px height=250 id=gif/>");
                            // $("#conte2").empty().html("LOADING");
                            var l = url+"tours/question18/'.$id.'/'.$id2.'/'.$id3.'/'.$id4.'/'.$corte.'/'.$paxs.'/0" ;
                            //alert(l);
                            $("#conte2").load(l);
                        })
                        </script>';

                        // echo '<script>    
                        // $("#trip100,#trip200,#trip300").click(function(){
                        //     insertreserva();
                        // })</script>';


                    } else {
                        echo '<tr>
                                    <td colspan="7" style="    text-align: center;">No tours available</td> 
			        </tr>';
                    }
                    echo '</table>
                          <b style="color:#F00" >' . $mensaje . '</b>
                          </div>';
                    echo '<script>
                    $(".trip2").change(function() {
                    // var id = 1;
                    
                    var trip_no2 = $(this).val();
                    insertreserva(trip_no2);

                    $("#tripsselecteds2").val(trip_no2);
                    var idarea2 = $("#idareas2").val();
                    $("#area2").val(idarea2);
                    var l = url+"tours/question19/"+trip_no2+"/'.$id2.'/"+idarea2;
                    console.log(l);
                    $("#tablares2 ").load(l);
                    //$("#pickup2").load(l);

					// $(".trip2").change(function() {
                        // var id = 0;
                        //  $("#conte2").empty().css({"font-size":"medium", "font-weight":"bolder"}).html(" <ul class=list-group> <li class=list-group-item>Trip Selected: "+trip_no2+" </li> <li class=list-group-item>Departure Date: '.$fecha2.'</li> <li class=list-group-item><button type=button class=btn >Back</button></li></ul> ");

                         //  $("#pickups2").load("' . $url . 'tours/question14/" + id + "/" + trip_no2,function(){
                            // insertreserva(trip_no2);
                            //   });
                        // });
                    });
                    </script>';
                }
                //condiciones para ajax
                // echo $id; echo '<pre>';
                // echo $id2;echo '<pre>';
                // echo $this->params["corte"];echo '<pre>';
                // die;
                if ($id == 1 && $id2 == 1) {
                    echo '<table width="381" border="1">
					<tr>
                                            <td>&nbsp;</td>
                                            <td colspan="4">&nbsp;</td>
                                            <td colspan="2">&nbsp;</td>
					</tr>
					<tr>
                                            <td>&nbsp;</td>
                                            <td colspan="4" >&iquest;At what time you wish your private service leaves Miami?</td>
                                            <td width="29"><label>
                                            <input name="hora1" type="text" id="hora1" value="" size="6"  class="required"/>
                                            </label></td>						
					</tr>
					<tr>
                                            <td height="16" colspan="5"><div align="center"></div></td>
                                            <td colspan="2" rowspan="7">&nbsp;</td>
					</tr>
					  <tr>
						<td height="7">&nbsp;</td>
						<td colspan="4"><div align="center">&iquest;From where in Miami?</div></td>
					  </tr>
					  <tr>
						<td height="7">&nbsp;</td>
						<td colspan="4"><div align="center"></div></td>
					  </tr>
					  <tr>
						<td width="12" height="7">&nbsp;</td>
						<td width="53">&nbsp;</td>
						<td width="58">City:</td>
						<td width="113"><input name="city" type="text" id="city" size="25" class="required" /></td>						
					  </tr>
					  <tr>
						<td height="2">&nbsp;</td>
						<td height="2">&nbsp;</td>
						<td height="2">Address:</td>
						<td height="2"><input name="address" type="text" id="address" size="25" class="required" /></td>
					  </tr>
					  <tr>
						<td height="3">&nbsp;</td>
						<td height="3">&nbsp;</td>
						<td height="3">Zip Code:</td>
						<td height="3"><input name="zipcode" type="text" id="zipcode" size="25" class="required"/></td>
						
					  </tr>
					  <tr>
						<td height="7">&nbsp;</td>
						<td height="7">&nbsp;</td>
						<td height="7">Phone #:</td>
						<td height="7"><input name="phone" type="text" id="phone" size="25" class="required" /><input name="sarrival" type="hidden"  value="2"/></td>
						
					  </tr>
					</table>
						   
                                        <script>$("#hora1").timeEntry().change(function(){ 
                                                var log = $("#log"); 
                                                log.val(log.val() + ($("#hora1").val() || "blank") + "\n"); 
                                            });
					$(function(){
					$(".someClass").tipTip({maxWidth: "auto", edgeOffset: 10});
					});
					
					</script>
					
						<script>
						
						var ddData2 = [
						{
							text: "Super Tours Bus",
							value: 2,
							selected: false,
							description: "BY SUPER TOURS BUS ?",
							imageSrc: "' . $url . 'global/img/BUS2.png"
						},
						{
							text: "Airport (Transfer Out - MCO)",
							value: 2,
							selected: false,
							description: "FROM ORLANDO INT`L AIRPORT (TRANSFER OUT - MCO)?",
							imageSrc: "' . $url . 'global/img/icon-plane.png"
						},
						{
							text: "By Car",
							value: 2,
							selected: false,
							// description: "BY CAR?",
							imageSrc: "' . $url . 'global/img/car.png"
						}
                        // {
                        //     text: "Super Tours Vip",
                        //     value: 2,
                        //     selected: false,
                        //     description: "Super Tours Vip?",
                        //     imageSrc: "' . $url . 'global/img/vip.jpg"
                        // }
					];		
					$("#select2").ddslick("destroy");
					
					$("#select2").ddslick({
						data: ddData2,
						width: 300,
						imagePosition: "left",
						selectText: "Method of arrival to Orlando?",
						onSelected: function (data) {
							var id = data.selectedIndex;
							$("#indexSelect2").val(id);
							selectTrip2();	
						}
					    });
					</script>
						';
                }
                if ($id == 1 && $id2 == 2) {

                    echo '<table width="381" border="0">
					  
					<tr>
                                            <td height="24">&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
					</tr>
					<tr>
                                            <td height="24">&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td width="141"><label></label></td>
					</tr>
					  
					<tr>
                                            <td height="7" rowspan="2">&nbsp;</td>
                                            <td><div align="center">¿At what time you wish your private service to Miami?</div></td>
                                            <td rowspan="2"><input name="hora2" type="text" id="hora2" value="" size="6"  class="required"/><input name="sdeparture" type="hidden"  value="2"/>
                                            </td>
					</tr>
					<tr>
                                            <td><div align="center">To where in Miami?</div></td>
					</tr>
					  
					  <tr>
						<td width="45" height="7" rowspan="2">&nbsp;</td>
						<td width="250"><div align="center"></div></td>
						<td rowspan="2">&nbsp;</td>
					  </tr>
					  <tr>
						<td> <div align="center"></div></td>
					  </tr>
					  <tr>
						<td height="2">&nbsp;</td>
						<td height="2">:</td>
						<td>&nbsp;</td>
					  </tr>
					  <tr>
						<td height="3">&nbsp;</td>
						<td height="3">&nbsp;</td>
						<td>&nbsp;</td>
					  </tr>
					  <tr>
						<td height="100">&nbsp;</td>
						<td height="100">&nbsp;</td>
						<td>&nbsp;</td>
					  </tr>
					</table>
					
					
					<script> 
						$("#hora2").timeEntry().change(function() {
    var log = $("#log"); 
    log.val(log.val() + ($("#hora2").val() || "blank") + "\n"); 
});
					
					$(function(){
					$(".someClass").tipTip({maxWidth: "auto", edgeOffset: 10});
					});
					
					</script>
					';
                }
                if ($id == 2 && $id2 == 1) {
                    echo '<table width="381" border="0" style="height: 120px;color: #fff;">
					  <tr>
						<td style="width: 86px;text-align: center; color:#000;">
                                                    <b>Airline :</b>
                                                </td>
                                                <td>
                                                    <input type="text" name="airlinearrival" id="airlinearrival"  class="form-control1 form-control inputair" style="border-radius: 0px;background: #fff;" required/>
                                                </td>
					  </tr>
					  <tr>
						<td style="width: 86px;text-align: center; color:#000;">
                                                    <b>Flight #:</b>
                                                </td>
                        <td>
                        
                                                    <input type="text" name="flightarrival" id="flightarrival"  class="form-control1 form-control col-md-6 inputair" style="border-radius: 0px;background: #fff;" required/>
						</td>
					  </tr>

                                          <tr>
						<td style="width: 86px;text-align: center; color:#000;">
                                                    <b>Arrival Time:</b>
                                                </td>
						<td>
                                                   <!-- <input name="hora1" type="time" id="hora1" size="6"  class="form-control1 form-control col-md-4 inputair" style="border-radius: 0px;background: #fff;"/> -->

                                                <div class="clearfix">
                                                   <div class="input-group clockpicker-with-callbacks col-md-4 inputair" data-placement="top" data-align="top" data-autoclose="true">
                                                       <input name="hora1" type="text" class="form-control " value="12:00" >
                                                   </div>
                                               </div>

                                                    <input name="sarrival" type="hidden"  value="3"/>
						</td>
					  </tr>
                                          
					</table>
					
					
                    <script> 
                    
                    var input = $(".clockpicker-with-callbacks").clockpicker({
					donetext: "Done",
						init: function() { 
							console.log("colorpicker initiated");
						},
						beforeShow: function() {
							console.log("before show");
						},
						afterShow: function() {
							console.log("after show");
						},
						beforeHide: function() {
							console.log("before hide");
						},
						afterHide: function() {
							console.log("after hide");
						},
						beforeHourSelect: function() {
							console.log("before hour selected");
						},
						afterHourSelect: function() {
							console.log("after hour selected");
						},
						beforeDone: function() {
							console.log("before done");
						},
						afterDone: function() {
							console.log("after done");
						}
				});

				$("#check-minutes").click(function(e){
					e.stopPropagation();
					input.clockpicker("show")
							.clockpicker("toggleView", "minutes");
                });


                    

						$("#hora1").timeEntry().change(function() { 
                        var log = $("#log"); 
                        log.val(log.val() + ($("#hora1").val() || "blank") + "\n"); 
                    });
					$(function(){
					$(".someClass").tipTip({maxWidth: "auto", edgeOffset: 10});
					});
					var ddData2 = [
						{
							text: "Super Tours Bus",
							value: 2,
							selected: false,
							description: "BUS TO MIAMI?",
							imageSrc: "' . $url . 'global/img/BUS2.png"
						},
						{
							text: "Airport (Transfer Out - MCO)",
							value: 2,
							selected: true,
							description: "FROM ORLANDO INT`L AIRPORT (TRANSFER OUT - MCO)?",
							imageSrc: "' . $url . 'global/img/icon-plane.png"
						},
						{
							text: "BY CAR",
							value: 2,
							selected: false,
							// description: "BY CAR?",
							imageSrc: "' . $url . 'global/img/car.png"
						}
                        // {
                        //     text: "Super Tours Vip",
                        //     value: 2,
                        //     selected: false,
                        //     description: "Super Tours Vip?",
                        //     imageSrc: "' . $url . 'global/img/vip.jpg"
                        // }
					];		
					 $("#select2").ddslick("destroy");
					
					
					 $("#select2").ddslick({
						data: ddData2,
						width: 300,
						imagePosition: "left",
						selectText: "Method of arrival to Orlando?",
						onSelected: function (data) {
							var id = data.selectedIndex;
							$("#indexSelect2").val(id);
							selectTrip2();	
						}
					});
					</script>';
                }
                if ($id == 2 && $id2 == 2) {

                    echo '<table width="381" style="height: 120px; color: #000;">
					  <tr>
						<td style="width: 86px;text-align: center; color:#000;">
                                                    <b>Airline:</b>
                                                </td>
                                                <td>
                                                    <input type="text" name="airlinedeparture" id="airlinedeparture" style="border-radius: 0px;background: #fff;"  class="form-control1 form-control inputair" required/>
						</td>
					  </tr>
					  <tr>
						<td style="text-align: center; color:#000;">
                                                   <b>Flight #:</b>
                                                </td>
						<td>
                                                    <input type="text" name="flightdeparture" id="flightdeparture" style="border-radius: 0px;background: #fff;" class="form-control1 form-control col-md-6 inputair" required/>
						</td>
					  </tr>

                                           <tr>
						<td style="text-align: center;width: 100px; color:#000;">
                                                    <b>Departure Time:</b>
                                                </td>
						<td>
                                                    <!-- <input name="hora2" type="text" id="hora2" style="border-radius: 0px;background: #fff;" size="6"  class="form-control1 form-control"/>-->

                                                <div class="clearfix">
                                                   <div class="input-group clockpicker-with-callbacks col-md-4 inputair" data-placement="top" data-align="top" data-autoclose="true">
                                                       <input name="hora2" type="text" class="form-control inputair" value="12:00" >
                                                   </div>
                                               </div>
                                                    <input name="sdeparture" type="hidden"  value="3"/>
						 </td>
					  </tr>
					  
					</table>
						<script> 
                        var input = $(".clockpicker-with-callbacks").clockpicker({
                            donetext: "Done",
                                init: function() { 
                                    console.log("colorpicker initiated");
                                },
                                beforeShow: function() {
                                    console.log("before show");
                                },
                                afterShow: function() {
                                    console.log("after show");
                                },
                                beforeHide: function() {
                                    console.log("before hide");
                                },
                                afterHide: function() {
                                    console.log("after hide");
                                },
                                beforeHourSelect: function() {
                                    console.log("before hour selected");
                                },
                                afterHourSelect: function() {
                                    console.log("after hour selected");
                                },
                                beforeDone: function() {
                                    console.log("before done");
                                },
                                afterDone: function() {
                                    console.log("after done");
                                }
                        });
        
                        $("#check-minutes").click(function(e){
                            e.stopPropagation();
                            input.clockpicker("show")
                                    .clockpicker("toggleView", "minutes");
                        });

						$("#hora2").timeEntry().change(function() { 
    var log = $("#log"); 
    log.val(log.val() + ($("#hora2").val() || "blank") + "\n"); 
});
					$(function(){
					$(".someClass").tipTip({maxWidth: "auto", edgeOffset: 10});
					});
					
					
					</script>';
                }
                if ($id == 3 && $id2 == 1) {
                    echo '<table width="381" border="0" style="color: #000;">
					  <tr>
						<td colspan="3">&nbsp;</td>
						<td width="36"><label></label></td>
					  </tr>
					  <tr>
						<td height="16" colspan="3"><div align="center"></div></td>
						<td rowspan="7">&nbsp;</td>
					  </tr>
					  <tr>
						<td width="77" height="7">&nbsp;</td>
						<td width="211"><div align="left"><b>Estimated arrival time to Orlando:</b></div></td>
						<td><label>
                        <!--  <input name="hora1" type="text" id="hora1" size="6" style="border-radius: 0px;background: #fff;" class="form-control1"/> -->
                          
                          <input name="sarrival" type="hidden"  value="4"/>

                          <div class="clearfix">
                          <div class="input-group clockpicker-with-callbacks col-md-12" data-placement="top" data-align="top" data-autoclose="true">
                              <input name="hora1" type="text" class="form-control inputair" value="12:00" >
                          </div>
                      </div>
						 </label></td>
					  </tr>
					  <tr>
						<td height="7" colspan="2">&nbsp;</td>
						<td>&nbsp;</td>
					  </tr>
					  <tr>
						<td height="7" colspan="2">&nbsp;</td>
						<td width="128">&nbsp;</td>
					  </tr>
					  <tr>
						<td height="2" colspan="2">&nbsp;</td>
						<td height="2">&nbsp;</td>
					  </tr>
					  <tr>
						<td height="3" colspan="2">&nbsp;</td>
						<td height="3">&nbsp;</td>
					  </tr>
					  <tr>
						<td height="7" colspan="2">&nbsp;</td>
						<td height="7">&nbsp;</td>
					  </tr>
					</table>
						
                        <script> 
                        var input = $(".clockpicker-with-callbacks").clockpicker({
                            donetext: "Done",
                                init: function() { 
                                    console.log("colorpicker initiated");
                                },
                                beforeShow: function() {
                                    console.log("before show");
                                },
                                afterShow: function() {
                                    console.log("after show");
                                },
                                beforeHide: function() {
                                    console.log("before hide");
                                },
                                afterHide: function() {
                                    console.log("after hide");
                                },
                                beforeHourSelect: function() {
                                    console.log("before hour selected");
                                },
                                afterHourSelect: function() {
                                    console.log("after hour selected");
                                },
                                beforeDone: function() {
                                    console.log("before done");
                                },
                                afterDone: function() {
                                    console.log("after done");
                                }
                        });

						$("#hora1").timeEntry().change(function() { 
    var log = $("#log"); 
    log.val(log.val() + ($("#hora1").val() || "blank") + "\n"); 
});
					$(function(){
					$(".someClass").tipTip({maxWidth: "auto", edgeOffset: 10});
					});
					
					</script>
					
						<script>
						
						var ddData2 = [
						{
							text: "Super Tours Bus",
							value: 2,
							selected: false,
							description: "BUS TO MIAMI?",
							imageSrc: "' . $url . 'global/img/BUS2.png"
						},
						{
							text: "Airport (Transfer Out - MCO)",
							value: 2,
							selected: false,
							description: "FROM ORLANDO INT`L AIRPORT (TRANSFER OUT - MCO)?",
							imageSrc: "' . $url . 'global/img/icon-plane.png"
						},
						{
							text: "By Car",
							value: 2,
							selected: true,
							// description: "BY CAR?",
							imageSrc: "' . $url . 'global/img/car.png"
						}
                        // {
                        //     text: "Super Tours Vip",
                        //     value: 2,
                        //     selected: false,
                        //     description: "Super Tours Vip?",
                        //     imageSrc: "' . $url . 'global/img/vip.jpg"
                        // }
					];		
					 $("#select2").ddslick("destroy");
					
					 $("#select2").ddslick({
						data: ddData2,
						width: 300,
						imagePosition: "left",
						selectText: "Method of arrival to Orlando?",
						onSelected: function (data) {
							var id = data.selectedIndex;
							$("#indexSelect2").val(id);
							selectTrip2();	
						}
					});
						</script>
							 ';
                }
                if ($id == 3 && $id2 == 2) {
                    echo '
						   <table width="381" border="0" style="color: #000;">
					  <tr>
						<td colspan="3">&nbsp;</td>
						<td width="36"><label></label></td>
					  </tr>
					  <tr>
						<td height="16" colspan="3"><div align="center"></div></td>
						<td rowspan="6">&nbsp;</td>
					  </tr>
					  <tr>
						<td width="65" height="7">&nbsp;</td>
						<td width="308"><div align="left">Remember the Hotel Check Out is at 11:30<input name="sdeparture" type="hidden"  value="4"/></div></td>
						<td><label></label></td>
					  </tr>					  
					  <tr>
						<td height="7" colspan="2">&nbsp;</td>
						<td width="43">&nbsp;</td>
					  </tr>
					  <tr>
						<td height="2" colspan="2">&nbsp;</td>
						<td height="2">&nbsp;</td>
					  </tr>
					  <tr>
						<td height="3" colspan="2">&nbsp;</td>
						<td height="3">&nbsp;</td>
					  </tr>
					  <tr>
						<td height="7" colspan="2">&nbsp;</td>
						<td height="7">&nbsp;</td>
					  </tr>
					</table>
					  
							  ';
                }

                if ($id == 4 && $id2 == 1) {
                    echo '<table width="381" border="0" style="height: 120px;color: #fff;">
					  <tr>
						<td style="width: 100%;text-align: center; color:#000;">
                        <b>¿At what time you wish your private service leaves Miami?: </b>
                        </td>
                        <td>
                        <div class="clearfix">
                        <div class="input-group clockpicker-with-callbacks col-md-5 inputair" data-placement="top" data-align="top" data-autoclose="true">
                            <input name="hora1" type="text" class="form-control " value="12:00" >
                        </div>
                    </div>

                         <input name="sarrival" type="hidden"  value="2"/>
                         
                        </td>
                      </tr>
					  <tr>
                      <b>¿From where in Miami? </b>
						<td style="width: 86px;text-align: center; color:#000;">
                           <b>City: </b>
                        </td>
                        
                        <td>
                            <input type="text" name="cityvip" id="cityvip"  class="form-control1 form-control col-md-12 inputair" style="border-radius: 0px;background: #fff;"/>
						</td>
					  </tr>
					  <tr>
						<td style="width: 86px;text-align: center; color:#000;">
                           <b>Address: </b>
                        </td>
                        <td>
                            <input type="text" name="addressvip" id="addressvip"  class="form-control1 form-control col-md-12 inputair" style="border-radius: 0px;background: #fff;"/>
						</td>
					  </tr>
					  <tr>
						<td style="width: 86px;text-align: center; color:#000;">
                           <b>Zip Code:</b>
                        </td>
                        <td>
                            <input type="text" name="zipvip" id="zipvip"  class="form-control1 form-control col-md-12 inputair" style="border-radius: 0px;background: #fff;"/>
						</td>
					  </tr>
					  <tr>
						<td style="width: 86px;text-align: center; color:#000;">
                           <b>Phone  #:</b>
                        </td>
                        <td>
                            <input type="text" name="phonevip" id="phonevip"  class="form-control1 form-control col-md-12 inputair" style="border-radius: 0px;background: #fff;"/>
						</td>
					  </tr>
                                          
					</table>
					
					
                    <script> 
                    
                    var input = $(".clockpicker-with-callbacks").clockpicker({
					donetext: "Done",
						init: function() { 
							console.log("colorpicker initiated");
						},
						beforeShow: function() {
							console.log("before show");
						},
						afterShow: function() {
							console.log("after show");
						},
						beforeHide: function() {
							console.log("before hide");
						},
						afterHide: function() {
							console.log("after hide");
						},
						beforeHourSelect: function() {
							console.log("before hour selected");
						},
						afterHourSelect: function() {
							console.log("after hour selected");
						},
						beforeDone: function() {
							console.log("before done");
						},
						afterDone: function() {
							console.log("after done");
						}
				});

				$("#check-minutes").click(function(e){
					e.stopPropagation();
					input.clockpicker("show")
							.clockpicker("toggleView", "minutes");
                });

                $("#cityvip").keyup(function(){
                var city = $("#cityvip").val();
                    $("#cityvip2").val(city);
                })
                $("#addressvip").keyup(function(){
                var address = $("#addressvip").val();
                    $("#addressvip2").val(address);
                })
                $("#zipvip").keyup(function(){
                var zip = $("#zipvip").val();
                    $("#zipvip2").val(zip);
                })
                $("#phonevip").keyup(function(){
                var phone = $("#phonevip").val();

                    $("#phonevip2").val(phone);
                })
                    

						$("#hora1").timeEntry().change(function() { 
                        var log = $("#log"); 
                        log.val(log.val() + ($("#hora1").val() || "blank") + "\n"); 
                    });
					$(function(){
					$(".someClass").tipTip({maxWidth: "auto", edgeOffset: 10});
					});
					var ddData2 = [
						{
							text: "Super Tours Bus",
							value: 2,
							selected: false,
							description: "BUS TO MIAMI?",
							imageSrc: "' . $url . 'global/img/BUS2.png"
						},
						{
							text: "Airport (Transfer Out - MCO)",
							value: 2,
							selected: false,
							description: "FROM ORLANDO INT`L AIRPORT (TRANSFER OUT - MCO)?",
							imageSrc: "' . $url . 'global/img/icon-plane.png"
						},
						{
							text: "BY CAR",
							value: 2,
							selected: false,
							// description: "BY CAR?",
							imageSrc: "' . $url . 'global/img/car.png"
						}
                        // {
                        //     text: "Super Tours Vip",
                        //     value: 2,
                        //     selected: true,
                        //     description: "Super Tours Vip?",
                        //     imageSrc: "' . $url . 'global/img/vip.jpg"
                        // }
					];		
					 $("#select2").ddslick("destroy");
					
					
					 $("#select2").ddslick({
						data: ddData2,
						width: 300,
						imagePosition: "left",
						selectText: "Method of arrival to Orlando?",
						onSelected: function (data) {
							var id = data.selectedIndex;
							$("#indexSelect2").val(id);
							selectTrip2();	
						}
					});
					</script>';
                }
                if ($id == 4 && $id2 == 2) {

                    echo '<table width="381" border="0" style="height: 120px;color: #fff;">
					  <tr>
						<td style="width: 100%;text-align: center; color:#000;">
                        <b>¿At what time you wish your private service leaves Miami?: </b>
                        </td>
                        <td>
                        <div class="clearfix">
                        <div class="input-group clockpicker-with-callbacks col-md-5 inputair" data-placement="top" data-align="top" data-autoclose="true">
                            <input id="hora2" name="hora2" type="text" class="form-control " value="12:00" >
                        </div>
                    </div>
                         <input name="sdeparture" type="hidden"  value="2"/>
                        </td>
                      </tr>
					  <tr>
                      <b>¿From where in Miami? </b>
						<td style="width: 86px;text-align: center; color:#000;">
                           <b>City: </b>
                        </td>
                        
                        <td>
                            <input type="text" name="cityvip" id="cityvip2"  class="form-control1 form-control col-md-12 inputair" style="border-radius: 0px;background: #fff;"/>
						</td>
					  </tr>
					  <tr>
						<td style="width: 86px;text-align: center; color:#000;">
                           <b>Address: </b>
                        </td>
                        <td>
                            <input type="text" name="addressvip" id="addressvip2"  class="form-control1 form-control col-md-12 inputair" style="border-radius: 0px;background: #fff;"/>
						</td>
					  </tr>
					  <tr>
						<td style="width: 86px;text-align: center; color:#000;">
                           <b>Zip Code:</b>
                        </td>
                        <td>
                            <input type="text" name="zipvip" id="zipvip2"  class="form-control1 form-control col-md-12 inputair" style="border-radius: 0px;background: #fff;"/>
						</td>
					  </tr>
					  <tr>
						<td style="width: 86px;text-align: center; color:#000;">
                           <b>Phone  #:</b>
                        </td>
                        <td>
                            <input type="text" name="phonevip" id="phonevip2"  class="form-control1 form-control col-md-12 inputair" style="border-radius: 0px;background: #fff;"/>
						</td>
					  </tr>
					</table>
					
					
                    <script> 
                    var input = $(".clockpicker-with-callbacks").clockpicker({
					donetext: "Done",
						init: function() { 
							console.log("colorpicker initiated");
						},
						beforeShow: function() {
							console.log("before show");
						},
						afterShow: function() {
							console.log("after show");
						},
						beforeHide: function() {
							console.log("before hide");
						},
						afterHide: function() {
							console.log("after hide");
						},
						beforeHourSelect: function() {
							console.log("before hour selected");
						},
						afterHourSelect: function() {
							console.log("after hour selected");
						},
						beforeDone: function() {
							console.log("before done");
						},
						afterDone: function() {
							console.log("after done");
						}
				});

					</script>';
                  }
            }

            if ($this->params ["corte"] == 1) {
                if ($id == 0 && $id2 == 1 && isset($fecha)) {
                    echo '<table width="381" border="0">
					  <tr>
						<td>&nbsp;</td>
						<td colspan="4">&nbsp;</td>
						<td colspan="2">&nbsp;</td>
					  </tr>
					  <tr >
						<td>&nbsp;</td>
						<td colspan="4" >&iquest;At what time you wish your private service leaves Miami?</td>
						<td width="29"><label>
							<input name="hora1" type="text" id="hora1" value="" size="6" class="required"/>
						</label></td>
						<td width="29"></td>
					  </tr>
					  <tr>
						<td height="16" colspan="5"><div align="center"></div></td>
						<td colspan="2" rowspan="7">&nbsp;</td>
					  </tr>
					  <tr>
						<td height="7">&nbsp;</td>
						<td colspan="4"><div align="center">&iquest;From where in Miami?</div></td>
					  </tr>
					  <tr>
						<td height="7">&nbsp;</td>
						<td colspan="4"><div align="center"></div></td>
					  </tr>
					  <tr>
						<td width="12" height="7">&nbsp;</td>
						<td width="53">&nbsp;</td>
						<td width="58">City:</td>
						<td width="113"><input name="city" type="text" id="city" size="25" class="required"  /></td>
						<td width="114"></td>
					  </tr>
					  <tr>
						<td height="2">&nbsp;</td>
						<td height="2">&nbsp;</td>
						<td height="2">Address:</td>
						<td height="2"><input name="address" type="text" id="address" size="25" class="required" /></td>
						<td height="2"></td>
					  </tr>
					  <tr>
						<td height="3">&nbsp;</td>
						<td height="3">&nbsp;</td>
						<td height="3">Zip Code:</td>
						<td height="3"><input name="zipcode" type="text" id="zipcode" size="25" class="required"/></td>
						<td height="3"></td>
					  </tr>
					  <tr>
						<td height="7">&nbsp;</td>
						<td height="7">&nbsp;</td>
						<td height="7">Phone #:</td>
						<td height="7"><input name="phone" type="text" id="phone" size="25" class="required" /><input name="sarrival" type="hidden"  value="2"/></td>
						<td height="7"></td>
					  </tr>
					</table>
						   
						<script> 	
						$("#hora1").timeEntry().change(function() { 
								var log = $("#log"); 
								log.val(log.val() + ($("#hora1").val() || "blank") + "\n"); 
								
								$("#hora2").val($("#hora1").val());
							});
						$("#city").keyup(function(){ 
							$("#city2").val($("#city").val());
					 	});
						$("#address").keyup(function(){ 
							$("#address2").val($("#address").val());
					 	});
						$("#zipcode").keyup(function(){ 
							$("#zipcode2").val($("#zipcode").val());
					 	});
						$("#phone").keyup(function(){ 
							$("#phone2").val($("#phone").val());
					 	});
						
					$(function(){
					$(".someClass").tipTip({maxWidth: "auto", edgeOffset: 10});
					});
					
					</script>
					
						<script>
						
						var ddData2 = [
						
						{
							text: "Super Tours Vip",
							value: 2,
							selected: true,
							description: "BY SUPER TOURS VIP PRIVATE TO MIAMI?",
							imageSrc: "' . $url . 'global/img/vip.png"
						},
						{
							text: "Airport (Transfer Out - MCO)",
							value: 2,
							selected: false,
							description: "FROM ORLANDO INT`L AIRPORT (TRANSFER OUT - MCO)?",
							imageSrc: "' . $url . 'global/img/icon-plane.png"
						}
					];		
					 $("#select2").ddslick("destroy");
					
					 $("#select2").ddslick({
						data: ddData2,
						width: 300,
						imagePosition: "left",
						selectText: "Method of arrival to Orlando?",
						onSelected: function (data) {
							var id = data.selectedIndex;
							$("#indexSelect2").val(id);
							selectTrip2();	
						}
					    });
						</script>
						';
                }
                if ($id == 0 && $id2 == 2 && isset($fecha)) {
                    echo '<table width="381" border="0">
					  <tr>
						<td>&nbsp;</td>
						<td colspan="4">&nbsp;</td>
						<td colspan="2">&nbsp;</td>
					  </tr>
					  <tr>
						<td>&nbsp;</td>
						<td colspan="4" >¿At what time you wish your private service to Miami?</td>
						<td width="29"><label>
							<input name="hora2" type="text" id="hora2" value="" size="6"  class="required"/><input name="sdeparture" type="hidden"  value="2"/>
						</label></td>
						<td width="29"></td>
					  </tr>
					  <tr>
						<td height="16" colspan="5"><div align="center"></div></td>
						<td colspan="2" rowspan="7">&nbsp;</td>
					  </tr>
					  <tr>
						<td height="7">&nbsp;</td>
						<td colspan="4"><div align="center">&iquest;To where in Miami?</div></td>
					  </tr>
					  <tr>
						<td height="7">&nbsp;</td>
						<td colspan="4"><div align="center"></div></td>
					  </tr>
					  <tr>
						<td width="12" height="7">&nbsp;</td>
						<td width="53">&nbsp;</td>
						<td width="58">City:</td>
						<td width="113"><input name="city2" type="text" id="city2" size="25" class="required" /></td>
						<td width="114"></td>
					  </tr>
					  <tr>
						<td height="2">&nbsp;</td>
						<td height="2">&nbsp;</td>
						<td height="2">Address:</td>
						<td height="2"><input name="address2" type="text" id="address2" size="25" class="required" /></td>
						<td height="2"></td>
					  </tr>
					  <tr>
						<td height="3">&nbsp;</td>
						<td height="3">&nbsp;</td>
						<td height="3">Zip Code:</td>
						<td height="3"><input name="zipcode2" type="text" id="zipcode2" size="25" class="required"/></td>
						<td height="3"></td>
					  </tr>
					  <tr>
						<td height="7">&nbsp;</td>
						<td height="7">&nbsp;</td>
						<td height="7">Phone #:</td>
						<td height="7"><input name="phone2" type="text" id="phone2" size="25" class="required" /><input name="sdeparture" type="hidden"  value="2"/></td>
						<td height="7"></td>
					  </tr>
					</table>
					
					
					<script> 
					 
						$("#hora2").timeEntry().change(function() { 
    var log = $("#log"); 
    log.val(log.val() + ($("#hora2").val() || "blank") + "\n"); 
});
					
					$(function(){
					$(".someClass").tipTip({maxWidth: "auto", edgeOffset: 10});
					});
					
					</script>
					';
                }
                // /condiciones para ajax
                if ($id == 1 && $id2 == 1) {
                    echo '<table width="381" border="0">
					  <tr>
						<td>&nbsp;</td>
						<td colspan="2">&nbsp;</td>
						<td width="29"><label></label></td>
					  </tr>
					  <tr>
						<td height="16" colspan="3"><div align="center"></div></td>
						<td rowspan="7">&nbsp;</td>
					  </tr>
					  <tr>
						<td height="7">&nbsp;</td>
						<td> <div align="left">Airline:</div></td><td><label>
						  <input type="text" name="airlinearrival" id="airlinearrival"  class="required"/>
						  </label></td>
					  </tr>
					  <tr>
						<td height="7">&nbsp;</td>
						<td><div align="left">Flight #:</div></td>
						<td><input type="text" name="flightarrival" id="flightarrival"  class="required"/>
						</td>
					  </tr>
					  <tr>
						<td width="55" height="7"><div align="left"></div></td>
						<td width="89"> <div align="left">Arrival Time:</div></td>
						<td width="279"><input name="hora1" type="text" id="hora1" size="6"  class="required"/><input name="sarrival" type="hidden"  value="3"/>
						</td>
					  </tr>
					  <tr>
						<td height="2">&nbsp;</td>
						<td height="2">&nbsp;</td>
						<td height="2">&nbsp;</td>
					  </tr>
					  <tr>
						<td height="3">&nbsp;</td>
						<td height="3">&nbsp;</td>
						<td height="3">&nbsp;</td>
					  </tr>
					  <tr>
						<td height="7">&nbsp;</td>
						<td height="7">&nbsp;</td>
						<td height="7">&nbsp;</td>
					  </tr>
					</table>
					
					
					<script> 
					
						$("#hora1").timeEntry().change(function() { 
    var log = $("#log"); 
    log.val(log.val() + ($("#hora1").val() || "blank") + "\n"); 
});
					$(function(){
					$(".someClass").tipTip({maxWidth: "auto", edgeOffset: 10});
					});
					var ddData2 = [
						 
						{
							text: "Super Tours Vip",
							value: 2,
							selected: false,
							description: "BY SUPER TOURS VIP PRIVATE TO MIAMI?",
							imageSrc: "' . $url . 'global/img/vip.png"
						},
						{
							text: "Airport (Transfer Out - MCO)",
							value: 2,
							selected: true,
							description: "FROM ORLANDO INT`L AIRPORT (TRANSFER OUT - MCO)?",
							imageSrc: "' . $url . 'global/img/icon-plane.png"
						}
					];		
					 $("#select2").ddslick("destroy");
					
					
					 $("#select2").ddslick({
						data: ddData2,
						width: 300,
						imagePosition: "left",
						selectText: "Method of arrival to Orlando?",
						onSelected: function (data) {
							var id = data.selectedIndex;
							$("#indexSelect2").val(id);
							selectTrip2();	
						}
					});
					</script>';
                }
                if ($id == 1 && $id2 == 2) {
                    echo '<table width="381" border="0">
					  <tr>
						<td>&nbsp;</td>
						<td colspan="2">&nbsp;</td>

						<td width="29"><label></label></td>
					  </tr>
					  <tr>
						<td height="16" colspan="3"><div align="center"></div></td>
						<td rowspan="7">&nbsp;</td>
					  </tr>
					  <tr>
						<td height="7">&nbsp;</td>
						<td> <div align="left">Airline:</div></td><td><label>
						  <input type="text" name="airlinedeparture" id="airlinedeparture"  class="required"/>
						 </label></td>
					  </tr>
					  <tr>
						<td height="7">&nbsp;</td>
						<td><div align="left">Flight #:</div></td>
						<td><input type="text" name="flightdeparture" id="flightdeparture"  class="required"/>
						  </td>
					  </tr>
					  <tr>
						<td width="55" height="7"><div align="left"></div></td>
						<td width="104"> <div align="left">Departure Time:</div></td>
						<td width="264"><input name="hora2" type="text" id="hora2" size="6"  class="required"/><input name="sdeparture" type="hidden"  value="3"/>
						  </td>
					  </tr>
					  <tr>
						<td height="2">&nbsp;</td>
						<td height="2">&nbsp;</td>
						<td height="2">&nbsp;</td>
					  </tr>
					  <tr>
						<td height="3">&nbsp;</td>
						<td height="3">&nbsp;</td>
						<td height="3">&nbsp;</td>
					  </tr>
					  <tr>
						<td height="7">&nbsp;</td>
						<td height="7">&nbsp;</td>
						<td height="7">&nbsp;</td>
					  </tr>
					</table>
						<script> 
					
						$("#hora2").timeEntry().change(function() { 
    var log = $("#log"); 
    log.val(log.val() + ($("#hora2").val() || "blank") + "\n"); 
});
					$(function(){
					$(".someClass").tipTip({maxWidth: "auto", edgeOffset: 10});
					});
					
					
					</script>';
                }
                if ($id == 2 && $id2 == 1) {
                    echo '<table width="381" border="0">
					  <tr>
						<td colspan="3">&nbsp;</td>
						<td width="36"><label></label></td>
					  </tr>
					  <tr>
						<td height="16" colspan="3"><div align="center"></div></td>
						<td rowspan="7">&nbsp;</td>
					  </tr>
					  <tr>
						<td width="77" height="7">&nbsp;</td>
						<td width="211"><div align="left">Estimated arrival time to Orlando:</div></td>
						<td><label>
						  <input name="hora1" type="text" id="hora1" size="6" class="required"/><input name="sarrival" type="hidden"  value="4"/>
						</label></td>
					  </tr>
					  <tr>
						<td height="7" colspan="2">&nbsp;</td>
						<td>&nbsp;</td>
					  </tr>
					  <tr>
						<td height="7" colspan="2">&nbsp;</td>
						<td width="128">&nbsp;</td>
					  </tr>
					  <tr>
						<td height="2" colspan="2">&nbsp;</td>
						<td height="2">&nbsp;</td>
					  </tr>
					  <tr>
						<td height="3" colspan="2">&nbsp;</td>
						<td height="3">&nbsp;</td>
					  </tr>
					  <tr>
						<td height="7" colspan="2">&nbsp;</td>
						<td height="7">&nbsp;</td>
					  </tr>
					</table>
						
						<script> 
						$("#hora1").timeEntry().change(function() { 
    var log = $("#log"); 
    log.val(log.val() + ($("#hora1").val() || "blank") + "\n"); 
});
					$(function(){
					$(".someClass").tipTip({maxWidth: "auto", edgeOffset: 10});
					});
					
					</script>
					
						<script>
						
						var ddData2 = [
						
						{
							text: "Super Tours Vip",
							value: 2,
							selected: false,
							description: "BY SUPER TOURS VIP PRIVATE TO MIAMI?",
							imageSrc: "' . $url . 'global/img/vip.png"
						},
						{
							text: "Airport (Transfer Out - MCO)",
							value: 2,
							selected: true,
							description: "FROM ORLANDO INT`L AIRPORT (TRANSFER OUT - MCO)?",
							imageSrc: "' . $url . 'global/img/icon-plane.png"
						}
					];		
					 $("#select2").ddslick("destroy");
					
					 $("#select2").ddslick({
						data: ddData2,
						width: 300,
						imagePosition: "left",
						selectText: "Method of arrival to Orlando?",
						onSelected: function (data) {
							var id = data.selectedIndex;
							$("#indexSelect2").val(id);
							selectTrip2();	
						}
					});
						</script>';
                }
                if ($id == 2 && $id2 == 2) {
                    echo '<table width="381" border="0">
					  <tr>
						<td colspan="3">&nbsp;</td>
						<td width="36"><label></label></td>
					  </tr>
					  <tr>
						<td height="16" colspan="3"><div align="center"></div></td>
						<td rowspan="6">&nbsp;</td>
					  </tr>
					  <tr>
						<td width="65" height="7">&nbsp;</td>
						<td width="308"><div align="left">Remember the Hotel Check Out is at 11:30<input name="sdeparture" type="hidden"  value="4"/></div></td>
						<td><label></label></td>
					  </tr>
					  
					  <tr>
						<td height="7" colspan="2">&nbsp;</td>
						<td width="43">&nbsp;</td>
					  </tr>
					  <tr>
						<td height="2" colspan="2">&nbsp;</td>
						<td height="2">&nbsp;</td>
					  </tr>
					  <tr>
						<td height="3" colspan="2">&nbsp;</td>
						<td height="3">&nbsp;</td>
					  </tr>
					  <tr>
						<td height="7" colspan="2">&nbsp;</td>
						<td height="7">&nbsp;</td>
					  </tr>
					</table>';
                }
              
            }
//            print_r(Doo::db()->showSQL());
        } catch (Exception $e) {
            // procedimiento en caso de reportar errores
        }
    }

    public function tours_one() {
        $_SESSION ['toursbooking']['pasoposttrip'] = true;
        Doo::loadController('admin/ToursOneController');
        $toursOneControl = new ToursOneController();
        $_SESSION['codconf'] = $toursOneControl->codigoConfMultitour(1);

        unset($_SESSION['tourPagoMulDay']);
        unset($_SESSION['tourPagoOneDay']);
        unset($_SESSION['toursbooking']);
        list($mes, $dia, $anio) = explode('/',$_POST['fecha_salida']);
  
        list($mes1, $dia1, $anio1) = explode('/', $_POST['fecha_retorno']);
        $fecha_trip = $anio . '-' . $mes . '-' . $dia;
        $fecha_trip1 = $anio1 . '-' . $mes1 . '-' . $dia1;

        $fechaSalida = $fecha_trip;
        $fechaRetorno =  $fecha_trip1;
        // $trip1 = $_POST['trip1'];
        // $trip2 = $_POST['trip2'];
        $trip1 = $_POST['tripsselecteds1'];
        $trip2 = ($_POST['tripsselecteds2'] == null)? NULL : $_POST['tripsselecteds2'] ;
            // ($_POST['tripsselecteds2'] == null)? unset($_POST['tripsselecteds2']) : $_POST['tripsselecteds2'] ;
        $adult = $_POST['adults'];
        $child = $_POST['Child'];
        $adult1 = $_POST['adult1'];
        $child1 = $_POST['child1'];
        $area = $_POST['area'];
        $pickup = $_POST['pickup'];
        $area2 = $_POST['area2'];
        $pickup2 = $_POST['pickup2'];

        if (isset($_SESSION['data_agency'])) {
            Doo::loadModel("Agency");
            $dat = new Agency($_SESSION['data_agency']);
            $type = $dat->type_rate;
        } else {
            Doo::loadModel("Agency");
            $dat = new Agency();
            $type = 0;
            $dat->id = -1;
        }
        //Tipo de pickup_dropoff;
        if ($dat->id == -1) {
            $type_web = 1;
        } else {
            $type_web = 0;
        }
        $_SESSION['onedaytour'] = false;
        $_SESSION['step_one'] = true;


        try {
            /* if(!isset($_POST)){
              return Doo::conf()->APP_URL . "tours/";
              exit;
              } */
            extract($_POST, EXTR_SKIP);
            if (isset($area)) {
                $id_from = $area;
                $id_tot = 1;
                $sqlArea = "select nombre from areas where id = ?";
                $res = Doo::db()->query($sqlArea, array(
                    $area
                ));

                $ar = $res->fetch();
                $trip111 = ($trip1 != NULL)? 'AND trip'.$trip1.' = 1 ' : NULL ;
                $sqlpu = "SELECT id,place,address  FROM pickup_dropoff WHERE id = ? AND (SELECT FIND_IN_SET('2', type_pick)) > 0 $trip111 AND active_web = 1 AND ORDER BY posicion ASC";

                // $pu = Doo::db()->query($sqlpu, array($pickup));

                // $pick = $pu->fetch();
                // echo '<pre>';
                // print_r($sqlpu);
                // echo '</pre>';
                // die;
                $_SESSION['area'] = $ar['nombre'];
                $_SESSION['pickup'] = $pick['place'];
            } else {
                $id_from = 1;
                $id_tot = 1;
            }

            if (isset($area2)) {
                $id_from2 = 1;
                $id_tot2 = $area2;
                $sqlArea2 = "select nombre from areas where id = ?";
                $res2 = Doo::db()->query($sqlArea2, array(
                    $area2
                ));

                $ar2 = $res2->fetch();

                // $trip222 = 'trip'.$trip2.'= 1 ';
                $trip222 = ($trip2 != NULL)? 'AND  trip'.$trip2.'= 1 ' : NULL ;
                $sqlpu2 = "SELECT id,place,address FROM pickup_dropoff WHERE id = ?  AND (SELECT FIND_IN_SET('2', type_pick)) > 0 $trip222 AND active_web = 1 ORDER BY posicion ASC";
                // print_r($sqlpu2);
                // die;
                $pu2 = Doo::db()->query($sqlpu2, array($pickup2));
                $pick2 = $pu2->fetch();
                $_SESSION['area2'] = $ar2['nombre'];
                $_SESSION['pickup2'] = $pick2['place'];
            } else {
                $id_tot2 = 0;
                $id_from2 = 0;
            }

            // echo '<pre>';
            // print_r($pick2);
            // echo '</pre>';
            // die;
            list ($mes, $dia, $anyo) = explode("/", $fecha_salida);

            $llegada = $anyo . "-" . $mes . "-" . $dia;

            if (isset($fecha_retorno)) {
                list ($mes2, $dia2, $anyo2) = explode("/", $fecha_retorno);
                $salida = $anyo2 . "-" . $mes2 . "-" . $dia2;
            }

            $f0 = strtotime($llegada);
            $f1 = strtotime($salida);
            $resultado = ($f1 - $f0);
            $resultado = $resultado / 60 / 60 / 24;
            $resultado = round($resultado);
            $dias = ($resultado + 1 > 0) ? $resultado + 1 : '';
            $noches = ($resultado + 1 > 0) ? $dias - 1 : '';

            $toursbooking = array(
                "question" => $question,
                "fecha_llegada" => $llegada,
                "fecha_salida" => $salida,
                "sarrival" => $sarrival,
                "sdeparture" => $sdeparture,
                "dias" => $dias,
                "noches" => $noches,
                "iden" => $_SESSION['booking']['iden']
            );
            // /condicionales session

            if (isset($trip1)) { // /trip de arrival a orlando
                $toursbooking ['trip1'] = $trip1;
                /* $sql = "SELECT t1.trip_departure,t1.trip_arrival,t2.equipment
                  FROM routes t1

                  INNER JOIN trips t2 ON (t1.trip_no = t2.trip_no)

                  WHERE t1.trip_no  = ? "; */

                $sql = " SELECT  t1.trip_no,  t2.trip_departure,t3.equipment,t2.trip_arrival, t1.estado  
					  FROM programacion t1
					  LEFT JOIN routes t2 ON (t1.trip_no = t2.trip_no)
					  LEFT JOIN trips  t3 ON (t1.trip_no = t3.trip_no) 
					  WHERE t2.type_rate = ? and t2.trip_from = " . $area . " AND t2.trip_to = 1 and fecha = ? and t1.trip_no = ? AND t1.estado = '1' ORDER BY t2.trip_departure ASC";

                $fechaSalidaFormato = date("d-m-Y", strtotime($toursbooking['fecha_llegada']));
                $dat = new DateTime($fechaSalidaFormato);

                $rs = Doo::db()->query($sql, array($type,
                    $dat->format('m') . "-" . $dat->format('d') . "-" . $dat->format('Y'),
                    $trip1
                ));

                $fechas = $rs->fetch();

                $toursbooking['datedeparturetrip1'] = date("g:i A", strtotime($fechas['trip_departure']));
                $toursbooking['datearrivingtrip1'] = date("g:i A", strtotime($fechas['trip_arrival']));
                $toursbooking['equipment1'] = $fechas['equipment'];
                $toursbooking['service1'] = "SUPER TOURS BUS";
            }

            if (isset($trip2)) { // /trip de departure
                $toursbooking ['trip2'] = $trip2;
                $fechaSalidaFormato2 = date("d-m-Y", strtotime($toursbooking ['fecha_salida']));
                $dat = new DateTime($fechaSalidaFormato2);
                $sql = "SELECT t1.trip_no, t2.trip_departure,t3.equipment,t2.trip_arrival, t1.estado  
						FROM programacion t1
						  LEFT JOIN routes t2 ON (t1.trip_no = t2.trip_no)
						  LEFT JOIN trips  t3 ON (t1.trip_no = t3.trip_no) 
					  	WHERE t2.type_rate = ? 
							AND t2.trip_from = 1 
							AND t2.trip_to = " . $area2 . " 
							AND fecha = ? 
							AND t1.trip_no = ? 
							AND t1.estado = '1' 
						ORDER BY t2.trip_departure ASC";
                $rs = Doo::db()->query($sql, array($type,
                    $dat->format('m') . "-" . $dat->format('d') . "-" . $dat->format('Y'),
                    $trip2
                ));

                $fechas2 = $rs->fetch();
                $toursbooking['datedeparturetrip2'] = date("g:i A", strtotime($fechas2['trip_departure']));
                $toursbooking['datearrivingtrip2'] = date("g:i A", strtotime($fechas2['trip_arrival']));
                $toursbooking['equipment2'] = $fechas2['equipment'];
                $toursbooking['service2'] = "SUPER TOURS BUS";
            }

            if (isset($hora1)) { // hora de arrival 
                $toursbooking ['hora1'] = date("H:i", strtotime($hora1));
            }
            if (isset($hora2)) { // hora de departure 
                $toursbooking ['hora2'] = date("H:i", strtotime($hora2));
            }
            if (isset($city) && isset($address) && isset($zipcode) && isset($phone)) {
                // /datos de arrival en la opcion vip complementado con la horas anteriores
                $toursbooking ['city'] = $city;
                $toursbooking ['address'] = $address;
                $toursbooking ['zipcode'] = $zipcode;
                $toursbooking ['phone'] = $phone;
                $toursbooking ['service1'] = "VIP";
            }
            if ($sdeparture == 2) {
                $toursbooking ['service2'] = "VIP";
                if (isset($city2) && isset($address2) && isset($zipcode2) && isset($phone2)) {
                    $toursbooking ['city2'] = $city2;
                    $toursbooking ['address2'] = $address2;
                    $toursbooking ['zipcode2'] = $zipcode2;
                    $toursbooking ['phone2'] = $phone2;
                    $toursbooking ['service2'] = "VIP";
                }
            }
            if (isset($airlinearrival) && isset($flightarrival)) {
                // transfer in arrival complementado con hora1
                $toursbooking ['airlinearrival'] = $airlinearrival;
                $toursbooking ['flightarrival'] = $flightarrival;
                $toursbooking ['service1'] = "PLANE";
            }
            if (isset($airlinedeparture) && isset($flightdeparture)) {
                // transfer in departure complementado con hora 2
                $toursbooking ['airlinedeparture'] = $airlinedeparture;
                $toursbooking ['flightdeparture'] = $flightdeparture;
                $toursbooking ['service2'] = "PLANE";
            }
            if ($sarrival == 4) {
                $toursbooking ['service1'] = "Car";
            }
            if ($sdeparture == 4) {
                $toursbooking ['service2'] = "Car";
            }
            // //////////////////// services
            $toursbooking['id_from'] = $id_from;
            $toursbooking['id_tot'] = $id_tot;
            $toursbooking['id_from2'] = $id_from2;
            $toursbooking['id_tot2'] = $id_tot2;
            $id_pickup1 = (isset($pickup) ? $pickup : 0);
            $id_dropoff1 = 1;
            $id_pickup2 = 1;
            $id_dropoff2 = (isset($pickup2) ? $pickup2 : 0);

            $toursbooking['id_pickup1'] = $id_pickup1;
            $toursbooking['id_dropoff1'] = $id_dropoff1;
            $toursbooking['id_pickup2'] = $id_pickup2;
            $toursbooking['id_dropoff2'] = $id_dropoff2;
            $toursbooking['iden'] = $iden;
            $toursbooking['adult'] = $adult;
            $toursbooking['child'] = ($child > 0) ? $child : 0  ;
            $_SESSION ["toursbooking"] = $toursbooking;

            // echo '<script>location.href="' . Doo::conf()->APP_URL . "step-two" . '"</script>';
            return Doo::conf()->APP_URL . "step-two";
        } catch (Exception $e) {
            //exit();
            echo '<script>location.href="' . Doo::conf()->APP_URL . "multi-days-tours/" . '"</script>';
            // procedimiento en caso de reportar errores
        }
    }

    public function step_one() {
        $_SESSION['step_one'] = true;
        try {
            //echo "please wait...";
            if (isset($_SESSION ['toursbooking'] ['pasopostpark'])) {
                unset($_SESSION ['toursbooking'] ['pasopostpark']);
            }

            $toursbooking = $_SESSION ["toursbooking"];

            $fechal = substr($toursbooking['fecha_llegada'], 0, 4) . '-01-01 00:00:00';


            /* if prices trips bus */
            if (isset($toursbooking ['trip1'])) {

                $sql = 'SELECT adult, child
						 FROM tarifastrip
							WHERE trip_no = ?
							AND annio = ?';

                $rs = Doo::db()->query($sql, array(
                    $toursbooking ['trip1'], $fechal
                ));

                $prices = $rs->fetch();

                if (!empty($prices)) {

                    $priceadult = $prices ['adult'] * $toursbooking ['pax1'];
                    $pricechild = $prices ['child'] * $toursbooking ['pax2'];

                    $trip1 = number_format($priceadult, 2, '.', '') + number_format($pricechild, 2, '.', '');
                    echo "trip1 " . $trip1;
                }
            } else {
                $trip1 = 0;
            }

            if (isset($toursbooking ['trip2'])) {
                $fechas = substr($toursbooking['fecha_salida'], 0, 4) . '-01-01 00:00:00';
                $sql = 'SELECT adult, child
										 FROM tarifastrip
											WHERE trip_no = ?
											AND annio = ?';

                $rs = Doo::db()->query($sql, array(
                    $toursbooking ['trip2'], $fechas
                ));

                $prices = $rs->fetch();

                if (!empty($prices)) {

                    $priceadult = $prices ['adult'] * $toursbooking ['pax1'];
                    $pricechild = $prices ['child'] * $toursbooking ['pax2'];

                    $trip2 = number_format($priceadult, 2, '.', '') + number_format($pricechild, 2, '.', '');
                    echo "trip2 " . number_format($trip2, 2, '.', '');
                }
            } else {
                $trip2 = 0;
            }

            /* if prices supertours vip */

            if ($toursbooking ['sarrival'] == 2) {

                $sql = 'SELECT id,cantidad,price
						FROM tarifasvip
						WHERE cantidad = ?
						annio = ?
						';

                $rs = Doo::db()->query($sql, array(
                    $totalpax, $fechal
                ));

                $pricesvip = $rs->fetch();

                if (!empty($pricesvip)) {

                    $vip1 = number_format($pricesvip ['price'], 2, '.', '');

                    //echo "vip1 " . $vip1;
                }
            } else {
                $vip1 = 0;
            }

            if ($toursbooking ['sdeparture'] == 2) {

                $sql = 'SELECT id,cantidad,price
					    FROM tarifasvip
						WHERE cantidad = ?
						AND annio = ?';

                $rs = Doo::db()->query($sql, array(
                    $totalpax, $fechas
                ));

                $pricesvip = $rs->fetch();

                if (!empty($pricesvip)) {

                    $vip2 = number_format($pricesvip ['price'], 2, '.', '');

                    echo "vip2 " . number_format($vip2, 2, '.', '');
                }
            } else {
                $vip2 = 0;
            }

            /* if prices transfer in airport */

            if ($toursbooking ['sarrival'] == 3) {
                $totalpax = $toursbooking ['pax1'] + $toursbooking ['pax2'];

                $sql = 'SELECT id,cantidad,price
											FROM tarifaplane 
												WHERE cantidad = ?';

                $rs = Doo::db()->query($sql, array(
                    $totalpax
                ));

                $pricesbyplane = $rs->fetch();

                if (!empty($pricesbyplane)) {
                    $byplane1 = number_format($pricesbyplane ['price'], 2, '.', '');
                    echo "byplane1 " . number_format($byplane1, 2, '.', '');
                }
            } else {
                $byplane1 = 0;
            }

            if ($toursbooking ['sdeparture'] == 3) {
                $totalpax = $toursbooking ['pax1'] + $toursbooking ['pax2'];

                $sql = 'SELECT id,cantidad,price
											FROM tarifaplane 
												WHERE cantidad = ?';

                $rs = Doo::db()->query($sql, array(
                    $totalpax
                ));

                $pricesbyplane = $rs->fetch();

                if (!empty($pricesbyplane)) {
                    $byplane2 = number_format($pricesbyplane ['price'], 2, '.', '');
                    echo "byplane2 " . number_format($byplane2, 2, '.', '');
                }
            } else {
                $byplane2 = 0;
            }

            /* if prices by car */

            if ($toursbooking ['sarrival'] == 4) {

                $fechal = substr($toursbooking['fecha_llegada'], 0, 4) . '-01-01 00:00:00';

                $sql = 'SELECT id,price FROM tarifacar where annio = ?';

                $rs = Doo::db()->query($sql, array($fechal));

                $pricescar = $rs->fetch();

                if (!empty($pricescar)) {
                    $car = number_format($pricescar ['price'], 2, '.', '');
                    echo "car " . number_format($car, 2, '.', '');
                }
            } else {
                $car = 0;
            }
            $tq = $trip1 + $trip2 + $vip1 + $vip2 + $byplane1 + $byplane2 + $car;
            // echo "TQ".number_format($tq,2,'.','');

            $_SESSION ['toursbooking']['tq'] = number_format($tq, 2, '.', '');

            return Doo::conf()->APP_URL . "step-two";
        } catch (Exception $e) {
            echo $e;
            //procedimiento en caso de reportar errores
        }
    }

    public function step_two() {
        $this->data['rootUrl'] = Doo::conf()->APP_URL;
		$toursbooking = $_SESSION['toursbooking'];
        $fecha_llegada = strtotime($toursbooking ['fecha_llegada']);
        $fecha_salida = strtotime($toursbooking ['fecha_salida']);
        #se comento el if con 
        #el fin de que cuando se 
        #actualice no me mande 
        #a la pagina de 
        #inicio del tour
        //if (isset($_SESSION['step_one']) && isset($_SESSION["toursbooking"])) {
        $_SESSION['step_two'] = true;
        if (isset($_SESSION['toursbooking']['pasopostpark'])) {
            unset($_SESSION['toursbooking']['pasopostpark']);
        }   
        $dominio = substr($_SERVER['PHP_SELF'], -50,-9);
        $myRoot = $_SERVER["DOCUMENT_ROOT"];
        // $dominio = 'web/'; //WEB DE PRUEBA (LOCAL)
        // $dominio = '';  //WEB ORIGINAL
        // $dominio = 'web_eric/'; //WEB DE PRUEBA (EN LA NUBE)

        $urlzebra = $myRoot.''.$dominio.''.'protected/viewc/Zebra_Pagination-master/Zebra_Pagination.php';
        // echo $urlzebra;
        // echo '<br>';
        
        // echo '<pre>';
        // print_r($urlzebra);
        // echo '</pre>';
        // die;
        require_once $urlzebra ;
        $s = "SELECT COUNT(*) as can FROM hoteles WHERE estado = 1 AND categoria <= 4 AND type_web=1  ORDER BY categoria desc";
        $res = Doo::db()->query($s);
        $resg = $res->fetch();
        $this->data['hotelestotal'] = $resg['can'];
        $this->data['resultado'] = 10;
        
        $paginacion = new Zebra_Pagination();
        $paginacion->records($this->data['hotelestotal']);
        $paginacion->records_per_page($this->data['resultado']);
        
        $sql2 = 'SELECT * FROM hoteles WHERE estado = 1 AND categoria <= 4 AND type_web=1 ORDER BY categoria DESC LIMIT '.(($paginacion->get_page() -1 ) * $this->data['resultado']).','.$this->data['resultado'].' ';
        $resulthote = Doo::db()->query($sql2);
        $responseh = $resulthote->fetchAll();
        $this->data['hoteles'] = $responseh;
        $this->data['paginacion'] = $paginacion;


        // $urlzebra = $myRoot.'/'.$dominio.''.'protected/viewc/Zebra_Pagination-master/Zebra_Pagination.php';
        // require_once $urlzebra ;
        // $s = "SELECT COUNT(*) FROM hoteles
		// 				WHERE id  NOT IN (SELECT id_hotel FROM  ratesblock WHERE  fecha_ini >=  '".$fecha_llegada."' AND fecha_fin <= '".$fecha_salida."' )
		// 				AND categoria <= 3 AND type_web=1 AND estado = 1 ORDER BY categoria desc";
        // $res = Doo::db()->query($s);
        // $resg = $res->fetch();
        // $this->data['hotelestotal'] = $resg['can'];
        // $this->data['resultado'] = 10;

        // $paginacion = new Zebra_Pagination();
        // $paginacion->records($this->data['hotelestotal']);
        // $paginacion->records_per_page($this->data['resultado']);
        
        // $sql2 = "SELECT id,codigo,categoria,nombre,address,city,zipcode,contacname,phone,email,webpage,breakfast,resoftfe,description,image1 FROM hoteles WHERE id  NOT IN (SELECT id_hotel FROM  ratesblock WHERE  fecha_ini >=  '".$fecha_llegada."' AND fecha_fin <= '".$fecha_salida."' ) AND categoria <= 3 AND type_web=1 AND estado = 1 ORDER BY categoria desc LIMIT ".(($paginacion->get_page() -1 ) * $this->data['resultado']).','.$this->data['resultado']." ";
        // $resulthote = Doo::db()->query($sql2);
        // $responseh = $resulthote->fetchAll();
        // $this->data['hoteles'] = $responseh;
        // $this->data['paginacion'] = $paginacion;

        // echo '<pre>';
        // print_r($paginacion);
        // echo '</pre>';
        // die;

        unset($_SESSION['step_one']);
        //$this->renderc('/page/2-day-tour', $this->data);

        $this->renderc('/page/2-day-tour', $this->data);
        /* } else {
          $iden = $_SESSION["toursbooking"]['iden'];
          $sql = "DELETE FROM reservas_trip_puestos WHERE usuario = '".$iden."'";
          Doo::db()->query($sql);
          //exit();
          return Doo::conf()->APP_URL . "tours";
          } */
    }

    public function loginiden(){
        $this->data['lasturl'] = $_SERVER['HTTP_REFERER'];
        // echo '<pre>';
        // var_dump(!isset($_SESSION['user']) || isset($_SESSION['infoforms']) || isset($_SESSION['signup2']));
        // echo '</pre>';
        // die;

        if (!isset($_SESSION['user']) || isset($_SESSION['infoforms']) || isset($_SESSION['signup2'])) {
        $this->data['rootUrl'] = Doo::conf()->APP_URL;
        $this->renderc('login', $this->data);
        }else{
            return Doo::conf()->APP_URL;
        }
    }


    public function skiphotel(){

        unset($_SESSION['hotel21']);
        unset($_SESSION['hotel32']);
        unset($_SESSION['hotel43']);
        unset($_SESSION['hotel54']);
        unset($_SESSION['hotel65']);
        unset($_SESSION['hotel76']);
        unset($_SESSION['hotel87']);
        unset($_SESSION['hotel98']);
        unset($_toursbooking['hotel']);
        unset($_toursbooking['divporpax']);
        Doo::loadModel("Agency");
        $totaladult = $_SESSION['toursbooking']['adult'];
        $totalchild = $_SESSION['toursbooking']['child'];
        $totalpax = $totaladult +  $totalchild;
        if (isset($_SESSION['data_agency'])) {
            $dat = new Agency($_SESSION['data_agency']);
            $net_rate = ($dat->type_rate == 1) ? true : false;
        } else {
            $dat = new Agency();
            $net_rate = false;
            $dat->type_rate = 0;
            $dat->id = -1;
        }
        $toursbooking = $_SESSION["toursbooking"];
        $_SESSION['toursbooking']['trasport_por_adult'] = 0;
        $_SESSION['toursbooking']['trasport_por_child'] = 0;
        Doo::loadController('admin/ToursController');
        $toursOperador = new ToursController();
        $anio = substr($toursbooking['fecha_llegada'], 0, 4);
        $prices = $toursOperador->precioTripTours($toursbooking['trip1'], $dat->type_rate, $dat->id, $anio);

        if (isset($toursbooking ['trip1'])) {
            Doo::loadController('admin/ToursController');
            $toursOperador = new ToursController();
            $anio = substr($toursbooking['fecha_llegada'], 0, 4);
            $prices = $toursOperador->precioTripTours($toursbooking['trip1'], $dat->type_rate, $dat->id, $anio);

            if (!empty($prices)) {
                $priceadult1 = $prices ['adult'] * $totaladult;
                $pricechild1 = $prices ['child'] * $totalchild;
                $trip1 = number_format($priceadult1, 2, '.', '') + number_format($pricechild1, 2, '.', '');
                $_SESSION['toursbooking']['trasport_total1'] = $trip1;
                $_SESSION['toursbooking']['trasport_por_adult'] = $priceadult1;
                $_SESSION['toursbooking']['trasport_por_child'] = $pricechild1;

                /** Discriminacion de precios */
                $_SESSION['toursbooking']['priceadult'] = $prices ['adult'];
                $_SESSION['toursbooking']['pricechil'] = $prices ['child'];
                // echo '<pre>';
                // print_r($prices);
                // echo '</pre>';
                // die;
                /** FIN Discriminacion de precios */
            } else {
                $trip1 = 0;
                $priceadult1 = 0;
                $pricechild1 = 0;
            }
        //                 echo '<pre>';
        // print_r($prices);
        // echo '</pre>';
        // die;
        } else {
            $trip1 = 0;
            $priceadult1 = 0;
            $pricechild1 = 0;
        }




        if (isset($toursbooking['trip2'])) {
            Doo::loadController('admin/ToursController');
            $toursOperador = new ToursController();
            $anio = substr($toursbooking['fecha_salida'], 0, 4);
            $prices = $toursOperador->precioTripTours($toursbooking ['trip2'], $dat->type_rate, $dat->id, $anio);
            if (!empty($prices)) {
                $priceadult2 = $prices ['adult'] * $totaladult;
                $pricechild2 = $prices ['child'] * $totalchild;
                $trip2 = number_format($pricechild2, 2, '.', '') + number_format($priceadult2, 2, '.', '');
                $_SESSION['toursbooking']['trasport_total2'] = $trip2;

                $_SESSION['toursbooking']['trasport_por_adult'] = $_SESSION['toursbooking']['trasport_por_adult'] + $priceadult2;
                $_SESSION['toursbooking']['trasport_por_child'] = $_SESSION['toursbooking']['trasport_por_child'] + $pricechild2;

                /** Discriminacion de precios */
                $_SESSION['toursbooking']['2priceadult'] = $prices ['adult'];
                $_SESSION['toursbooking']['2pricechil'] = $prices ['child'];
                /** FIN Discriminacion de precios */
            } else {
                $trip2 = 0;
                $priceadult2 = 0;
                $pricechild2 = 0;
            }
        } else {
            $trip2 = 0;
            $priceadult2 = 0;
            $pricechild2 = 0;
        }
        if(isset($_SESSION['toursbooking']['totaltotal'])){
            $transporte = $_SESSION['toursbooking']['totaltotal'] ;
        }else{
            $transporte = $trip2 + $trip1 ;
        }

        // echo '<pre>';
        // print_r($transporte);
        // echo '</pre>';
        // die;


        if ($toursbooking ['sarrival'] == 2) {
            $fechal = substr($toursbooking['fecha_llegada'], 0, 4) . '-01-01 00:00:00';
            if ($dat->type_rate == 1) {// Se busca SpecialNet
                $sql = 'SELECT id,cantidad,price
            FROM tarifasvip 
            WHERE cantidad = ? 
                AND (type_rate = ? )
                AND (id_agency = ? or id_agency = -1 )
                AND annio = ?
            ORDER BY type_rate Desc LIMIT 1';
                $type = 2;
                $rs = Doo::db()->query($sql, array($totalpax, $type, $dat->id, $fechal));
                $pricesvip = $rs->fetch();

                if (empty($pricesvip)) {
                    //Si no encuentra Buscamos Net.
                    $sql = 'SELECT id,cantidad,price
            FROM tarifasvip 
            WHERE cantidad = ? 
                AND (type_rate = ? )
                AND (id_agency = ? or id_agency = -1 )
                AND annio = ?
            ORDER BY type_rate Desc LIMIT 1';
                    $type = 1;
                    $rs = Doo::db()->query($sql, array($totalpax, $type, $dat->id, $fechal));
                    $pricesvip = $rs->fetch();
                }
            } else {
                $sql = 'SELECT id,cantidad,price
            FROM tarifasvip 
            WHERE cantidad = ? 
                AND (type_rate = ? )
                AND (id_agency = ? or id_agency = -1 )
                AND annio = ?
            ORDER BY type_rate Desc LIMIT 1';
                $rs = Doo::db()->query($sql, array($totalpax, $dat->type_rate, $dat->id, $fechal));
                $pricesvip = $rs->fetch();
            }

            if (!empty($pricesvip)) {
                $vip1 = number_format($pricesvip ['price'], 2, '.', '');
                $_SESSION['toursbooking']['trasport_total1'] = $vip1;
            }
        } else {
            $vip1 = 0;
        }


            if ($toursbooking ['sdeparture'] == 2) {
                $fechas = substr($toursbooking['fecha_salida'], 0, 4) . '-01-01 00:00:00';
                if ($dat->type_rate == 1) {
                    //Se busca SpecialNet
                    $sql = 'SELECT id,cantidad,price
                FROM tarifasvip 
                WHERE cantidad = ? 
                    AND (type_rate = ? )
                    AND (id_agency = ? or id_agency = -1 )
                    AND annio = ?
                ORDER BY type_rate Desc LIMIT 1';
                    $type = 2;
                    $rs = Doo::db()->query($sql, array($totalpax, $type, $dat->id, $fechas));
                    $pricesvip = $rs->fetch();

                    if (empty($pricesvip)) {//Si no encuentra Buscamos Net.
                        $sql = 'SELECT id,cantidad,price
                FROM tarifasvip 
                WHERE cantidad = ? 
                    AND (type_rate = ? )
                    AND (id_agency = ? or id_agency = -1 )
                    AND annio = ?
                ORDER BY type_rate Desc LIMIT 1';
                        $type = 1;
                        $rs = Doo::db()->query($sql, array($totalpax, $type, $dat->id, $fechas));
                        $pricesvip = $rs->fetch();
                    }
                } else {
                    $sql = 'SELECT id,cantidad,price
                FROM tarifasvip 
                WHERE cantidad = ? 
                    AND (type_rate = ? )
                    AND (id_agency = ? or id_agency = -1 )
                    AND annio = ?
                ORDER BY type_rate Desc LIMIT 1';
                    $rs = Doo::db()->query($sql, array($totalpax, $dat->type_rate, $dat->id, $fechas));
                    $pricesvip = $rs->fetch();
                }

                if (!empty($pricesvip)) {
                    $vip2 = number_format($pricesvip ['price'], 2, '.', '');
                    $_SESSION['toursbooking']['trasport_total2'] = $vip2;
                }
            } else {
                $vip2 = 0;
            }
            if ($toursbooking ['sarrival'] == 3) {
                $fechal = substr($toursbooking['fecha_llegada'], 0, 4) . '-01-01 00:00:00';
                if ($dat->type_rate == 1) {// Se busca SpecialNet
                    $sql = 'SELECT id,cantidad,price
                FROM tarifaplane 
                WHERE cantidad = ? 
                    AND (type_rate = ? )
                    AND (id_agency = ? or id_agency = -1 ) 
                                        AND annio = ?
                ORDER BY type_rate Desc LIMIT 1';
                    $type = 2;
                    $rs = Doo::db()->query($sql, array($totalpax, $type, $dat->id, $fechal));
                    $pricesbyplane = $rs->fetch();

                    if (empty($pricesbyplane)) {
                        //Si no encuentra Buscamos Net.
                        $sql = 'SELECT id,cantidad,price
                FROM tarifaplane 
                WHERE cantidad = ? 
                    AND (type_rate = ? )
                    AND (id_agency = ? or id_agency = -1 ) 
                                        AND annio = ?
                ORDER BY type_rate Desc LIMIT 1';
                        $type = 1;
                        $rs = Doo::db()->query($sql, array($totalpax, $type, $dat->id, $fechal));
                        $pricesbyplane = $rs->fetch();
                    }
                } else {
                    $sql = 'SELECT id,cantidad,price
                FROM tarifaplane 
                WHERE cantidad = ? 
                    AND (type_rate = ? )
                    AND (id_agency = ? or id_agency = -1 ) 
                                        AND annio = ?
                ORDER BY type_rate Desc LIMIT 1';
                    $rs = Doo::db()->query($sql, array($totalpax, $dat->type_rate, $dat->id, $fechal));
                    $pricesbyplane = $rs->fetch();
                }

                if (!empty($pricesbyplane)) {
                    $byplane1 = number_format($pricesbyplane ['price'], 2, '.', '');
                    $_SESSION['toursbooking']['trasport_total1'] = $byplane1;
                }
            } else {
                $byplane1 = 0;
            }

            if ($toursbooking ['sdeparture'] == 3) {
                $fechas = substr($toursbooking['fecha_salida'], 0, 4) . '-01-01 00:00:00';
                if ($dat->type_rate == 1) {// Se busca SpecialNet
                    $sql = 'SELECT id,cantidad,price
                FROM tarifaplane 
                WHERE cantidad = ? 
                    AND (type_rate = ? )
                    AND (id_agency = ? or id_agency = -1 ) 
                                        AND annio = ?
                ORDER BY type_rate Desc LIMIT 1';
                    $type = 2;
                    $rs = Doo::db()->query($sql, array($totalpax, $type, $dat->id, $fechas));
                    $pricesbyplane = $rs->fetch();

                    if (empty($pricesbyplane)) {//Si no encuentra Buscamos Net.
                        $sql = 'SELECT id,cantidad,price
                FROM tarifaplane 
                WHERE cantidad = ? 
                    AND (type_rate = ? )
                    AND (id_agency = ? or id_agency = -1 ) 
                                        AND annio = ?
                ORDER BY type_rate Desc LIMIT 1';
                        $type = 1;
                        $rs = Doo::db()->query($sql, array($totalpax, $type, $dat->id, $fechas));
                        $pricesbyplane = $rs->fetch();
                    }
                } else {
                    $sql = 'SELECT id,cantidad,price
                FROM tarifaplane 
                WHERE cantidad = ? 
                    AND (type_rate = ? )
                    AND (id_agency = ? or id_agency = -1 ) 
                                        AND annio = ?
                ORDER BY type_rate Desc LIMIT 1';
                    $rs = Doo::db()->query($sql, array($totalpax, $dat->type_rate, $dat->id, $fechas));
                    $pricesbyplane = $rs->fetch();
                }

                if (!empty($pricesbyplane)) {
                    $byplane2 = number_format($pricesbyplane ['price'], 2, '.', '');
                    $_SESSION['toursbooking']['trasport_total2'] = $byplane2;
                }
            } else {
                $byplane2 = 0;
            }

            /* if prices by car */

            if ($toursbooking['sarrival'] == 4) {

                $fechal = substr($toursbooking['fecha_llegada'], 0, 4) . '-01-01 00:00:00';
                if ($dat->type_rate == 1) {// Se busca SpecialNet
                    $sql = 'SELECT id,price
                FROM tarifacar 
                WHERE (type_rate = ? )
                    AND (id_agency = ? or id_agency = -1 )
                    AND annio = ?
                ORDER BY type_rate Desc LIMIT 1';
                    $type = 2;
                    $rs = Doo::db()->query($sql, array($type, $dat->id, $fechal));
                    $pricescar = $rs->fetch();

                    if (empty($pricescar)) {//Si no encuentra Buscamos Net.
                        $sql = 'SELECT id,price
                FROM tarifacar 
                WHERE (type_rate = ? )
                    AND (id_agency = ? or id_agency = -1 )
                    AND annio = ?
                ORDER BY type_rate Desc LIMIT 1';
                        $type = 1;
                        $rs = Doo::db()->query($sql, array($type, $dat->id, $fechal));
                        $pricescar = $rs->fetch();
                    }
                } else {
                    $sql = 'SELECT id,price
                FROM tarifacar 
                WHERE (type_rate = ? )
                    AND (id_agency = ? or id_agency = -1 )
                    AND annio = ?
                ORDER BY type_rate Desc LIMIT 1';
                    $rs = Doo::db()->query($sql, array($dat->type_rate, $dat->id, $fechal));
                    $pricescar = $rs->fetch();
                }

                if (!empty($pricescar)) {
                    $car = number_format($pricescar ['price'], 2, '.', '');
                    $_SESSION['toursbooking']['trasport_total1'] = $car;
                }
            } else {
                $car = 0;
            }
            $tq = $trip1 + $trip2 + $vip1 + $vip2 + $byplane1 + $byplane2 + $car ;
            $_SESSION['toursbooking']['tq'] = $tq/* $_SESSION['toursbooking']['tq'] */;
            $_SESSION['toursbooking']['tq1'] = $_SESSION ['toursbooking'] ['tq'];
            $_SESSION['toursbooking']['tqp'] = $tq / $totalpax;
            $_SESSION['toursbooking']['tqp1'] = $_SESSION ['toursbooking'] ['tqp'];
            $_SESSION['toursbooking']['dbufe'] = $breakfast;
            $_SESSION["toursbooking"]["transport1"] = $trip1 + $trip2 + $vip1 + $vip2 + $byplane1 + $byplane2 + $car;
            $_SESSION["toursbooking"]["hotel"] = $costohotel ['nombre'];
            $_SESSION["toursbooking"]["adults"] = $_SESSION["toursbooking"]["adult"];
            $_SESSION["toursbooking"]["totalpax"] = $totalpax;
            $_SESSION["toursbooking"]["childs"] = $_SESSION["toursbooking"]["child"];
            $_SESSION["toursbooking"]["totaltotal"] = number_format(($totalpax * $_SESSION['toursbooking']['tqp']), 2, '.', '');
            $_SESSION["toursbooking"]["comision_agency"] = number_format(((!$net_rate) ? (( $_SESSION ["toursbooking"] ["totaltotal"] ) * (($this->cal_equipament()) / 100)) : 10.00), 2, '.', '');

        $sqlpar = "SELECT * FROM parques_add JOIN parques ON parques_add.idfk_parq = parques.id WHERE estado_parq = 1 AND multid_parq = 1 ORDER BY id_parq ASC";
        $parq = Doo::db()->query($sqlpar, array());
        $parques = $parq->fetchAll(PDO::FETCH_ASSOC);

        $sqlgpar = "SELECT gpq.id,gpq.nombre,pqd.estado_parq,pqd.fechacr_parq FROM parques_add pqd JOIN parques pq ON pq.id = pqd.idfk_parq JOIN grupo_parques gpq ON pq.id_grupo = gpq.id WHERE pqd.estado_parq = 1 AND multid_parq = 1 GROUP BY id_grupo ASC";
        $parqg = Doo::db()->query($sqlgpar, array());
        $parquesg = $parqg->fetchAll(PDO::FETCH_ASSOC);
            // echo '<pre>';
            // print_r($parques);
            // echo '</pre>';
            // die;
            $this->data ['rootUrl'] = Doo::conf()->APP_URL;
            $this->data["grupoparques"] = $parquesg;
            $this->data["parques"] = $parques;
    //    echo '<pre>';
    //    print_r($transporte);
    //    echo '</pre>';
    //    die;
            $_SESSION['hotel']['precioTotalHotel'] = 0;
            $_SESSION['toursbooking']['totaltours'] = $transporte;
        $this->renderc('/page/3-day-tour', $this->data);
    }

    public function hoteldisp(){
        $id = $this->params['id'];
        $toursbooking = $_SESSION ["toursbooking"];
        $fecha_i = strtotime($toursbooking['fecha_llegada']);
        $fecha_f = strtotime($toursbooking['fecha_salida']);

        $sql_rest = "SELECT id_hotel FROM ratesblock WHERE fecha_ini <= '$fecha_i' AND fecha_fin >= '$fecha_f' AND id_hotel = '$id';";
        $rs_rest = Doo::db()->query($sql_rest);
        $result_rest = $rs_rest->fetchAll();            
        foreach($result_rest as $res){
        }      
        $hotel_id = $res['id_hotel'];

        $sql_rest2 = "SELECT id_hotel FROM ratesblock WHERE fecha_ini <= '$fecha_f' AND fecha_fin >= '$fecha_f' AND id_hotel = '$id';";
        $rs_rest2 = Doo::db()->query($sql_rest2);
        $result_rest2 = $rs_rest2->fetchAll();
        foreach($result_rest2 as $res2){
        }
        $hotel_id2 = $res2['id_hotel'];
        // print_r($sql_rest);
        // die;
        if(($hotel_id == $id) || ($hotel_id2 == $id)){
            echo "empty";
        }else{
            echo "ok";
        }
        // if($responseh['cant'] == 0){
        //     echo "empty";
        // }else{
        //     echo "ok";
        // }
        // echo '<pre>';
        // print_r($hotel_id);
        // echo '</pre>';
        // die;
        // echo "ok";
    }

    public function question2() {
        try {

            $categoria = $this->params ["id"];
            $toursbooking = $_SESSION ["toursbooking"];
            $fecha_llegada = strtotime($toursbooking['fecha_llegada']);
            list($years, $mont, $day) = explode("-", $toursbooking['fecha_llegada']);
            $fecha_ini = strtotime($day . '-' . $mont . '-' . $years);
            //echo $fecha_ini;
            $fecha_salida = strtotime($toursbooking['fecha_salida']);
            $sql = "(SELECT id,orden,
                                codigo,
                                categoria,
                                nombre,
                                address,
                                city,
                                zipcode,
                                contacname,
                                phone,
                                email,
                                webpage,
                                breakfast,
                                resoftfe,
                                description,
                                image1,
                                'yes' as disponibilidad
                            FROM hoteles WHERE
                              id NOT IN (
                                SELECT id_hotel
                                FROM ratesblock
                                WHERE (ratesblock.fecha_ini BETWEEN ? AND ?)
                                      OR (ratesblock.fecha_fin BETWEEN ? AND ?)
                                      OR (
                                            (? BETWEEN ratesblock.fecha_ini AND ratesblock.fecha_fin )
                                            OR (? BETWEEN ratesblock.fecha_ini AND ratesblock.fecha_fin )
                                        )
                              )
                              AND id in (
                                select id_hotel from ratesvalid
                                where ratesvalid.fecha_ini <= ? and ratesvalid.fecha_fin >= ? OR ratesvalid.fecha_ini <= ? and ratesvalid.fecha_fin >= ?
                              )
                              AND categoria = ? 
                              AND estado = 1
                            )
                            UNION
                            (
                              SELECT id,
                                orden,
                                codigo,
                                categoria,
                                nombre,
                                address,
                                city,
                                zipcode,
                                contacname,
                                phone,
                                email,
                                webpage,
                                breakfast,
                                resoftfe,
                                description,
                                image1,
                                'yes' as disponibilidad
                              FROM hoteles WHERE
                                id NOT IN (
                                  SELECT id_hotel
                                  FROM ratesblock
                                  WHERE (ratesblock.fecha_ini BETWEEN ? AND ?)
                                        OR (ratesblock.fecha_fin BETWEEN ? AND ?)
                                        OR (
                                    (? BETWEEN ratesblock.fecha_ini AND ratesblock.fecha_fin )
                                    OR (? BETWEEN ratesblock.fecha_ini AND ratesblock.fecha_fin )
                                  )
                                )
                                AND id not in (
                                  select id_hotel from ratesvalid
                                  where ratesvalid.fecha_ini <= ? and ratesvalid.fecha_fin >= ? OR ratesvalid.fecha_ini <= ? and ratesvalid.fecha_fin >= ?
                                )
                                AND codigo <> 'H014' 
                                AND codigo <> 'H017' 
                                AND codigo <> 'H018' 
                                AND categoria = ? 
                                AND estado = '1' 
                                ) ORDER BY orden ASC";

            //echo 'FI => '.$fi = $fecha_llegada;
            //echo ' - FF => '.$ff = $fecha_salida;

            $fi = $fecha_llegada;
            $ff = $fecha_salida;
            //$parametros = array($fi, $ff, $fi, $ff, $fi, $ff, $fi, $fi, $ff, $ff, $categoria, $fi, $ff, $fi, $ff, $fi, $ff, $fi, $fi, $ff, $ff, $categoria);
            //print_r($parametros);
            $rs = Doo::db()->query($sql, array($fi, $ff, $fi, $ff, $fi, $ff, $fi, $fi, $ff, $ff, $categoria, $fi, $ff, $fi, $ff, $fi, $ff, $fi, $fi, $ff, $ff, $categoria));

            $hoteles = $rs->fetchAll();

            $_SESSION['categoria'] = $categoria;

            $contador = 0;
            $hidden = "hidden";
            $hotel = "hotel";
            if (empty($hoteles)) {
                echo '<table width="100%" border="0" id="tablah" >
                            <tr height="30">
                                <td align="left">
                                        <font color="#003399" >&nbsp;&nbsp;&nbsp;No hotels available in this category</font> 
                                </td>
                            </tr>
                        </table>';
            } else {

                foreach ($hoteles as $datos) {
                    $html_img = '';
                    $id_hotel = $datos['id'];
                    $array_imagenes = Doo::db()->find("imagenes_hotel", array("asc" => "orden", "where" => "id_hotel = ? ", "param" => array($id_hotel)));
                    //print_r($id_hotel);echo ' - ';

                    if (!empty($array_imagenes)) {
                        $contador_img = 1;
                        foreach ($array_imagenes as $values_img) {
                            if ($contador_img == 1) {
                                $html_img .= '<a class="galeria" title="' . $values_img->descripcion . '" data-lightbox-gallery="' . $id_hotel . '" href="' . Doo::conf()->APP_URL . 'global/' . $values_img->ruta_resize . '"> <img width="250px" height="190px" src="' . Doo::conf()->APP_URL . $datos ['image1'] . '"/> </a>';
                            } else {
                                $html_img .= '<a class="galeria" style="display:none;" title="' . $values_img->descripcion . '" href="' . Doo::conf()->APP_URL . 'global/' . $values_img->ruta_resize . '" data-lightbox-gallery="' . $id_hotel . '"></a>';
                            }
                            $contador_img++;
                        }
                    } else {
                        $html_img .= '<img width="250px" height="190px" src="' . Doo::conf()->APP_URL . $datos['image1'] . '"/>';
                    }

                    if ($id_hotel == 46 and $categoria == 2) {
                        echo ' <div class="row row-30 row-lg-20 row-offset-1 justify-content-sm-center justify-content-md-start justify-content-lg-center">
                                <div class="col-sm-10 col-md-6 col-xl-12">
                        <!-- Box Offer-->
                        <div class="box-offer box-offer-sm box-offer-left">
                            <div class="box-offer-img-wrap">
                            <a>
                                ' . $html_img . '
                            </a>
                            </div>
                            <div class="box-offer-caption text-left">
                                <div class="box-offer-caption-inner-wrap">
                                    <div class="box-offer-caption-inner-left">
                                        <div class="box-offer-title text-ubold"><a class="text-black">' . $datos['nombre'] . '</a></div>
                                        <!-- List Inline-->
                                        <ul class="list-inline list-inline-3">';
                        if ($categoria == 3) {
                            echo '<li><a class="icon fa fa-star text-primary" style="color: #e7711b;"></a></li>
                                    <li><a class="icon fa fa-star text-primary" style="color: #e7711b;"></a></li>
                                    <li><a class="icon fa fa-star text-primary" style="color: #e7711b;"></a></li>';
                        } else if ($categoria == 2) {
                            echo '<li><a class="icon fa fa-star text-primary" style="color: #e7711b;"></a></li>
                                        <li><a class="icon fa fa-star text-primary" style="color: #e7711b;"></a></li> 
                                        <li><a class="icon fa fa-star text-primary" style="color: #e7711b;"></a></li>';
                        } else {
                            echo '<li><a class="icon fa fa-star text-primary" style="color: #e7711b;"></a></li>
                                        <li><a class="icon fa fa-star text-primary" style="color: #e7711b;"></a></li>
                                        <li><a class="icon fa fa-star text-primary" style="color: #e7711b;"></a></li>
                                        <li><a class="icon fa fa-star text-primary" style="color: #e7711b;"></a></li>';
                        }
                        echo'</ul>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="box-offer-caption-inner-wrap box-offer-caption-inner-wrap-bottom">
                                    <div class="box-offer-caption-inner-left box-offer-description">
                                        <p class="text-small text-silver-chalice">' . $datos['description'] . '</p>
                                    </div>
                                    <div class="box-offer-caption-inner-right text-xl-right">';
                        if ($datos['disponibilidad'] == "yes") {

                            echo '<input type="checkbox" id="btn-continue' . $contador . '" name="hotel" value="' . $datos ['id'] . '" class="btns"/>
                                  <label for="btn-continue' . $contador . '">SELECT</label>';
                        } else {
                            echo '<input type="checkbox" disabled name="hotel" value="' . $datos ['id'] . '" />
                                 <label for="btn-continue' . $contador . '">Not Available</label>
                                 ';
                        }
                        echo '</div>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                    </div>
                    </div>';
                    }

                    //echo $id_hotel;
                    if ($id_hotel == 62 and $categoria == 3) {
                        echo ' <div class="row row-30 row-lg-20 row-offset-1 justify-content-sm-center justify-content-md-start justify-content-lg-center">
                                <div class="col-sm-10 col-md-6 col-xl-12">
                        <!-- Box Offer-->
                        <div class="box-offer box-offer-sm box-offer-left">
                            <div class="box-offer-img-wrap">
                            <a>
                                ' . $html_img . '
                            </a></div>
                            <div class="box-offer-caption text-left">
                                <div class="box-offer-caption-inner-wrap">
                                    <div class="box-offer-caption-inner-left">
                                        <div class="box-offer-title text-ubold"><a class="text-black">' . $datos['nombre'] . '</a></div>
                                        <!-- List Inline-->
                                        <ul class="list-inline list-inline-3">';
                        if ($categoria == 3) {
                            echo '<li><a class="icon fa fa-star text-primary" style="color: #e7711b;"></a></li>
                                        <li><a class="icon fa fa-star text-primary" style="color: #e7711b;"></a></li>
                                        <li><a class="icon fa fa-star text-primary" style="color: #e7711b;"></a></li>';
                        } else if ($categoria == 2) {
                            echo '<li><a class="icon fa fa-star text-primary" style="color: #e7711b;"></a></li>
                                        <li><a class="icon fa fa-star text-primary" style="color: #e7711b;"></a></li> 
                                        <li><a class="icon fa fa-star text-primary" style="color: #e7711b;"></a></li>';
                        } else {
                            echo '<li><a class="icon fa fa-star text-primary" style="color: #e7711b;"></a></li>
                                        <li><a class="icon fa fa-star text-primary" style="color: #e7711b;"></a></li>
                                        <li><a class="icon fa fa-star text-primary" style="color: #e7711b;"></a></li>
                                        <li><a class="icon fa fa-star text-primary" style="color: #e7711b;"></a></li>';
                        }
                        echo'</ul>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="box-offer-caption-inner-wrap box-offer-caption-inner-wrap-bottom">
                                    <div class="box-offer-caption-inner-left box-offer-description">
                                        <p class="text-small text-silver-chalice">' . $datos['description'] . '</p>
                                    </div>
                                    <div class="box-offer-caption-inner-right text-xl-right">';
                        if ($datos['disponibilidad'] == "yes") {

                            echo '<input type="checkbox" id="btn-continue' . $contador . '" name="hotel" value="' . $datos ['id'] . '" class="btns"/>
                                  <label for="btn-continue' . $contador . '">SELECT</label>';
                        } else {
                            echo '<input type="checkbox" disabled name="hotel" value="' . $datos ['id'] . '" />
                                 <label for="btn-continue' . $contador . '">Not Available</label>
                                 ';
                        }
                        echo '</div>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                    </div>
                    </div>';
                    }



                    echo '<script type="text/javascript">
                            $( function() {
                            $( "#buffet444" ).dialog({
                              autoOpen: false,
                              show: {
                                effect: "blind",
                                duration: 1000
                              },
                              hide: {
                                effect: "explode",
                                duration: 1000
                              }
                            });
                            $("#btn-continue' . $contador . '" ).on( "click", function() {
                                document.getElementById("namehotel").innerHTML = "Paragraph changed!";
                              $( "#buffet" ).dialog( "open" );
                            });
                          } );
                          </script>';
                    $contador++;
                }
            }


            echo ' <script>                    
                    $(".galeria").nivoLightbox({ effect: "fade" });
                    $(".btns").removeAttr("checked").removeClass("ui-helper-hidden-accessible");		
					$(".btns").change(function(){
					$("#namehotel").html("");
					$("#roomss").html("");
					$("#desayuno").html("");
					$("#tqp").html("$");
					$("#choice span").html("SELECT");
					$("#choice label").removeClass("ui-state-active");
					var label = "label:[for="+$(this).attr("id")+"]";
					if($(this).attr("checked")){
						var hotel = $(this).val();
						var rooms = $("#rooms").val();	                                            		
						var adult1 = $("#adult1").val();
						var child1 = $("#child1").val();
						var adult2 = $("#adult2").val();
						var child2 = $("#child2").val();
						var adult3 = $("#adult3").val();
						var child3 = $("#child3").val();
						var adult4 = $("#adult4").val();
						var child4 = $("#child4").val();
						if(adult2 == null && child2 == null){
						 adult2 = 0;
						 child2 = 0;
						}
						if(adult3 == null && child3 == null){
						 adult3 = 0;
						 child3 = 0;
						}
						if(adult4 == null && child4 == null){
						 adult4 = 0;
						 child4 = 0;
						}
						$(this).removeClass("ui-state-active");
						$(".clean").html("");
						$(label).find("span").html("REMOVE");
						$("#roomsdistri").load("' . Doo::conf()->APP_URL . 'tours/question16/", {  hotel: hotel, adult1:adult1,child1:child1 , adult2:adult2,child2:child2  , adult3:adult3,child3:child3 , adult4:adult4,child4:child4,rooms:rooms} );
					}else{
                                            $(label).removeClass("ui-state-active");
                                            $(label).find("span").html("SELECT");
                                            $(".clean").html("");
					}	
						});	
					   </script>'; //R1807126400

            $sql1 = "SELECT hoteles.id,codigo,categoria,nombre,address,city,zipcode,contacname,phone,email,webpage,breakfast,resoftfe,description,image1,ratesblock.fecha_ini,ratesblock.fecha_fin
					        FROM hoteles INNER JOIN ratesblock 
						ON (hoteles.id = ratesblock.id_hotel and ((ratesblock.fecha_ini BETWEEN $fecha_llegada AND $fecha_salida) OR (ratesblock.fecha_fin BETWEEN $fecha_llegada AND $fecha_salida)
                                                OR (($fecha_llegada BETWEEN ratesblock.fecha_ini AND ratesblock.fecha_fin ) OR ($fecha_salida BETWEEN ratesblock.fecha_ini AND ratesblock.fecha_fin ))     
                                                )
						AND categoria = " . $categoria . ") GROUP BY hoteles.id";

            $rs1 = Doo::db()->query($sql1) or die('error');

            $hoteles1 = $rs1->fetchAll();
            //$contador = 0;
            foreach ($hoteles1 as $datos) {
                echo '<table width="100%" border="0" id="tablah" >
                        <tr>
                            <td colspan="4" height="30" >&nbsp;&nbsp;&nbsp;<font color="#003399" >' . $datos ['nombre'] . '&nbsp;' . ($datos ["categoria"] == 3 ? '<img src="' . Doo::conf()->APP_URL . 'global/img/3.png"  border="0" />' : '' ) . ($datos ["categoria"] == 2 ? '<img src="' . Doo::conf()->APP_URL . 'global/img/2.png"  border="0" />' : '' ) . ($datos ["categoria"] == 4 ? '<img src="' . Doo::conf()->APP_URL . 'global/img/4.png"  border="0" />' : '' ) . '</font> </td>
                        </tr>
                        <tr>
                            <td width="11" height="106" rowspan="2">&nbsp;</td>
                            <td width="176" height="106" rowspan="2"><div align="left"><img src="' . Doo::conf()->APP_URL . $datos['image1'] . '"  width="250" height="190" border="0"  /></div></td>
                            <td width="4" rowspan="2">&nbsp;</td>
                            <td height="82" colspan="2"><div align="center" style="text-align:justify" >' . $datos ['description'] . '</div></td>
                            <td height="82">&nbsp;</td>
                        </tr>
                        <tr>
                        <td width="299" height="21"><font color="#006633">' . ($datos["breakfast"] == 1 ? 'Free Breakfast' : '') . '</font>
                    <br/>';

                $fechai = new DateTime();
                $fechai->setTimestamp($fecha_llegada);

                $fechaf = new DateTime();
                $fechaf->setTimestamp($fecha_salida);

                $inicio = false;
                $mes1 = 0;
                $mes2 = 0;
                $di = -1;
                $df = -1;
                // $ini = $fechai->format("d");    
                while ($fechai->getTimestamp() <= $fechaf->getTimestamp() && $fechai->getTimestamp() <= $fecha_salida) {
                    if (($fechai->getTimestamp() >= $fecha_llegada || $fechai->getTimestamp() <= $fecha_salida) && !$inicio) {
                        $di = $fechai->format('d');
                        $mes1 = $fechai->format('M');
                        $inicio = true;
                    } else {
                        $df = $fechai->format("d");
                        $mes2 = $fechai->format("M");
                    }
                    $fechai->setDate($fechai->format("Y"), $fechai->format("m"), $fechai->format("d") + 1);
                }
                echo '<font color="red" >Not available from ' . date('M-d', $datos['fecha_ini']) . ' to ' . date('M-d', $datos['fecha_fin']) . ' </font><br /><br />
                                              </td>
					        <td width="265">                                              
						 
                                                <td width="">
                                                <div id="choice" align="right"  >												
						  <label for="btn-continue' . $contador . '" >Not Available</label>												
						</div>
                                                </td>
						<td width="10">&nbsp;</td>
                                                <td width="11">&nbsp;</td>
					  </tr>
                                          <tr>
                                          <td colspan="4" width="299">
                                                <div style="margin-left:220px;" >
                                               </div></td>
                                          </tr>

					</table>
								 <br>';

                $contador++;
            }
            echo ' <script>
					  $("input","#hotels").button();
					   </script>';
        } catch (Exception $e) {

            // procedimiento en caso de reportar errores
        }
    }

    public function question3() {
        try {
            $adult = $_SESSION['toursbooking']['adult'];
            $chil = $_SESSION['toursbooking']['child'];

            if (isset($this->params["id3"]) && isset($this->params["id33"])) {

                $number = $this->params["id3"];
                $number2 = $this->params["id33"];
 
                if ($number == 8) {
                    echo '<option value="1">1</option>';
                } else {
                    $dato = 8 - $number;
                    for ($i = 1; $i <= $dato; $i++) {
                        echo '<option value="' . $i . '" ' . ($i == trim($number2) ? 'selected' : '') . ' >' . $i . '</option>';
                    }
                }
            }
            if (isset($this->params["id2"]) && isset($this->params["id22"])) {
                $number1 = $this->params["id2"];
                $number12 = $this->params["id22"];

                echo '<pre>';
                print_r($number12);
                echo '</pre>';
                // die;
                if ($number1 == 7) {
                    echo '<option value="0">0</option>';
                } else {
                    $dato = 7 - $number1;
                    for ($i = 0; $i <= $dato; $i++) {
                        echo '<option value="' . $i . '" ' . ($i == trim($number12) ? 'selected' : '') . '>' . $i . '</option>';
                    }
                }
            }

            //echo 'id =>'.$this->params["id"];
            if (isset($this->params["id"])) {
                $rooms = $this->params["id"];
                echo '<ul > ';
               
                    echo '<li >';
                    // echo 'ADULT: '.$adult.' CHILD: '.$chil;
                    for ($i = 1; $i <= $rooms; $i++) { 
                        echo '<div class="col-lg-12">
                   
                    <table class="table">
                    <thead class="thead-dark" >
                      <tr>
                        <th scope="col">Rooms</th>
                        <th scope="col">Adult</th>
                        <th scope="col">Child</th>
                      </tr>
                    </thead>';

                    echo '<tbody>
                      <tr>
                        <th scope="row">ROOM ' . $i . '</th>
                        <td>                                        
                        <select style="height: 33px; margin: -4px -31px -12px -13px;" name="adult' . $i . '" id="adult' . $i . '" class="tours-list form-control">
                        <option value="1" >1</option>';


                    //    if($i == 1){
                            if($adult== 2){
                            echo '<option value="2">2</option>';
                            }elseif($adult== 3){
                              echo '<option value="2">2</option>';
                                echo '<option value="3">3</option>';
                            }elseif($adult>= 4){
                                echo '<option value="2">2</option>';
                                echo '<option value="3">3</option>';
                                echo '<option value="4">4</option>';
                            }
                        // }elseif($i == 2){

                        //    if($adult== 6){
                        //        echo '<option value="2">2</option>';
                        //        }elseif($adult== 7){
                        //            echo '<option value="2">2</option>';
                        //            echo '<option value="3">3</option>';
                        //        }elseif($adult>= 8){
                        //            echo '<option value="2">2</option>';
                        //            echo '<option value="3">3</option>';
                        //            echo '<option value="4">4</option>';
                        //        }
                    //    }elseif($i == 3){

                        //    if($adult== 10){
                        //        echo '<option value="2">2</option>';
                        //        }elseif($adult== 11){
                        //            echo '<option value="2">2</option>';
                        //            echo '<option value="3">3</option>';
                        //        }elseif($adult>= 12){
                        //            echo '<option value="2">2</option>';
                        //            echo '<option value="3">3</option>';
                        //            echo '<option value="4">4</option>';
                        //        }
                        // }elseif($i == 4){

                        //     if($adult== 14){
                        //        echo '<option value="2">2</option>';
                        //        }elseif($adult== 15){
                        //            echo '<option value="2">2</option>';
                        //            echo '<option value="3">3</option>';
                        //         }elseif($adult>= 16){
                        //            echo '<option value="2">2</option>';
                        //            echo '<option value="3">3</option>';
                        //            echo '<option value="4">4</option>';
                        //         }
                        // }
					//print_r($this->params);
					//die;
						if($chil == 1 AND $chil < $number12){
							$sel1 = "selected";
						}else{
							$sel1 = "";
						}
						if($chil == 2 AND $chil < $number12){
							$sel2 = "selected";
						}else{
							$sel2 = "";
						}
						if($chil == 2 AND $chil < $number12){
							$sel2 = "selected";
						}else{
							$sel2 = "";
						}
						if($chil == 3 AND $chil < $number12){
							$sel3 = "selected";
						}else{
							$sel3 = "";
						}

                        echo '</select>
                    </td>
                        <td>
                        <select style="height: 33px; margin: -4px -31px -12px -13px;"  name="child' . $i . '" id="child' . $i . '" class="tours-list form-control">
                        <option value="0">0</option>';
                          echo '<option value="1" '.$sel1.'>1</option>';
                          if($chil == 2){
                            echo '<option value="2"  '.$sel3.'>2</option>';
                            }elseif($chil == 3){
                              echo '<option value="2">2</option>';
                                echo '<option value="3" '.$sel3.'>3</option>';
                            }elseif($chil == 4){
                                echo '<option value="2">2</option>';
                                echo '<option value="3">3</option>';
                                echo '<option value="4">4</option>';
                            }elseif($chil == 5){
                                echo '<option value="2">2</option>';
                                echo '<option value="3">3</option>';
                                echo '<option value="4">4</option>';
                                echo '<option value="5">5</option>';
                            }elseif($chil >= 6){
                                echo '<option value="2">2</option>';
                                echo '<option value="3">3</option>';
                                echo '<option value="4">4</option>';
                                echo '<option value="5">5</option>';
                                echo '<option value="6">6</option>';
                            }
                        //   echo '<option value="2">2</option>';
                        //   echo '<option value="3">3</option>';
                        echo '</select>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                  </div>


                                <script>
                                         /*seleccion de adulto*/
                                        $("#adult' . $i . '").change(function(){
                                                var id2 = $("#adult' . $i . '").val();
                                                var id22 = $("#child' . $i . '").val();
                                                /*alert(id2);*/

                                                $("#child' . $i . '").load("' . Doo::conf()->APP_URL . 'tours/question5/" + id2 + "/" + id22);


                                                /* Code Include */


					
					$("#namehotel").html("");
					$("#roomss").html("");
					/*$("#desayuno").html("");*/
					$("#tqp").html("$");
					var label = "label:[for="+$(".btns").attr("id")+"]";
					if($(".btns").is(":checked")){
					var hotel = $(".btns").val();
					var rooms = $("#rooms").val();	                                            		
					var adult1 = $("#adult1").val();
					var child1 = $("#child1").val();
					var adult2 = $("#adult2").val();
					var child2 = $("#child2").val();
					var adult3 = $("#adult3").val();
					var child3 = $("#child3").val();
					var adult4 = $("#adult4").val();
					var child4 = $("#child4").val();
					if(adult2 == null && child2 == null){
					 adult2 = 0;
					 child2 = 0;
					}
					if(adult3 == null && child3 == null){
					 adult3 = 0;
					 child3 = 0;
					}
					if(adult4 == null && child4 == null){
					 adult4 = 0;
					 child4 = 0;
					}
					
					
					
                    $(".clean").html("");
				        
				    $("#roomsdistri").load("' . Doo::conf()->APP_URL . 'tours/question16/", {  hotel: hotel, adult1:adult1,child1:child1 , adult2:adult2,child2:child2  , adult3:adult3,child3:child3 , adult4:adult4,child4:child4,rooms:rooms} );
						}
					else{
					
					$(label).removeClass("ui-state-active");
					$(label).find("span").html("SELECT");
					$(".clean").html("");
					}	
						
                                                
                                        /*fincode Include*/
   				       }); 
										 /*seleccion de niño*/ 
										  $("#child' . $i . '").change(function(){
											var id3 = $("#child' . $i . '").val();
											var id33 = $("#adult' . $i . '").val();
											
											/*alert(id3);*/
											//$("#adult' . $i . '").load("' . Doo::conf()->APP_URL . 'tours/question6/" + id3 + "/" + id33);
                                                                                            
  /* Code Include */
                			$("#namehotel").html("");
					$("#roomss").html("");
					/*$("#desayuno").html("");*/
					$("#tqp").html("$");
					var label = "label:[for="+$(".btns").attr("id")+"]";
					if($(".btns").attr("checked")){
					var hotel = $(".btns").val();
					var rooms = $("#rooms").val();	                                            		
					var adult1 = $("#adult1").val();
					var child1 = $("#child1").val();
					var adult2 = $("#adult2").val();
					var child2 = $("#child2").val();
					var adult3 = $("#adult3").val();
					var child3 = $("#child3").val();
					var adult4 = $("#adult4").val();
					var child4 = $("#child4").val();
					if(adult2 == null && child2 == null){
					 adult2 = 0;
					 child2 = 0;
					}
					if(adult3 == null && child3 == null){
					 adult3 = 0;
					 child3 = 0;
					}
					if(adult4 == null && child4 == null){
					 adult4 = 0;
					 child4 = 0;
					}
			            $(".btns").removeClass("ui-state-active");
                                    $(".clean").html("");
				    $(label).find("span").html("REMOVE");
				    $("#roomsdistri").load("' . Doo::conf()->APP_URL . 'tours/question16/", {  hotel: hotel, adult1:adult1,child1:child1 , adult2:adult2,child2:child2  , adult3:adult3,child3:child3 , adult4:adult4,child4:child4,rooms:rooms} );
						}
					else{
					
					$(label).removeClass("ui-state-active");
					$(label).find("span").html("SELECT");
					$(".clean").html("");
					}	
						
                                                
                                                      /*fincode Include*/
                                         
					  });
				  </script>';
                    echo '</li>';
                }
                echo '</ul>';
                echo '<script>  $(".tours-list").change(function(){
									$("#tqp").html("$");
									$( ".btns" ).button( "destroy" );
								$( ".btns:radio").attr("checked", false);
								$( ".btns" ).button(  );
									
									$("#namehotel").html("");
								$("#roomss").html("");
								$("#desayuno").html("");
									
								  });</script>';
            }
        } catch (Exception $e) {
            // procedimiento en caso de reportar errores
        }
    }



    
    public function tours_two() {
        $_SESSION['step-two'] = true;
        $_SESSION['breakfast'] = $_POST['bf'];
        $_SESSION['breakfast2'] = $_POST['bff'];

		// die;
        try {
            extract($_POST, EXTR_SKIP);

            // echo '<pre>';
            // print_r($_SESSION['breakfast']);
            // echo '</pre>';
            // die;

            $hotel = $_POST['hotel'];
            Doo::loadModel("Agency");
            if (isset($_SESSION['data_agency'])) {
                $dat = new Agency($_SESSION['data_agency']);
                $net_rate = ($dat->type_rate == 1) ? true : false;
            } else {
                $dat = new Agency();
                $net_rate = false;
                $dat->type_rate = 0;
                $dat->id = -1;
            }


            $toursbooking = $_SESSION["toursbooking"];
            $fecha = new DateTime();
            $fecha->setTimestamp(strtotime($toursbooking ['fecha_llegada']));

            $fecha2 = new DateTime();
            $fecha2->setTimestamp(strtotime($toursbooking ['fecha_llegada']));

            $fecha3 = new DateTime();
            $fecha3->setTimestamp(strtotime($toursbooking ['fecha_llegada']));

            $fecha4 = new DateTime();
            $fecha4->setTimestamp(strtotime($toursbooking ['fecha_llegada']));

            $fecha_fin = new DateTime();
            $fecha_fin->setTimestamp(strtotime($toursbooking ['fecha_salida']));

            $sql = 'SELECT t1.id,t1.breakfast,t1.resoftfe,t1.nombre,t3.sgl,t3.dbl,t3.tpl,t3.qua,t3.breackfast,t1.super_breakfast  FROM hoteles t1
		     LEFT JOIN comifijas t3 ON (t1.id = t3.id_hotel AND t3.comtax = 1 AND t3.fecha_ini <= ' . strtotime($toursbooking ['fecha_llegada']) . '
             AND t3.fecha_fin  >= ' . strtotime($toursbooking ['fecha_salida']) . ') WHERE t1.id = ?';

            $rs = Doo::db()->query($sql, array(
                $hotel
            ));

            $costohotel = $rs->fetch();
            $sql22 = 'SELECT hc.brackfast,hc.super_breakfast,hc.sgl,hc.dbl,hc.tpl,hc.qua FROM hotel_cost hc INNER JOIN hoteles h ON h.id = hc.id_hotel WHERE hc.id_hotel = ? AND hc.fecha_ini <= ' . strtotime($toursbooking ['fecha_llegada']) . ' AND hc.fecha_fin >= ' . strtotime($toursbooking ['fecha_salida']) . ' ';

           $rs22 = Doo::db()->query($sql22, array(
               $hotel
           ));

           $preciohotel = $rs22->fetch();

           $_SESSION['toursbooking']['breackfastprice'] = $preciohotel['brackfast'];
           $_SESSION['toursbooking']['super_breakfastprice'] =$preciohotel['super_breakfast'];

            // print_r($preciohotel);
            //   exit ;
            // breakfast and resoftfe

            /*
             * if($costohotel['resoftfe'] == 1) { $resoftfe =
             * $costohotel['resortprice']; } else { $resoftfe =0 ; }
             */
            $desayuno1 = 0;
            $desayuno2 = 0;
            $desayuno3 = 0;
            $desayuno4 = 0;
            // print_r($adult1);
            // exit();
  
            if (isset($adult1)) {
                while ($fecha->format("Y-m-d") < $fecha_fin->format("Y-m-d")) {

                    //$fec = strtotime($toursbooking ['fecha_llegada']);//$fecha->getTimestamp();
                    $fec = $fecha->getTimestamp();
                    if ($dat->type_rate == 0) {

                        $sql = 'SELECT t1.id,t1.breakfast,t1.super_breakfast, t1.resoftfe,t1.nombre,t3.sgl,t3.dbl,t3.tpl,t3.qua,t3.breackfast, t1.categoria
			 		FROM hoteles t1	
						LEFT JOIN comifijas t3 ON (t1.id = t3.id_hotel 
								AND t3.comtax = 1 
								AND t3.fecha_ini <= ' . $fec . ' 
								AND t3.fecha_fin  >= ' . $fec . ')
					WHERE t3.id_hotel  = ' . $hotel . '';
                    } else {
                        $sql = 'SELECT t1.id,t1.breakfast,t1.super_breakfast ,t1.resoftfe,t1.nombre,t3.sgl,t3.dbl,t3.tpl,t3.qua,t3.breackfast, t1.categoria
			 		FROM hoteles t1	
						LEFT JOIN comifijas t3 ON (t1.id = t3.id_hotel 
								AND t3.netax = 1 
								AND t3.fecha_ini <= ' . $fec . ' 
								AND t3.fecha_fin  >= ' . $fec . ')
				    	WHERE t3.id_hotel  = ' . $hotel . '';
                    }

                    $rs = Doo::db()->query($sql);
                    $costohotel = $rs->fetch();
                    if (empty($costohotel)) {
                        echo ' <script>$("input[type=\'checkbox\'").attr("checked",false).change();
                            $( "#dialog-message-t" ).dialog({
                                modal: true,
                                buttons: {
                                    Ok: function() {
                                        $( this ).dialog( "close" );
                                    }
                                }
                            });</script>';
                        //exit;
                    }
                    if ($adult1 == 1) {
                        $totalhotel1v += $costohotel ['sgl'];
                    }
                    if ($adult1 == 2) {
                        $totalhotel1v += $costohotel ['dbl'];
                    }
                    if ($adult1 == 3) {
                        $totalhotel1v += $costohotel ['tpl'];
                    }
                    if ($adult1 == 4) {
                        $totalhotel1v += $costohotel ['qua'];
                    }

                    if ($costohotel['super_breakfast'] == 1) {
                        $desayuno1 += ($costohotel ['breackfast']);
                    } else {
                        $desayuno1 += 0;
                        $breakfast = 0;
                    }
                    date_add($fecha, date_interval_create_from_date_string('1 days'));
                }
                $totalhotel1 = (round($totalhotel1v) * $adult1);
                $desayuno1 = $desayuno1 * $adult1;

            } else {
                $totalhotel1 = 0;
            }

            // /room # 2
            if (isset($adult2)) {

                while ($fecha2->format("Y-m-d") < $fecha_fin->format("Y-m-d")) {

                    //$fec = strtotime($toursbooking ['fecha_llegada']);//$fecha->getTimestamp();
                    $fec = $fecha2->getTimestamp();
                    if ($dat->type_rate == 0) {

                        $sql = 'SELECT t1.id,t1.breakfast,t1.super_breakfast, t1.resoftfe,t1.nombre,t3.sgl,t3.dbl,t3.tpl,t3.qua,t3.breackfast, t1.categoria
			 		FROM hoteles t1	
						LEFT JOIN comifijas t3 ON (t1.id = t3.id_hotel 
								AND t3.comtax = 1 
								AND t3.fecha_ini <= ' . $fec . ' 
								AND t3.fecha_fin  >= ' . $fec . ')
					WHERE t3.id_hotel  = ' . $hotel . '';
                    } else {
                        $sql = 'SELECT t1.id,t1.breakfast,t1.super_breakfast ,t1.resoftfe,t1.nombre,t3.sgl,t3.dbl,t3.tpl,t3.qua,t3.breackfast, t1.categoria
			 		FROM hoteles t1	
						LEFT JOIN comifijas t3 ON (t1.id = t3.id_hotel 
								AND t3.netax = 1 
								AND t3.fecha_ini <= ' . $fec . ' 
								AND t3.fecha_fin  >= ' . $fec . ')
				    	WHERE t3.id_hotel  = ' . $hotel . '';
                    }
                    $rs = Doo::db()->query($sql);
                    $costohotel = $rs->fetch();
                    if (empty($costohotel)) {
                        echo ' <script>$("input[type=\'checkbox\'").attr("checked",false).change();
                            $( "#dialog-message-t" ).dialog({
                                modal: true,
                                buttons: {
                                    Ok: function() {
                                        $( this ).dialog( "close" );
                                    }
                                }
                            });</script>';
                    }

                    if ($adult2 == 1) {
                        $totalhotel2v += $costohotel ['sgl'];
                    }
                    if ($adult2 == 2) {
                        $totalhotel2v += $costohotel ['dbl'];
                    }
                    if ($adult2 == 3) {
                        $totalhotel2v += $costohotel ['tpl'];
                    }
                    if ($adult2 == 4) {
                        $totalhotel2v += $costohotel ['qua'];
                    }
                    if ($adult2 == 0) {
                        $totalhotel2v = 0;
                    }
                    if (($costohotel['super_breakfast'] == 1)) {
                        $desayuno2 += ($costohotel ['breackfast'] );
                    } else {
                        $desayuno2 += 0;
                        $breakfast = 0;
                    }

                    date_add($fecha2, date_interval_create_from_date_string('1 days'));
                }

                $totalhotel2 = round($totalhotel2v) * $adult2;
                $desayuno2 = $desayuno2 * $adult2;
            } else {
                $totalhotel2 = 0;
            }

            // /room # 3
            if (isset($adult3)) {
                while ($fecha3->format("Y-m-d") < $fecha_fin->format("Y-m-d")) {

                    //$fec = strtotime($toursbooking ['fecha_llegada']);//$fecha->getTimestamp();
                    $fec = $fecha3->getTimestamp();
                    if ($dat->type_rate == 0) {

                        $sql = 'SELECT t1.id,t1.breakfast,t1.super_breakfast, t1.resoftfe,t1.nombre,t3.sgl,t3.dbl,t3.tpl,t3.qua,t3.breackfast, t1.categoria
			 		FROM hoteles t1	
						LEFT JOIN comifijas t3 ON (t1.id = t3.id_hotel 
								AND t3.comtax = 1 
								AND t3.fecha_ini <= ' . $fec . ' 
								AND t3.fecha_fin  >= ' . $fec . ')
					WHERE t3.id_hotel  = ' . $hotel . '';
                    } else {
                        $sql = 'SELECT t1.id,t1.breakfast,t1.super_breakfast ,t1.resoftfe,t1.nombre,t3.sgl,t3.dbl,t3.tpl,t3.qua,t3.breackfast, t1.categoria
			 		FROM hoteles t1	
						LEFT JOIN comifijas t3 ON (t1.id = t3.id_hotel 
								AND t3.netax = 1 
								AND t3.fecha_ini <= ' . $fec . ' 
								AND t3.fecha_fin  >= ' . $fec . ')
				    	WHERE t3.id_hotel  = ' . $hotel . '';
                    }
                    $rs = Doo::db()->query($sql);
                    $costohotel = $rs->fetch();
                    if (empty($costohotel)) {
                        echo ' <script>$("input[type=\'checkbox\'").attr("checked",false).change();
                            $( "#dialog-message-t" ).dialog({
                                modal: true,
                                buttons: {
                                    Ok: function() {
                                        $( this ).dialog( "close" );
                                    }
                                }
                            });</script>
                     ';
                        //exit;
                    }

                    if ($adult3 == 1) {

                        $totalhotel3v += $costohotel['sgl'];
                    }
                    if ($adult3 == 2) {

                        $totalhotel3v += $costohotel['dbl'];
                    }
                    if ($adult3 == 3) {

                        $totalhotel3v += $costohotel['tpl'];
                    }
                    if ($adult3 == 4) {

                        $totalhotel3v += $costohotel['qua'];
                    }
                    if ($adult3 == 0) {

                        $totalhotel3v = 0;
                    }
                    if (($costohotel['super_breakfast'] == 1)) {
                        $desayuno3 += ($costohotel ['breackfast'] );
                    } else {
                        $desayuno3 += 0;
                        $breakfast = 0;
                    }
                    date_add($fecha3, date_interval_create_from_date_string('1 days'));
                }
                $totalhotel3 = (round($totalhotel3v) * $adult3);
                $desayuno3 = $desayuno3 * $adult3;
            } else {
                $totalhotel3 = 0;
            }
            //room # 4
            if (isset($adult4)) {
                while ($fecha4->format("Y-m-d") < $fecha_fin->format("Y-m-d")) {

                    //$fec = strtotime($toursbooking ['fecha_llegada']);//$fecha->getTimestamp();
                    $fec = $fecha4->getTimestamp();
                    if ($dat->type_rate == 0) {

                        $sql = 'SELECT t1.id,t1.breakfast,t1.super_breakfast, t1.resoftfe,t1.nombre,t3.sgl,t3.dbl,t3.tpl,t3.qua,t3.breackfast, t1.categoria
			 		FROM hoteles t1	
						LEFT JOIN comifijas t3 ON (t1.id = t3.id_hotel 
								AND t3.comtax = 1 
								AND t3.fecha_ini <= ' . $fec . ' 
								AND t3.fecha_fin  >= ' . $fec . ')
					WHERE t3.id_hotel  = ' . $hotel . '';
                    } else {
                        $sql = 'SELECT t1.id,t1.breakfast,t1.super_breakfast ,t1.resoftfe,t1.nombre,t3.sgl,t3.dbl,t3.tpl,t3.qua,t3.breackfast, t1.categoria
			 		FROM hoteles t1	
						LEFT JOIN comifijas t3 ON (t1.id = t3.id_hotel 
								AND t3.netax = 1 
								AND t3.fecha_ini <= ' . $fec . ' 
								AND t3.fecha_fin  >= ' . $fec . ')
				    	WHERE t3.id_hotel  = ' . $hotel . '';
                    }
                    $rs = Doo::db()->query($sql);
                    $costohotel = $rs->fetch();
                    if (empty($costohotel)) {
                        echo '<script>$("input[type=\'checkbox\'").attr("checked",false).change();
                            $( "#dialog-message-t" ).dialog({
                                modal: true,
                                buttons: {
                                    Ok: function() {
                                        $( this ).dialog("close");
                                    }
                                }
                            });</script>';
 
                    }
                    if ($adult4 == 1) {
                        $totalhotel4v += $costohotel ['sgl'];
                    }
                    if ($adult4 == 2) {
                        $totalhotel4v += $costohotel ['dbl'];
                    }
                    if ($adult4 == 3) {
                        $totalhotel4v += $costohotel ['tpl'];
                    }
                    if ($adult4 == 4) {
                        $totalhotel4v += $costohotel ['qua'];
                    }
                    if ($adult4 == 0) {
                        $totalhotel4v = 0;
                    }
                    if ($costohotel ['breakfast'] == 0 && ($costohotel['super_breakfast'] == 1)) {
                        $desayuno4 += ($costohotel ['breackfast'] );
                    } else {
                        $desayuno4 += 0;
                        $breakfast = 0;
                    }
                    date_add($fecha4, date_interval_create_from_date_string('1 days'));
                }
                $totalhotel4 = (round($totalhotel4v) * $adult4);
                $desayuno4 = $desayuno4 * $adult4;
            } else {
                $totalhotel4 = 0;
            }


            $desayuno = $desayuno1 + $desayuno2 + $desayuno3 + $desayuno4;



            //Todavia no se le suma el desayuno
            //$tohotel = $totalhotel1 + $totalhotel2 + $totalhotel3 + $totalhotel4+$desayuno;
            $tohotel = $totalhotel1 + $totalhotel2 + $totalhotel3 + $totalhotel4;
            //echo $tohotel;exit;
            ////////////////////////////////////////cierre service hotel
            //////////////////////////////////////// service hotel
            //if adult cantidad

            if (!isset($adult1)) {
                $adult1 = 0;
            }
            if (!isset($adult2)) {
                $adult2 = 0;
            }
            if (!isset($adult3)) {
                $adult3 = 0;
            }
            if (!isset($adult4)) {
                $adult4 = 0;
            }
            // if child cantidad
            if (!isset($child1)) {
                $child1 = 0;
            }
            if (!isset($child2)) {
                $child2 = 0;
            }
            if (!isset($child3)) {
                $child3 = 0;
            }
            if (!isset($child4)) {
                $child4 = 0;
            }

            $_SESSION["toursbooking"]['adult_r1'] = $adult1;
            $_SESSION["toursbooking"]['adult_r2'] = $adult2;
            $_SESSION["toursbooking"]['adult_r3'] = $adult3;
            $_SESSION["toursbooking"]['adult_r4'] = $adult4;
            $_SESSION["toursbooking"]['child_r1'] = $child1;
            $_SESSION["toursbooking"]['child_r2'] = $child2;
            $_SESSION["toursbooking"]['child_r3'] = $child3;
            $_SESSION["toursbooking"]['child_r4'] = $child4;
            $totaladult = $adult1 + $adult2 + $adult3 + $adult4;
            $totalchild = $child1 + $child2 + $child3 + $child4;
            $totalpax = $totaladult + $totalchild;

            // print_r($totalpax);
            // exit();
            if ($totalpax == 0) {
                return Doo::conf()->APP_URL . "tours";
                //exit();
            }
            if (!isset($_SESSION ['menosbuff']['buff'])) {
                $breakfast = $buffet;
                $desayuno = 0;
            } else {
                if ($_SESSION ['menosbuff']['buff'] == true) {
                    $desayuno = $desayuno;
                } else {
                    $desayuno = 0;
                }
            }
            $_SESSION['toursbooking']['trasport_por_adult'] = 0;
            $_SESSION['toursbooking']['trasport_por_child'] = 0;

            if (isset($toursbooking ['trip1'])) {
                Doo::loadController('admin/ToursController');
                $toursOperador = new ToursController();
                $anio = substr($toursbooking['fecha_llegada'], 0, 4);
                $prices = $toursOperador->precioTripTours($toursbooking['trip1'], $dat->type_rate, $dat->id, $anio);

                if (!empty($prices)) {
                    $priceadult1 = $prices ['adult'] * $totaladult;
                    $pricechild1 = $prices ['child'] * $totalchild;
                    $trip1 = number_format($priceadult1, 2, '.', '') + number_format($pricechild1, 2, '.', '');
                    $_SESSION['toursbooking']['trasport_total1'] = $trip1;
                    $_SESSION['toursbooking']['trasport_por_adult'] = $priceadult1;
                    $_SESSION['toursbooking']['trasport_por_child'] = $pricechild1;

                    /** Discriminacion de precios */
                    $_SESSION['toursbooking']['priceadult'] = $prices ['adult'];
                    $_SESSION['toursbooking']['pricechil'] = $prices ['child'];

                    /** FIN Discriminacion de precios */
                } else {
                    $trip1 = 0;
                    $priceadult1 = 0;
                    $pricechild1 = 0;
                }
            //                 echo '<pre>';
            // print_r($prices);
            // echo '</pre>';
            // die;
            } else {
                $trip1 = 0;
                $priceadult1 = 0;
                $pricechild1 = 0;
            }

            if (isset($toursbooking['trip2'])) {
                Doo::loadController('admin/ToursController');
                $toursOperador = new ToursController();
                $anio = substr($toursbooking['fecha_salida'], 0, 4);
                $prices = $toursOperador->precioTripTours($toursbooking ['trip2'], $dat->type_rate, $dat->id, $anio);
                if (!empty($prices)) {
                    $priceadult2 = $prices ['adult'] * $totaladult;
                    $pricechild2 = $prices ['child'] * $totalchild;
                    $trip2 = number_format($pricechild2, 2, '.', '') + number_format($priceadult2, 2, '.', '');
                    $_SESSION['toursbooking']['trasport_total2'] = $trip2;

                    $_SESSION['toursbooking']['trasport_por_adult'] = $_SESSION['toursbooking']['trasport_por_adult'] + $priceadult2;
                    $_SESSION['toursbooking']['trasport_por_child'] = $_SESSION['toursbooking']['trasport_por_child'] + $pricechild2;

                    /** Discriminacion de precios */
                    $_SESSION['toursbooking']['2priceadult'] = $prices ['adult'];
                    $_SESSION['toursbooking']['2pricechil'] = $prices ['child'];
                    /** FIN Discriminacion de precios */
                } else {
                    $trip2 = 0;
                    $priceadult2 = 0;
                    $pricechild2 = 0;
                }
            } else {
                $trip2 = 0;
                $priceadult2 = 0;
                $pricechild2 = 0;
            }

            /* echo json_encode($_SESSION['toursbooking']);
              exit; */
            //   echo '<pre>';
            //   print_r($toursbooking ['sarrival']);
            //   echo '</pre>';
            //   die;
            if ($toursbooking ['sarrival'] == 2) {
                $fechal = substr($toursbooking['fecha_llegada'], 0, 4) . '-01-01 00:00:00';
                if ($dat->type_rate == 1) {// Se busca SpecialNet
                    $sql = 'SELECT id,cantidad,price
				FROM tarifasvip 
				WHERE cantidad = ? 
					AND (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 )
					AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                    $type = 2;
                    $rs = Doo::db()->query($sql, array($totalpax, $type, $dat->id, $fechal));
                    $pricesvip = $rs->fetch();

                    if (empty($pricesvip)) {
                        //Si no encuentra Buscamos Net.
                        $sql = 'SELECT id,cantidad,price
				FROM tarifasvip 
				WHERE cantidad = ? 
					AND (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 )
					AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                        $type = 1;
                        $rs = Doo::db()->query($sql, array($totalpax, $type, $dat->id, $fechal));
                        $pricesvip = $rs->fetch();
                    }
                } else {
                    $sql = 'SELECT id,cantidad,price
				FROM tarifasvip 
				WHERE cantidad = ? 
					AND (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 )
					AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                    $rs = Doo::db()->query($sql, array($totalpax, $dat->type_rate, $dat->id, $fechal));
                    $pricesvip = $rs->fetch();
                }

                if (!empty($pricesvip)) {
                    $vip1 = number_format($pricesvip ['price'], 2, '.', '');
                    $_SESSION['toursbooking']['trasport_total1'] = $vip1;
                }
            } else {
                $vip1 = 0;
            }

            if ($toursbooking ['sdeparture'] == 2) {
                $fechas = substr($toursbooking['fecha_salida'], 0, 4) . '-01-01 00:00:00';
                if ($dat->type_rate == 1) {
                    //Se busca SpecialNet
                    $sql = 'SELECT id,cantidad,price
				FROM tarifasvip 
				WHERE cantidad = ? 
					AND (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 )
					AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                    $type = 2;
                    $rs = Doo::db()->query($sql, array($totalpax, $type, $dat->id, $fechas));
                    $pricesvip = $rs->fetch();

                    if (empty($pricesvip)) {//Si no encuentra Buscamos Net.
                        $sql = 'SELECT id,cantidad,price
				FROM tarifasvip 
				WHERE cantidad = ? 
					AND (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 )
					AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                        $type = 1;
                        $rs = Doo::db()->query($sql, array($totalpax, $type, $dat->id, $fechas));
                        $pricesvip = $rs->fetch();
                    }
                } else {
                    $sql = 'SELECT id,cantidad,price
				FROM tarifasvip 
				WHERE cantidad = ? 
					AND (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 )
					AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                    $rs = Doo::db()->query($sql, array($totalpax, $dat->type_rate, $dat->id, $fechas));
                    $pricesvip = $rs->fetch();
                }

                if (!empty($pricesvip)) {
                    $vip2 = number_format($pricesvip ['price'], 2, '.', '');
                    $_SESSION['toursbooking']['trasport_total2'] = $vip2;
                }
            } else {
                $vip2 = 0;
            }

            /* if prices transfer in airport */
            if ($toursbooking ['sarrival'] == 3) {
                $fechal = substr($toursbooking['fecha_llegada'], 0, 4) . '-01-01 00:00:00';
                if ($dat->type_rate == 1) {// Se busca SpecialNet
                    $sql = 'SELECT id,cantidad,price
				FROM tarifaplane 
				WHERE cantidad = ? 
					AND (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 ) 
                                        AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                    $type = 2;
                    $rs = Doo::db()->query($sql, array($totalpax, $type, $dat->id, $fechal));
                    $pricesbyplane = $rs->fetch();

                    if (empty($pricesbyplane)) {
                        //Si no encuentra Buscamos Net.
                        $sql = 'SELECT id,cantidad,price
				FROM tarifaplane 
				WHERE cantidad = ? 
					AND (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 ) 
                                        AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                        $type = 1;
                        $rs = Doo::db()->query($sql, array($totalpax, $type, $dat->id, $fechal));
                        $pricesbyplane = $rs->fetch();
                    }
                } else {
                    $sql = 'SELECT id,cantidad,price
				FROM tarifaplane 
				WHERE cantidad = ? 
					AND (type_rate = '.$dat->type_rate.' )
					AND (id_agency = ? or id_agency = -1 ) 
                                        AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                    $rs = Doo::db()->query($sql, array($totalpax, $dat->id, $fechal));
                    $pricesbyplane = $rs->fetch();
                }
                if (!empty($pricesbyplane)) {
                    $byplane1 = number_format($pricesbyplane ['price'], 2, '.', '');
                    $_SESSION['toursbooking']['trasport_total1'] = $byplane1;
                }
            } else {
                $byplane1 = 0;
            }

            if ($toursbooking ['sdeparture'] == 3) {
                $fechas = substr($toursbooking['fecha_salida'], 0, 4) . '-01-01 00:00:00';
                if ($dat->type_rate == 1) {// Se busca SpecialNet
                    $sql = 'SELECT id,cantidad,price
				FROM tarifaplane 
				WHERE cantidad = ? 
					AND (type_rate = '.$type.' )
					AND (id_agency = ? or id_agency = -1 ) 
                                        AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                    $type = 2;
                    $rs = Doo::db()->query($sql, array($totalpax, $dat->id, $fechas));
                    $pricesbyplane = $rs->fetch();

                    if (empty($pricesbyplane)) {//Si no encuentra Buscamos Net.
                        $sql = 'SELECT id,cantidad,price
				FROM tarifaplane 
				WHERE cantidad = ? 
					AND (type_rate = '.$type.' )
					AND (id_agency = ? or id_agency = -1 ) 
                                        AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                        $type = 1;
                        $rs = Doo::db()->query($sql, array($totalpax, $dat->id, $fechas));
                        $pricesbyplane = $rs->fetch();
                    }
                } else {
                    $sql = 'SELECT id,cantidad,price
				FROM tarifaplane 
				WHERE cantidad = ? 
					AND (type_rate = '.$dat->type_rate.' )
					AND (id_agency = ? or id_agency = -1 ) 
                                        AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                    $rs = Doo::db()->query($sql, array($totalpax, $dat->id, $fechas));
                    $pricesbyplane = $rs->fetch();
                }

                if (!empty($pricesbyplane)) {
                    $byplane2 = number_format($pricesbyplane ['price'], 2, '.', '');
                    $_SESSION['toursbooking']['trasport_total2'] = $byplane2;
                }
            } else {
                $byplane2 = 0;
            }

            /* if prices by car */

            if ($toursbooking['sarrival'] == 4) {

                $fechal = substr($toursbooking['fecha_llegada'], 0, 4) . '-01-01 00:00:00';
                if ($dat->type_rate == 1) {// Se busca SpecialNet
                    $sql = 'SELECT id,price
				FROM tarifacar 
				WHERE (type_rate = '.$type.' )
					AND (id_agency = ? or id_agency = -1 )
					AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                    $type = 2;
                    $rs = Doo::db()->query($sql, array($dat->id, $fechal));
                    $pricescar = $rs->fetch();

                    if (empty($pricescar)) {//Si no encuentra Buscamos Net.
                        $sql = 'SELECT id,price
				FROM tarifacar 
				WHERE (type_rate = '.$type.' )
					AND (id_agency = ? or id_agency = -1 )
					AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                        $type = 1;
                        $rs = Doo::db()->query($sql, array($dat->id, $fechal));
                        $pricescar = $rs->fetch();
                    }
                } else {
                    $sql = 'SELECT id,price
				FROM tarifacar 
				WHERE (type_rate = '.$dat->type_rate.' )
					AND (id_agency = ? or id_agency = -1 )
					AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                    $rs = Doo::db()->query($sql, array($dat->id, $fechal));
                    $pricescar = $rs->fetch();
                }

                if (!empty($pricescar)) {
                    $car = number_format($pricescar ['price'], 2, '.', '');
                    $_SESSION['toursbooking']['trasport_total1'] = $car;
                }
            } else {
                $car = 0;
            }
            // echo '<pre>';
            // print_r($pricescar);
            // echo '</pre>';
            // exit();
            $tq = $trip1 + $trip2 + $vip1 + $vip2 + $byplane1 + $byplane2 + $car + $tohotel + $desayuno;
            unset($_SESSION['toursbooking']['totaltotal'] );
            // echo "TQ".number_format($tq,2,'.','');
            // //////////////////////////////////cierre services transporte
            $_SESSION['toursbooking']['tq'] = $tq/* $_SESSION['toursbooking']['tq'] */;
            $_SESSION['toursbooking']['tq1'] = $_SESSION ['toursbooking'] ['tq'];
            $_SESSION['toursbooking']['tqp'] = $tq / $totalpax;
            $_SESSION['toursbooking']['tqp1'] = $_SESSION ['toursbooking'] ['tqp'];
            $_SESSION['toursbooking']['dbufe'] = $breakfast;
            $_SESSION["toursbooking"]["totalhotel"] = $tohotel;
            $_SESSION["toursbooking"]["transport1"] = $trip1 + $trip2 + $vip1 + $vip2 + $byplane1 + $byplane2 + $car;
            $_SESSION["toursbooking"]["hotel"] = $costohotel ['nombre'];
            $_SESSION["toursbooking"]["desayuno"] = $desayuno;
            $_SESSION["toursbooking"]["hotelid"] = $hotel;
            $_SESSION["toursbooking"]["rooms"] = $rooms;
            $_SESSION["toursbooking"]["adults"] = $totaladult;
            $_SESSION["toursbooking"]["totalpax"] = $totalpax;
            $_SESSION["toursbooking"]["childs"] = $totalchild;
            $_SESSION["toursbooking"]["totaltotal"] = number_format(($totalpax * $_SESSION['toursbooking']['tqp']), 2, '.', '');
            $_SESSION["toursbooking"]["comision_agency"] = number_format(((!$net_rate) ? (( $_SESSION ["toursbooking"] ["totaltotal"] ) * (($this->cal_equipament()) / 100)) : 10.00), 2, '.', '');

            //echo '<script>location.href="' . Doo::conf()->APP_URL . "step-three" . '"</script>';
            //header("Location: ".Doo::conf()->APP_URL . "step-three");
            return Doo::conf()->APP_URL . "step-three";
        } catch (Exception $e) {
            //echo 'algo';
            // procedimiento en caso de reportar errores
        }
    }
    
    public function rangodate($fecha1,$fecha2){
        $fecha_llegada = $_SESSION['toursbooking']['fecha_llegada'];
        $fecha_retorno = $_SESSION['toursbooking']['fecha_salida'];
        // $dia = $_SESSION['toursbooking']['dias'];
        $noche = $_SESSION['toursbooking']['noches'];

            $fechaInicio = $fecha_llegada;
            $fechaFin = $fecha_retorno;
            $tiempoInicio  = strtotime($fechaInicio);
            $tiempoFin  = strtotime($fechaFin );
            $dia = 86400;
            $c = 0;
            while($tiempoInicio <= $tiempoFin){
                $fechaActual = date("Y-m-d", $tiempoInicio);
                // echo '<pre>';
                // printf("Fecha dentro del ciclo: %s\n", $fechaActual ." >= ". $fecha1." -----AND------ ".$fechaActual ."<= ". $fecha2."----> ".$valor);
                // var_dump($valor);
                // echo '</pre>';
                // if($fecha1 <= $fechaActual AND $fecha2 >= $fechaFin){
                if($fechaActual  >= $fecha1 && $fechaActual <= $fecha2){
                    // if($fechaFin <= $fecha2){
                    $valor = true;
                    break;
                    // }else{
                        // $valor = false;
                    // }
                }else{
                    $valor = false;
                }
                // echo '<pre>';
                // printf("Fecha dentro del ciclo: %s\n", $fechaActual ." >= ". $fecha1." -----AND------ ".$fechaFin ." <= ". $fecha2."----> ".$valor);
                // var_dump($valor);
                // echo '</pre>';
                # Sumar el incremento para que en algún momento termine el ciclo
                $tiempoInicio += $dia;
            }
            // echo $date1;
            // echo '<br>';
            // echo $fecha_s;
            // echo '<br>';
            // print_r($response2);
            // echo '<pre>';
            // echo $c;
            // echo '<pre>';
            // echo $fechaFin ." <= ". $fecha2;
            // echo '<pre>';
            // echo $fecha1;
            // echo '<pre>';
            // echo $fecha2;
            // echo '<pre>';
            // var_dump($valor);
            // echo '</pre>';
            // // // }
            // die;
            return $valor;
     }

    public function step_three() {
        /* echo json_encode($_SESSION['toursbooking']);
          exit;isset($_SESSION['step-two']) && */
  
        if (isset($_SESSION ['toursbooking'])) {
            
            $_SESSION['num'] = 0;
            $_SESSION['var'] = '';
            if (isset($_SESSION['onedaytour'])) {
                if ($_SESSION['onedaytour'] == true) {
                    return Doo::conf()->APP_URL . "tours";
                    //exit();
                }
            }

            if ($_SESSION ['toursbooking']["totalpax"] == 0) {
                return Doo::conf()->APP_URL . "tours";
                //exit();
            }
            try {
                if (isset($_SESSION ['toursbooking'] ['pasopostpark'])) {
                    unset($_SESSION ['toursbooking'] ['pasopostpark']);
                }
                if (isset($_SESSION ['toursbooking'] ['parktotal'])) {
                    unset($_SESSION ['toursbooking'] ['parktotal']);
                }
                if (isset($_SESSION ['toursbooking'] ['tqp'])) {
                    unset($_SESSION ['toursbooking'] ['tqp']);
                }

                if (isset($_SESSION ['grupos'])) {
                    unset($_SESSION ['grupos']);
                }
                if (isset($_SESSION ['grupos1'])) {
                    unset($_SESSION ['grupos1']);
                }
                if (isset($_SESSION ['toursbooking'] ['ticketpark'])) {
                    unset($_SESSION ['toursbooking'] ['ticketpark']);
                }

                if (isset($_SESSION ['toursbooking'] ['ticketpark'])) {
                    unset($_SESSION ['toursbooking'] ['paso']);
                }
                if (isset($_SESSION ['toursbooking'] ['parktotal_adult'])) {
                    unset($_SESSION ['toursbooking'] ['parktotal_adult']);
                }
                if (isset($_SESSION ['toursbooking'] ['parktotal_child'])) {
                    unset($_SESSION ['toursbooking'] ['parktotal_child']);
                }

                // $this->costoHotel();

                // echo '<pre>';
                // print_r($_SESSION['toursbooking']);
                // echo '</pre>';
                // die;
                unset($_SESSION['step-two']);
                /** Imagenes de Magic Kingdom * */
                // $id_parque = 7;
                // $mgk = Doo::db()->find("Imagenes_parques", array("asc" => "orden", "where" => "id_parques = ? ", "param" => array($id_parque)));
                // //print_r($mgk);
                // $html_img = "";
                // if (!empty($mgk)) {
                //     $contador_img = 1;
                //     foreach ($mgk as $values_img) {
                //         if ($contador_img == 1) {
                //             $html_img .= '<a class="galeria" title="' . $values_img->descripcion . '" data-lightbox-gallery="' . $id_parque . '" href="' . Doo::conf()->APP_URL . 'global/' . $values_img->ruta_resize . '"> <img  src="' . Doo::conf()->APP_URL . 'global/img/wall-disney-mk.png"/> </a>';
                //         } else {
                //             $html_img .= '<a class="galeria" style="display:none;" title="' . $values_img->descripcion . '" href="' . Doo::conf()->APP_URL . 'global/' . $values_img->ruta_resize . '" data-lightbox-gallery="' . $id_parque . '"></a>';
                //         }
                //         $contador_img++;
                //     }
                // } else {
                //     $html_img .= '<img  src="' . Doo::conf()->APP_URL . 'global/img/wall-disney-mk.png"/>';
                // }
                
                // echo '<pre>';
                // print_r($html_img);
                // echo '</pre>';
                // die;
                // $this->data["magk"] = $html_img;
                /** Fin Magic Kingdom */
                /** Imagenes de Epcot * */
                // $id_parque = 8;
   
                // $this->data["op"] = $html_img;
                /** Fin Orlando Premium Outlet Mall * */
                $this->data ['rootUrl'] = Doo::conf()->APP_URL;
                /* consulta para sacar la categoria del hotel */
                $hotelCategoria = "SELECT categoria FROM hoteles WHERE id = '" . $_SESSION['toursbooking']['hotelid'] . "'";
                $res = Doo::db()->query($hotelCategoria);
                $categoria = $res->fetchAll();
                foreach ($categoria as $ca) {
                    $idCategoria = $ca['categoria'];
                }
                // print_r($hotelCategoria);
                /* consulta para sacar los precios de los hoteles */
                $fecha_ini = strtotime($_SESSION['toursbooking']['fecha_llegada']);
                $fecha_fin = strtotime($_SESSION['toursbooking']['fecha_salida']);
                
                /* Consulta para sacar el id del tarifario de la agencia */
                $sqlTarifario = "SELECT id_tour as tarifario,id_tour2 as tarifario2 FROM agencia WHERE id = '53'";
                $resTarifario = Doo::db()->query($sqlTarifario);
                $idTarifario = $resTarifario->fetch();

                if($fecha_ini > '1576213200'){ //13-12-2019 00:00:00
                    $_SESSION['toursbooking']['tarifario'] = $idTarifario['tarifario2'];
                    $id_tour = $idTarifario['tarifario2'];
                    // $_SESSION['toursbooking']['tarifario'] = 112;
                    // $id_tour = 112;
                }else{
                    $_SESSION['toursbooking']['tarifario'] = $idTarifario['tarifario'];
                    $id_tour = $idTarifario['tarifario'];
                    // $_SESSION['toursbooking']['tarifario'] = 112;
                    // $id_tour = 112;
                }

                //echo $fecha_ini.'-'.$_SESSION['toursbooking']['hotelid'].'-'.$idCategoria.'-'.$idTarifario['tarifario'];
                // $sqlHotel = "SELECT * FROM comifijas WHERE id_hotel = '" . $_SESSION['toursbooking']['hotelid'] . "' 
                //               AND categoria = '" . $idCategoria . "'
                //               AND id_ratesvalid = '" . $idTarifario['tarifario'] . "' 
                //               AND fecha_ini <= '" . $fecha_ini . "' 
                //               AND fecha_fin >= '" . $fecha_fin . "'";
                // $res1 = Doo::db()->query($sqlHotel);
                // $respuesta = $res1->fetchAll();
                // foreach ($respuesta as $respuesta) {
                    
                // }
                $hotel = $_SESSION['toursbooking']['hotelid'];
               
                // if($idCategoria == 2){
                    $sql2 = "SELECT * FROM comifijas WHERE id_hotel = '$hotel' AND id_ratesvalid = '$id_tour' ";
                    $result2 = Doo::db()->query($sql2);
                    $response2 = $result2->fetch(PDO::FETCH_OBJ);

                    $sql3 = "SELECT * FROM ratesvalid WHERE  id = '$id_tour' ";
                    $result3 = Doo::db()->query($sql3);
                    $response3 = $result3->fetch(PDO::FETCH_OBJ);
                // }else{
                    // $sql2 = "SELECT * FROM comifijas WHERE id_hotel = '$hotel' AND id_ratesvalid = '$id_tour' ";
                    // $rs2 = Doo::db()->query($sql2);
                    // $tarimode = $rs2->fetchAll();
                //     $result2 = Doo::db()->query($sql2);
                //     $response2 = $result2->fetch(PDO::FETCH_OBJ);
                // }
                // echo '<pre>';
                // var_dump($id_tour);
                // print_r($response2);
                // echo '</pre>';
                // die;
                // $rs = Doo::db()->query($sql);
                // $tarivalue = $rs->fetchAll();
                // if($response2->sgl == 0){
                    
                    
                if($response3->fecha_schv != ""){
                    $diffdate =  $this->rangodate($response3->fecha_schv,$response3->fecha_schm);
                     if( $diffdate ){
                         $schv = $response3->schv;
                         $schm = $response3->schm;
                         $schd = $response3->schd;
                     }else{
                         
                     $schv = 0;
                     $schm = 0;
                     $schd = 0;
                     }
                 }else{
                     $schv = 0;
                     $schm = 0;
                     $schd = 0;
                 }
                 if($response3->fecha_schv2 != ""){
                     $diffdate =  $this->rangodate($response3->fecha_schv2,$response3->fecha_schm2);
                     if($diffdate){
                         $schv2 = $response3->schv2;
                         $schm2 = $response3->schm2;
                         $schd2 = $response3->schd2;
                     }else{
                         
                        $schv2 = 0;
                        $schm2 = 0;
                        $schd2 = 0;
                        }
                 }else{
                     $schv2 = 0;
                     $schm2 = 0;
                     $schd2 = 0;
                 }
                 if($response3->fecha_schv3 != ""){
                     $diffdate =  $this->rangodate($response3->fecha_schv3,$response3->fecha_schm3);
                     if($diffdate){
                         $schv3 = $response3->schv3;
                         $schm3 = $response3->schm3;
                         $schd3 = $response3->schd3;
                     }else{
                         
                        $schv3 = 0;
                        $schm3 = 0;
                        $schd3 = 0;
                        }
                 }else{
                     $schv3 = 0;
                     $schm3 = 0;
                     $schd3 = 0;
                 }
                 if($response3->fecha_schv4 != ""){
                     $diffdate =  $this->rangodate($response3->fecha_schv4,$response3->fecha_schm4);
                     if($diffdate){
                         $schv4 = $response3->schv4;
                         $schm4 = $response3->schm4;
                         $schd4 = $response3->schd4;
                     }else{
                         
                        $schv4 = 0;
                        $schm4 = 0;
                        $schd4 = 0;
                        }
                 }else{
                     $schv4 = 0;
                     $schm4 = 0;
                     $schd4 = 0;
                 }

                    // echo '<pre>';
                    // // print_r($_SESSION['toursbooking']);
                    // print_r($response3->fecha_schv);
                    // var_dump($schd);
                    // echo '</pre>';
                    // die;

            // }$_SESSION['toursbooking']['rooms']

                //echo 'CATEGORIA =>'.$idCategoria;
                #tours es para saber el tipo del tours por dias y noches
                $tours = $_SESSION['toursbooking']['dias'] . $_SESSION['toursbooking']['noches'];
                $fecha = strtotime(substr($_SESSION['toursbooking']['fecha_salida'], 0, 4) . '-01-01 00:00:00');
                //echo '<script type="text/javascript">alert("hola mundo")</script>';

                // $sql2 = "SELECT * FROM ratesvalid WHERE fecha_ini >= '1533096000' AND fecha_fin <= '1577768400' AND id= '" . $idTarifario['tarifario'] . "'  ";
                // // $sql2 = "SELECT * FROM ratesvalid WHERE fecha_ini >= '1525147200' AND fecha_fin <= '1544763600' AND id = 114  ";
                // $result2 = Doo::db()->query($sql2);
                // $response2 = $result2->fetch(PDO::FETCH_OBJ);
                if($idCategoria == 2){
                    $totalsch =  (($schv +  $schv2 +  $schv3 +  $schv4) * $_SESSION['toursbooking']['noches']) * $_SESSION['toursbooking']['rooms'];
                }elseif($idCategoria == 3){
                    $totalsch =  (($schm +  $schm2 +  $schm3 +  $schm4) * $_SESSION['toursbooking']['noches']) * $_SESSION['toursbooking']['rooms'];
                }elseif($idCategoria == 4){
                    $totalsch =  (($schd +  $schd2 +  $schd3 +  $schd4) * $_SESSION['toursbooking']['noches']) * $_SESSION['toursbooking']['rooms'];
                }

                // echo '<pre>';
                // // print_r(("fecha_schv = ".$response2->fecha_schv ." >= ". "fecha_llegada = ".$_SESSION['toursbooking']['fecha_llegada']) ."  &&  ". ("fecha_schv = ".$response2->fecha_schv ." <= ". "fecha_salida = ".$_SESSION['toursbooking']['fecha_salida']));
                // print_r('<br>');
                // // print_r($response2);
                // print_r($schv4);
                // echo '</pre>';
                // die;

                unset($_SESSION['hotel21']);
                unset($_SESSION['hotel32']);
                unset($_SESSION['hotel43']);
                unset($_SESSION['hotel54']);
                unset($_SESSION['hotel65']);
                unset($_SESSION['hotel76']);
                unset($_SESSION['hotel87']);
                unset($_SESSION['hotel98']);
                unset($_SESSION['hotel']);
                if($_SESSION['toursbooking']['sarrival'] == 1 AND $_SESSION['toursbooking']['sdeparture'] == 1){ //SUPERTOURS IDA - SUPERTOURS VUELTA
                    // $transporte = $_SESSION['toursbooking']['totaltotal']  ;
                    if($_SESSION['toursbooking']['trip1'] == 101){
                            if($_SESSION['toursbooking']['trip2'] == 100){
                                $transporte = ($response2->trip101 + $response2->trip100) * $_SESSION['toursbooking']['totalpax'] ; 
                            }elseif($_SESSION['toursbooking']['trip2'] == 200){
                                $transporte = ($response2->trip101 + $response2->trip200) * $_SESSION['toursbooking']['totalpax'] ; 
                            }elseif($_SESSION['toursbooking']['trip2'] == 300){
                                $transporte = ($response2->trip101 + $response2->trip300) * $_SESSION['toursbooking']['totalpax'] ; 
                            }
                        
                    }elseif($_SESSION['toursbooking']['trip1'] == 201){
                        if($_SESSION['toursbooking']['trip2'] == 100){
                            $transporte = ($response2->trip201 + $response2->trip100) * $_SESSION['toursbooking']['totalpax'] ; 
                        }elseif($_SESSION['toursbooking']['trip2'] == 200){
                            $transporte = ($response2->trip201 + $response2->trip200) * $_SESSION['toursbooking']['totalpax'] ; 
                        }elseif($_SESSION['toursbooking']['trip2'] == 300){
                            $transporte = ($response2->trip201  + $response2->trip300) * $_SESSION['toursbooking']['totalpax'] ; 
                        }
                    }elseif($_SESSION['toursbooking']['trip1'] == 301){
                        if($_SESSION['toursbooking']['trip2'] == 100){
                            $transporte = ($response2->trip301 + $response2->trip100) * $_SESSION['toursbooking']['totalpax'] ; 
                        }elseif($_SESSION['toursbooking']['trip2'] == 200){
                            $transporte = ($response2->trip301 + $response2->trip200) * $_SESSION['toursbooking']['totalpax'] ; 
                        }elseif($_SESSION['toursbooking']['trip2'] == 300){
                            $transporte = ($response2->trip301  + $response2->trip300) * $_SESSION['toursbooking']['totalpax'] ; 
                        }
                    }
                    $_SESSION['toursbooking']['medioida']  = 'SUPERTOURS BUS';
                    $_SESSION['toursbooking']['medioreturn'] = 'SUPERTOURS BUS';
                }elseif($_SESSION['toursbooking']['sarrival'] == 1 AND $_SESSION['toursbooking']['sdeparture'] == 2){ //SUPERTOURS IDA - VIP VUELTA
                    //pendiente                  
                }elseif($_SESSION['toursbooking']['sarrival'] == 1 AND $_SESSION['toursbooking']['sdeparture'] == 3){ //SUPERTOURS IDA - AIRPORT VUELTA
                    if($_SESSION['toursbooking']['trip1'] == 101){
                        $transporte = ($response2->trip101 + $response2->t_out) * $_SESSION['toursbooking']['totalpax'] ; 
                    }elseif($_SESSION['toursbooking']['trip1'] == 201){
                        $transporte = ($response2->trip201 + $response2->t_out) * $_SESSION['toursbooking']['totalpax'] ; 
                    }elseif($_SESSION['toursbooking']['trip1'] == 301){
                        $transporte = ($response2->trip301 + $response2->t_out) * $_SESSION['toursbooking']['totalpax'] ; 
                    }
                    $_SESSION['toursbooking']['medioida']  = 'SUPERTOURS BUS';
                    $_SESSION['toursbooking']['medioreturn'] = 'PLANE';
                }elseif($_SESSION['toursbooking']['sarrival'] == 1 AND $_SESSION['toursbooking']['sdeparture'] == 4){ //SUPERTOURS IDA - CAR VUELTA

                    if($_SESSION['toursbooking']['trip1'] == 101){
                        $transporte = ($response2->trip101 + $response2->car_out) * $_SESSION['toursbooking']['totalpax'] ; 
                    }elseif($_SESSION['toursbooking']['trip1'] == 201){
                        $transporte = ($response2->trip200 + $response2->car_out) * $_SESSION['toursbooking']['totalpax'] ; 
                    }elseif($_SESSION['toursbooking']['trip1'] == 301){
                        $transporte = ($response2->trip300 + $response2->car_out) * $_SESSION['toursbooking']['totalpax'] ; 
                    }
                    $_SESSION['toursbooking']['medioida']  = 'SUPERTOURS BUS';
                    $_SESSION['toursbooking']['medioreturn'] = 'CAR';
                }elseif($_SESSION['toursbooking']['sarrival'] == 2 AND $_SESSION['toursbooking']['sdeparture'] == 1){ //VIP IDA -  SUPERTOURS VUELTA
                    //pendiente
                }elseif($_SESSION['toursbooking']['sarrival'] == 2 AND $_SESSION['toursbooking']['sdeparture'] == 2){ //VIP IDA - VIP VUELTA
                    //pendiente
                }elseif($_SESSION['toursbooking']['sarrival'] == 2 AND $_SESSION['toursbooking']['sdeparture'] == 3){ //VIP IDA - AIRPORT VUELTA
                    //pendiente
                }elseif($_SESSION['toursbooking']['sarrival'] == 2 AND $_SESSION['toursbooking']['sdeparture'] == 4){ //VIP IDA - CAR VUELTA
                    //pendiente
                }elseif($_SESSION['toursbooking']['sarrival'] == 3 AND $_SESSION['toursbooking']['sdeparture'] == 1){ //AIRPORT IDA - SUPERTOUR VUELTA

                    if($_SESSION['toursbooking']['trip2'] == 100){
                        $transporte = ($response2->t_in + $response2->trip100 ) * $_SESSION['toursbooking']['totalpax'] ; 
                    }elseif($_SESSION['toursbooking']['trip2'] == 200){
                        $transporte = ($response2->t_in + $response2->trip200 ) * $_SESSION['toursbooking']['totalpax'] ; 
                    }elseif($_SESSION['toursbooking']['trip2'] == 300){
                        $transporte = ($response2->t_in + $response2->trip300 ) * $_SESSION['toursbooking']['totalpax'] ; 
                    }
                    $_SESSION['toursbooking']['medioida']  = 'PLANE';
                    $_SESSION['toursbooking']['medioreturn'] = 'SUPERTOURS BUS';
                }elseif($_SESSION['toursbooking']['sarrival'] == 3 AND $_SESSION['toursbooking']['sdeparture'] == 2){ //AIRPORT IDA - VIP VUELTA
                    //pendiente
                }elseif($_SESSION['toursbooking']['sarrival'] == 3 AND $_SESSION['toursbooking']['sdeparture'] == 3){ //AIRPORT IDA - AIRPORT VUELTA
                    $transporte = ($response2->t_in + $response2->t_out ) * $_SESSION['toursbooking']['totalpax'] ; 
                    $_SESSION['toursbooking']['medioida']  = 'PLANE';
                    $_SESSION['toursbooking']['medioreturn'] = 'PLANE';
                }elseif($_SESSION['toursbooking']['sarrival'] == 3 AND $_SESSION['toursbooking']['sdeparture'] == 4){//AIRPORT IDA - CAR VUELTA
                    $transporte = ($response2->t_in + $response2->car_out ) * $_SESSION['toursbooking']['totalpax'] ; 
                    $_SESSION['toursbooking']['medioida']  = 'PLANE';
                    $_SESSION['toursbooking']['medioreturn'] = 'CAR';
                }elseif($_SESSION['toursbooking']['sarrival'] == 4 AND $_SESSION['toursbooking']['sdeparture'] == 1){ //CAR IDA - SUPERTOUR VUELTA

                    if($_SESSION['toursbooking']['trip2'] == 100){
                        $transporte = ($response2->car_in + $response2->trip100 ) * $_SESSION['toursbooking']['totalpax'] ; 
                    }elseif($_SESSION['toursbooking']['trip2'] == 200){
                        $transporte = ($response2->car_in + $response2->trip200 ) * $_SESSION['toursbooking']['totalpax'] ; 
                    }elseif($_SESSION['toursbooking']['trip2'] == 300){
                        $transporte = ($response2->car_in + $response2->trip300 ) * $_SESSION['toursbooking']['totalpax'] ; 
                    }
                    $_SESSION['toursbooking']['medioida']  = 'CAR';
                    $_SESSION['toursbooking']['medioreturn'] = 'SUPERTOURS BUS';
                }elseif($_SESSION['toursbooking']['sarrival'] == 4 AND $_SESSION['toursbooking']['sdeparture'] == 2){ //CAR IDA - VIP VUELTA
                    //pendiente
                }elseif($_SESSION['toursbooking']['sarrival'] == 4 AND $_SESSION['toursbooking']['sdeparture'] == 3){ //CAR IDA - AIRPORT VUELTA
                    $transporte = ($response2->car_in + $response2->t_out ) * $_SESSION['toursbooking']['totalpax'] ; 
                    $_SESSION['toursbooking']['medioida']  = 'CAR';
                    $_SESSION['toursbooking']['medioreturn'] = 'PLANE';
                }elseif($_SESSION['toursbooking']['sarrival'] == 4 AND $_SESSION['toursbooking']['sdeparture'] == 4){ //CAR IDA - CAR VUELTA
                    $transporte = ($response2->car_in + $response2->car_out ) * $_SESSION['toursbooking']['totalpax'] ;
                    $_SESSION['toursbooking']['medioida']  = 'CAR';
                    $_SESSION['toursbooking']['medioreturn'] = 'CAR'; 
                }
                    // echo '<pre>';
                    // print_r($response2);
                    // echo '</pre>';
                    // die;
                // 1 = SUPERTOURS
                // 2 = VIP
                // 3 = AIRPORT
                // 4 = CAR


                // if(true){
                if($response2->sgl == 0 && $response2->sglm == 0 && $response2->sgld == 0){
                if ($tours == 21) {
                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];
                    // echo '<pre>';
                    // print_r($room1);
                    // echo '</pre> ';
                    // die;
                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $respuesta['sgl'];
                        $room1Child  = $respuesta['chv21'];

                        if($idCategoria == 2){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel21']['pricehotelroom11'] = $response2->pax1v_21; 
                                $_SESSION['hotel21']['pricehotelroom12'] = $response2->pax2v_21 ; 
                                $_SESSION['hotel21']['totalhotelr11'] =  $response2->pax1v_21 + $response2->pax2v_21 * ($room1-1 + $roomChild1) ; 
                            }else{
                                $_SESSION['hotel21']['pricehotelroom11'] = $response2->pax1v_21; 
                                $_SESSION['hotel21']['totalhotelr11'] = $response2->pax1v_21; 
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel21']['pricehotelroom11'] = $response2->pax1m_21; 
                                $_SESSION['hotel21']['pricehotelroom12'] = $response2->pax2m_21 ; 
                                $_SESSION['hotel21']['totalhotelr11'] = $response2->pax1m_21 + $response2->pax2m_21 * ($room1-1 + $roomChild1); 
                            }else{
                                // $_SESSION['hotel21']['pricehotelroom11'] = $response2->pax1m_21; 
                                $_SESSION['hotel21']['totalhotelr11'] = $response2->pax1m_21; 
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel21']['pricehotelroom11'] = $response2->pax1d_21; 
                                $_SESSION['hotel21']['pricehotelroom12'] = $response2->pax2d_21 ; 
                                $_SESSION['hotel21']['totalhotelr11'] = $response2->pax1d_21 + $response2->pax2d_21 * ($room1-1 + $roomChild1); 
                            }else{
                                $_SESSION['hotel21']['pricehotelroom11'] = $response2->pax1d_21; 
                                $_SESSION['hotel21']['totalhotelr11'] = $response2->pax1d_21; 
                            }
                        }
                        // echo '<pre>';
                        // print_r($_SESSION['hotel21']);
                        // echo '</pre> ';
                        // die;
                    } elseif ($room1 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];

                        if($idCategoria == 2){
                            $_SESSION['hotel21']['pricehotelroom11'] = $response2->pax1v_21; 
                            $_SESSION['hotel21']['pricehotelroom12'] = $response2->pax2v_21 ; 
                            $_SESSION['hotel21']['totalhotelr12'] = $response2->pax1v_21 + $response2->pax2v_21 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel21']['pricehotelroom11'] = $response2->pax1m_21; 
                            $_SESSION['hotel21']['pricehotelroom12'] = $response2->pax2m_21; 
                            $_SESSION['hotel21']['totalhotelr12'] = $response2->pax1m_21 + $response2->pax2m_21 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel21']['pricehotelroom11'] = $response2->pax1d_21; 
                            $_SESSION['hotel21']['pricehotelroom12'] = $response2->pax2d_21; 
                            $_SESSION['hotel21']['totalhotelr12'] = $response2->pax1d_21 + $response2->pax2d_21 * ($room1-1 + $roomChild1); 
                        }

                    } elseif ($room1 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel21']['pricehotelroom11'] = $response2->pax1v_21; 
                            $_SESSION['hotel21']['pricehotelroom12'] = $response2->pax2v_21; 
                            $_SESSION['hotel21']['totalhotelr13'] = $response2->pax1v_21 + ($response2->pax2v_21 * ($room1-1 + $roomChild1)); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel21']['pricehotelroom11'] = $response2->pax1m_21; 
                            $_SESSION['hotel21']['pricehotelroom12'] = $response2->pax2m_21; 
                            $_SESSION['hotel21']['totalhotelr13'] = $response2->pax1m_21 + $response2->pax2m_21 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel21']['pricehotelroom11'] = $response2->pax1d_21; 
                            $_SESSION['hotel21']['pricehotelroom12'] = $response2->pax2d_21; 
                            $_SESSION['hotel21']['totalhotelr13'] = $response2->pax1d_21 + $response2->pax2d_21 * ($room1-1 + $roomChild1); 
                        }
                        
                    } elseif ($room1 == 4)  {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel21']['pricehotelroom11'] = $response2->pax1v_21; 
                            $_SESSION['hotel21']['pricehotelroom12'] = $response2->pax2v_21; 
                            $_SESSION['hotel21']['totalhotelr14'] = $response2->pax1v_21 + $response2->pax2v_21 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel21']['pricehotelroom11'] = $response2->pax1m_21; 
                            $_SESSION['hotel21']['pricehotelroom12'] = $response2->pax2m_21; 
                            $_SESSION['hotel21']['totalhotelr14'] = $response2->pax1m_21 + $response2->pax2m_21 * ($room1-1 + $roomChild1);  
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel21']['pricehotelroom11'] = $response2->pax1d_21; 
                            $_SESSION['hotel21']['pricehotelroom12'] = $response2->pax2d_21; 
                            $_SESSION['hotel21']['totalhotelr14'] = $response2->pax1d_21 + $response2->pax2d_21 * ($room1-1 + $roomChild1);  
                        }
                    }

 
                    //echo $tours;

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel21']['pricehotelroom21'] = $response2->pax1v_21; 
                                $_SESSION['hotel21']['pricehotelroom22'] = $response2->pax2v_21; 
                                $_SESSION['hotel21']['totalhotelr21'] = $response2->pax1v_21 + $response2->pax2v_21 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel21']['pricehotelroom21'] = $response2->pax1v_21; 
                                $_SESSION['hotel21']['totalhotelr21'] = $response2->pax1v_21; 
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel21']['pricehotelroom21'] = $response2->pax1m_21; 
                                $_SESSION['hotel21']['pricehotelroom22'] = $response2->pax2m_21; 
                                $_SESSION['hotel21']['totalhotelr21'] = $response2->pax1m_21 + $response2->pax2m_21 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel21']['pricehotelroom21'] = $response2->pax1m_21; 
                                $_SESSION['hotel21']['totalhotelr21'] = $response2->pax1m_21 ;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel21']['pricehotelroom21'] = $response2->pax1d_21; 
                                $_SESSION['hotel21']['pricehotelroom22'] = $response2->pax2d_21; 
                                $_SESSION['hotel21']['totalhotelr21'] = $response2->pax1d_21 + $response2->pax2d_21 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel21']['pricehotelroom21'] = $response2->pax1d_21; 
                                $_SESSION['hotel21']['totalhotelr21'] = $response2->pax1d_21 ;
                            }
                        }
                        
                    } elseif ($room2 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel21']['pricehotelroom21'] = $response2->pax1v_21; 
                            $_SESSION['hotel21']['pricehotelroom22'] = $response2->pax2v_21; 
                            $_SESSION['hotel21']['totalhotelr22'] = $response2->pax1v_21 + $response2->pax2v_21 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel21']['pricehotelroom21'] = $response2->pax1m_21; 
                            $_SESSION['hotel21']['pricehotelroom22'] = $response2->pax2m_21; 
                            $_SESSION['hotel21']['totalhotelr22'] = $response2->pax1m_21 + $response2->pax2m_21 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel21']['pricehotelroom21'] = $response2->pax1d_21; 
                            $_SESSION['hotel21']['pricehotelroom22'] = $response2->pax2d_21; 
                            $_SESSION['hotel21']['totalhotelr22'] = $response2->pax1d_21 + $response2->pax2d_21 * ($room2-1 + $roomChild2); 
                        }
                    } elseif ($room2 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel21']['pricehotelroom21'] = $response2->pax1v_21; 
                            $_SESSION['hotel21']['pricehotelroom22'] = $response2->pax2v_21; 
                            $_SESSION['hotel21']['totalhotelr23'] = $response2->pax1v_21 + $response2->pax2v_21 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel21']['pricehotelroom21'] = $response2->pax1m_21; 
                            $_SESSION['hotel21']['pricehotelroom22'] = $response2->pax2m_21; 
                            $_SESSION['hotel21']['totalhotelr23'] = $response2->pax1m_21 + $response2->pax2m_21 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel21']['pricehotelroom21'] = $response2->pax1d_21; 
                            $_SESSION['hotel21']['pricehotelroom22'] = $response2->pax2d_21; 
                            $_SESSION['hotel21']['totalhotelr23'] = $response2->pax1d_21 + $response2->pax2d_21 * ($room2-1 + $roomChild2); 
                        }
                    } elseif ($room2 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel21']['pricehotelroom21'] = $response2->pax1v_21; 
                            $_SESSION['hotel21']['pricehotelroom22'] = $response2->pax2v_21; 
                            $_SESSION['hotel21']['totalhotelr24'] = $response2->pax1v_21 + $response2->pax2v_21 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel21']['pricehotelroom21'] = $response2->pax1m_21; 
                            $_SESSION['hotel21']['pricehotelroom22'] = $response2->pax2m_21; 
                            $_SESSION['hotel21']['totalhotelr24'] = $response2->pax1m_21 + $response2->pax2m_21 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel21']['pricehotelroom21'] = $response2->pax1d_21; 
                            $_SESSION['hotel21']['pricehotelroom22'] = $response2->pax2d_21; 
                            $_SESSION['hotel21']['totalhotelr24'] = $response2->pax1d_21 + $response2->pax2d_21 * ($room2-1 + $roomChild2); 
                        }
                    }


                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 

                    if ($room3 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel21']['pricehotelroom31'] = $response2->pax1v_21; 
                                $_SESSION['hotel21']['pricehotelroom32'] = $response2->pax2v_21; 
                                $_SESSION['hotel21']['totalhotelr31'] = $response2->pax1v_21 + $response2->pax2v_21 * ($room3-1 + $roomChild3); 
                            }else{
                                // $_SESSION['hotel21']['pricehotelroom31'] = $response2->pax1v_21; 
                                $_SESSION['hotel21']['totalhotelr31'] = $response2->pax1v_21 ;
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel21']['pricehotelroom31'] = $response2->pax1m_21; 
                                $_SESSION['hotel21']['pricehotelroom32'] = $response2->pax2m_21; 
                                $_SESSION['hotel21']['totalhotelr31'] = $response2->pax1m_21 + $response2->pax2m_21 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel21']['pricehotelroom31'] = $response2->pax1m_21; 
                                $_SESSION['hotel21']['totalhotelr31'] = $response2->pax1m_21;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel21']['pricehotelroom31'] = $response2->pax1d_21; 
                                $_SESSION['hotel21']['pricehotelroom32'] = $response2->pax2d_21; 
                                $_SESSION['hotel21']['totalhotelr31'] = $response2->pax1d_21 + $response2->pax2d_21 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel21']['pricehotelroom31'] = $response2->pax1d_21; 
                                $_SESSION['hotel21']['totalhotelr31'] = $response2->pax1d_21;
                            }
                        }
                    } elseif ($room3 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel21']['pricehotelroom31'] = $response2->pax1v_21; 
                            $_SESSION['hotel21']['pricehotelroom32'] = $response2->pax2v_21; 
                            $_SESSION['hotel21']['totalhotelr32'] = $response2->pax1v_21 + $response2->pax2v_21 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel21']['pricehotelroom31'] = $response2->pax1m_21; 
                            $_SESSION['hotel21']['pricehotelroom32'] = $response2->pax2m_21; 
                            $_SESSION['hotel21']['totalhotelr32'] = $response2->pax1m_21 + $response2->pax2m_21 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel21']['pricehotelroom31'] = $response2->pax1d_21; 
                            $_SESSION['hotel21']['pricehotelroom32'] = $response2->pax2d_21; 
                            $_SESSION['hotel21']['totalhotelr32'] = $response2->pax1d_21 + $response2->pax2d_21 * ($room3-1 + $roomChild3); 
                        }
                    } elseif ($room3 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel21']['pricehotelroom31'] = $response2->pax1v_21; 
                            $_SESSION['hotel21']['pricehotelroom32'] = $response2->pax2v_21; 
                            $_SESSION['hotel21']['totalhotelr33'] = $response2->pax1v_21 + $response2->pax2v_21 * ($room3-1+ $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel21']['pricehotelroom31'] = $response2->pax1m_21; 
                            $_SESSION['hotel21']['pricehotelroom32'] = $response2->pax2m_21; 
                            $_SESSION['hotel21']['totalhotelr33'] = $response2->pax1m_21 + $response2->pax2m_21 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel21']['pricehotelroom31'] = $response2->pax1d_21; 
                            $_SESSION['hotel21']['pricehotelroom32'] = $response2->pax2d_21; 
                            $_SESSION['hotel21']['totalhotelr33'] = $response2->pax1d_21 + $response2->pax2d_21 * ($room3-1 + $roomChild3); 
                        }
                    } elseif ($room3 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel21']['pricehotelroom31'] = $response2->pax1v_21; 
                            $_SESSION['hotel21']['pricehotelroom32'] = $response2->pax2v_21; 
                            $_SESSION['hotel21']['totalhotelr34'] = $response2->pax1v_21 + $response2->pax2v_21 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel21']['pricehotelroom31'] = $response2->pax1m_21; 
                            $_SESSION['hotel21']['pricehotelroom32'] = $response2->pax2m_21; 
                            $_SESSION['hotel21']['totalhotelr34'] = $response2->pax1m_21 + $response2->pax2m_21 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel21']['pricehotelroom31'] = $response2->pax1d_21; 
                            $_SESSION['hotel21']['pricehotelroom32'] = $response2->pax2d_21; 
                            $_SESSION['hotel21']['totalhotelr34'] = $response2->pax1d_21 + $response2->pax2d_21 * ($room3-1 + $roomChild3); 
                        }
                    }



                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 

                    if ($room4 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel21']['pricehotelroom41'] = $response2->pax1v_21; 
                                $_SESSION['hotel21']['pricehotelroom42'] = $response2->pax2v_21; 
                                $_SESSION['hotel21']['totalhotelr41'] = $response2->pax1v_21 + $response2->pax2v_21 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel21']['pricehotelroom41'] = $response2->pax1v_21; 
                                $_SESSION['hotel21']['totalhotelr41'] = $response2->pax1v_21;
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel21']['pricehotelroom41'] = $response2->pax1m_21; 
                                $_SESSION['hotel21']['pricehotelroom42'] = $response2->pax2m_21; 
                                $_SESSION['hotel21']['totalhotelr41'] = $response2->pax1m_21 + $response2->pax2m_21 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel21']['pricehotelroom41'] = $response2->pax1m_21; 
                                $_SESSION['hotel21']['totalhotelr41'] = $response2->pax1m_21;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel21']['pricehotelroom41'] = $response2->pax1d_21; 
                                $_SESSION['hotel21']['pricehotelroom42'] = $response2->pax2d_21; 
                                $_SESSION['hotel21']['totalhotelr41'] = $response2->pax1d_21 + $response2->pax2d_21 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel21']['pricehotelroom41'] = $response2->pax1d_21; 
                                $_SESSION['hotel21']['totalhotelr41'] = $response2->pax1d_21;
                            }
                        }
                    } elseif ($room4 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel21']['pricehotelroom41'] = $response2->pax1v_21; 
                            $_SESSION['hotel21']['pricehotelroom42'] = $response2->pax2v_21; 
                            $_SESSION['hotel21']['totalhotelr42'] = $response2->pax1v_21 + $response2->pax2v_21 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel21']['pricehotelroom41'] = $response2->pax1m_21; 
                            $_SESSION['hotel21']['pricehotelroom42'] = $response2->pax2m_21; 
                            $_SESSION['hotel21']['totalhotelr42'] = $response2->pax1m_21 + $response2->pax2m_21 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel21']['pricehotelroom41'] = $response2->pax1d_21; 
                            $_SESSION['hotel21']['pricehotelroom42'] = $response2->pax2d_21; 
                            $_SESSION['hotel21']['totalhotelr42'] = $response2->pax1d_21 + $response2->pax2d_21 * ($room4-1 + $roomChild4); 
                        }
                    } elseif ($room4 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel21']['pricehotelroom41'] = $response2->pax1v_21; 
                            $_SESSION['hotel21']['pricehotelroom42'] = $response2->pax2v_21; 
                            $_SESSION['hotel21']['totalhotelr43'] = $response2->pax1v_21 + $response2->pax2v_21 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel21']['pricehotelroom41'] = $response2->pax1m_21; 
                            $_SESSION['hotel21']['pricehotelroom42'] = $response2->pax2m_21; 
                            $_SESSION['hotel21']['totalhotelr43'] = $response2->pax1m_21 + $response2->pax2m_21 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel21']['pricehotelroom41'] = $response2->pax1d_21; 
                            $_SESSION['hotel21']['pricehotelroom42'] = $response2->pax2d_21; 
                            $_SESSION['hotel21']['totalhotelr43'] = $response2->pax1d_21 + $response2->pax2d_21 * ($room4-1 + $roomChild4); 
                        }
                    } elseif ($room4 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel21']['pricehotelroom41'] = $response2->pax1v_21; 
                            $_SESSION['hotel21']['pricehotelroom42'] = $response2->pax2v_21; 
                            $_SESSION['hotel21']['totalhotelr44'] = $response2->pax1v_21 + $response2->pax2v_21 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel21']['pricehotelroom41'] = $response2->pax1m_21; 
                            $_SESSION['hotel21']['pricehotelroom42'] = $response2->pax2m_21; 
                            $_SESSION['hotel21']['totalhotelr44'] = $response2->pax1m_21 + $response2->pax2m_21 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel21']['pricehotelroom41'] = $response2->pax1d_21; 
                            $_SESSION['hotel21']['pricehotelroom42'] = $response2->pax2d_21; 
                            $_SESSION['hotel21']['totalhotelr44'] = $response2->pax1d_21 + $response2->pax2d_21 * ($room4-1 + $roomChild4); 
                        }
 
                    }
                    
                    $sql = ($_SESSION['hotel21']['totalhotelr11'] + $_SESSION['hotel21']['totalhotelr12'] + $_SESSION['hotel21']['totalhotelr13'] + $_SESSION['hotel21']['totalhotelr14']) * $room1;
                    $dbl = ($_SESSION['hotel21']['totalhotelr21'] + $_SESSION['hotel21']['totalhotelr22'] + $_SESSION['hotel21']['totalhotelr23'] + $_SESSION['hotel21']['totalhotelr24']) * $room2;
                    $tpl = ($_SESSION['hotel21']['totalhotelr31'] + $_SESSION['hotel21']['totalhotelr32'] + $_SESSION['hotel21']['totalhotelr33'] + $_SESSION['hotel21']['totalhotelr34']) * $room3;
                    $qua = ($_SESSION['hotel21']['totalhotelr41'] + $_SESSION['hotel21']['totalhotelr42'] + $_SESSION['hotel21']['totalhotelr43'] + $_SESSION['hotel21']['totalhotelr44']) * $room4;

                    $precioAdulto = ($_SESSION['hotel21']['totalhotelr11'] + $_SESSION['hotel21']['totalhotelr12'] + $_SESSION['hotel21']['totalhotelr13'] + $_SESSION['hotel21']['totalhotelr14'] + $_SESSION['hotel21']['totalhotelr21'] + $_SESSION['hotel21']['totalhotelr22'] + $_SESSION['hotel21']['totalhotelr23'] + $_SESSION['hotel21']['totalhotelr24'] + $_SESSION['hotel21']['totalhotelr31'] + $_SESSION['hotel21']['totalhotelr32'] + $_SESSION['hotel21']['totalhotelr33'] + $_SESSION['hotel21']['totalhotelr34'] + $_SESSION['hotel21']['totalhotelr41'] + $_SESSION['hotel21']['totalhotelr42'] + $_SESSION['hotel21']['totalhotelr43'] + $_SESSION['hotel21']['totalhotelr44'] +$totalsch );

                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto + $transporte;


                    // $totalschv 
                    // $totalschm 
                    #precio total para ninos 21
                    // echo '<pre>';
                    // // print_r($sql);echo '<br>';
                    // // print_r($dbl);echo '<br>';
                    // // print_r($tpl);echo '<br>';
                    // // print_r($qua);echo '<br>';
                    // // print_r($response2);echo '<br>';
                    // print_r($_SESSION['toursbooking']['totaltours']);
                    // echo '</pre> ';
                    // die;

                } elseif ($tours == 32) {
                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        if($idCategoria == 2){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel32']['pricehotelroom11'] = $response2->pax1v_32; 
                                $_SESSION['hotel32']['pricehotelroom12'] = $response2->pax2v_32 ; 
                                $_SESSION['hotel32']['totalhotelr11'] =  $response2->pax1v_32 + $response2->pax2v_32 * ($room1-1 + $roomChild1) ; 
                            }else{
                                $_SESSION['hotel32']['pricehotelroom11'] = $response2->pax1v_32; 
                                $_SESSION['hotel32']['totalhotelr11'] = $response2->pax1v_32; 
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel32']['pricehotelroom11'] = $response2->pax1m_32; 
                                $_SESSION['hotel32']['pricehotelroom12'] = $response2->pax2m_32 ; 
                                $_SESSION['hotel32']['totalhotelr11'] = $response2->pax1m_32 + $response2->pax2m_32 * ($room1-1 + $roomChild1); 
                            }else{
                                $_SESSION['hotel32']['pricehotelroom11'] = $response2->pax1m_32; 
                                $_SESSION['hotel32']['totalhotelr11'] = $response2->pax1m_32; 
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel32']['pricehotelroom11'] = $response2->pax1d_32; 
                                $_SESSION['hotel32']['pricehotelroom12'] = $response2->pax2d_32 ; 
                                $_SESSION['hotel32']['totalhotelr11'] = $response2->pax1d_32 + $response2->pax2d_32 * ($room1-1 + $roomChild1); 
                            }else{
                                $_SESSION['hotel32']['pricehotelroom11'] = $response2->pax1d_32; 
                                $_SESSION['hotel32']['totalhotelr11'] = $response2->pax1d_32; 
                            }
                        }
                    } elseif ($room1 == 2) {
                        if($idCategoria == 2){
                            $_SESSION['hotel32']['pricehotelroom11'] = $response2->pax1v_32; 
                            $_SESSION['hotel32']['pricehotelroom12'] = $response2->pax2v_32 ; 
                            $_SESSION['hotel32']['totalhotelr12'] = $response2->pax1v_32 + $response2->pax2v_32 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel32']['pricehotelroom11'] = $response2->pax1m_32; 
                            $_SESSION['hotel32']['pricehotelroom12'] = $response2->pax2m_32; 
                            $_SESSION['hotel32']['totalhotelr12'] = $response2->pax1m_32 + $response2->pax2m_32 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel32']['pricehotelroom11'] = $response2->pax1d_32; 
                            $_SESSION['hotel32']['pricehotelroom12'] = $response2->pax2d_32; 
                            $_SESSION['hotel32']['totalhotelr12'] = $response2->pax1d_32 + $response2->pax2d_32 * ($room1-1 + $roomChild1); 
                        }
                    } elseif ($room1 == 3) {
                        if($idCategoria == 2){
                            $_SESSION['hotel32']['pricehotelroom11'] = $response2->pax1v_32; 
                            $_SESSION['hotel32']['pricehotelroom12'] = $response2->pax2v_32; 
                            $_SESSION['hotel32']['totalhotelr13'] = $response2->pax1v_32 + $response2->pax2v_32 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel32']['pricehotelroom11'] = $response2->pax1m_32; 
                            $_SESSION['hotel32']['pricehotelroom12'] = $response2->pax2m_32; 
                            $_SESSION['hotel32']['totalhotelr13'] = $response2->pax1m_32 + $response2->pax2m_32 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel32']['pricehotelroom11'] = $response2->pax1d_32; 
                            $_SESSION['hotel32']['pricehotelroom12'] = $response2->pax2d_32; 
                            $_SESSION['hotel32']['totalhotelr13'] = $response2->pax1d_32 + $response2->pax2d_32 * ($room1-1 + $roomChild1); 
                        }
                    } elseif ($room1 == 4)  {
                        if($idCategoria == 2){
                            $_SESSION['hotel32']['pricehotelroom11'] = $response2->pax1v_32; 
                            $_SESSION['hotel32']['pricehotelroom12'] = $response2->pax2v_32; 
                            $_SESSION['hotel32']['totalhotelr14'] = $response2->pax1v_32 + $response2->pax2v_32 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel32']['pricehotelroom11'] = $response2->pax1m_32; 
                            $_SESSION['hotel32']['pricehotelroom12'] = $response2->pax2m_32; 
                            $_SESSION['hotel32']['totalhotelr14'] = $response2->pax1m_32 + $response2->pax2m_32 * ($room1-1 + $roomChild1);  
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel32']['pricehotelroom11'] = $response2->pax1d_32; 
                            $_SESSION['hotel32']['pricehotelroom12'] = $response2->pax2d_32; 
                            $_SESSION['hotel32']['totalhotelr14'] = $response2->pax1d_32 + $response2->pax2d_32 * ($room1-1 + $roomChild1);  
                        }

                    }
                    // echo '<pre>';
                    // print_r($response2);echo '<br>';
                    // // print_r($dbl);echo '<br>';
                    // // print_r($tpl);echo '<br>';
                    // // print_r($qua);echo '<br>';
                    // // print_r($_SESSION);
                    // echo '</pre> ';
                    // die;
                    //echo $tours;

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel32']['pricehotelroom21'] = $response2->pax1v_32; 
                                $_SESSION['hotel32']['pricehotelroom22'] = $response2->pax2v_32; 
                                $_SESSION['hotel32']['totalhotelr21'] = $response2->pax1v_32 + $response2->pax2v_32 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel32']['pricehotelroom21'] = $response2->pax1v_32; 
                                $_SESSION['hotel32']['totalhotelr21'] = $response2->pax1v_32; 
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel32']['pricehotelroom21'] = $response2->pax1m_32; 
                                $_SESSION['hotel32']['pricehotelroom22'] = $response2->pax2m_32; 
                                $_SESSION['hotel32']['totalhotelr21'] = $response2->pax1m_32 + $response2->pax2m_32 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel32']['pricehotelroom21'] = $response2->pax1m_32; 
                                $_SESSION['hotel32']['totalhotelr21'] = $response2->pax1m_32 ;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel32']['pricehotelroom21'] = $response2->pax1d_32; 
                                $_SESSION['hotel32']['pricehotelroom22'] = $response2->pax2d_32; 
                                $_SESSION['hotel32']['totalhotelr21'] = $response2->pax1d_32 + $response2->pax2d_32 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel32']['pricehotelroom21'] = $response2->pax1d_32; 
                                $_SESSION['hotel32']['totalhotelr21'] = $response2->pax1d_32 ;
                            }
                        }


                    } elseif ($room2 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel32']['pricehotelroom21'] = $response2->pax1v_32; 
                            $_SESSION['hotel32']['pricehotelroom22'] = $response2->pax2v_32; 
                            $_SESSION['hotel32']['totalhotelr22'] = $response2->pax1v_32 + $response2->pax2v_32 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel32']['pricehotelroom21'] = $response2->pax1m_32; 
                            $_SESSION['hotel32']['pricehotelroom22'] = $response2->pax2m_32; 
                            $_SESSION['hotel32']['totalhotelr22'] = $response2->pax1m_32 + $response2->pax2m_32 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel32']['pricehotelroom21'] = $response2->pax1d_32; 
                            $_SESSION['hotel32']['pricehotelroom22'] = $response2->pax2d_32; 
                            $_SESSION['hotel32']['totalhotelr22'] = $response2->pax1d_32 + $response2->pax2d_32 * ($room2-1 + $roomChild2); 
                        }

                    } elseif ($room2 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel32']['pricehotelroom21'] = $response2->pax1v_32; 
                            $_SESSION['hotel32']['pricehotelroom22'] = $response2->pax2v_32; 
                            $_SESSION['hotel32']['totalhotelr23'] = $response2->pax1v_32 + $response2->pax2v_32 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel32']['pricehotelroom21'] = $response2->pax1m_32; 
                            $_SESSION['hotel32']['pricehotelroom22'] = $response2->pax2m_32; 
                            $_SESSION['hotel32']['totalhotelr23'] = $response2->pax1m_32 + $response2->pax2m_32 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel32']['pricehotelroom21'] = $response2->pax1d_32; 
                            $_SESSION['hotel32']['pricehotelroom22'] = $response2->pax2d_32; 
                            $_SESSION['hotel32']['totalhotelr23'] = $response2->pax1d_32 + $response2->pax2d_32 * ($room2-1 + $roomChild2); 
                        }
                    } elseif ($room2 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel32']['pricehotelroom21'] = $response2->pax1v_32; 
                            $_SESSION['hotel32']['pricehotelroom22'] = $response2->pax2v_32; 
                            $_SESSION['hotel32']['totalhotelr24'] = $response2->pax1v_32 + $response2->pax2v_32 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel32']['pricehotelroom21'] = $response2->pax1m_32; 
                            $_SESSION['hotel32']['pricehotelroom22'] = $response2->pax2m_32; 
                            $_SESSION['hotel32']['totalhotelr24'] = $response2->pax1m_32 + $response2->pax2m_32 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel32']['pricehotelroom21'] = $response2->pax1d_32; 
                            $_SESSION['hotel32']['pricehotelroom22'] = $response2->pax2d_32; 
                            $_SESSION['hotel32']['totalhotelr24'] = $response2->pax1d_32 + $response2->pax2d_32 * ($room2-1 + $roomChild2); 
                        }
                    }


                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 

                    if ($room3 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel32']['pricehotelroom31'] = $response2->pax1v_32; 
                                $_SESSION['hotel32']['pricehotelroom32'] = $response2->pax2v_32; 
                                $_SESSION['hotel32']['totalhotelr31'] = $response2->pax1v_32 + $response2->pax2v_32 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel32']['pricehotelroom31'] = $response2->pax1v_32; 
                                $_SESSION['hotel32']['totalhotelr31'] = $response2->pax1v_32 ;
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel32']['pricehotelroom31'] = $response2->pax1m_32; 
                                $_SESSION['hotel32']['pricehotelroom32'] = $response2->pax2m_32; 
                                $_SESSION['hotel32']['totalhotelr31'] = $response2->pax1m_32 + $response2->pax2m_32 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel32']['pricehotelroom31'] = $response2->pax1m_32; 
                                $_SESSION['hotel32']['totalhotelr31'] = $response2->pax1m_32;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel32']['pricehotelroom31'] = $response2->pax1d_32; 
                                $_SESSION['hotel32']['pricehotelroom32'] = $response2->pax2d_32; 
                                $_SESSION['hotel32']['totalhotelr31'] = $response2->pax1d_32 + $response2->pax2d_32 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel32']['pricehotelroom31'] = $response2->pax1d_32; 
                                $_SESSION['hotel32']['totalhotelr31'] = $response2->pax1d_32;
                            }
                        }
                    } elseif ($room3 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel32']['pricehotelroom31'] = $response2->pax1v_32; 
                            $_SESSION['hotel32']['pricehotelroom32'] = $response2->pax2v_32; 
                            $_SESSION['hotel32']['totalhotelr32'] = $response2->pax1v_32 + $response2->pax2v_32 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel32']['pricehotelroom31'] = $response2->pax1m_32; 
                            $_SESSION['hotel32']['pricehotelroom32'] = $response2->pax2m_32; 
                            $_SESSION['hotel32']['totalhotelr32'] = $response2->pax1m_32 + $response2->pax2m_32 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel32']['pricehotelroom31'] = $response2->pax1d_32; 
                            $_SESSION['hotel32']['pricehotelroom32'] = $response2->pax2d_32; 
                            $_SESSION['hotel32']['totalhotelr32'] = $response2->pax1d_32 + $response2->pax2d_32 * ($room3-1 + $roomChild3); 
                        }

                    } elseif ($room3 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel32']['pricehotelroom31'] = $response2->pax1v_32; 
                            $_SESSION['hotel32']['pricehotelroom32'] = $response2->pax2v_32; 
                            $_SESSION['hotel32']['totalhotelr33'] = $response2->pax1v_32 + $response2->pax2v_32 * ($room3-1+ $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel32']['pricehotelroom31'] = $response2->pax1m_32; 
                            $_SESSION['hotel32']['pricehotelroom32'] = $response2->pax2m_32; 
                            $_SESSION['hotel32']['totalhotelr33'] = $response2->pax1m_32 + $response2->pax2m_32 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel32']['pricehotelroom31'] = $response2->pax1d_32; 
                            $_SESSION['hotel32']['pricehotelroom32'] = $response2->pax2d_32; 
                            $_SESSION['hotel32']['totalhotelr33'] = $response2->pax1d_32 + $response2->pax2d_32 * ($room3-1 + $roomChild3); 
                        }
                    } elseif ($room3 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel32']['pricehotelroom31'] = $response2->pax1v_32; 
                            $_SESSION['hotel32']['pricehotelroom32'] = $response2->pax2v_32; 
                            $_SESSION['hotel32']['totalhotelr34'] = $response2->pax1v_32 + $response2->pax2v_32 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel32']['pricehotelroom31'] = $response2->pax1m_32; 
                            $_SESSION['hotel32']['pricehotelroom32'] = $response2->pax2m_32; 
                            $_SESSION['hotel32']['totalhotelr34'] = $response2->pax1m_32 + $response2->pax2m_32 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel32']['pricehotelroom31'] = $response2->pax1d_32; 
                            $_SESSION['hotel32']['pricehotelroom32'] = $response2->pax2d_32; 
                            $_SESSION['hotel32']['totalhotelr34'] = $response2->pax1d_32 + $response2->pax2d_32 * ($room3-1 + $roomChild3); 
                        }
                    }



                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 

                    if ($room4 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel32']['pricehotelroom41'] = $response2->pax1v_32; 
                                $_SESSION['hotel32']['pricehotelroom42'] = $response2->pax2v_32; 
                                $_SESSION['hotel32']['totalhotelr41'] = $response2->pax1v_32 + $response2->pax2v_32 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel32']['pricehotelroom41'] = $response2->pax1v_32; 
                                $_SESSION['hotel32']['totalhotelr41'] = $response2->pax1v_32;
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel32']['pricehotelroom41'] = $response2->pax1m_32; 
                                $_SESSION['hotel32']['pricehotelroom42'] = $response2->pax2m_32; 
                                $_SESSION['hotel32']['totalhotelr41'] = $response2->pax1m_32 + $response2->pax2m_32 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel32']['pricehotelroom41'] = $response2->pax1m_32; 
                                $_SESSION['hotel32']['totalhotelr41'] = $response2->pax1m_32;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel32']['pricehotelroom41'] = $response2->pax1d_32; 
                                $_SESSION['hotel32']['pricehotelroom42'] = $response2->pax2d_32; 
                                $_SESSION['hotel32']['totalhotelr41'] = $response2->pax1d_32 + $response2->pax2d_32 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel32']['pricehotelroom41'] = $response2->pax1d_32; 
                                $_SESSION['hotel32']['totalhotelr41'] = $response2->pax1d_32;
                            }
                        }
                    } elseif ($room4 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel32']['pricehotelroom41'] = $response2->pax1v_32; 
                            $_SESSION['hotel32']['pricehotelroom42'] = $response2->pax2v_32; 
                            $_SESSION['hotel32']['totalhotelr42'] = $response2->pax1v_32 + $response2->pax2v_32 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel32']['pricehotelroom41'] = $response2->pax1m_32; 
                            $_SESSION['hotel32']['pricehotelroom42'] = $response2->pax2m_32; 
                            $_SESSION['hotel32']['totalhotelr42'] = $response2->pax1m_32 + $response2->pax2m_32 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel32']['pricehotelroom41'] = $response2->pax1d_32; 
                            $_SESSION['hotel32']['pricehotelroom42'] = $response2->pax2d_32; 
                            $_SESSION['hotel32']['totalhotelr42'] = $response2->pax1d_32 + $response2->pax2d_32 * ($room4-1 + $roomChild4); 
                        }

                    } elseif ($room4 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel32']['pricehotelroom41'] = $response2->pax1v_32; 
                            $_SESSION['hotel32']['pricehotelroom42'] = $response2->pax2v_32; 
                            $_SESSION['hotel32']['totalhotelr43'] = $response2->pax1v_32 + $response2->pax2v_32 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel32']['pricehotelroom41'] = $response2->pax1m_32; 
                            $_SESSION['hotel32']['pricehotelroom42'] = $response2->pax2m_32; 
                            $_SESSION['hotel32']['totalhotelr43'] = $response2->pax1m_32 + $response2->pax2m_32 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel32']['pricehotelroom41'] = $response2->pax1d_32; 
                            $_SESSION['hotel32']['pricehotelroom42'] = $response2->pax2d_32; 
                            $_SESSION['hotel32']['totalhotelr43'] = $response2->pax1d_32 + $response2->pax2d_32 * ($room4-1 + $roomChild4); 
                        }
                    } elseif ($room4 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel32']['pricehotelroom41'] = $response2->pax1v_32; 
                            $_SESSION['hotel32']['pricehotelroom42'] = $response2->pax2v_32; 
                            $_SESSION['hotel32']['totalhotelr44'] = $response2->pax1v_32 + $response2->pax2v_32 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel32']['pricehotelroom41'] = $response2->pax1m_32; 
                            $_SESSION['hotel32']['pricehotelroom42'] = $response2->pax2m_32; 
                            $_SESSION['hotel32']['totalhotelr44'] = $response2->pax1m_32 + $response2->pax2m_32 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel32']['pricehotelroom41'] = $response2->pax1d_32; 
                            $_SESSION['hotel32']['pricehotelroom42'] = $response2->pax2d_32; 
                            $_SESSION['hotel32']['totalhotelr44'] = $response2->pax1d_32 + $response2->pax2d_32 * ($room4-1 + $roomChild4); 
                        }
                    }
                    #precio total para adultos 32

                    $sql = ($_SESSION['hotel32']['totalhotelr11'] + $_SESSION['hotel32']['totalhotelr12'] + $_SESSION['hotel32']['totalhotelr13'] + $_SESSION['hotel32']['totalhotelr14']) * $room1 ;
                    $dbl = ($_SESSION['hotel32']['totalhotelr21'] + $_SESSION['hotel32']['totalhotelr22'] + $_SESSION['hotel32']['totalhotelr23'] + $_SESSION['hotel32']['totalhotelr24']) * $room2;
                    $tpl = ($_SESSION['hotel32']['totalhotelr31'] + $_SESSION['hotel32']['totalhotelr32'] + $_SESSION['hotel32']['totalhotelr33'] + $_SESSION['hotel32']['totalhotelr34']) * $room3;
                    $qua = ($_SESSION['hotel32']['totalhotelr41'] + $_SESSION['hotel32']['totalhotelr42'] + $_SESSION['hotel32']['totalhotelr43'] + $_SESSION['hotel32']['totalhotelr44']) * $room4;

                    $precioAdulto = ($_SESSION['hotel32']['totalhotelr11'] + $_SESSION['hotel32']['totalhotelr12'] + $_SESSION['hotel32']['totalhotelr13'] + $_SESSION['hotel32']['totalhotelr14'] + $_SESSION['hotel32']['totalhotelr21'] + $_SESSION['hotel32']['totalhotelr22'] + $_SESSION['hotel32']['totalhotelr23'] + $_SESSION['hotel32']['totalhotelr24'] + $_SESSION['hotel32']['totalhotelr31'] + $_SESSION['hotel32']['totalhotelr32'] + $_SESSION['hotel32']['totalhotelr33'] + $_SESSION['hotel32']['totalhotelr34'] + $_SESSION['hotel32']['totalhotelr41'] + $_SESSION['hotel32']['totalhotelr42'] + $_SESSION['hotel32']['totalhotelr43'] + $_SESSION['hotel32']['totalhotelr44'] + $totalsch);

                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto + $transporte;
                    // print_r($precioAdulto + $transporte);
                    // die;
                    #precio total para ninos 21
                    // echo '<pre>';
                    // // print_r($sql);echo '<br>';
                    // // print_r($dbl);echo '<br>';
                    // // print_r($tpl);echo '<br>';
                    // // print_r($qua);echo '<br>';
                    // print_r($_SESSION['toursbooking']['totaltours'] );echo '<br>';
                    // echo '</pre> ';
                    // die;
                } elseif ($tours == 43) {
                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    if ($room1 == 1) {
                        $room1Adult = $respuesta['sgl'];
                        $room1Child  = $respuesta['chv21'];

                        if($idCategoria == 2){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel43']['pricehotelroom11'] = $response2->pax1v_43; 
                                $_SESSION['hotel43']['pricehotelroom12'] = $response2->pax2v_43 ; 
                                $_SESSION['hotel43']['totalhotelr11'] =  $response2->pax1v_43 + $response2->pax2v_43 * ($room1-1 + $roomChild1) ; 
                            }else{
                                $_SESSION['hotel43']['pricehotelroom11'] = $response2->pax1v_43; 
                                $_SESSION['hotel43']['totalhotelr11'] = $response2->pax1v_43; 
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel43']['pricehotelroom11'] = $response2->pax1m_43; 
                                $_SESSION['hotel43']['pricehotelroom12'] = $response2->pax2m_43 ; 
                                $_SESSION['hotel43']['totalhotelr11'] = $response2->pax1m_43 + $response2->pax2m_43 * ($room1-1 + $roomChild1); 
                            }else{
                                $_SESSION['hotel43']['pricehotelroom11'] = $response2->pax1m_43; 
                                $_SESSION['hotel43']['totalhotelr11'] = $response2->pax1m_43; 
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel43']['pricehotelroom11'] = $response2->pax1d_43; 
                                $_SESSION['hotel43']['pricehotelroom12'] = $response2->pax2d_43 ; 
                                $_SESSION['hotel43']['totalhotelr11'] = $response2->pax1d_43 + $response2->pax2d_43 * ($room1-1 + $roomChild1); 
                            }else{
                                $_SESSION['hotel43']['pricehotelroom11'] = $response2->pax1d_43; 
                                $_SESSION['hotel43']['totalhotelr11'] = $response2->pax1d_43; 
                            }
                        }
                    // echo '<pre>';
                    // print_r($_SESSION);
                    // echo '</pre> ';
                    // die;
                    } elseif ($room1 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                     
                        if($idCategoria == 2){
                            $_SESSION['hotel43']['pricehotelroom11'] = $response2->pax1v_43; 
                            $_SESSION['hotel43']['pricehotelroom12'] = $response2->pax2v_43 ; 
                            $_SESSION['hotel43']['totalhotelr12'] = $response2->pax1v_43 + $response2->pax2v_43 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel43']['pricehotelroom11'] = $response2->pax1m_43; 
                            $_SESSION['hotel43']['pricehotelroom12'] = $response2->pax2m_43; 
                            $_SESSION['hotel43']['totalhotelr12'] = $response2->pax1m_43 + $response2->pax2m_43 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel43']['pricehotelroom11'] = $response2->pax1d_43; 
                            $_SESSION['hotel43']['pricehotelroom12'] = $response2->pax2d_43; 
                            $_SESSION['hotel43']['totalhotelr12'] = $response2->pax1d_43 + $response2->pax2d_43 * ($room1-1 + $roomChild1); 
                        }
                    } elseif ($room1 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel43']['pricehotelroom11'] = $response2->pax1v_43; 
                            $_SESSION['hotel43']['pricehotelroom12'] = $response2->pax2v_43; 
                            $_SESSION['hotel43']['totalhotelr13'] = $response2->pax1v_43 + $response2->pax2v_43 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel43']['pricehotelroom11'] = $response2->pax1m_43; 
                            $_SESSION['hotel43']['pricehotelroom12'] = $response2->pax2m_43; 
                            $_SESSION['hotel43']['totalhotelr13'] = $response2->pax1m_43 + $response2->pax2m_43 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel43']['pricehotelroom11'] = $response2->pax1d_43; 
                            $_SESSION['hotel43']['pricehotelroom12'] = $response2->pax2d_43; 
                            $_SESSION['hotel43']['totalhotelr13'] = $response2->pax1d_43 + $response2->pax2d_43 * ($room1-1 + $roomChild1); 
                        }
                    } elseif ($room1 == 4)  {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel43']['pricehotelroom11'] = $response2->pax1v_43; 
                            $_SESSION['hotel43']['pricehotelroom12'] = $response2->pax2v_43; 
                            $_SESSION['hotel43']['totalhotelr14'] = $response2->pax1v_43 + $response2->pax2v_43 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel43']['pricehotelroom11'] = $response2->pax1m_43; 
                            $_SESSION['hotel43']['pricehotelroom12'] = $response2->pax2m_43; 
                            $_SESSION['hotel43']['totalhotelr14'] = $response2->pax1m_43 + $response2->pax2m_43 * ($room1-1 + $roomChild1);  
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel43']['pricehotelroom11'] = $response2->pax1d_43; 
                            $_SESSION['hotel43']['pricehotelroom12'] = $response2->pax2d_43; 
                            $_SESSION['hotel43']['totalhotelr14'] = $response2->pax1d_43 + $response2->pax2d_43 * ($room1-1 + $roomChild1);  
                        }
                    }
                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel43']['pricehotelroom21'] = $response2->pax1v_43; 
                                $_SESSION['hotel43']['pricehotelroom22'] = $response2->pax2v_43; 
                                $_SESSION['hotel43']['totalhotelr21'] = $response2->pax1v_43 + $response2->pax2v_43 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel43']['pricehotelroom21'] = $response2->pax1v_43; 
                                $_SESSION['hotel43']['totalhotelr21'] = $response2->pax1v_43; 
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel43']['pricehotelroom21'] = $response2->pax1m_43; 
                                $_SESSION['hotel43']['pricehotelroom22'] = $response2->pax2m_43; 
                                $_SESSION['hotel43']['totalhotelr21'] = $response2->pax1m_43 + $response2->pax2m_43 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel43']['pricehotelroom21'] = $response2->pax1m_43; 
                                $_SESSION['hotel43']['totalhotelr21'] = $response2->pax1m_43 ;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel43']['pricehotelroom21'] = $response2->pax1d_43; 
                                $_SESSION['hotel43']['pricehotelroom22'] = $response2->pax2d_43; 
                                $_SESSION['hotel43']['totalhotelr21'] = $response2->pax1d_43 + $response2->pax2d_43 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel43']['pricehotelroom21'] = $response2->pax1d_43; 
                                $_SESSION['hotel43']['totalhotelr21'] = $response2->pax1d_43 ;
                            }
                        }

                    } elseif ($room2 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel43']['pricehotelroom21'] = $response2->pax1v_43; 
                            $_SESSION['hotel43']['pricehotelroom22'] = $response2->pax2v_43; 
                            $_SESSION['hotel43']['totalhotelr22'] = $response2->pax1v_43 + $response2->pax2v_43 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel43']['pricehotelroom21'] = $response2->pax1m_43; 
                            $_SESSION['hotel43']['pricehotelroom22'] = $response2->pax2m_43; 
                            $_SESSION['hotel43']['totalhotelr22'] = $response2->pax1m_43 + $response2->pax2m_43 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel43']['pricehotelroom21'] = $response2->pax1d_43; 
                            $_SESSION['hotel43']['pricehotelroom22'] = $response2->pax2d_43; 
                            $_SESSION['hotel43']['totalhotelr22'] = $response2->pax1d_43 + $response2->pax2d_43 * ($room2-1 + $roomChild2); 
                        }

                        // echo '<pre>';
                        // print_r($dblt);
                        // echo '</pre> ';
                        // die;
                    } elseif ($room2 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel43']['pricehotelroom21'] = $response2->pax1v_43; 
                            $_SESSION['hotel43']['pricehotelroom22'] = $response2->pax2v_43; 
                            $_SESSION['hotel43']['totalhotelr23'] = $response2->pax1v_43 + $response2->pax2v_43 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel43']['pricehotelroom21'] = $response2->pax1m_43; 
                            $_SESSION['hotel43']['pricehotelroom22'] = $response2->pax2m_43; 
                            $_SESSION['hotel43']['totalhotelr23'] = $response2->pax1m_43 + $response2->pax2m_43 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel43']['pricehotelroom21'] = $response2->pax1d_43; 
                            $_SESSION['hotel43']['pricehotelroom22'] = $response2->pax2d_43; 
                            $_SESSION['hotel43']['totalhotelr23'] = $response2->pax1d_43 + $response2->pax2d_43 * ($room2-1 + $roomChild2); 
                        }
                    } elseif ($room2 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel43']['pricehotelroom21'] = $response2->pax1v_43; 
                            $_SESSION['hotel43']['pricehotelroom22'] = $response2->pax2v_43; 
                            $_SESSION['hotel43']['totalhotelr24'] = $response2->pax1v_43 + $response2->pax2v_43 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel43']['pricehotelroom21'] = $response2->pax1m_43; 
                            $_SESSION['hotel43']['pricehotelroom22'] = $response2->pax2m_43; 
                            $_SESSION['hotel43']['totalhotelr24'] = $response2->pax1m_43 + $response2->pax2m_43 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel43']['pricehotelroom21'] = $response2->pax1d_43; 
                            $_SESSION['hotel43']['pricehotelroom22'] = $response2->pax2d_43; 
                            $_SESSION['hotel43']['totalhotelr24'] = $response2->pax1d_43 + $response2->pax2d_43 * ($room2-1 + $roomChild2); 
                        }
                    }


                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 

                    if ($room3 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel43']['pricehotelroom31'] = $response2->pax1v_43; 
                                $_SESSION['hotel43']['pricehotelroom32'] = $response2->pax2v_43; 
                                $_SESSION['hotel43']['totalhotelr31'] = $response2->pax1v_43 + $response2->pax2v_43 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel43']['pricehotelroom31'] = $response2->pax1v_43; 
                                $_SESSION['hotel43']['totalhotelr31'] = $response2->pax1v_43 ;
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel43']['pricehotelroom31'] = $response2->pax1m_43; 
                                $_SESSION['hotel43']['pricehotelroom32'] = $response2->pax2m_43; 
                                $_SESSION['hotel43']['totalhotelr31'] = $response2->pax1m_43 + $response2->pax2m_43 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel43']['pricehotelroom31'] = $response2->pax1m_43; 
                                $_SESSION['hotel43']['totalhotelr31'] = $response2->pax1m_43;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel43']['pricehotelroom31'] = $response2->pax1d_43; 
                                $_SESSION['hotel43']['pricehotelroom32'] = $response2->pax2d_43; 
                                $_SESSION['hotel43']['totalhotelr31'] = $response2->pax1d_43 + $response2->pax2d_43 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel43']['pricehotelroom31'] = $response2->pax1d_43; 
                                $_SESSION['hotel43']['totalhotelr31'] = $response2->pax1d_43;
                            }
                        }
 

                    } elseif ($room3 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel43']['pricehotelroom31'] = $response2->pax1v_43; 
                            $_SESSION['hotel43']['pricehotelroom32'] = $response2->pax2v_43; 
                            $_SESSION['hotel43']['totalhotelr32'] = $response2->pax1v_43 + $response2->pax2v_43 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel43']['pricehotelroom31'] = $response2->pax1m_43; 
                            $_SESSION['hotel43']['pricehotelroom32'] = $response2->pax2m_43; 
                            $_SESSION['hotel43']['totalhotelr32'] = $response2->pax1m_43 + $response2->pax2m_43 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel43']['pricehotelroom31'] = $response2->pax1d_43; 
                            $_SESSION['hotel43']['pricehotelroom32'] = $response2->pax2d_43; 
                            $_SESSION['hotel43']['totalhotelr32'] = $response2->pax1d_43 + $response2->pax2d_43 * ($room3-1 + $roomChild3); 
                        }
                    } elseif ($room3 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel43']['pricehotelroom31'] = $response2->pax1v_43; 
                            $_SESSION['hotel43']['pricehotelroom32'] = $response2->pax2v_43; 
                            $_SESSION['hotel43']['totalhotelr33'] = $response2->pax1v_43 + $response2->pax2v_43 * ($room3-1+ $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel43']['pricehotelroom31'] = $response2->pax1m_43; 
                            $_SESSION['hotel43']['pricehotelroom32'] = $response2->pax2m_43; 
                            $_SESSION['hotel43']['totalhotelr33'] = $response2->pax1m_43 + $response2->pax2m_43 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel43']['pricehotelroom31'] = $response2->pax1d_43; 
                            $_SESSION['hotel43']['pricehotelroom32'] = $response2->pax2d_43; 
                            $_SESSION['hotel43']['totalhotelr33'] = $response2->pax1d_43 + $response2->pax2d_43 * ($room3-1 + $roomChild3); 
                        }
                    } elseif ($room3 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel43']['pricehotelroom31'] = $response2->pax1v_43; 
                            $_SESSION['hotel43']['pricehotelroom32'] = $response2->pax2v_43; 
                            $_SESSION['hotel43']['totalhotelr34'] = $response2->pax1v_43 + $response2->pax2v_43 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel43']['pricehotelroom31'] = $response2->pax1m_43; 
                            $_SESSION['hotel43']['pricehotelroom32'] = $response2->pax2m_43; 
                            $_SESSION['hotel43']['totalhotelr34'] = $response2->pax1m_43 + $response2->pax2m_43 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel43']['pricehotelroom31'] = $response2->pax1d_43; 
                            $_SESSION['hotel43']['pricehotelroom32'] = $response2->pax2d_43; 
                            $_SESSION['hotel43']['totalhotelr34'] = $response2->pax1d_43 + $response2->pax2d_43 * ($room3-1 + $roomChild3); 
                        }

                    }


                    if ($room4 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel43']['pricehotelroom41'] = $response2->pax1v_43; 
                                $_SESSION['hotel43']['pricehotelroom42'] = $response2->pax2v_43; 
                                $_SESSION['hotel43']['totalhotelr41'] = $response2->pax1v_43 + $response2->pax2v_43 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel43']['pricehotelroom41'] = $response2->pax1v_43; 
                                $_SESSION['hotel43']['totalhotelr41'] = $response2->pax1v_43;
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel43']['pricehotelroom41'] = $response2->pax1m_43; 
                                $_SESSION['hotel43']['pricehotelroom42'] = $response2->pax2m_43; 
                                $_SESSION['hotel43']['totalhotelr41'] = $response2->pax1m_43 + $response2->pax2m_43 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel43']['pricehotelroom41'] = $response2->pax1m_43; 
                                $_SESSION['hotel43']['totalhotelr41'] = $response2->pax1m_43;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel43']['pricehotelroom41'] = $response2->pax1d_43; 
                                $_SESSION['hotel43']['pricehotelroom42'] = $response2->pax2d_43; 
                                $_SESSION['hotel43']['totalhotelr41'] = $response2->pax1d_43 + $response2->pax2d_43 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel43']['pricehotelroom41'] = $response2->pax1d_43; 
                                $_SESSION['hotel43']['totalhotelr41'] = $response2->pax1d_43;
                            }
                        }
                    } elseif ($room4 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel43']['pricehotelroom41'] = $response2->pax1v_43; 
                            $_SESSION['hotel43']['pricehotelroom42'] = $response2->pax2v_43; 
                            $_SESSION['hotel43']['totalhotelr42'] = $response2->pax1v_43 + $response2->pax2v_43 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel43']['pricehotelroom41'] = $response2->pax1m_43; 
                            $_SESSION['hotel43']['pricehotelroom42'] = $response2->pax2m_43; 
                            $_SESSION['hotel43']['totalhotelr42'] = $response2->pax1m_43 + $response2->pax2m_43 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel43']['pricehotelroom41'] = $response2->pax1d_43; 
                            $_SESSION['hotel43']['pricehotelroom42'] = $response2->pax2d_43; 
                            $_SESSION['hotel43']['totalhotelr42'] = $response2->pax1d_43 + $response2->pax2d_43 * ($room4-1 + $roomChild4); 
                        }

                    } elseif ($room4 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel43']['pricehotelroom41'] = $response2->pax1v_43; 
                            $_SESSION['hotel43']['pricehotelroom42'] = $response2->pax2v_43; 
                            $_SESSION['hotel43']['totalhotelr43'] = $response2->pax1v_43 + $response2->pax2v_43 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel43']['pricehotelroom41'] = $response2->pax1m_43; 
                            $_SESSION['hotel43']['pricehotelroom42'] = $response2->pax2m_43; 
                            $_SESSION['hotel43']['totalhotelr43'] = $response2->pax1m_43 + $response2->pax2m_43 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel43']['pricehotelroom41'] = $response2->pax1d_43; 
                            $_SESSION['hotel43']['pricehotelroom42'] = $response2->pax2d_43; 
                            $_SESSION['hotel43']['totalhotelr43'] = $response2->pax1d_43 + $response2->pax2d_43 * ($room4-1 + $roomChild4); 
                        }
                    } elseif ($room4 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel43']['pricehotelroom41'] = $response2->pax1v_43; 
                            $_SESSION['hotel43']['pricehotelroom42'] = $response2->pax2v_43; 
                            $_SESSION['hotel43']['totalhotelr44'] = $response2->pax1v_43 + $response2->pax2v_43 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel43']['pricehotelroom41'] = $response2->pax1m_43; 
                            $_SESSION['hotel43']['pricehotelroom42'] = $response2->pax2m_43; 
                            $_SESSION['hotel43']['totalhotelr44'] = $response2->pax1m_43 + $response2->pax2m_43 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel43']['pricehotelroom41'] = $response2->pax1d_43; 
                            $_SESSION['hotel43']['pricehotelroom42'] = $response2->pax2d_43; 
                            $_SESSION['hotel43']['totalhotelr44'] = $response2->pax1d_43 + $response2->pax2d_43 * ($room4-1 + $roomChild4); 
                        }
                    }
                    #precio total para adultos 43
                    //   echo '<pre>';
                    // print_r($sqlt);
                    // echo '</pre> ';
                    // die;

                    $sql = ($_SESSION['hotel43']['totalhotelr11'] + $_SESSION['hotel43']['totalhotelr12'] + $_SESSION['hotel43']['totalhotelr13'] + $_SESSION['hotel43']['totalhotelr14']) * $room1 ;
                    $dbl = ($_SESSION['hotel43']['totalhotelr21'] + $_SESSION['hotel43']['totalhotelr22'] + $_SESSION['hotel43']['totalhotelr23'] + $_SESSION['hotel43']['totalhotelr24']) * $room2;
                    $tpl = ($_SESSION['hotel43']['totalhotelr31'] + $_SESSION['hotel43']['totalhotelr32'] + $_SESSION['hotel43']['totalhotelr33'] + $_SESSION['hotel43']['totalhotelr34']) * $room3;
                    $qua = ($_SESSION['hotel43']['totalhotelr41'] + $_SESSION['hotel43']['totalhotelr42'] + $_SESSION['hotel43']['totalhotelr43'] + $_SESSION['hotel43']['totalhotelr44']) * $room4;


                    $precioAdulto = ($_SESSION['hotel43']['totalhotelr11'] + $_SESSION['hotel43']['totalhotelr12'] + $_SESSION['hotel43']['totalhotelr13'] + $_SESSION['hotel43']['totalhotelr14'] + $_SESSION['hotel43']['totalhotelr21'] + $_SESSION['hotel43']['totalhotelr22'] + $_SESSION['hotel43']['totalhotelr23'] + $_SESSION['hotel43']['totalhotelr24'] + $_SESSION['hotel43']['totalhotelr31'] + $_SESSION['hotel43']['totalhotelr32'] + $_SESSION['hotel43']['totalhotelr33'] + $_SESSION['hotel43']['totalhotelr34'] + $_SESSION['hotel43']['totalhotelr41'] + $_SESSION['hotel43']['totalhotelr42'] + $_SESSION['hotel43']['totalhotelr43'] + $_SESSION['hotel43']['totalhotelr44'] + $totalsch);
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto + $transporte;
                    #precio total para ninos 21
                    // echo '<pre>';
                    // // print_r($_SESSION['toursbooking']['rooms']);
                    // print_r($_SESSION['toursbooking']['totaltours']);
                    // echo '</pre> ';
                    // die;

                } elseif ($tours == 54) {
                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $respuesta['sgl'];
                        $room1Child  = $respuesta['chv21'];

                        if($idCategoria == 2){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel54']['pricehotelroom11'] = $response2->pax1v_54; 
                                $_SESSION['hotel54']['pricehotelroom12'] = $response2->pax2v_54 ; 
                                $_SESSION['hotel54']['totalhotelr11'] =  $response2->pax1v_54 + $response2->pax2v_54 * ($room1-1 + $roomChild1) ; 
                            }else{
                                $_SESSION['hotel54']['pricehotelroom11'] = $response2->pax1v_54; 
                                $_SESSION['hotel54']['totalhotelr11'] = $response2->pax1v_54; 
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel54']['pricehotelroom11'] = $response2->pax1m_54; 
                                $_SESSION['hotel54']['pricehotelroom12'] = $response2->pax2m_54 ; 
                                $_SESSION['hotel54']['totalhotelr11'] = $response2->pax1m_54 + $response2->pax2m_54 * ($room1-1 + $roomChild1); 
                            }else{
                                $_SESSION['hotel54']['pricehotelroom11'] = $response2->pax1m_54; 
                                $_SESSION['hotel54']['totalhotelr11'] = $response2->pax1m_54; 
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel54']['pricehotelroom11'] = $response2->pax1d_54; 
                                $_SESSION['hotel54']['pricehotelroom12'] = $response2->pax2d_54 ; 
                                $_SESSION['hotel54']['totalhotelr11'] = $response2->pax1d_54 + $response2->pax2d_54 * ($room1-1 + $roomChild1); 
                            }else{
                                $_SESSION['hotel54']['pricehotelroom11'] = $response2->pax1d_54; 
                                $_SESSION['hotel54']['totalhotelr11'] = $response2->pax1d_54; 
                            }
                        }

                    } elseif ($room1 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                     
                        if($idCategoria == 2){
                            $_SESSION['hotel54']['pricehotelroom11'] = $response2->pax1v_54; 
                            $_SESSION['hotel54']['pricehotelroom12'] = $response2->pax2v_54 ; 
                            $_SESSION['hotel54']['totalhotelr12'] = $response2->pax1v_54 + $response2->pax2v_54 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel54']['pricehotelroom11'] = $response2->pax1m_54; 
                            $_SESSION['hotel54']['pricehotelroom12'] = $response2->pax2m_54; 
                            $_SESSION['hotel54']['totalhotelr12'] = $response2->pax1m_54 + $response2->pax2m_54 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel54']['pricehotelroom11'] = $response2->pax1d_54; 
                            $_SESSION['hotel54']['pricehotelroom12'] = $response2->pax2d_54; 
                            $_SESSION['hotel54']['totalhotelr12'] = $response2->pax1d_54 + $response2->pax2d_54 * ($room1-1 + $roomChild1); 
                        }
                    } elseif ($room1 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel54']['pricehotelroom11'] = $response2->pax1v_54; 
                            $_SESSION['hotel54']['pricehotelroom12'] = $response2->pax2v_54; 
                            $_SESSION['hotel54']['totalhotelr13'] = $response2->pax1v_54 + $response2->pax2v_54 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel54']['pricehotelroom11'] = $response2->pax1m_54; 
                            $_SESSION['hotel54']['pricehotelroom12'] = $response2->pax2m_54; 
                            $_SESSION['hotel54']['totalhotelr13'] = $response2->pax1m_54 + $response2->pax2m_54 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel54']['pricehotelroom11'] = $response2->pax1d_54; 
                            $_SESSION['hotel54']['pricehotelroom12'] = $response2->pax2d_54; 
                            $_SESSION['hotel54']['totalhotelr13'] = $response2->pax1d_54 + $response2->pax2d_54 * ($room1-1 + $roomChild1); 
                        }
                    } elseif ($room1 == 4)  {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel54']['pricehotelroom11'] = $response2->pax1v_54; 
                            $_SESSION['hotel54']['pricehotelroom12'] = $response2->pax2v_54; 
                            $_SESSION['hotel54']['totalhotelr14'] = $response2->pax1v_54 + $response2->pax2v_54 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel54']['pricehotelroom11'] = $response2->pax1m_54; 
                            $_SESSION['hotel54']['pricehotelroom12'] = $response2->pax2m_54; 
                            $_SESSION['hotel54']['totalhotelr14'] = $response2->pax1m_54 + $response2->pax2m_54 * ($room1-1 + $roomChild1);  
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel54']['pricehotelroom11'] = $response2->pax1d_54; 
                            $_SESSION['hotel54']['pricehotelroom12'] = $response2->pax2d_54; 
                            $_SESSION['hotel54']['totalhotelr14'] = $response2->pax1d_54 + $response2->pax2d_54 * ($room1-1 + $roomChild1);  
                        }
                    }

                    //echo $tours;

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel54']['pricehotelroom21'] = $response2->pax1v_54; 
                                $_SESSION['hotel54']['pricehotelroom22'] = $response2->pax2v_54; 
                                $_SESSION['hotel54']['totalhotelr21'] = $response2->pax1v_54 + $response2->pax2v_54 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel54']['pricehotelroom21'] = $response2->pax1v_54; 
                                $_SESSION['hotel54']['totalhotelr21'] = $response2->pax1v_54; 
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel54']['pricehotelroom21'] = $response2->pax1m_54; 
                                $_SESSION['hotel54']['pricehotelroom22'] = $response2->pax2m_54; 
                                $_SESSION['hotel54']['totalhotelr21'] = $response2->pax1m_54 + $response2->pax2m_54 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel54']['pricehotelroom21'] = $response2->pax1m_54; 
                                $_SESSION['hotel54']['totalhotelr21'] = $response2->pax1m_54 ;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel54']['pricehotelroom21'] = $response2->pax1d_54; 
                                $_SESSION['hotel54']['pricehotelroom22'] = $response2->pax2d_54; 
                                $_SESSION['hotel54']['totalhotelr21'] = $response2->pax1d_54 + $response2->pax2d_54 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel54']['pricehotelroom21'] = $response2->pax1d_54; 
                                $_SESSION['hotel54']['totalhotelr21'] = $response2->pax1d_54 ;
                            }
                        }


                    } elseif ($room2 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];


                        if($idCategoria == 2){
                            $_SESSION['hotel54']['pricehotelroom21'] = $response2->pax1v_54; 
                            $_SESSION['hotel54']['pricehotelroom22'] = $response2->pax2v_54; 
                            $_SESSION['hotel54']['totalhotelr22'] = $response2->pax1v_54 + $response2->pax2v_54 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel54']['pricehotelroom21'] = $response2->pax1m_54; 
                            $_SESSION['hotel54']['pricehotelroom22'] = $response2->pax2m_54; 
                            $_SESSION['hotel54']['totalhotelr22'] = $response2->pax1m_54 + $response2->pax2m_54 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel54']['pricehotelroom21'] = $response2->pax1d_54; 
                            $_SESSION['hotel54']['pricehotelroom22'] = $response2->pax2d_54; 
                            $_SESSION['hotel54']['totalhotelr22'] = $response2->pax1d_54 + $response2->pax2d_54 * ($room2-1 + $roomChild2); 
                        }

                    } elseif ($room2 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel54']['pricehotelroom21'] = $response2->pax1v_54; 
                            $_SESSION['hotel54']['pricehotelroom22'] = $response2->pax2v_54; 
                            $_SESSION['hotel54']['totalhotelr23'] = $response2->pax1v_54 + $response2->pax2v_54 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel54']['pricehotelroom21'] = $response2->pax1m_54; 
                            $_SESSION['hotel54']['pricehotelroom22'] = $response2->pax2m_54; 
                            $_SESSION['hotel54']['totalhotelr23'] = $response2->pax1m_54 + $response2->pax2m_54 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel54']['pricehotelroom21'] = $response2->pax1d_54; 
                            $_SESSION['hotel54']['pricehotelroom22'] = $response2->pax2d_54; 
                            $_SESSION['hotel54']['totalhotelr23'] = $response2->pax1d_54 + $response2->pax2d_54 * ($room2-1 + $roomChild2); 
                        }
                    } elseif ($room2 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel54']['pricehotelroom21'] = $response2->pax1v_54; 
                            $_SESSION['hotel54']['pricehotelroom22'] = $response2->pax2v_54; 
                            $_SESSION['hotel54']['totalhotelr24'] = $response2->pax1v_54 + $response2->pax2v_54 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel54']['pricehotelroom21'] = $response2->pax1m_54; 
                            $_SESSION['hotel54']['pricehotelroom22'] = $response2->pax2m_54; 
                            $_SESSION['hotel54']['totalhotelr24'] = $response2->pax1m_54 + $response2->pax2m_54 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel54']['pricehotelroom21'] = $response2->pax1d_54; 
                            $_SESSION['hotel54']['pricehotelroom22'] = $response2->pax2d_54; 
                            $_SESSION['hotel54']['totalhotelr24'] = $response2->pax1d_54 + $response2->pax2d_54 * ($room2-1 + $roomChild2); 
                        }
                    }


                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 

                    if ($room3 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel54']['pricehotelroom31'] = $response2->pax1v_54; 
                                $_SESSION['hotel54']['pricehotelroom32'] = $response2->pax2v_54; 
                                $_SESSION['hotel54']['totalhotelr31'] = $response2->pax1v_54 + $response2->pax2v_54 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel54']['pricehotelroom31'] = $response2->pax1v_54; 
                                $_SESSION['hotel54']['totalhotelr31'] = $response2->pax1v_54 ;
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel54']['pricehotelroom31'] = $response2->pax1m_54; 
                                $_SESSION['hotel54']['pricehotelroom32'] = $response2->pax2m_54; 
                                $_SESSION['hotel54']['totalhotelr31'] = $response2->pax1m_54 + $response2->pax2m_54 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel54']['pricehotelroom31'] = $response2->pax1m_54; 
                                $_SESSION['hotel54']['totalhotelr31'] = $response2->pax1m_54;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel54']['pricehotelroom31'] = $response2->pax1d_54; 
                                $_SESSION['hotel54']['pricehotelroom32'] = $response2->pax2d_54; 
                                $_SESSION['hotel54']['totalhotelr31'] = $response2->pax1d_54 + $response2->pax2d_54 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel54']['pricehotelroom31'] = $response2->pax1d_54; 
                                $_SESSION['hotel54']['totalhotelr31'] = $response2->pax1d_54;
                            }
                        }


                    } elseif ($room3 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel54']['pricehotelroom31'] = $response2->pax1v_54; 
                            $_SESSION['hotel54']['pricehotelroom32'] = $response2->pax2v_54; 
                            $_SESSION['hotel54']['totalhotelr32'] = $response2->pax1v_54 + $response2->pax2v_54 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel54']['pricehotelroom31'] = $response2->pax1m_54; 
                            $_SESSION['hotel54']['pricehotelroom32'] = $response2->pax2m_54; 
                            $_SESSION['hotel54']['totalhotelr32'] = $response2->pax1m_54 + $response2->pax2m_54 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel54']['pricehotelroom31'] = $response2->pax1d_54; 
                            $_SESSION['hotel54']['pricehotelroom32'] = $response2->pax2d_54; 
                            $_SESSION['hotel54']['totalhotelr32'] = $response2->pax1d_54 + $response2->pax2d_54 * ($room3-1 + $roomChild3); 
                        }

                    } elseif ($room3 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel54']['pricehotelroom31'] = $response2->pax1v_54; 
                            $_SESSION['hotel54']['pricehotelroom32'] = $response2->pax2v_54; 
                            $_SESSION['hotel54']['totalhotelr33'] = $response2->pax1v_54 + $response2->pax2v_54 * ($room3-1+ $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel54']['pricehotelroom31'] = $response2->pax1m_54; 
                            $_SESSION['hotel54']['pricehotelroom32'] = $response2->pax2m_54; 
                            $_SESSION['hotel54']['totalhotelr33'] = $response2->pax1m_54 + $response2->pax2m_54 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel54']['pricehotelroom31'] = $response2->pax1d_54; 
                            $_SESSION['hotel54']['pricehotelroom32'] = $response2->pax2d_54; 
                            $_SESSION['hotel54']['totalhotelr33'] = $response2->pax1d_54 + $response2->pax2d_54 * ($room3-1 + $roomChild3); 
                        }
                    } elseif ($room3 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel54']['pricehotelroom31'] = $response2->pax1v_54; 
                            $_SESSION['hotel54']['pricehotelroom32'] = $response2->pax2v_54; 
                            $_SESSION['hotel54']['totalhotelr34'] = $response2->pax1v_54 + $response2->pax2v_54 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel54']['pricehotelroom31'] = $response2->pax1m_54; 
                            $_SESSION['hotel54']['pricehotelroom32'] = $response2->pax2m_54; 
                            $_SESSION['hotel54']['totalhotelr34'] = $response2->pax1m_54 + $response2->pax2m_54 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel54']['pricehotelroom31'] = $response2->pax1d_54; 
                            $_SESSION['hotel54']['pricehotelroom32'] = $response2->pax2d_54; 
                            $_SESSION['hotel54']['totalhotelr34'] = $response2->pax1d_54 + $response2->pax2d_54 * ($room3-1 + $roomChild3); 
                        }
                    }
                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 

                    if ($room4 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel54']['pricehotelroom41'] = $response2->pax1v_54; 
                                $_SESSION['hotel54']['pricehotelroom42'] = $response2->pax2v_54; 
                                $_SESSION['hotel54']['totalhotelr41'] = $response2->pax1v_54 + $response2->pax2v_54 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel54']['pricehotelroom41'] = $response2->pax1v_54; 
                                $_SESSION['hotel54']['totalhotelr41'] = $response2->pax1v_54;
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel54']['pricehotelroom41'] = $response2->pax1m_54; 
                                $_SESSION['hotel54']['pricehotelroom42'] = $response2->pax2m_54; 
                                $_SESSION['hotel54']['totalhotelr41'] = $response2->pax1m_54 + $response2->pax2m_54 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel54']['pricehotelroom41'] = $response2->pax1m_54; 
                                $_SESSION['hotel54']['totalhotelr41'] = $response2->pax1m_54;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel54']['pricehotelroom41'] = $response2->pax1d_54; 
                                $_SESSION['hotel54']['pricehotelroom42'] = $response2->pax2d_54; 
                                $_SESSION['hotel54']['totalhotelr41'] = $response2->pax1d_54 + $response2->pax2d_54 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel54']['pricehotelroom41'] = $response2->pax1d_54; 
                                $_SESSION['hotel54']['totalhotelr41'] = $response2->pax1d_54;
                            }
                        }
                    } elseif ($room4 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel54']['pricehotelroom41'] = $response2->pax1v_54; 
                            $_SESSION['hotel54']['pricehotelroom42'] = $response2->pax2v_54; 
                            $_SESSION['hotel54']['totalhotelr42'] = $response2->pax1v_54 + $response2->pax2v_54 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel54']['pricehotelroom41'] = $response2->pax1m_54; 
                            $_SESSION['hotel54']['pricehotelroom42'] = $response2->pax2m_54; 
                            $_SESSION['hotel54']['totalhotelr42'] = $response2->pax1m_54 + $response2->pax2m_54 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel54']['pricehotelroom41'] = $response2->pax1d_54; 
                            $_SESSION['hotel54']['pricehotelroom42'] = $response2->pax2d_54; 
                            $_SESSION['hotel54']['totalhotelr42'] = $response2->pax1d_54 + $response2->pax2d_54 * ($room4-1 + $roomChild4); 
                        }

                    } elseif ($room4 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel54']['pricehotelroom41'] = $response2->pax1v_54; 
                            $_SESSION['hotel54']['pricehotelroom42'] = $response2->pax2v_54; 
                            $_SESSION['hotel54']['totalhotelr43'] = $response2->pax1v_54 + $response2->pax2v_54 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel54']['pricehotelroom41'] = $response2->pax1m_54; 
                            $_SESSION['hotel54']['pricehotelroom42'] = $response2->pax2m_54; 
                            $_SESSION['hotel54']['totalhotelr43'] = $response2->pax1m_54 + $response2->pax2m_54 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel54']['pricehotelroom41'] = $response2->pax1d_54; 
                            $_SESSION['hotel54']['pricehotelroom42'] = $response2->pax2d_54; 
                            $_SESSION['hotel54']['totalhotelr43'] = $response2->pax1d_54 + $response2->pax2d_54 * ($room4-1 + $roomChild4); 
                        }
                    } elseif ($room4 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel54']['pricehotelroom41'] = $response2->pax1v_54; 
                            $_SESSION['hotel54']['pricehotelroom42'] = $response2->pax2v_54; 
                            $_SESSION['hotel54']['totalhotelr44'] = $response2->pax1v_54 + $response2->pax2v_54 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel54']['pricehotelroom41'] = $response2->pax1m_54; 
                            $_SESSION['hotel54']['pricehotelroom42'] = $response2->pax2m_54; 
                            $_SESSION['hotel54']['totalhotelr44'] = $response2->pax1m_54 + $response2->pax2m_54 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel54']['pricehotelroom41'] = $response2->pax1d_54; 
                            $_SESSION['hotel54']['pricehotelroom42'] = $response2->pax2d_54; 
                            $_SESSION['hotel54']['totalhotelr44'] = $response2->pax1d_54 + $response2->pax2d_54 * ($room4-1 + $roomChild4); 
                        }
                    }

                    #precio total para adultos 54
                    $sql = ($_SESSION['hotel54']['totalhotelr11'] + $_SESSION['hotel54']['totalhotelr12'] + $_SESSION['hotel54']['totalhotelr13'] + $_SESSION['hotel54']['totalhotelr14']) * $room1 ;
                    $dbl = ($_SESSION['hotel54']['totalhotelr21'] + $_SESSION['hotel54']['totalhotelr22'] + $_SESSION['hotel54']['totalhotelr23'] + $_SESSION['hotel54']['totalhotelr24']) * $room2;
                    $tpl = ($_SESSION['hotel54']['totalhotelr31'] + $_SESSION['hotel54']['totalhotelr32'] + $_SESSION['hotel54']['totalhotelr33'] + $_SESSION['hotel54']['totalhotelr34']) * $room3;
                    $qua = ($_SESSION['hotel54']['totalhotelr41'] + $_SESSION['hotel54']['totalhotelr42'] + $_SESSION['hotel54']['totalhotelr43'] + $_SESSION['hotel54']['totalhotelr44']) * $room4;

                    $precioAdulto = ($_SESSION['hotel54']['totalhotelr11'] + $_SESSION['hotel54']['totalhotelr12'] + $_SESSION['hotel54']['totalhotelr13'] + $_SESSION['hotel54']['totalhotelr14'] + $_SESSION['hotel54']['totalhotelr21'] + $_SESSION['hotel54']['totalhotelr22'] + $_SESSION['hotel54']['totalhotelr23'] + $_SESSION['hotel54']['totalhotelr24'] + $_SESSION['hotel54']['totalhotelr31'] + $_SESSION['hotel54']['totalhotelr32'] + $_SESSION['hotel54']['totalhotelr33'] + $_SESSION['hotel54']['totalhotelr34'] + $_SESSION['hotel54']['totalhotelr41'] + $_SESSION['hotel54']['totalhotelr42'] + $_SESSION['hotel54']['totalhotelr43'] + $_SESSION['hotel54']['totalhotelr44'] +$totalsch);
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto + $transporte;
                    #precio total para ninos 21
                    // echo '<pre>';
                    // print_r($totalsch);
                    // echo '</pre> ';
                    // die;
                } elseif ($tours == 65) {
                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $respuesta['sgl'];
                        $room1Child  = $respuesta['chv21'];

                        if($idCategoria == 2){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel65']['pricehotelroom11'] = $response2->pax1v_65; 
                                $_SESSION['hotel65']['pricehotelroom12'] = $response2->pax2v_65 ; 
                                $_SESSION['hotel65']['totalhotelr11'] =  $response2->pax1v_65 + $response2->pax2v_65 * ($room1-1 + $roomChild1) ; 
                            }else{
                                $_SESSION['hotel65']['pricehotelroom11'] = $response2->pax1v_65; 
                                $_SESSION['hotel65']['totalhotelr11'] = $response2->pax1v_65; 
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel65']['pricehotelroom11'] = $response2->pax1m_65; 
                                $_SESSION['hotel65']['pricehotelroom12'] = $response2->pax2m_65 ; 
                                $_SESSION['hotel65']['totalhotelr11'] = $response2->pax1m_65 + $response2->pax2m_65 * ($room1-1 + $roomChild1); 
                            }else{
                                $_SESSION['hotel65']['pricehotelroom11'] = $response2->pax1m_65; 
                                $_SESSION['hotel65']['totalhotelr11'] = $response2->pax1m_65; 
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel65']['pricehotelroom11'] = $response2->pax1d_65; 
                                $_SESSION['hotel65']['pricehotelroom12'] = $response2->pax2d_65 ; 
                                $_SESSION['hotel65']['totalhotelr11'] = $response2->pax1d_65 + $response2->pax2d_65 * ($room1-1 + $roomChild1); 
                            }else{
                                $_SESSION['hotel65']['pricehotelroom11'] = $response2->pax1d_65; 
                                $_SESSION['hotel65']['totalhotelr11'] = $response2->pax1d_65; 
                            }
                        }
                        // print_r($_SESSION['hotel65']['totalhotelr11']);
                        // die;

                    } elseif ($room1 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                     
                        if($idCategoria == 2){
                            $_SESSION['hotel65']['pricehotelroom11'] = $response2->pax1v_65; 
                            $_SESSION['hotel65']['pricehotelroom12'] = $response2->pax2v_65 ; 
                            $_SESSION['hotel65']['totalhotelr12'] = $response2->pax1v_65 + $response2->pax2v_65 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel65']['pricehotelroom11'] = $response2->pax1m_65; 
                            $_SESSION['hotel65']['pricehotelroom12'] = $response2->pax2m_65; 
                            $_SESSION['hotel65']['totalhotelr12'] = $response2->pax1m_65 + $response2->pax2m_65 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel65']['pricehotelroom11'] = $response2->pax1d_65; 
                            $_SESSION['hotel65']['pricehotelroom12'] = $response2->pax2d_65; 
                            $_SESSION['hotel65']['totalhotelr12'] = $response2->pax1d_65 + $response2->pax2d_65 * ($room1-1 + $roomChild1); 
                        }
                    } elseif ($room1 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel65']['pricehotelroom11'] = $response2->pax1v_65; 
                            $_SESSION['hotel65']['pricehotelroom12'] = $response2->pax2v_65; 
                            $_SESSION['hotel65']['totalhotelr13'] = $response2->pax1v_65 + ($response2->pax2v_65 * ($room1-1 + $roomChild1)); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel65']['pricehotelroom11'] = $response2->pax1m_65; 
                            $_SESSION['hotel65']['pricehotelroom12'] = $response2->pax2m_65; 
                            $_SESSION['hotel65']['totalhotelr13'] = $response2->pax1m_65 + $response2->pax2m_65 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel65']['pricehotelroom11'] = $response2->pax1d_65; 
                            $_SESSION['hotel65']['pricehotelroom12'] = $response2->pax2d_65; 
                            $_SESSION['hotel65']['totalhotelr13'] = $response2->pax1d_65 + $response2->pax2d_65 * ($room1-1 + $roomChild1); 
                        }
                    } elseif ($room1 == 4)  {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel65']['pricehotelroom11'] = $response2->pax1v_65; 
                            $_SESSION['hotel65']['pricehotelroom12'] = $response2->pax2v_65; 
                            $_SESSION['hotel65']['totalhotelr14'] = $response2->pax1v_65 + $response2->pax2v_65 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel65']['pricehotelroom11'] = $response2->pax1m_65; 
                            $_SESSION['hotel65']['pricehotelroom12'] = $response2->pax2m_65; 
                            $_SESSION['hotel65']['totalhotelr14'] = $response2->pax1m_65 + $response2->pax2m_65 * ($room1-1 + $roomChild1);  
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel65']['pricehotelroom11'] = $response2->pax1d_65; 
                            $_SESSION['hotel65']['pricehotelroom12'] = $response2->pax2d_65; 
                            $_SESSION['hotel65']['totalhotelr14'] = $response2->pax1d_65 + $response2->pax2d_65 * ($room1-1 + $roomChild1);  
                        }
                    }

                    //echo $tours;

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel65']['pricehotelroom21'] = $response2->pax1v_65; 
                                $_SESSION['hotel65']['pricehotelroom22'] = $response2->pax2v_65; 
                                $_SESSION['hotel65']['totalhotelr21'] = $response2->pax1v_65 + $response2->pax2v_65 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel65']['pricehotelroom21'] = $response2->pax1v_65; 
                                $_SESSION['hotel65']['totalhotelr21'] = $response2->pax1v_65; 
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel65']['pricehotelroom21'] = $response2->pax1m_65; 
                                $_SESSION['hotel65']['pricehotelroom22'] = $response2->pax2m_65; 
                                $_SESSION['hotel65']['totalhotelr21'] = $response2->pax1m_65 + $response2->pax2m_65 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel65']['pricehotelroom21'] = $response2->pax1m_65; 
                                $_SESSION['hotel65']['totalhotelr21'] = $response2->pax1m_65 ;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel65']['pricehotelroom21'] = $response2->pax1d_65; 
                                $_SESSION['hotel65']['pricehotelroom22'] = $response2->pax2d_65; 
                                $_SESSION['hotel65']['totalhotelr21'] = $response2->pax1d_65 + $response2->pax2d_65 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel65']['pricehotelroom21'] = $response2->pax1d_65; 
                                $_SESSION['hotel65']['totalhotelr21'] = $response2->pax1d_65 ;
                            }
                        }


                    } elseif ($room2 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];


                        if($idCategoria == 2){
                            $_SESSION['hotel65']['pricehotelroom21'] = $response2->pax1v_65; 
                            $_SESSION['hotel65']['pricehotelroom22'] = $response2->pax2v_65; 
                            $_SESSION['hotel65']['totalhotelr22'] = $response2->pax1v_65 + $response2->pax2v_65 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel65']['pricehotelroom21'] = $response2->pax1m_65; 
                            $_SESSION['hotel65']['pricehotelroom22'] = $response2->pax2m_65; 
                            $_SESSION['hotel65']['totalhotelr22'] = $response2->pax1m_65 + $response2->pax2m_65 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel65']['pricehotelroom21'] = $response2->pax1d_65; 
                            $_SESSION['hotel65']['pricehotelroom22'] = $response2->pax2d_65; 
                            $_SESSION['hotel65']['totalhotelr22'] = $response2->pax1d_65 + $response2->pax2d_65 * ($room2-1 + $roomChild2); 
                        }

                    } elseif ($room2 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel65']['pricehotelroom21'] = $response2->pax1v_65; 
                            $_SESSION['hotel65']['pricehotelroom22'] = $response2->pax2v_65; 
                            $_SESSION['hotel65']['totalhotelr23'] = $response2->pax1v_65 + $response2->pax2v_65 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel65']['pricehotelroom21'] = $response2->pax1m_65; 
                            $_SESSION['hotel65']['pricehotelroom22'] = $response2->pax2m_65; 
                            $_SESSION['hotel65']['totalhotelr23'] = $response2->pax1m_65 + $response2->pax2m_65 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel65']['pricehotelroom21'] = $response2->pax1d_65; 
                            $_SESSION['hotel65']['pricehotelroom22'] = $response2->pax2d_65; 
                            $_SESSION['hotel65']['totalhotelr23'] = $response2->pax1d_65 + $response2->pax2d_65 * ($room2-1 + $roomChild2); 
                        }
                    } elseif ($room2 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel65']['pricehotelroom21'] = $response2->pax1v_65; 
                            $_SESSION['hotel65']['pricehotelroom22'] = $response2->pax2v_65; 
                            $_SESSION['hotel65']['totalhotelr24'] = $response2->pax1m_65 + $response2->pax2m_65 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel65']['pricehotelroom21'] = $response2->pax1m_65; 
                            $_SESSION['hotel65']['pricehotelroom22'] = $response2->pax2m_65; 
                            $_SESSION['hotel65']['totalhotelr24'] = $response2->pax1m_65 + $response2->pax2m_65 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel65']['pricehotelroom21'] = $response2->pax1d_65; 
                            $_SESSION['hotel65']['pricehotelroom22'] = $response2->pax2d_65; 
                            $_SESSION['hotel65']['totalhotelr24'] = $response2->pax1d_65 + $response2->pax2d_65 * ($room2-1 + $roomChild2); 
                        }
                    }


                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 

                    if ($room3 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel65']['pricehotelroom31'] = $response2->pax1v_65; 
                                $_SESSION['hotel65']['pricehotelroom32'] = $response2->pax2v_65; 
                                $_SESSION['hotel65']['totalhotelr31'] = $response2->pax1v_65 + $response2->pax2v_65 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel65']['pricehotelroom31'] = $response2->pax1v_65; 
                                $_SESSION['hotel65']['totalhotelr31'] = $response2->pax1v_65 ;
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel65']['pricehotelroom31'] = $response2->pax1m_65; 
                                $_SESSION['hotel65']['pricehotelroom32'] = $response2->pax2m_65; 
                                $_SESSION['hotel65']['totalhotelr31'] = $response2->pax1m_65 + $response2->pax2m_65 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel65']['pricehotelroom31'] = $response2->pax1m_65; 
                                $_SESSION['hotel65']['totalhotelr31'] = $response2->pax1m_65;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel65']['pricehotelroom31'] = $response2->pax1d_65; 
                                $_SESSION['hotel65']['pricehotelroom32'] = $response2->pax2d_65; 
                                $_SESSION['hotel65']['totalhotelr31'] = $response2->pax1d_65 + $response2->pax2d_65 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel65']['pricehotelroom31'] = $response2->pax1d_65; 
                                $_SESSION['hotel65']['totalhotelr31'] = $response2->pax1d_65;
                            }
                        }
                    } elseif ($room3 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel65']['pricehotelroom31'] = $response2->pax1v_65; 
                            $_SESSION['hotel65']['pricehotelroom32'] = $response2->pax2v_65; 
                            $_SESSION['hotel65']['totalhotelr32'] = $response2->pax1v_65 + $response2->pax2v_65 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel65']['pricehotelroom31'] = $response2->pax1m_65; 
                            $_SESSION['hotel65']['pricehotelroom32'] = $response2->pax2m_65; 
                            $_SESSION['hotel65']['totalhotelr32'] = $response2->pax1m_65 + $response2->pax2m_65 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel65']['pricehotelroom31'] = $response2->pax1d_65; 
                            $_SESSION['hotel65']['pricehotelroom32'] = $response2->pax2d_65; 
                            $_SESSION['hotel65']['totalhotelr32'] = $response2->pax1d_65 + $response2->pax2d_65 * ($room3-1 + $roomChild3); 
                        }

                    } elseif ($room3 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel65']['pricehotelroom31'] = $response2->pax1v_65; 
                            $_SESSION['hotel65']['pricehotelroom32'] = $response2->pax2v_65; 
                            $_SESSION['hotel65']['totalhotelr33'] = $response2->pax1v_65 + $response2->pax2v_65 * ($room3-1+ $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel65']['pricehotelroom31'] = $response2->pax1m_65; 
                            $_SESSION['hotel65']['pricehotelroom32'] = $response2->pax2m_65; 
                            $_SESSION['hotel65']['totalhotelr33'] = $response2->pax1m_65 + $response2->pax2m_65 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel65']['pricehotelroom31'] = $response2->pax1d_65; 
                            $_SESSION['hotel65']['pricehotelroom32'] = $response2->pax2d_65; 
                            $_SESSION['hotel65']['totalhotelr33'] = $response2->pax1d_65 + $response2->pax2d_65 * ($room3-1 + $roomChild3); 
                        }
                    } elseif ($room3 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel65']['pricehotelroom31'] = $response2->pax1v_65; 
                            $_SESSION['hotel65']['pricehotelroom32'] = $response2->pax2v_65; 
                            $_SESSION['hotel65']['totalhotelr34'] = $response2->pax1v_65 + $response2->pax2v_65 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel65']['pricehotelroom31'] = $response2->pax1m_65; 
                            $_SESSION['hotel65']['pricehotelroom32'] = $response2->pax2m_65; 
                            $_SESSION['hotel65']['totalhotelr34'] = $response2->pax1m_65 + $response2->pax2m_65 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel65']['pricehotelroom31'] = $response2->pax1d_65; 
                            $_SESSION['hotel65']['pricehotelroom32'] = $response2->pax2d_65; 
                            $_SESSION['hotel65']['totalhotelr34'] = $response2->pax1d_65 + $response2->pax2d_65 * ($room3-1 + $roomChild3); 
                        }
                    }



                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 

                    if ($room4 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel65']['pricehotelroom41'] = $response2->pax1v_65; 
                                $_SESSION['hotel65']['pricehotelroom42'] = $response2->pax2v_65; 
                                $_SESSION['hotel65']['totalhotelr41'] = $response2->pax1v_65 + $response2->pax2v_65 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel65']['pricehotelroom41'] = $response2->pax1v_65; 
                                $_SESSION['hotel65']['totalhotelr41'] = $response2->pax1v_65;
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel65']['pricehotelroom41'] = $response2->pax1m_65; 
                                $_SESSION['hotel65']['pricehotelroom42'] = $response2->pax2m_65; 
                                $_SESSION['hotel65']['totalhotelr41'] = $response2->pax1m_65 + $response2->pax2m_65 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel65']['pricehotelroom41'] = $response2->pax1m_65; 
                                $_SESSION['hotel65']['totalhotelr41'] = $response2->pax1m_65;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel65']['pricehotelroom41'] = $response2->pax1d_65; 
                                $_SESSION['hotel65']['pricehotelroom42'] = $response2->pax2d_65; 
                                $_SESSION['hotel65']['totalhotelr41'] = $response2->pax1d_65 + $response2->pax2d_65 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel65']['pricehotelroom41'] = $response2->pax1d_65; 
                                $_SESSION['hotel65']['totalhotelr41'] = $response2->pax1d_65;
                            }
                        }
                    } elseif ($room4 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel65']['pricehotelroom41'] = $response2->pax1v_65; 
                            $_SESSION['hotel65']['pricehotelroom42'] = $response2->pax2v_65; 
                            $_SESSION['hotel65']['totalhotelr42'] = $response2->pax1v_65 + $response2->pax2v_65 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel65']['pricehotelroom41'] = $response2->pax1m_65; 
                            $_SESSION['hotel65']['pricehotelroom42'] = $response2->pax2m_65; 
                            $_SESSION['hotel65']['totalhotelr42'] = $response2->pax1m_65 + $response2->pax2m_65 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel65']['pricehotelroom41'] = $response2->pax1d_65; 
                            $_SESSION['hotel65']['pricehotelroom42'] = $response2->pax2d_65; 
                            $_SESSION['hotel65']['totalhotelr42'] = $response2->pax1d_65 + $response2->pax2d_65 * ($room4-1 + $roomChild4); 
                        }

                    } elseif ($room4 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel65']['pricehotelroom41'] = $response2->pax1v_65; 
                            $_SESSION['hotel65']['pricehotelroom42'] = $response2->pax2v_65; 
                            $_SESSION['hotel65']['totalhotelr43'] = $response2->pax1v_65 + $response2->pax2v_65 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel65']['pricehotelroom41'] = $response2->pax1m_65; 
                            $_SESSION['hotel65']['pricehotelroom42'] = $response2->pax2m_65; 
                            $_SESSION['hotel65']['totalhotelr43'] = $response2->pax1m_65 + $response2->pax2m_65 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel65']['pricehotelroom41'] = $response2->pax1d_65; 
                            $_SESSION['hotel65']['pricehotelroom42'] = $response2->pax2d_65; 
                            $_SESSION['hotel65']['totalhotelr43'] = $response2->pax1d_65 + $response2->pax2d_65 * ($room4-1 + $roomChild4); 
                        }
                    } elseif ($room4 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel65']['pricehotelroom41'] = $response2->pax1v_65; 
                            $_SESSION['hotel65']['pricehotelroom42'] = $response2->pax2v_65; 
                            $_SESSION['hotel65']['totalhotelr44'] = $response2->pax1v_65 + $response2->pax2v_65 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel65']['pricehotelroom41'] = $response2->pax1m_65; 
                            $_SESSION['hotel65']['pricehotelroom42'] = $response2->pax2m_65; 
                            $_SESSION['hotel65']['totalhotelr44'] = $response2->pax1m_65 + $response2->pax2m_65 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel65']['pricehotelroom41'] = $response2->pax1d_65; 
                            $_SESSION['hotel65']['pricehotelroom42'] = $response2->pax2d_65; 
                            $_SESSION['hotel65']['totalhotelr44'] = $response2->pax1d_65 + $response2->pax2d_65 * ($room4-1 + $roomChild4); 
                        }
                    }
                    #precio total para adultos 65

                    $sql = ($_SESSION['hotel65']['totalhotelr11'] + $_SESSION['hotel65']['totalhotelr12'] + $_SESSION['hotel65']['totalhotelr13'] + $_SESSION['hotel65']['totalhotelr14']) * $room1 ;
                    $dbl = ($_SESSION['hotel65']['totalhotelr21'] + $_SESSION['hotel65']['totalhotelr22'] + $_SESSION['hotel65']['totalhotelr23'] + $_SESSION['hotel65']['totalhotelr24']) * $room2;
                    $tpl = ($_SESSION['hotel65']['totalhotelr31'] + $_SESSION['hotel65']['totalhotelr32'] + $_SESSION['hotel65']['totalhotelr33'] + $_SESSION['hotel65']['totalhotelr34']) * $room3;
                    $qua = ($_SESSION['hotel65']['totalhotelr41'] + $_SESSION['hotel65']['totalhotelr42'] + $_SESSION['hotel65']['totalhotelr43'] + $_SESSION['hotel65']['totalhotelr44']) * $room4;
                    
                    $precioAdulto = ($_SESSION['hotel65']['totalhotelr11'] + $_SESSION['hotel65']['totalhotelr12'] + $_SESSION['hotel65']['totalhotelr13'] + $_SESSION['hotel65']['totalhotelr14'] + $_SESSION['hotel65']['totalhotelr21'] + $_SESSION['hotel65']['totalhotelr22'] + $_SESSION['hotel65']['totalhotelr23'] + $_SESSION['hotel65']['totalhotelr24'] + $_SESSION['hotel65']['totalhotelr31'] + $_SESSION['hotel65']['totalhotelr32'] + $_SESSION['hotel65']['totalhotelr33'] + $_SESSION['hotel65']['totalhotelr34'] + $_SESSION['hotel65']['totalhotelr41'] + $_SESSION['hotel65']['totalhotelr42'] + $_SESSION['hotel65']['totalhotelr43'] + $_SESSION['hotel65']['totalhotelr44'] + $totalsch );

                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto + $transporte;
                    #precio total para ninos 65
                    // echo '<pre>';
                    // print_r($_SESSION['toursbooking']['totaltours']);
                    // echo '</pre> ';
                    // die;
                } elseif ($tours == 76) {
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $respuesta['sgl'];
                        $room1Child  = $respuesta['chv21'];

                        if($idCategoria == 2){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel76']['pricehotelroom11'] = $response2->pax1v_76; 
                                $_SESSION['hotel76']['pricehotelroom12'] = $response2->pax2v_76 ; 
                                $_SESSION['hotel76']['totalhotelr11'] =  $response2->pax1v_76 + $response2->pax2v_76 * ($room1-1 + $roomChild1) ; 
                            }else{
                                $_SESSION['hotel76']['pricehotelroom11'] = $response2->pax1v_76; 
                                $_SESSION['hotel76']['totalhotelr11'] = $response2->pax1v_76; 
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel76']['pricehotelroom11'] = $response2->pax1m_76; 
                                $_SESSION['hotel76']['pricehotelroom12'] = $response2->pax2m_76 ; 
                                $_SESSION['hotel76']['totalhotelr11'] = $response2->pax1m_76 + $response2->pax2m_76 * ($room1-1 + $roomChild1); 
                            }else{
                                $_SESSION['hotel76']['pricehotelroom11'] = $response2->pax1m_76; 
                                $_SESSION['hotel76']['totalhotelr11'] = $response2->pax1m_76; 
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel76']['pricehotelroom11'] = $response2->pax1d_76; 
                                $_SESSION['hotel76']['pricehotelroom12'] = $response2->pax2d_76 ; 
                                $_SESSION['hotel76']['totalhotelr11'] = $response2->pax1d_76 + $response2->pax2d_76 * ($room1-1 + $roomChild1); 
                            }else{
                                $_SESSION['hotel76']['pricehotelroom11'] = $response2->pax1d_76; 
                                $_SESSION['hotel76']['totalhotelr11'] = $response2->pax1d_76; 
                            }
                        }

                    } elseif ($room1 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                     
                        if($idCategoria == 2){
                            $_SESSION['hotel76']['pricehotelroom11'] = $response2->pax1v_76; 
                            $_SESSION['hotel76']['pricehotelroom12'] = $response2->pax2v_76 ; 
                            $_SESSION['hotel76']['totalhotelr12'] = $response2->pax1v_76 + $response2->pax2v_76 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel76']['pricehotelroom11'] = $response2->pax1m_76; 
                            $_SESSION['hotel76']['pricehotelroom12'] = $response2->pax2m_76; 
                            $_SESSION['hotel76']['totalhotelr12'] = $response2->pax1m_76 + $response2->pax2m_76 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel76']['pricehotelroom11'] = $response2->pax1d_76; 
                            $_SESSION['hotel76']['pricehotelroom12'] = $response2->pax2d_76; 
                            $_SESSION['hotel76']['totalhotelr12'] = $response2->pax1d_76 + $response2->pax2d_76 * ($room1-1 + $roomChild1); 
                        }
                    } elseif ($room1 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel76']['pricehotelroom11'] = $response2->pax1v_76; 
                            $_SESSION['hotel76']['pricehotelroom12'] = $response2->pax2v_76; 
                            $_SESSION['hotel76']['totalhotelr13'] = $response2->pax1v_76 + $response2->pax2v_76 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel76']['pricehotelroom11'] = $response2->pax1m_76; 
                            $_SESSION['hotel76']['pricehotelroom12'] = $response2->pax2m_76; 
                            $_SESSION['hotel76']['totalhotelr13'] = $response2->pax1m_76 + $response2->pax2m_76 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel76']['pricehotelroom11'] = $response2->pax1d_76; 
                            $_SESSION['hotel76']['pricehotelroom12'] = $response2->pax2d_76; 
                            $_SESSION['hotel76']['totalhotelr13'] = $response2->pax1d_76 + $response2->pax2d_76 * ($room1-1 + $roomChild1); 
                        }
                        // echo '<pre>';
                        // print_r($response2);
                        // echo '<pre>';
                        // die;


                    } elseif ($room1 == 4)  {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel76']['pricehotelroom11'] = $response2->pax1v_76; 
                            $_SESSION['hotel76']['pricehotelroom12'] = $response2->pax2v_76; 
                            $_SESSION['hotel76']['totalhotelr14'] = $response2->pax1v_76 + $response2->pax2v_76 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel76']['pricehotelroom11'] = $response2->pax1m_76; 
                            $_SESSION['hotel76']['pricehotelroom12'] = $response2->pax2m_76; 
                            $_SESSION['hotel76']['totalhotelr14'] = $response2->pax1m_76 + $response2->pax2m_76 * ($room1-1 + $roomChild1);  
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel76']['pricehotelroom11'] = $response2->pax1d_76; 
                            $_SESSION['hotel76']['pricehotelroom12'] = $response2->pax2d_76; 
                            $_SESSION['hotel76']['totalhotelr14'] = $response2->pax1d_76 + $response2->pax2d_76 * ($room1-1 + $roomChild1);  
                        }
                    }
                    // print_r($response2);
                    // die;
                    //echo $tours;

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel76']['pricehotelroom21'] = $response2->pax1v_76; 
                                $_SESSION['hotel76']['pricehotelroom22'] = $response2->pax2v_76; 
                                $_SESSION['hotel76']['totalhotelr21'] = $response2->pax1v_76 + $response2->pax2v_76 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel76']['pricehotelroom21'] = $response2->pax1v_76; 
                                $_SESSION['hotel76']['totalhotelr22'] = $response2->pax1v_76; 
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel76']['pricehotelroom21'] = $response2->pax1m_76; 
                                $_SESSION['hotel76']['pricehotelroom22'] = $response2->pax2m_76; 
                                $_SESSION['hotel76']['totalhotelr21'] = $response2->pax1m_76 + $response2->pax2m_76 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel76']['pricehotelroom21'] = $response2->pax1m_76; 
                                $_SESSION['hotel76']['totalhotelr21'] = $response2->pax1m_76 ;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel76']['pricehotelroom21'] = $response2->pax1d_76; 
                                $_SESSION['hotel76']['pricehotelroom22'] = $response2->pax2d_76; 
                                $_SESSION['hotel76']['totalhotelr21'] = $response2->pax1d_76 + $response2->pax2d_76 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel76']['pricehotelroom21'] = $response2->pax1d_76; 
                                $_SESSION['hotel76']['totalhotelr21'] = $response2->pax1d_76 ;
                            }
                        }


                    } elseif ($room2 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];


                        if($idCategoria == 2){
                            $_SESSION['hotel76']['pricehotelroom21'] = $response2->pax1v_76; 
                            $_SESSION['hotel76']['pricehotelroom22'] = $response2->pax2v_76; 
                            $_SESSION['hotel76']['totalhotelr22'] = $response2->pax1v_76 + $response2->pax2v_76 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel76']['pricehotelroom21'] = $response2->pax1m_76; 
                            $_SESSION['hotel76']['pricehotelroom22'] = $response2->pax2m_76; 
                            $_SESSION['hotel76']['totalhotelr22'] = $response2->pax1m_76 + $response2->pax2m_76 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel76']['pricehotelroom21'] = $response2->pax1d_76; 
                            $_SESSION['hotel76']['pricehotelroom22'] = $response2->pax2d_76; 
                            $_SESSION['hotel76']['totalhotelr22'] = $response2->pax1d_76 + $response2->pax2d_76 * ($room2-1 + $roomChild2); 
                        }

                    } elseif ($room2 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel76']['pricehotelroom21'] = $response2->pax1v_76; 
                            $_SESSION['hotel76']['pricehotelroom22'] = $response2->pax2v_76; 
                            $_SESSION['hotel76']['totalhotelr23'] = $response2->pax1v_76 + $response2->pax2v_76 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel76']['pricehotelroom21'] = $response2->pax1m_76; 
                            $_SESSION['hotel76']['pricehotelroom22'] = $response2->pax2m_76; 
                            $_SESSION['hotel76']['totalhotelr23'] = $response2->pax1m_76 + $response2->pax2m_76 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel76']['pricehotelroom21'] = $response2->pax1d_76; 
                            $_SESSION['hotel76']['pricehotelroom22'] = $response2->pax2d_76; 
                            $_SESSION['hotel76']['totalhotelr23'] = $response2->pax1d_76 + $response2->pax2d_76 * ($room2-1 + $roomChild2); 
                        }
                    } elseif ($room2 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel76']['pricehotelroom21'] = $response2->pax1v_76; 
                            $_SESSION['hotel76']['pricehotelroom22'] = $response2->pax2v_76; 
                            $_SESSION['hotel76']['totalhotelr24'] = $response2->pax1v_76 + $response2->pax2v_76 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel76']['pricehotelroom21'] = $response2->pax1m_76; 
                            $_SESSION['hotel76']['pricehotelroom22'] = $response2->pax2m_76; 
                            $_SESSION['hotel76']['totalhotelr24'] = $response2->pax1m_76 + $response2->pax2m_76 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel76']['pricehotelroom21'] = $response2->pax1d_76; 
                            $_SESSION['hotel76']['pricehotelroom22'] = $response2->pax2d_76; 
                            $_SESSION['hotel76']['totalhotelr24'] = $response2->pax1d_76 + $response2->pax2d_76 * ($room2-1 + $roomChild2); 
                        }
                    }


                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 

                    if ($room3 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel76']['pricehotelroom31'] = $response2->pax1v_76; 
                                $_SESSION['hotel76']['pricehotelroom32'] = $response2->pax2v_76; 
                                $_SESSION['hotel76']['totalhotelr31'] = $response2->pax1v_76 + $response2->pax2v_76 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel76']['pricehotelroom31'] = $response2->pax1v_76; 
                                $_SESSION['hotel76']['totalhotelr31'] = $response2->pax1v_76 ;
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel76']['pricehotelroom31'] = $response2->pax1m_76; 
                                $_SESSION['hotel76']['pricehotelroom32'] = $response2->pax2m_76; 
                                $_SESSION['hotel76']['totalhotelr31'] = $response2->pax1m_76 + $response2->pax2m_76 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel76']['pricehotelroom31'] = $response2->pax1m_76; 
                                $_SESSION['hotel76']['totalhotelr31'] = $response2->pax1m_76;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel76']['pricehotelroom31'] = $response2->pax1d_76; 
                                $_SESSION['hotel76']['pricehotelroom32'] = $response2->pax2d_76; 
                                $_SESSION['hotel76']['totalhotelr31'] = $response2->pax1d_76 + $response2->pax2d_76 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel76']['pricehotelroom31'] = $response2->pax1d_76; 
                                $_SESSION['hotel76']['totalhotelr31'] = $response2->pax1d_76;
                            }
                        }
                    } elseif ($room3 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel76']['pricehotelroom31'] = $response2->pax1v_76; 
                            $_SESSION['hotel76']['pricehotelroom32'] = $response2->pax2v_76; 
                            $_SESSION['hotel76']['totalhotelr32'] = $response2->pax1v_76 + $response2->pax2v_76 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel76']['pricehotelroom31'] = $response2->pax1m_76; 
                            $_SESSION['hotel76']['pricehotelroom32'] = $response2->pax2m_76; 
                            $_SESSION['hotel76']['totalhotelr32'] = $response2->pax1m_76 + $response2->pax2m_76 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel76']['pricehotelroom31'] = $response2->pax1d_76; 
                            $_SESSION['hotel76']['pricehotelroom32'] = $response2->pax2d_76; 
                            $_SESSION['hotel76']['totalhotelr32'] = $response2->pax1d_76 + $response2->pax2d_76 * ($room3-1 + $roomChild3); 
                        }
                    } elseif ($room3 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel76']['pricehotelroom31'] = $response2->pax1v_76; 
                            $_SESSION['hotel76']['pricehotelroom32'] = $response2->pax2v_76; 
                            $_SESSION['hotel76']['totalhotelr33'] = $response2->pax1v_76 + $response2->pax2v_76 * ($room3-1+ $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel76']['pricehotelroom31'] = $response2->pax1m_76; 
                            $_SESSION['hotel76']['pricehotelroom32'] = $response2->pax2m_76; 
                            $_SESSION['hotel76']['totalhotelr33'] = $response2->pax1m_76 + $response2->pax2m_76 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel76']['pricehotelroom31'] = $response2->pax1d_76; 
                            $_SESSION['hotel76']['pricehotelroom32'] = $response2->pax2d_76; 
                            $_SESSION['hotel76']['totalhotelr33'] = $response2->pax1d_76 + $response2->pax2d_76 * ($room3-1 + $roomChild3); 
                        }
                    } elseif ($room3 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel76']['pricehotelroom31'] = $response2->pax1v_76; 
                            $_SESSION['hotel76']['pricehotelroom32'] = $response2->pax2v_76; 
                            $_SESSION['hotel76']['totalhotelr34'] = $response2->pax1v_76 + $response2->pax2v_76 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel76']['pricehotelroom31'] = $response2->pax1m_76; 
                            $_SESSION['hotel76']['pricehotelroom32'] = $response2->pax2m_76; 
                            $_SESSION['hotel76']['totalhotelr34'] = $response2->pax1m_76 + $response2->pax2m_76 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel76']['pricehotelroom31'] = $response2->pax1d_76; 
                            $_SESSION['hotel76']['pricehotelroom32'] = $response2->pax2d_76; 
                            $_SESSION['hotel76']['totalhotelr34'] = $response2->pax1d_76 + $response2->pax2d_76 * ($room3-1 + $roomChild3); 
                        }
                    }
                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 

                    if ($room4 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel76']['pricehotelroom41'] = $response2->pax1v_76; 
                                $_SESSION['hotel76']['pricehotelroom42'] = $response2->pax2v_76; 
                                $_SESSION['hotel76']['totalhotelr41'] = $response2->pax1v_76 + $response2->pax2v_76 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel76']['pricehotelroom41'] = $response2->pax1v_76; 
                                $_SESSION['hotel76']['totalhotelr41'] = $response2->pax1v_76;
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel76']['pricehotelroom41'] = $response2->pax1m_76; 
                                $_SESSION['hotel76']['pricehotelroom42'] = $response2->pax2m_76; 
                                $_SESSION['hotel76']['totalhotelr41'] = $response2->pax1m_76 + $response2->pax2m_76 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel76']['pricehotelroom41'] = $response2->pax1m_76; 
                                $_SESSION['hotel76']['totalhotelr41'] = $response2->pax1m_76;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel76']['pricehotelroom41'] = $response2->pax1d_76; 
                                $_SESSION['hotel76']['pricehotelroom42'] = $response2->pax2d_76; 
                                $_SESSION['hotel76']['totalhotelr41'] = $response2->pax1d_76 + $response2->pax2d_76 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel76']['pricehotelroom41'] = $response2->pax1d_76; 
                                $_SESSION['hotel76']['totalhotelr41'] = $response2->pax1d_76;
                            }
                        }
                    } elseif ($room4 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel76']['pricehotelroom41'] = $response2->pax1v_76; 
                            $_SESSION['hotel76']['pricehotelroom42'] = $response2->pax2v_76; 
                            $_SESSION['hotel76']['totalhotelr42'] = $response2->pax1v_76 + $response2->pax2v_76 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel76']['pricehotelroom41'] = $response2->pax1m_76; 
                            $_SESSION['hotel76']['pricehotelroom42'] = $response2->pax2m_76; 
                            $_SESSION['hotel76']['totalhotelr42'] = $response2->pax1m_76 + $response2->pax2m_76 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel76']['pricehotelroom41'] = $response2->pax1d_76; 
                            $_SESSION['hotel76']['pricehotelroom42'] = $response2->pax2d_76; 
                            $_SESSION['hotel76']['totalhotelr42'] = $response2->pax1d_76 + $response2->pax2d_76 * ($room4-1 + $roomChild4); 
                        }

                    } elseif ($room4 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel76']['pricehotelroom41'] = $response2->pax1v_76; 
                            $_SESSION['hotel76']['pricehotelroom42'] = $response2->pax2v_76; 
                            $_SESSION['hotel76']['totalhotelr43'] = $response2->pax1v_76 + $response2->pax2v_76 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel76']['pricehotelroom41'] = $response2->pax1m_76; 
                            $_SESSION['hotel76']['pricehotelroom42'] = $response2->pax2m_76; 
                            $_SESSION['hotel76']['totalhotelr43'] = $response2->pax1m_76 + $response2->pax2m_76 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel76']['pricehotelroom41'] = $response2->pax1d_76; 
                            $_SESSION['hotel76']['pricehotelroom42'] = $response2->pax2d_76; 
                            $_SESSION['hotel76']['totalhotelr43'] = $response2->pax1d_76 + $response2->pax2d_76 * ($room4-1 + $roomChild4); 
                        }
                    } elseif ($room4 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel76']['pricehotelroom41'] = $response2->pax1v_76; 
                            $_SESSION['hotel76']['pricehotelroom42'] = $response2->pax2v_76; 
                            $_SESSION['hotel76']['totalhotelr44'] = $response2->pax1v_76 + $response2->pax2v_76 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel76']['pricehotelroom41'] = $response2->pax1m_76; 
                            $_SESSION['hotel76']['pricehotelroom42'] = $response2->pax2m_76; 
                            $_SESSION['hotel76']['totalhotelr44'] = $response2->pax1m_76 + $response2->pax2m_76 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel76']['pricehotelroom41'] = $response2->pax1d_76; 
                            $_SESSION['hotel76']['pricehotelroom42'] = $response2->pax2d_76; 
                            $_SESSION['hotel76']['totalhotelr44'] = $response2->pax1d_76 + $response2->pax2d_76 * ($room4-1 + $roomChild4); 
                        }
                    }

                    #precio total para adultos 76
                    $sql = ($_SESSION['hotel76']['totalhotelr11']  + $_SESSION['hotel76']['totalhotelr12'] + $_SESSION['hotel76']['totalhotelr13'] + $_SESSION['hotel76']['totalhotelr14']) * $room1 ;
                    $dbl = ($_SESSION['hotel76']['totalhotelr21'] + $_SESSION['hotel76']['totalhotelr22'] + $_SESSION['hotel76']['totalhotelr23'] + $_SESSION['hotel76']['totalhotelr24']) * $room2;
                    $tpl = ($_SESSION['hotel76']['totalhotelr31'] + $_SESSION['hotel76']['totalhotelr32'] + $_SESSION['hotel76']['totalhotelr33'] + $_SESSION['hotel76']['totalhotelr34']) * $room3;
                    $qua = ($_SESSION['hotel76']['totalhotelr41'] + $_SESSION['hotel76']['totalhotelr42'] + $_SESSION['hotel76']['totalhotelr43'] + $_SESSION['hotel76']['totalhotelr44']) * $room4;

                    $precioAdulto = ($_SESSION['hotel76']['totalhotelr11'] + $_SESSION['hotel76']['totalhotelr12'] + $_SESSION['hotel76']['totalhotelr13'] + $_SESSION['hotel76']['totalhotelr14'] + $_SESSION['hotel76']['totalhotelr21'] + $_SESSION['hotel76']['totalhotelr22'] + $_SESSION['hotel76']['totalhotelr23'] + $_SESSION['hotel76']['totalhotelr24'] + $_SESSION['hotel76']['totalhotelr31'] + $_SESSION['hotel76']['totalhotelr32'] + $_SESSION['hotel76']['totalhotelr33'] + $_SESSION['hotel76']['totalhotelr34'] + $_SESSION['hotel76']['totalhotelr41'] + $_SESSION['hotel76']['totalhotelr42'] + $_SESSION['hotel76']['totalhotelr43'] + $_SESSION['hotel76']['totalhotelr44'] + $totalsch);
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto + $transporte;
                    // echo '<pre>';
                    // print_r($_SESSION['toursbooking']['totaltours']);
                    // print_r($response2);
                    // //var_dump($response2 );
                    // echo '</pre>';
                    // die;
                    #precio total para ninos 21
                    // echo '<pre>';
                    // print_r($sql);echo '<br>';
                    // print_r($dbl);echo '<br>';
                    // print_r($tpl);echo '<br>';
                    // print_r($qua);echo '<br>';
                    // print_r($_SESSION['hotel76'] );echo '<br>';
                    // echo '</pre> ';
                    // die;
                } elseif ($tours == 87) {
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 
                    // sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $respuesta['sgl'];
                        $room1Child  = $respuesta['chv21'];

                        if($idCategoria == 2){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel87']['pricehotelroom11'] = $response2->pax1v_87; 
                                $_SESSION['hotel87']['pricehotelroom12'] = $response2->pax2v_87 ; 
                                $_SESSION['hotel87']['totalhotelr11'] =  $response2->pax1v_87 + $response2->pax2v_87 * ($room1-1 + $roomChild1) ; 
                            }else{
                                $_SESSION['hotel87']['pricehotelroom11'] = $response2->pax1v_87; 
                                $_SESSION['hotel87']['totalhotelr11'] = $response2->pax1v_87; 
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel87']['pricehotelroom11'] = $response2->pax1m_87; 
                                $_SESSION['hotel87']['pricehotelroom12'] = $response2->pax2m_87 ; 
                                $_SESSION['hotel87']['totalhotelr11'] = $response2->pax1m_87 + $response2->pax2m_87 * ($room1-1 + $roomChild1); 
                            }else{
                                $_SESSION['hotel87']['pricehotelroom11'] = $response2->pax1m_87; 
                                $_SESSION['hotel87']['totalhotelr11'] = $response2->pax1m_87; 
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel87']['pricehotelroom11'] = $response2->pax1d_87; 
                                $_SESSION['hotel87']['pricehotelroom12'] = $response2->pax2d_87 ; 
                                $_SESSION['hotel87']['totalhotelr11'] = $response2->pax1d_87 + $response2->pax2d_87 * ($room1-1 + $roomChild1); 
                            }else{
                                $_SESSION['hotel87']['pricehotelroom11'] = $response2->pax1d_87; 
                                $_SESSION['hotel87']['totalhotelr11'] = $response2->pax1d_87; 
                            }
                        }

                    } elseif ($room1 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                     
                        if($idCategoria == 2){
                            $_SESSION['hotel87']['pricehotelroom11'] = $response2->pax1v_87; 
                            $_SESSION['hotel87']['pricehotelroom12'] = $response2->pax2v_87 ; 
                            $_SESSION['hotel87']['totalhotelr12'] = $response2->pax1v_87 + $response2->pax2v_87 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel87']['pricehotelroom11'] = $response2->pax1m_87; 
                            $_SESSION['hotel87']['pricehotelroom12'] = $response2->pax2m_87; 
                            $_SESSION['hotel87']['totalhotelr12'] = $response2->pax1m_87 + $response2->pax2m_87 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel87']['pricehotelroom11'] = $response2->pax1d_87; 
                            $_SESSION['hotel87']['pricehotelroom12'] = $response2->pax2d_87; 
                            $_SESSION['hotel87']['totalhotelr12'] = $response2->pax1d_87 + $response2->pax2d_87 * ($room1-1 + $roomChild1); 
                        }
                    } elseif ($room1 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel87']['pricehotelroom11'] = $response2->pax1v_87; 
                            $_SESSION['hotel87']['pricehotelroom12'] = $response2->pax2v_87; 
                            $_SESSION['hotel87']['totalhotelr13'] = $response2->pax1v_87 + ($response2->pax2v_87 * ($room1-1 + $roomChild1)); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel87']['pricehotelroom11'] = $response2->pax1m_87; 
                            $_SESSION['hotel87']['pricehotelroom12'] = $response2->pax2m_87; 
                            $_SESSION['hotel87']['totalhotelr13'] = $response2->pax1m_87 + $response2->pax2m_87 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel87']['pricehotelroom11'] = $response2->pax1d_87; 
                            $_SESSION['hotel87']['pricehotelroom12'] = $response2->pax2d_87; 
                            $_SESSION['hotel87']['totalhotelr13'] = $response2->pax1d_87 + $response2->pax2d_87 * ($room1-1 + $roomChild1); 
                        }
                    } elseif ($room1 == 4)  {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel87']['pricehotelroom11'] = $response2->pax1v_87; 
                            $_SESSION['hotel87']['pricehotelroom12'] = $response2->pax2v_87; 
                            $_SESSION['hotel87']['totalhotelr14'] = $response2->pax1v_87 + $response2->pax2v_87 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel87']['pricehotelroom11'] = $response2->pax1m_87; 
                            $_SESSION['hotel87']['pricehotelroom12'] = $response2->pax2m_87; 
                            $_SESSION['hotel87']['totalhotelr14'] = $response2->pax1m_87 + $response2->pax2m_87 * ($room1-1 + $roomChild1);  
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel87']['pricehotelroom11'] = $response2->pax1d_87; 
                            $_SESSION['hotel87']['pricehotelroom12'] = $response2->pax2d_87; 
                            $_SESSION['hotel87']['totalhotelr14'] = $response2->pax1d_87 + $response2->pax2d_87 * ($room1-1 + $roomChild1);  
                        }
                    }

                    //echo $tours;

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel87']['pricehotelroom21'] = $response2->pax1v_87; 
                                $_SESSION['hotel87']['pricehotelroom22'] = $response2->pax2v_87; 
                                $_SESSION['hotel87']['totalhotelr21'] = $response2->pax1v_87 + $response2->pax2v_87 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel87']['pricehotelroom21'] = $response2->pax1v_87; 
                                $_SESSION['hotel87']['totalhotelr22'] = $response2->pax1v_87; 
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel87']['pricehotelroom21'] = $response2->pax1m_87; 
                                $_SESSION['hotel87']['pricehotelroom22'] = $response2->pax2m_87; 
                                $_SESSION['hotel87']['totalhotelr21'] = $response2->pax1m_87 + $response2->pax2m_87 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel87']['pricehotelroom21'] = $response2->pax1m_87; 
                                $_SESSION['hotel87']['totalhotelr21'] = $response2->pax1m_87 ;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel87']['pricehotelroom21'] = $response2->pax1d_87; 
                                $_SESSION['hotel87']['pricehotelroom22'] = $response2->pax2d_87; 
                                $_SESSION['hotel87']['totalhotelr21'] = $response2->pax1d_87 + $response2->pax2d_87 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel87']['pricehotelroom21'] = $response2->pax1d_87; 
                                $_SESSION['hotel87']['totalhotelr21'] = $response2->pax1d_87 ;
                            }
                        }


                    } elseif ($room2 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel87']['pricehotelroom21'] = $response2->pax1v_87; 
                            $_SESSION['hotel87']['pricehotelroom22'] = $response2->pax2v_87; 
                            $_SESSION['hotel87']['totalhotelr22'] = $response2->pax1v_87 + $response2->pax2v_87 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel87']['pricehotelroom21'] = $response2->pax1m_87; 
                            $_SESSION['hotel87']['pricehotelroom22'] = $response2->pax2m_87; 
                            $_SESSION['hotel87']['totalhotelr22'] = $response2->pax1m_87 + $response2->pax2m_87 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel87']['pricehotelroom21'] = $response2->pax1d_87; 
                            $_SESSION['hotel87']['pricehotelroom22'] = $response2->pax2d_87; 
                            $_SESSION['hotel87']['totalhotelr22'] = $response2->pax1d_87 + $response2->pax2d_87 * ($room2-1 + $roomChild2); 
                        }

                    } elseif ($room2 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel87']['pricehotelroom21'] = $response2->pax1v_87; 
                            $_SESSION['hotel87']['pricehotelroom22'] = $response2->pax2v_87; 
                            $_SESSION['hotel87']['totalhotelr23'] = $response2->pax1v_87 + $response2->pax2v_87 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel87']['pricehotelroom21'] = $response2->pax1m_87; 
                            $_SESSION['hotel87']['pricehotelroom22'] = $response2->pax2m_87; 
                            $_SESSION['hotel87']['totalhotelr23'] = $response2->pax1m_87 + $response2->pax2m_87 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel87']['pricehotelroom21'] = $response2->pax1d_87; 
                            $_SESSION['hotel87']['pricehotelroom22'] = $response2->pax2d_87; 
                            $_SESSION['hotel87']['totalhotelr23'] = $response2->pax1d_87 + $response2->pax2d_87 * ($room2-1 + $roomChild2); 
                        }
                    } elseif ($room2 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel87']['pricehotelroom21'] = $response2->pax1v_87; 
                            $_SESSION['hotel87']['pricehotelroom22'] = $response2->pax2v_87; 
                            $_SESSION['hotel87']['totalhotelr24'] = $response2->pax1v_87 + $response2->pax2v_87 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel87']['pricehotelroom21'] = $response2->pax1m_87; 
                            $_SESSION['hotel87']['pricehotelroom22'] = $response2->pax2m_87; 
                            $_SESSION['hotel87']['totalhotelr24'] = $response2->pax1m_87 + $response2->pax2m_87 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel87']['pricehotelroom21'] = $response2->pax1d_87; 
                            $_SESSION['hotel87']['pricehotelroom22'] = $response2->pax2d_87; 
                            $_SESSION['hotel87']['totalhotelr24'] = $response2->pax1d_87 + $response2->pax2d_87 * ($room2-1 + $roomChild2); 
                        }
                    }


                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 

                    if ($room3 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel87']['pricehotelroom31'] = $response2->pax1v_87; 
                                $_SESSION['hotel87']['pricehotelroom32'] = $response2->pax2v_87; 
                                $_SESSION['hotel87']['totalhotelr31'] = $response2->pax1v_87 + $response2->pax2v_87 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel87']['pricehotelroom31'] = $response2->pax1v_87; 
                                $_SESSION['hotel87']['totalhotelr31'] = $response2->pax1v_87 ;
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel87']['pricehotelroom31'] = $response2->pax1m_87; 
                                $_SESSION['hotel87']['pricehotelroom32'] = $response2->pax2m_87; 
                                $_SESSION['hotel87']['totalhotelr31'] = $response2->pax1m_87 + $response2->pax2m_87 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel87']['pricehotelroom31'] = $response2->pax1m_87; 
                                $_SESSION['hotel87']['totalhotelr31'] = $response2->pax1m_87;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel87']['pricehotelroom31'] = $response2->pax1d_87; 
                                $_SESSION['hotel87']['pricehotelroom32'] = $response2->pax2d_87; 
                                $_SESSION['hotel87']['totalhotelr31'] = $response2->pax1d_87 + $response2->pax2d_87 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel87']['pricehotelroom31'] = $response2->pax1d_87; 
                                $_SESSION['hotel87']['totalhotelr31'] = $response2->pax1d_87;
                            }
                        }


                    } elseif ($room3 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel87']['pricehotelroom31'] = $response2->pax1v_87; 
                            $_SESSION['hotel87']['pricehotelroom32'] = $response2->pax2v_87; 
                            $_SESSION['hotel87']['totalhotelr32'] = $response2->pax1v_87 + $response2->pax2v_87 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel87']['pricehotelroom31'] = $response2->pax1m_87; 
                            $_SESSION['hotel87']['pricehotelroom32'] = $response2->pax2m_87; 
                            $_SESSION['hotel87']['totalhotelr32'] = $response2->pax1m_87 + $response2->pax2m_87 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel87']['pricehotelroom31'] = $response2->pax1d_87; 
                            $_SESSION['hotel87']['pricehotelroom32'] = $response2->pax2d_87; 
                            $_SESSION['hotel87']['totalhotelr32'] = $response2->pax1d_87 + $response2->pax2d_87 * ($room3-1 + $roomChild3); 
                        }

                    } elseif ($room3 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel87']['pricehotelroom31'] = $response2->pax1v_87; 
                            $_SESSION['hotel87']['pricehotelroom32'] = $response2->pax2v_87; 
                            $_SESSION['hotel87']['totalhotelr33'] = $response2->pax1v_87 + $response2->pax2v_87 * ($room3-1+ $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel87']['pricehotelroom31'] = $response2->pax1m_87; 
                            $_SESSION['hotel87']['pricehotelroom32'] = $response2->pax2m_87; 
                            $_SESSION['hotel87']['totalhotelr33'] = $response2->pax1m_87 + $response2->pax2m_87 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel87']['pricehotelroom31'] = $response2->pax1d_87; 
                            $_SESSION['hotel87']['pricehotelroom32'] = $response2->pax2d_87; 
                            $_SESSION['hotel87']['totalhotelr33'] = $response2->pax1d_87 + $response2->pax2d_87 * ($room3-1 + $roomChild3); 
                        }
                    } elseif ($room3 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel87']['pricehotelroom31'] = $response2->pax1v_87; 
                            $_SESSION['hotel87']['pricehotelroom32'] = $response2->pax2v_87; 
                            $_SESSION['hotel87']['totalhotelr34'] = $response2->pax1v_87 + $response2->pax2v_87 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel87']['pricehotelroom31'] = $response2->pax1m_87; 
                            $_SESSION['hotel87']['pricehotelroom32'] = $response2->pax2m_87; 
                            $_SESSION['hotel87']['totalhotelr34'] = $response2->pax1m_87 + $response2->pax2m_87 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel87']['pricehotelroom31'] = $response2->pax1d_87; 
                            $_SESSION['hotel87']['pricehotelroom32'] = $response2->pax2d_87; 
                            $_SESSION['hotel87']['totalhotelr34'] = $response2->pax1d_87 + $response2->pax2d_87 * ($room3-1 + $roomChild3); 
                        }
                    }



                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 

                    if ($room4 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel87']['pricehotelroom41'] = $response2->pax1v_87; 
                                $_SESSION['hotel87']['pricehotelroom42'] = $response2->pax2v_87; 
                                $_SESSION['hotel87']['totalhotelr41'] = $response2->pax1v_87 + $response2->pax2v_87 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel87']['pricehotelroom41'] = $response2->pax1v_87; 
                                $_SESSION['hotel87']['totalhotelr41'] = $response2->pax1v_87;
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel87']['pricehotelroom41'] = $response2->pax1m_87; 
                                $_SESSION['hotel87']['pricehotelroom42'] = $response2->pax2m_87; 
                                $_SESSION['hotel87']['totalhotelr41'] = $response2->pax1m_87 + $response2->pax2m_87 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel87']['pricehotelroom41'] = $response2->pax1m_87; 
                                $_SESSION['hotel87']['totalhotelr41'] = $response2->pax1m_87;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel87']['pricehotelroom41'] = $response2->pax1d_87; 
                                $_SESSION['hotel87']['pricehotelroom42'] = $response2->pax2d_87; 
                                $_SESSION['hotel87']['totalhotelr41'] = $response2->pax1d_87 + $response2->pax2d_87 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel87']['pricehotelroom41'] = $response2->pax1d_87; 
                                $_SESSION['hotel87']['totalhotelr41'] = $response2->pax1d_87;
                            }
                        }


                    } elseif ($room4 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel87']['pricehotelroom41'] = $response2->pax1v_87; 
                            $_SESSION['hotel87']['pricehotelroom42'] = $response2->pax2v_87; 
                            $_SESSION['hotel87']['totalhotelr42'] = $response2->pax1v_87 + $response2->pax2v_87 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel87']['pricehotelroom41'] = $response2->pax1m_87; 
                            $_SESSION['hotel87']['pricehotelroom42'] = $response2->pax2m_87; 
                            $_SESSION['hotel87']['totalhotelr42'] = $response2->pax1m_87 + $response2->pax2m_87 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel87']['pricehotelroom41'] = $response2->pax1d_87; 
                            $_SESSION['hotel87']['pricehotelroom42'] = $response2->pax2d_87; 
                            $_SESSION['hotel87']['totalhotelr42'] = $response2->pax1d_87 + $response2->pax2d_87 * ($room4-1 + $roomChild4); 
                        }

                    } elseif ($room4 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel87']['pricehotelroom41'] = $response2->pax1v_87; 
                            $_SESSION['hotel87']['pricehotelroom42'] = $response2->pax2v_87; 
                            $_SESSION['hotel87']['totalhotelr43'] = $response2->pax1v_87 + $response2->pax2v_87 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel87']['pricehotelroom41'] = $response2->pax1m_87; 
                            $_SESSION['hotel87']['pricehotelroom42'] = $response2->pax2m_87; 
                            $_SESSION['hotel87']['totalhotelr43'] = $response2->pax1m_87 + $response2->pax2m_87 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel87']['pricehotelroom41'] = $response2->pax1d_87; 
                            $_SESSION['hotel87']['pricehotelroom42'] = $response2->pax2d_87; 
                            $_SESSION['hotel87']['totalhotelr43'] = $response2->pax1d_87 + $response2->pax2d_87 * ($room4-1 + $roomChild4); 
                        }
                    } elseif ($room4 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel87']['pricehotelroom41'] = $response2->pax1v_87; 
                            $_SESSION['hotel87']['pricehotelroom42'] = $response2->pax2v_87; 
                            $_SESSION['hotel87']['totalhotelr44'] = $response2->pax1v_87 + $response2->pax2v_87 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel87']['pricehotelroom41'] = $response2->pax1m_87; 
                            $_SESSION['hotel87']['pricehotelroom42'] = $response2->pax2m_87; 
                            $_SESSION['hotel87']['totalhotelr44'] = $response2->pax1m_87 + $response2->pax2m_87 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel87']['pricehotelroom41'] = $response2->pax1d_87; 
                            $_SESSION['hotel87']['pricehotelroom42'] = $response2->pax2d_87; 
                            $_SESSION['hotel87']['totalhotelr44'] = $response2->pax1d_87 + $response2->pax2d_87 * ($room4-1 + $roomChild4); 
                        }
                    }

                    #precio total para adultos 87

                    $sql = ($_SESSION['hotel87']['totalhotelr11'] + $_SESSION['hotel87']['totalhotelr12'] + $_SESSION['hotel87']['totalhotelr13'] + $_SESSION['hotel87']['totalhotelr14']) * $room1 ;
                    $dbl = ($_SESSION['hotel87']['totalhotelr21'] + $_SESSION['hotel87']['totalhotelr22'] + $_SESSION['hotel87']['totalhotelr23'] + $_SESSION['hotel87']['totalhotelr24']) * $room2;
                    $tpl = ($_SESSION['hotel87']['totalhotelr31'] + $_SESSION['hotel87']['totalhotelr32'] + $_SESSION['hotel87']['totalhotelr33'] + $_SESSION['hotel87']['totalhotelr34']) * $room3;
                    $qua = ($_SESSION['hotel87']['totalhotelr41'] + $_SESSION['hotel87']['totalhotelr42'] + $_SESSION['hotel87']['totalhotelr43'] + $_SESSION['hotel87']['totalhotelr44']) * $room4;

                    $precioAdulto = ($_SESSION['hotel87']['totalhotelr11'] + $_SESSION['hotel87']['totalhotelr12'] + $_SESSION['hotel87']['totalhotelr13'] + $_SESSION['hotel87']['totalhotelr14'] + $_SESSION['hotel87']['totalhotelr21'] + $_SESSION['hotel87']['totalhotelr22'] + $_SESSION['hotel87']['totalhotelr23'] + $_SESSION['hotel87']['totalhotelr24'] + $_SESSION['hotel87']['totalhotelr31'] + $_SESSION['hotel87']['totalhotelr32'] + $_SESSION['hotel87']['totalhotelr33'] + $_SESSION['hotel87']['totalhotelr34'] + $_SESSION['hotel87']['totalhotelr41'] + $_SESSION['hotel87']['totalhotelr42'] + $_SESSION['hotel87']['totalhotelr43'] + $_SESSION['hotel87']['totalhotelr44'] + $totalsch);
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto + $transporte;
                    #precio total para ninos 21
                    // echo '<pre>';
                    // print_r($precioAdulto);
                    // echo '</pre> ';
                    // die;
                } elseif ($tours == 98) {
                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $respuesta['sgl'];
                        $room1Child  = $respuesta['chv21'];

                        if($idCategoria == 2){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel98']['pricehotelroom11'] = $response2->pax1v_98; 
                                $_SESSION['hotel98']['pricehotelroom12'] = $response2->pax2v_98 ; 
                                $_SESSION['hotel98']['totalhotelr11'] =  $response2->pax1v_98 + $response2->pax2v_98 * ($room1-1 + $roomChild1) ; 
                            }else{
                                $_SESSION['hotel98']['pricehotelroom11'] = $response2->pax1v_98; 
                                $_SESSION['hotel98']['totalhotelr11'] = $response2->pax1v_98; 
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel98']['pricehotelroom11'] = $response2->pax1m_98; 
                                $_SESSION['hotel98']['pricehotelroom12'] = $response2->pax2m_98 ; 
                                $_SESSION['hotel98']['totalhotelr11'] = $response2->pax1m_98 + $response2->pax2m_98 * ($room1-1 + $roomChild1); 
                            }else{
                                $_SESSION['hotel98']['pricehotelroom11'] = $response2->pax1m_98; 
                                $_SESSION['hotel98']['totalhotelr11'] = $response2->pax1m_98; 
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild1 >= 1){
                                $_SESSION['hotel98']['pricehotelroom11'] = $response2->pax1d_98; 
                                $_SESSION['hotel98']['pricehotelroom12'] = $response2->pax2d_98 ; 
                                $_SESSION['hotel98']['totalhotelr11'] = $response2->pax1d_98 + $response2->pax2d_98 * ($room1-1 + $roomChild1); 
                            }else{
                                $_SESSION['hotel98']['pricehotelroom11'] = $response2->pax1d_98; 
                                $_SESSION['hotel98']['totalhotelr11'] = $response2->pax1d_98; 
                            }
                        }

                    } elseif ($room1 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                     
                        if($idCategoria == 2){
                            $_SESSION['hotel98']['pricehotelroom11'] = $response2->pax1v_98; 
                            $_SESSION['hotel98']['pricehotelroom12'] = $response2->pax2v_98 ; 
                            $_SESSION['hotel98']['totalhotelr12'] = $response2->pax1v_98 + $response2->pax2v_98 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel98']['pricehotelroom11'] = $response2->pax1m_98; 
                            $_SESSION['hotel98']['pricehotelroom12'] = $response2->pax2m_98; 
                            $_SESSION['hotel98']['totalhotelr12'] = $response2->pax1m_98 + $response2->pax2m_98 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel98']['pricehotelroom11'] = $response2->pax1d_98; 
                            $_SESSION['hotel98']['pricehotelroom12'] = $response2->pax2d_98; 
                            $_SESSION['hotel98']['totalhotelr12'] = $response2->pax1d_98 + $response2->pax2d_98 * ($room1-1 + $roomChild1); 
                        }
                    } elseif ($room1 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel98']['pricehotelroom11'] = $response2->pax1v_98; 
                            $_SESSION['hotel98']['pricehotelroom12'] = $response2->pax2v_98; 
                            $_SESSION['hotel98']['totalhotelr13'] = $response2->pax1v_98 + ($response2->pax2v_98 * ($room1-1 + $roomChild1)); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel98']['pricehotelroom11'] = $response2->pax1m_98; 
                            $_SESSION['hotel98']['pricehotelroom12'] = $response2->pax2m_98; 
                            $_SESSION['hotel98']['totalhotelr13'] = $response2->pax1m_98 + $response2->pax2m_98 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel98']['pricehotelroom11'] = $response2->pax1d_98; 
                            $_SESSION['hotel98']['pricehotelroom12'] = $response2->pax2d_98; 
                            $_SESSION['hotel98']['totalhotelr13'] = $response2->pax1d_98 + $response2->pax2d_98 * ($room1-1 + $roomChild1); 
                        }
                    } elseif ($room1 == 4)  {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel98']['pricehotelroom11'] = $response2->pax1v_98; 
                            $_SESSION['hotel98']['pricehotelroom12'] = $response2->pax2v_98; 
                            $_SESSION['hotel98']['totalhotelr14'] = $response2->pax1v_98 + $response2->pax2v_98 * ($room1-1 + $roomChild1); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel98']['pricehotelroom11'] = $response2->pax1m_98; 
                            $_SESSION['hotel98']['pricehotelroom12'] = $response2->pax2m_98; 
                            $_SESSION['hotel98']['totalhotelr14'] = $response2->pax1m_98 + $response2->pax2m_98 * ($room1-1 + $roomChild1);  
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel98']['pricehotelroom11'] = $response2->pax1d_98; 
                            $_SESSION['hotel98']['pricehotelroom12'] = $response2->pax2d_98; 
                            $_SESSION['hotel98']['totalhotelr14'] = $response2->pax1d_98 + $response2->pax2d_98 * ($room1-1 + $roomChild1);  
                        }
                    }

                    //echo $tours;

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel98']['pricehotelroom21'] = $response2->pax1v_98; 
                                $_SESSION['hotel98']['pricehotelroom22'] = $response2->pax2v_98; 
                                $_SESSION['hotel98']['totalhotelr21'] = $response2->pax1v_98 + $response2->pax2v_98 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel98']['pricehotelroom21'] = $response2->pax1v_98; 
                                $_SESSION['hotel98']['totalhotelr22'] = $response2->pax1v_98; 
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel98']['pricehotelroom21'] = $response2->pax1m_98; 
                                $_SESSION['hotel98']['pricehotelroom22'] = $response2->pax2m_98; 
                                $_SESSION['hotel98']['totalhotelr21'] = $response2->pax1m_98 + $response2->pax2m_98 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel98']['pricehotelroom21'] = $response2->pax1m_98; 
                                $_SESSION['hotel98']['totalhotelr21'] = $response2->pax1m_98 ;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild2 >= 1){
                                $_SESSION['hotel98']['pricehotelroom21'] = $response2->pax1d_98; 
                                $_SESSION['hotel98']['pricehotelroom22'] = $response2->pax2d_98; 
                                $_SESSION['hotel98']['totalhotelr21'] = $response2->pax1d_98 + $response2->pax2d_98 * ($room2-1 + $roomChild2); 
                            }else{
                                $_SESSION['hotel98']['pricehotelroom21'] = $response2->pax1d_98; 
                                $_SESSION['hotel98']['totalhotelr21'] = $response2->pax1d_98 ;
                            }
                        }


                    } elseif ($room2 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel98']['pricehotelroom21'] = $response2->pax1v_98; 
                            $_SESSION['hotel98']['pricehotelroom22'] = $response2->pax2v_98; 
                            $_SESSION['hotel98']['totalhotelr22'] = $response2->pax1v_98 + $response2->pax2v_98 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel98']['pricehotelroom21'] = $response2->pax1m_98; 
                            $_SESSION['hotel98']['pricehotelroom22'] = $response2->pax2m_98; 
                            $_SESSION['hotel98']['totalhotelr22'] = $response2->pax1m_98 + $response2->pax2m_98 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel98']['pricehotelroom21'] = $response2->pax1d_98; 
                            $_SESSION['hotel98']['pricehotelroom22'] = $response2->pax2d_98; 
                            $_SESSION['hotel98']['totalhotelr22'] = $response2->pax1d_98 + $response2->pax2d_98 * ($room2-1 + $roomChild2); 
                        }

                    } elseif ($room2 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel98']['pricehotelroom21'] = $response2->pax1v_98; 
                            $_SESSION['hotel98']['pricehotelroom22'] = $response2->pax2v_98; 
                            $_SESSION['hotel98']['totalhotelr23'] = $response2->pax1v_98 + $response2->pax2v_98 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel98']['pricehotelroom21'] = $response2->pax1m_98; 
                            $_SESSION['hotel98']['pricehotelroom22'] = $response2->pax2m_98; 
                            $_SESSION['hotel98']['totalhotelr23'] = $response2->pax1m_98 + $response2->pax2m_98 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel98']['pricehotelroom21'] = $response2->pax1d_98; 
                            $_SESSION['hotel98']['pricehotelroom22'] = $response2->pax2d_98; 
                            $_SESSION['hotel98']['totalhotelr23'] = $response2->pax1d_98 + $response2->pax2d_98 * ($room2-1 + $roomChild2); 
                        }
                    } elseif ($room2 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel98']['pricehotelroom21'] = $response2->pax1v_98; 
                            $_SESSION['hotel98']['pricehotelroom22'] = $response2->pax2v_98; 
                            $_SESSION['hotel98']['totalhotelr24'] = $response2->pax1v_98 + $response2->pax2v_98 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel98']['pricehotelroom21'] = $response2->pax1m_98; 
                            $_SESSION['hotel98']['pricehotelroom22'] = $response2->pax2m_98; 
                            $_SESSION['hotel98']['totalhotelr24'] = $response2->pax1m_98 + $response2->pax2m_98 * ($room2-1 + $roomChild2); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel98']['pricehotelroom21'] = $response2->pax1d_98; 
                            $_SESSION['hotel98']['pricehotelroom22'] = $response2->pax2d_98; 
                            $_SESSION['hotel98']['totalhotelr24'] = $response2->pax1d_98 + $response2->pax2d_98 * ($room2-1 + $roomChild2); 
                        }
                    }


                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 

                    if ($room3 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel98']['pricehotelroom31'] = $response2->pax1v_98; 
                                $_SESSION['hotel98']['pricehotelroom32'] = $response2->pax2v_98; 
                                $_SESSION['hotel98']['totalhotelr31'] = $response2->pax1v_98 + $response2->pax2v_98 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel98']['pricehotelroom31'] = $response2->pax1v_98; 
                                $_SESSION['hotel98']['totalhotelr31'] = $response2->pax1v_98 ;
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel98']['pricehotelroom31'] = $response2->pax1m_98; 
                                $_SESSION['hotel98']['pricehotelroom32'] = $response2->pax2m_98; 
                                $_SESSION['hotel98']['totalhotelr31'] = $response2->pax1m_98 + $response2->pax2m_98 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel98']['pricehotelroom31'] = $response2->pax1m_98; 
                                $_SESSION['hotel98']['totalhotelr31'] = $response2->pax1m_98;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild3 >= 1){
                                $_SESSION['hotel98']['pricehotelroom31'] = $response2->pax1d_98; 
                                $_SESSION['hotel98']['pricehotelroom32'] = $response2->pax2d_98; 
                                $_SESSION['hotel98']['totalhotelr31'] = $response2->pax1d_98 + $response2->pax2d_98 * ($room3-1 + $roomChild3); 
                            }else{
                                $_SESSION['hotel98']['pricehotelroom31'] = $response2->pax1d_98; 
                                $_SESSION['hotel98']['totalhotelr31'] = $response2->pax1d_98;
                            }
                        }


                    } elseif ($room3 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel98']['pricehotelroom31'] = $response2->pax1v_98; 
                            $_SESSION['hotel98']['pricehotelroom32'] = $response2->pax2v_98; 
                            $_SESSION['hotel98']['totalhotelr32'] = $response2->pax1v_98 + $response2->pax2v_98 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel98']['pricehotelroom31'] = $response2->pax1m_98; 
                            $_SESSION['hotel98']['pricehotelroom32'] = $response2->pax2m_98; 
                            $_SESSION['hotel98']['totalhotelr32'] = $response2->pax1m_98 + $response2->pax2m_98 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel98']['pricehotelroom31'] = $response2->pax1d_98; 
                            $_SESSION['hotel98']['pricehotelroom32'] = $response2->pax2d_98; 
                            $_SESSION['hotel98']['totalhotelr32'] = $response2->pax1d_98 + $response2->pax2d_98 * ($room3-1 + $roomChild3); 
                        }

                    } elseif ($room3 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel98']['pricehotelroom31'] = $response2->pax1v_98; 
                            $_SESSION['hotel98']['pricehotelroom32'] = $response2->pax2v_98; 
                            $_SESSION['hotel98']['totalhotelr33'] = $response2->pax1v_98 + $response2->pax2v_98 * ($room3-1+ $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel98']['pricehotelroom31'] = $response2->pax1m_98; 
                            $_SESSION['hotel98']['pricehotelroom32'] = $response2->pax2m_98; 
                            $_SESSION['hotel98']['totalhotelr33'] = $response2->pax1m_98 + $response2->pax2m_98 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel98']['pricehotelroom31'] = $response2->pax1d_98; 
                            $_SESSION['hotel98']['pricehotelroom32'] = $response2->pax2d_98; 
                            $_SESSION['hotel98']['totalhotelr33'] = $response2->pax1d_98 + $response2->pax2d_98 * ($room3-1 + $roomChild3); 
                        }
                    } elseif ($room3 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel98']['pricehotelroom31'] = $response2->pax1v_98; 
                            $_SESSION['hotel98']['pricehotelroom32'] = $response2->pax2v_98; 
                            $_SESSION['hotel98']['totalhotelr34'] = $response2->pax1v_98 + $response2->pax2v_98 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel98']['pricehotelroom31'] = $response2->pax1m_98; 
                            $_SESSION['hotel98']['pricehotelroom32'] = $response2->pax2m_98; 
                            $_SESSION['hotel98']['totalhotelr34'] = $response2->pax1m_98 + $response2->pax2m_98 * ($room3-1 + $roomChild3); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel98']['pricehotelroom31'] = $response2->pax1d_98; 
                            $_SESSION['hotel98']['pricehotelroom32'] = $response2->pax2d_98; 
                            $_SESSION['hotel98']['totalhotelr34'] = $response2->pax1d_98 + $response2->pax2d_98 * ($room3-1 + $roomChild3); 
                        }
                    }



                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 

                    if ($room4 == 1) {
                        $room2Adult = $respuesta['sgl'];
                        $room2Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel98']['pricehotelroom41'] = $response2->pax1v_98; 
                                $_SESSION['hotel98']['pricehotelroom42'] = $response2->pax2v_98; 
                                $_SESSION['hotel98']['totalhotelr41'] = $response2->pax1v_98 + $response2->pax2v_98 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel98']['pricehotelroom41'] = $response2->pax1v_98; 
                                $_SESSION['hotel98']['totalhotelr41'] = $response2->pax1v_98;
                            }
                        }elseif($idCategoria == 3){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel98']['pricehotelroom41'] = $response2->pax1m_98; 
                                $_SESSION['hotel98']['pricehotelroom42'] = $response2->pax2m_98; 
                                $_SESSION['hotel98']['totalhotelr41'] = $response2->pax1m_98 + $response2->pax2m_98 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel98']['pricehotelroom41'] = $response2->pax1m_98; 
                                $_SESSION['hotel98']['totalhotelr41'] = $response2->pax1m_98;
                            }
                        }elseif($idCategoria == 4){
                            if($roomChild4 >= 1){
                                $_SESSION['hotel98']['pricehotelroom41'] = $response2->pax1d_98; 
                                $_SESSION['hotel98']['pricehotelroom42'] = $response2->pax2d_98; 
                                $_SESSION['hotel98']['totalhotelr41'] = $response2->pax1d_98 + $response2->pax2d_98 * ($room4-1 + $roomChild4); 
                            }else{
                                $_SESSION['hotel98']['pricehotelroom41'] = $response2->pax1d_98; 
                                $_SESSION['hotel98']['totalhotelr41'] = $response2->pax1d_98;
                            }
                        }


                    } elseif ($room4 == 2) {
                        $room1Adult = $respuesta['dbl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel98']['pricehotelroom41'] = $response2->pax1v_98; 
                            $_SESSION['hotel98']['pricehotelroom42'] = $response2->pax2v_98; 
                            $_SESSION['hotel98']['totalhotelr42'] = $response2->pax1v_98 + $response2->pax2v_98 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel98']['pricehotelroom41'] = $response2->pax1m_98; 
                            $_SESSION['hotel98']['pricehotelroom42'] = $response2->pax2m_98; 
                            $_SESSION['hotel98']['totalhotelr42'] = $response2->pax1m_98 + $response2->pax2m_98 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel98']['pricehotelroom41'] = $response2->pax1d_98; 
                            $_SESSION['hotel98']['pricehotelroom42'] = $response2->pax2d_98; 
                            $_SESSION['hotel98']['totalhotelr42'] = $response2->pax1d_98 + $response2->pax2d_98 * ($room4-1 + $roomChild4); 
                        }

                    } elseif ($room4 == 3) {
                        $room1Adult = $respuesta['tpl'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel98']['pricehotelroom41'] = $response2->pax1v_98; 
                            $_SESSION['hotel98']['pricehotelroom42'] = $response2->pax2v_98; 
                            $_SESSION['hotel98']['totalhotelr43'] = $response2->pax1v_98 + $response2->pax2v_98 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel98']['pricehotelroom41'] = $response2->pax1m_98; 
                            $_SESSION['hotel98']['pricehotelroom42'] = $response2->pax2m_98; 
                            $_SESSION['hotel98']['totalhotelr43'] = $response2->pax1m_98 + $response2->pax2m_98 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel98']['pricehotelroom41'] = $response2->pax1d_98; 
                            $_SESSION['hotel98']['pricehotelroom42'] = $response2->pax2d_98; 
                            $_SESSION['hotel98']['totalhotelr43'] = $response2->pax1d_98 + $response2->pax2d_98 * ($room4-1 + $roomChild4); 
                        }
                    } elseif ($room4 == 4) {
                        $room1Adult = $respuesta['qua'];
                        $room1Child = $respuesta['chv21'];
                        if($idCategoria == 2){
                            $_SESSION['hotel98']['pricehotelroom41'] = $response2->pax1v_98; 
                            $_SESSION['hotel98']['pricehotelroom42'] = $response2->pax2v_98; 
                            $_SESSION['hotel98']['totalhotelr44'] = $response2->pax1v_98 + $response2->pax2v_98 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 3){
                            $_SESSION['hotel98']['pricehotelroom41'] = $response2->pax1m_98; 
                            $_SESSION['hotel98']['pricehotelroom42'] = $response2->pax2m_98; 
                            $_SESSION['hotel98']['totalhotelr44'] = $response2->pax1m_98 + $response2->pax2m_98 * ($room4-1 + $roomChild4); 
                        }elseif($idCategoria == 4){
                            $_SESSION['hotel98']['pricehotelroom41'] = $response2->pax1d_98; 
                            $_SESSION['hotel98']['pricehotelroom42'] = $response2->pax2d_98; 
                            $_SESSION['hotel98']['totalhotelr44'] = $response2->pax1d_98 + $response2->pax2d_98 * ($room4-1 + $roomChild4); 
                        }
                    }
                    #precio total para adultos 98

                    $sql = ($_SESSION['hotel98']['totalhotelr11'] + $_SESSION['hotel98']['totalhotelr12'] + $_SESSION['hotel98']['totalhotelr13'] + $_SESSION['hotel98']['totalhotelr14']) * $room1 ;
                    $dbl = ($_SESSION['hotel98']['totalhotelr21'] + $_SESSION['hotel98']['totalhotelr22'] + $_SESSION['hotel98']['totalhotelr23'] + $_SESSION['hotel98']['totalhotelr24']) * $room2;
                    $tpl = ($_SESSION['hotel98']['totalhotelr31'] + $_SESSION['hotel98']['totalhotelr32'] + $_SESSION['hotel98']['totalhotelr33'] + $_SESSION['hotel98']['totalhotelr34']) * $room3;
                    $qua = ($_SESSION['hotel98']['totalhotelr41'] + $_SESSION['hotel98']['totalhotelr42'] + $_SESSION['hotel98']['totalhotelr43'] + $_SESSION['hotel98']['totalhotelr44']) * $room4;

                    $precioAdulto = ($_SESSION['hotel98']['totalhotelr11'] + $_SESSION['hotel98']['totalhotelr12'] + $_SESSION['hotel98']['totalhotelr13'] + $_SESSION['hotel98']['totalhotelr14'] + $_SESSION['hotel98']['totalhotelr21'] + $_SESSION['hotel98']['totalhotelr22'] + $_SESSION['hotel98']['totalhotelr23'] + $_SESSION['hotel98']['totalhotelr24'] + $_SESSION['hotel98']['totalhotelr31'] + $_SESSION['hotel98']['totalhotelr32'] + $_SESSION['hotel98']['totalhotelr33'] + $_SESSION['hotel98']['totalhotelr34'] + $_SESSION['hotel98']['totalhotelr41'] + $_SESSION['hotel98']['totalhotelr42'] + $_SESSION['hotel98']['totalhotelr43'] + $_SESSION['hotel98']['totalhotelr44'] + $totalsch);
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto + $transporte;
                    #precio total para ninos 21
                    // echo '<pre>';
                    // print_r($_SESSION);
                    // echo '</pre> ';
                    // die;
                }
                //echo 'tipo tours =>' . $tours;

                // echo '<pre>';
                // print_r($_SESSION['toursbooking']['totaltours']);
                // print_r($response2);
                // //var_dump($response2 );
                // echo '</pre>';
                // die;
            }else //CIERRE DE if($response2->sgl == 0)/////////////////////////////////////////////////////////////////////////////////////////////
            {
                
                if ($tours == 21 and $idCategoria == 2) {
                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sgl;
                        $room1Child = $response2->chv21;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dbl;
                        $room1Child = $response2->chv21;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tpl;
                        $room1Child = $response2->chv21;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->qua;
                        $room1Child = $response2->chv21;
                    }else{
                        $room1Adult = 0;
                        $room1Child = 0;
                    }


                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sgl;
                        $room2Child = $response2->chv21;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dbl;
                        $room2Child = $response2->chv21;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tpl;
                        $room2Child = $response2->chv21;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->qua;
                        $room2Child = $response2->chv21;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }


                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sgl;
                        $room3Child = $response2->chv21;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dbl;
                        $room3Child = $response2->chv21;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tpl;
                        $room3Child = $response2->chv21;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->qua;
                        $room3Child = $response2->chv21;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }



                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sgl;
                        $room4Child = $response2->chv21;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dbl;
                        $room4Child = $response2->chv21;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tpl;
                        $room4Child = $response2->chv21;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->qua;
                        $room4Child = $response2->chv21;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }



                    #precio total para adultos 21
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 21
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;

                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild +  $totalsch;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte + $totalsch;
                    
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    // echo '<pre>';
                    // print_r($_SESSION['hotel']['precioTotalHotel']);
                    // echo '<br />';
                    // print_r($_SESSION['toursbooking']['totaltours']);
                    // // print_r($totalpreciohotel);
                    // echo '</pre>';
                    // die;
                    // echo 'el precio total de adultos es =>'. number_format($priceTotalAdult, 2,'.',',');
                    // echo '<br />el precio total de los ninos es =>'.number_format($precioChild, 2,'.',',');
                    // echo '<br />el precio total de los ninos es =>'.number_format($_SESSION['hotel']['precioTotalHotel'], 2,'.',',');
					// die;
				} elseif ($tours == 32 and $idCategoria == 2) {
                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sgl2;
                        $room1Child = $response2->chv32;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dbl2;
                        $room1Child = $response2->chv32;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tpl2;
                        $room1Child = $response2->chv32;
                    } else {
                        $room1Adult = $response2->qua2;
                        $room1Child = $response2->chv32;
                    }

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sgl2;
                        $room2Child = $response2->chv32;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dbl2;
                        $room2Child = $response2->chv32;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tpl32;
                        $room2Child = $response2->chv32;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->qua2;
                        $room2Child = $response2->chv32;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sgl2;
                        $room3Child = $response2->chv32;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dbl2;
                        $room3Child = $response2->chv32;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tpl2;
                        $room3Child = $response2->chv32;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->qua2;
                        $room3Child = $response2->chv32;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sgl2;
                        $room4Child = $response2->chv32;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dbl2;
                        $room4Child = $response2->chv32;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tpl2;
                        $room4Child = $response2->chv32;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->qua2;
                        $room4Child = $response2->chv32;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 32
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 32
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>'. number_format($priceTotalAdult, 2,'.',',');
                    //echo '<br />el precio total de los ninos es =>'.number_format($precioChild, 2,'.',',');
                } elseif ($tours == 43 and $idCategoria == 2) {
                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sgl3;
                        $room1Child = $response2->chv43;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dbl3;
                        $room1Child = $response2->chv43;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tpl3;
                        $room1Child = $response2->chv43;
                    } else {
                        $room1Adult = $response2->qua3;
                        $room1Child = $response2->chv43;
                    }

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sgl3;
                        $room2Child = $response2->chv43;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dbl3;
                        $room2Child = $response2->chv43;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tpl3;
                        $room2Child = $response2->chv43;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->qua3;
                        $room2Child = $response2->chv43;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sgl3;
                        $room3Child = $response2->chv43;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dbl3;
                        $room3Child = $response2->chv43;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tpl3;
                        $room3Child = $response2->chv43;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->qua3;
                        $room3Child = $response2->chv43;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sgl3;
                        $room4Child = $response2->chv43;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dbl3;
                        $room4Child = $response2->chv43;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tpl3;
                        $room4Child = $response2->chv43;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->qua3;
                        $room4Child = $response2->chv43;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 32
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 32
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>'. number_format($priceTotalAdult, 2,'.',',');
                    //echo '<br />el precio total de los ninos es =>'.number_format($precioChild, 2,'.',',');
                } elseif ($tours == 54 and $idCategoria == 2) {
                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sgl4;
                        $room1Child = $response2->chv54;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dbl4;
                        $room1Child = $response2->chv54;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tpl4;
                        $room1Child = $response2->chv54;
                    } else {
                        $room1Adult = $response2->qua4;
                        $room1Child = $response2->chv54;
                    }
                    // echo '<pre>';
                    // print_r($room1Adult);
                    // echo '</pre> ';
                    // die;
                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sgl4;
                        $room2Child = $response2->chv54;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dbl4;
                        $room2Child = $response2->chv54;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tpl4;
                        $room2Child = $response2->chv54;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->qua4;
                        $room2Child = $response2->chv54;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sgl4;
                        $room3Child = $response2->chv54;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dbl4;
                        $room3Child = $response2->chv54;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tpl4;
                        $room3Child = $response2->chv54;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->qua4;
                        $room3Child = $response2->chv54;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sgl4;
                        $room4Child = $response2->chv54;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dbl4;
                        $room4Child = $response2->chv54;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tpl4;
                        $room4Child = $response2->chv54;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->qua4;
                        $room4Child = $response2->chv54;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 32
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 32
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>'. number_format($priceTotalAdult, 2,'.',',');
                    //echo '<br />el precio total de los ninos es =>'.number_format($precioChild, 2,'.',',');
                } elseif ($tours == 65 and $idCategoria == 2) {
                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sgl5;
                        $room1Child = $response2->chv65;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dbl5;
                        $room1Child = $response2->chv65;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tpl5;
                        $room1Child = $response2->chv65;
                    } else {
                        $room1Adult = $response2->qua5;
                        $room1Child = $response2->chv65;
                    }

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sgl5;
                        $room2Child = $response2->chv65;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dbl5;
                        $room2Child = $response2->chv65;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tpl5;
                        $room2Child = $response2->chv65;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->qua5;
                        $room2Child = $response2->chv65;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sgl5;
                        $room3Child = $response2->chv65;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dbl5;
                        $room3Child = $response2->chv65;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tpl5;
                        $room3Child = $response2->chv65;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->qua5;
                        $room3Child = $response2->chv65;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sgl5;
                        $room4Child = $response2->chv65;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dbl5;
                        $room4Child = $response2->chv65;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tpl5;
                        $room4Child = $response2->chv65;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->qua5;
                        $room4Child = $response2->chv65;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 32
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 32
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>'. number_format($priceTotalAdult, 2,'.',',');
                    //echo '<br />el precio total de los ninos es =>'.number_format($precioChild, 2,'.',',');
                } elseif ($tours == 76 and $idCategoria == 2) {
                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sgl6;
                        $room1Child = $response2->chv76;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dbl6;
                        $room1Child = $response2->chv76;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tpl6;
                        $room1Child = $response2->chv76;
                    } else {
                        $room1Adult = $response2->qua6;
                        $room1Child = $response2->chv76;
                    }

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sgl6;
                        $room2Child = $response2->chv76;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dbl6;
                        $room2Child = $response2->chv76;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tpl6;
                        $room2Child = $response2->chv76;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->qua6;
                        $room2Child = $response2->chv76;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sgl6;
                        $room3Child = $response2->chv76;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dbl6;
                        $room3Child = $response2->chv76;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tpl6;
                        $room3Child = $response2->chv76;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->qua6;
                        $room3Child = $response2->chv76;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sgl6;
                        $room4Child = $response2->chv76;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dbl6;
                        $room4Child = $response2->chv76;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tpl6;
                        $room4Child = $response2->chv76;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->qua6;
                        $room4Child = $response2->chv76;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 32
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 32
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>'. number_format($priceTotalAdult, 2,'.',',');
                    //echo '<br />el precio total de los ninos es =>'.number_format($precioChild, 2,'.',',');
                } elseif ($tours == 87 and $idCategoria == 2) {
                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 
                    // sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sgl7;
                        $room1Child = $response2->chv87;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dbl7;
                        $room1Child = $response2->chv87;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tpl7;
                        $room1Child = $response2->chv87;
                    } else {
                        $room1Adult = $response2->qua7;
                        $room1Child = $response2->chv87;
                    }

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sgl7;
                        $room2Child = $response2->chv87;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dbl7;
                        $room2Child = $response2->chv87;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tpl7;
                        $room2Child = $response2->chv87;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->qua7;
                        $room2Child = $response2->chv87;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sgl7;
                        $room3Child = $response2->chv87;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dbl7;
                        $room3Child = $response2->chv87;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tpl7;
                        $room3Child = $response2->chv87;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->qua7;
                        $room3Child = $response2->chv87;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sgl7;
                        $room4Child = $response2->chv87;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dbl7;
                        $room4Child = $response2->chv87;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tpl7;
                        $room4Child = $response2->chv87;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->qua7;
                        $room4Child = $response2->chv87;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 32
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 32
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>'. number_format($priceTotalAdult, 2,'.',',');
                    //echo '<br />el precio total de los ninos es =>'.number_format($precioChild, 2,'.',',');
                } elseif ($tours == 98 and $idCategoria == 2) {
                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sgl8;
                        $room1Child = $response2->chv98;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dbl8;
                        $room1Child = $response2->chv98;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tpl8;
                        $room1Child = $response2->chv98;
                    } else {
                        $room1Adult = $response2->qua8;
                        $room1Child = $response2->chv98;
                    }

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sgl8;
                        $room2Child = $response2->chv98;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dbl8;
                        $room2Child = $response2->chv98;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tpl8;
                        $room2Child = $response2->chv98;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->qua8;
                        $room2Child = $response2->chv98;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sgl8;
                        $room3Child = $response2->chv98;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dbl8;
                        $room3Child = $response2->chv98;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tpl8;
                        $room3Child = $response2->chv98;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->qua8;
                        $room3Child = $response2->chv98;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sgl8;
                        $room4Child = $response2->chv98;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dbl8;
                        $room4Child = $response2->chv98;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tpl8;
                        $room4Child = $response2->chv98;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->qua8;
                        $room4Child = $response2->chv98;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 32
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 32
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>'. number_format($priceTotalAdult, 2,'.',',');
                    //echo '<br />el precio total de los ninos es =>'.number_format($precioChild, 2,'.',',');
                }
                //  else {
                //     echo '<script type="text/javascript">alert("We do not have a rate available for the number of days");</script>';
                //     return Doo::conf()->APP_URL . "tours";
                // }
                //echo 'tipo tours =>' . $tours;
                // echo '<br />';
                // print_r($idCategoria);
                // // print_r($totalpreciohotel);
                // echo '</pre>';
                // die;
                if ($tours == 21 and $idCategoria == 3) {

                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sglm;
                        $room1Child = $response2->chm21;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dblm;
                        $room1Child = $response2->chm21;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tplm;
                        $room1Child = $response2->chm21;
                    } else {
                        $room1Adult = $response2->quam;
                        $room1Child = $response2->chm21;
                    }

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sglm;
                        $room2Child = $response2->chm21;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dblm;
                        $room2Child = $response2->chm21;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tplm;
                        $room2Child = $response2->chm21;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->quam;
                        $room2Child = $response2->chm21;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sglm;
                        $room3Child = $response2->chm21;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dblm;
                        $room3Child = $response2->chm21;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tplm;
                        $room3Child = $response2->chm21;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->quam;
                        $room3Child = $response2->chm21;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sglm;
                        $room4Child = $response2->chm21;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dblm;
                        $room4Child = $response2->chm21;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tplm;
                        $room4Child = $response2->chm21;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->quam;
                        $room4Child = $response2->chm21;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 21
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 21
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
    
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>' . number_format($priceTotalAdult, 2, '.', ',');
                    //echo '<br />el precio total de los ninos es =>' . number_format($precioChild, 2, '.', ',');
                } elseif ($tours == 32 and $idCategoria == 3) {

                    $adult = $_SESSION['toursbooking']['adults'];
                    $child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sglm2;
                        $room1Child = $response2->chm32;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dblm2;
                        $room1Child = $response2->chm32;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tplm2;
                        $room1Child = $response2->chm32;
                    } else {
                        $room1Adult = $response2->quam2;
                        $room1Child = $response2->chm32;
                    }

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sglm2;
                        $room2Child = $response2->chm32;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dblm2;
                        $room2Child = $response2->chm32;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tplm2;
                        $room2Child = $response2->chm32;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->quam2;
                        $room2Child = $response2->chm32;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sglm2;
                        $room3Child = $response2->chm32;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dblm2;
                        $room3Child = $response2->chm32;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tplm2;
                        $room3Child = $response2->chm32;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->quam2;
                        $room3Child = $response2->chm32;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sglm2;
                        $room4Child = $response2->chm32;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dblm2;
                        $room4Child = $response2->chm32;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tplm2;
                        $room4Child = $response2->chm32;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->quam2;
                        $room4Child = $response2->chm32;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 21
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 21
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>' . number_format($priceTotalAdult, 2, '.', ',');
                    //echo '<br />el precio total de los ninos es =>' . number_format($precioChild, 2, '.', ',');
                } elseif ($tours == 43 and $idCategoria == 3) {


                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sglm3;
                        $room1Child = $response2->chm43;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dblm3;
                        $room1Child = $response2->chm43;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tplm3;
                        $room1Child = $response2->chm43;
                    } else {
                        $room1Adult = $response2->quam3;
                        $room1Child = $response2->chm43;
                    }

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sglm3;
                        $room2Child = $response2->chm43;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dblm3;
                        $room2Child = $response2->chm43;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tplm3;
                        $room2Child = $response2->chm43;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->quam3;
                        $room2Child = $response2->chm43;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sglm3;
                        $room3Child = $response2->chm43;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dblm3;
                        $room3Child = $response2->chm43;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tplm3;
                        $room3Child = $response2->chm43;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->quam3;
                        $room3Child = $response2->chm43;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sglm3;
                        $room4Child = $response2->chm43;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dblm3;
                        $room4Child = $response2->chm43;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tplm3;
                        $room4Child = $response2->chm43;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->quam3;
                        $room4Child = $response2->chm43;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 21
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 21
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>' . number_format($priceTotalAdult, 2, '.', ',');
                    //echo '<br />el precio total de los ninos es =>' . number_format($precioChild, 2, '.', ',');
                } elseif ($tours == 54 and $idCategoria == 3) {


                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si 
                    //la habitacion 1 es sencilla, 
                    //doble, triple o de cuatro. 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sglm4;
                        $room1Child = $response2->chm54;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dblm4;
                        $room1Child = $response2->chm54;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tplm4;
                        $room1Child = $response2->chm54;
                    } else {
                        $room1Adult = $response2->quam4;
                        $room1Child = $response2->chm54;
                    }

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sglm4;
                        $room2Child = $response2->chm54;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dblm4;
                        $room2Child = $response2->chm54;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tplm4;
                        $room2Child = $response2->chm54;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->quam4;
                        $room2Child = $response2->chm54;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sglm4;
                        $room3Child = $response2->chm54;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dblm4;
                        $room3Child = $response2->chm54;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tplm4;
                        $room3Child = $response2->chm54;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->quam4;
                        $room3Child = $response2->chm54;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sglm4;
                        $room4Child = $response2->chm54;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dblm4;
                        $room4Child = $response2->chm54;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tplm4;
                        $room4Child = $response2->chm54;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->quam4;
                        $room4Child = $response2->chm54;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 21
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 21
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>' . number_format($priceTotalAdult, 2, '.', ',');
                    //echo '<br />el precio total de los ninos es =>' . number_format($precioChild, 2, '.', ',');
                } elseif ($tours == 65 and $idCategoria == 3) {


                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sglm5;
                        $room1Child = $response2->chm65;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dblm5;
                        $room1Child = $response2->chm65;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tplm5;
                        $room1Child = $response2->chm65;
                    } else {
                        $room1Adult = $response2->quam5;
                        $room1Child = $response2->chm65;
                    }

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sglm5;
                        $room2Child = $response2->chm65;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dblm5;
                        $room2Child = $response2->chm65;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tplm5;
                        $room2Child = $response2->chm65;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->quam5;
                        $room2Child = $response2->chm65;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sglm5;
                        $room3Child = $response2->chm65;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dblm5;
                        $room3Child = $response2->chm65;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tplm5;
                        $room3Child = $response2->chm65;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->quam5;
                        $room3Child = $response2->chm65;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sglm5;
                        $room4Child = $response2->chm65;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dblm5;
                        $room4Child = $response2->chm65;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tplm5;
                        $room4Child = $response2->chm65;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->quam5;
                        $room4Child = $response2->chm65;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 21
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 21
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>' . number_format($priceTotalAdult, 2, '.', ',');
                    //echo '<br />el precio total de los ninos es =>' . number_format($precioChild, 2, '.', ',');
                } elseif ($tours == 76 and $idCategoria == 3) {


                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sglm6;
                        $room1Child = $response2->chm76;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dblm6;
                        $room1Child = $response2->chm76;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tplm6;
                        $room1Child = $response2->chm76;
                    } else {
                        $room1Adult = $response2->quam6;
                        $room1Child = $response2->chm76;
                    }

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sglm6;
                        $room2Child = $response2->chm76;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dblm6;
                        $room2Child = $response2->chm76;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tplm6;
                        $room2Child = $response2->chm76;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->quam6;
                        $room2Child = $response2->chm76;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sglm6;
                        $room3Child = $response2->chm76;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dblm6;
                        $room3Child = $response2->chm76;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tplm6;
                        $room3Child = $response2->chm76;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->quam6;
                        $room3Child = $response2->chm76;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sglm6;
                        $room4Child = $response2->chm76;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dblm6;
                        $room4Child = $response2->chm76;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tplm6;
                        $room4Child = $response2->chm76;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->quam6;
                        $room4Child = $response2->chm76;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 21
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 21
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>' . number_format($priceTotalAdult, 2, '.', ',');
                    //echo '<br />el precio total de los ninos es =>' . number_format($precioChild, 2, '.', ',');
                } elseif ($tours == 87 and $idCategoria == 3) {


                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sglm7;
                        $room1Child = $response2->chm87;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dblm7;
                        $room1Child = $response2->chm87;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tplm7;
                        $room1Child = $response2->chm87;
                    } else {
                        $room1Adult = $response2->quam7;
                        $room1Child = $response2->chm87;
                    }

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sglm7;
                        $room2Child = $response2->chm87;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dblm7;
                        $room2Child = $response2->chm87;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tplm7;
                        $room2Child = $response2->chm87;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->quam7;
                        $room2Child = $response2->chm87;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sglm7;
                        $room3Child = $response2->chm87;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dblm7;
                        $room3Child = $response2->chm87;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tplm7;
                        $room3Child = $response2->chm87;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->quam7;
                        $room3Child = $response2->chm87;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sglm7;
                        $room4Child = $response2->chm87;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dblm7;
                        $room4Child = $response2->chm87;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tplm7;
                        $room4Child = $response2->chm87;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->quam7;
                        $room4Child = $response2->chm87;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 21
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 21
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>' . number_format($priceTotalAdult, 2, '.', ',');
                    //echo '<br />el precio total de los ninos es =>' . number_format($precioChild, 2, '.', ',');
                } elseif ($tours == 98 and $idCategoria == 3) {


                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sglm8;
                        $room1Child = $response2->chm97;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dblm8;
                        $room1Child = $response2->chm97;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tplm8;
                        $room1Child = $response2->chm97;
                    } else {
                        $room1Adult = $response2->quam8;
                        $room1Child = $response2->chm97;
                    }

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sglm8;
                        $room2Child = $response2->chm97;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dblm8;
                        $room2Child = $response2->chm97;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tplm8;
                        $room2Child = $response2->chm97;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->quam8;
                        $room2Child = $response2->chm97;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sglm8;
                        $room3Child = $response2->chm97;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dblm8;
                        $room3Child = $response2->chm97;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tplm8;
                        $room3Child = $response2->chm97;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->quam8;
                        $room3Child = $response2->chm97;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sglm8;
                        $room4Child = $response2->chm97;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dblm8;
                        $room4Child = $response2->chm97;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tplm8;
                        $room4Child = $response2->chm97;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->quam8;
                        $room4Child = $response2->chm97;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 21
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 21
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>' . number_format($priceTotalAdult, 2, '.', ',');
                    //echo '<br />el precio total de los ninos es =>' . number_format($precioChild, 2, '.', ',');
                }







                if ($tours == 21 and $idCategoria == 4) {

                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sgld;
                        $room1Child = $response2->chm21;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dbld;
                        $room1Child = $response2->chm21;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tpld;
                        $room1Child = $response2->chm21;
                    } else {
                        $room1Adult = $response2->quad;
                        $room1Child = $response2->chm21;
                    }

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sglm;
                        $room2Child = $response2->chm21;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dblm;
                        $room2Child = $response2->chm21;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tplm;
                        $room2Child = $response2->chm21;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->quam;
                        $room2Child = $response2->chm21;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sglm;
                        $room3Child = $response2->chm21;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dblm;
                        $room3Child = $response2->chm21;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tplm;
                        $room3Child = $response2->chm21;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->quam;
                        $room3Child = $response2->chm21;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sglm;
                        $room4Child = $response2->chm21;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dblm;
                        $room4Child = $response2->chm21;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tplm;
                        $room4Child = $response2->chm21;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->quam;
                        $room4Child = $response2->chm21;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 21
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 21
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
    
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>' . number_format($priceTotalAdult, 2, '.', ',');
                    //echo '<br />el precio total de los ninos es =>' . number_format($precioChild, 2, '.', ',');
                } elseif ($tours == 32 and $idCategoria == 4) {

                    $adult = $_SESSION['toursbooking']['adults'];
                    $child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sglm2;
                        $room1Child = $response2->chm32;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dblm2;
                        $room1Child = $response2->chm32;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tplm2;
                        $room1Child = $response2->chm32;
                    } else {
                        $room1Adult = $response2->quam2;
                        $room1Child = $response2->chm32;
                    }

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sglm2;
                        $room2Child = $response2->chm32;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dblm2;
                        $room2Child = $response2->chm32;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tplm2;
                        $room2Child = $response2->chm32;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->quam2;
                        $room2Child = $response2->chm32;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sglm2;
                        $room3Child = $response2->chm32;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dblm2;
                        $room3Child = $response2->chm32;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tplm2;
                        $room3Child = $response2->chm32;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->quam2;
                        $room3Child = $response2->chm32;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sglm2;
                        $room4Child = $response2->chm32;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dblm2;
                        $room4Child = $response2->chm32;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tplm2;
                        $room4Child = $response2->chm32;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->quam2;
                        $room4Child = $response2->chm32;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 21
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 21
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>' . number_format($priceTotalAdult, 2, '.', ',');
                    //echo '<br />el precio total de los ninos es =>' . number_format($precioChild, 2, '.', ',');
                } elseif ($tours == 43 and $idCategoria == 4) {


                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sglm3;
                        $room1Child = $response2->chm43;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dblm3;
                        $room1Child = $response2->chm43;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tplm3;
                        $room1Child = $response2->chm43;
                    } else {
                        $room1Adult = $response2->quam3;
                        $room1Child = $response2->chm43;
                    }

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sglm3;
                        $room2Child = $response2->chm43;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dblm3;
                        $room2Child = $response2->chm43;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tplm3;
                        $room2Child = $response2->chm43;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->quam3;
                        $room2Child = $response2->chm43;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sglm3;
                        $room3Child = $response2->chm43;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dblm3;
                        $room3Child = $response2->chm43;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tplm3;
                        $room3Child = $response2->chm43;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->quam3;
                        $room3Child = $response2->chm43;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sglm3;
                        $room4Child = $response2->chm43;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dblm3;
                        $room4Child = $response2->chm43;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tplm3;
                        $room4Child = $response2->chm43;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->quam3;
                        $room4Child = $response2->chm43;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 21
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 21
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>' . number_format($priceTotalAdult, 2, '.', ',');
                    //echo '<br />el precio total de los ninos es =>' . number_format($precioChild, 2, '.', ',');
                } elseif ($tours == 54 and $idCategoria == 4) {


                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si 
                    //la habitacion 1 es sencilla, 
                    //doble, triple o de cuatro. 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sglm4;
                        $room1Child = $response2->chm54;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dblm4;
                        $room1Child = $response2->chm54;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tplm4;
                        $room1Child = $response2->chm54;
                    } else {
                        $room1Adult = $response2->quam4;
                        $room1Child = $response2->chm54;
                    }

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sglm4;
                        $room2Child = $response2->chm54;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dblm4;
                        $room2Child = $response2->chm54;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tplm4;
                        $room2Child = $response2->chm54;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->quam4;
                        $room2Child = $response2->chm54;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sglm4;
                        $room3Child = $response2->chm54;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dblm4;
                        $room3Child = $response2->chm54;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tplm4;
                        $room3Child = $response2->chm54;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->quam4;
                        $room3Child = $response2->chm54;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sglm4;
                        $room4Child = $response2->chm54;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dblm4;
                        $room4Child = $response2->chm54;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tplm4;
                        $room4Child = $response2->chm54;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->quam4;
                        $room4Child = $response2->chm54;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 21
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 21
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>' . number_format($priceTotalAdult, 2, '.', ',');
                    //echo '<br />el precio total de los ninos es =>' . number_format($precioChild, 2, '.', ',');
                } elseif ($tours == 65 and $idCategoria == 4) {


                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sglm5;
                        $room1Child = $response2->chm65;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dblm5;
                        $room1Child = $response2->chm65;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tplm5;
                        $room1Child = $response2->chm65;
                    } else {
                        $room1Adult = $response2->quam5;
                        $room1Child = $response2->chm65;
                    }

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sglm5;
                        $room2Child = $response2->chm65;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dblm5;
                        $room2Child = $response2->chm65;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tplm5;
                        $room2Child = $response2->chm65;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->quam5;
                        $room2Child = $response2->chm65;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sglm5;
                        $room3Child = $response2->chm65;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dblm5;
                        $room3Child = $response2->chm65;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tplm5;
                        $room3Child = $response2->chm65;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->quam5;
                        $room3Child = $response2->chm65;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sglm5;
                        $room4Child = $response2->chm65;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dblm5;
                        $room4Child = $response2->chm65;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tplm5;
                        $room4Child = $response2->chm65;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->quam5;
                        $room4Child = $response2->chm65;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 21
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 21
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>' . number_format($priceTotalAdult, 2, '.', ',');
                    //echo '<br />el precio total de los ninos es =>' . number_format($precioChild, 2, '.', ',');
                } elseif ($tours == 76 and $idCategoria == 4) {


                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sglm6;
                        $room1Child = $response2->chm76;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dblm6;
                        $room1Child = $response2->chm76;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tplm6;
                        $room1Child = $response2->chm76;
                    } else {
                        $room1Adult = $response2->quam6;
                        $room1Child = $response2->chm76;
                    }

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sglm6;
                        $room2Child = $response2->chm76;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dblm6;
                        $room2Child = $response2->chm76;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tplm6;
                        $room2Child = $response2->chm76;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->quam6;
                        $room2Child = $response2->chm76;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sglm6;
                        $room3Child = $response2->chm76;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dblm6;
                        $room3Child = $response2->chm76;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tplm6;
                        $room3Child = $response2->chm76;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->quam6;
                        $room3Child = $response2->chm76;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sglm6;
                        $room4Child = $response2->chm76;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dblm6;
                        $room4Child = $response2->chm76;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tplm6;
                        $room4Child = $response2->chm76;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->quam6;
                        $room4Child = $response2->chm76;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 21
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 21
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>' . number_format($priceTotalAdult, 2, '.', ',');
                    //echo '<br />el precio total de los ninos es =>' . number_format($precioChild, 2, '.', ',');
                } elseif ($tours == 87 and $idCategoria == 4) {


                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sglm7;
                        $room1Child = $response2->chm87;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dblm7;
                        $room1Child = $response2->chm87;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tplm7;
                        $room1Child = $response2->chm87;
                    } else {
                        $room1Adult = $response2->quam7;
                        $room1Child = $response2->chm87;
                    }

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sglm7;
                        $room2Child = $response2->chm87;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dblm7;
                        $room2Child = $response2->chm87;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tplm7;
                        $room2Child = $response2->chm87;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->quam7;
                        $room2Child = $response2->chm87;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sglm7;
                        $room3Child = $response2->chm87;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dblm7;
                        $room3Child = $response2->chm87;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tplm7;
                        $room3Child = $response2->chm87;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->quam7;
                        $room3Child = $response2->chm87;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sglm7;
                        $room4Child = $response2->chm87;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dblm7;
                        $room4Child = $response2->chm87;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tplm7;
                        $room4Child = $response2->chm87;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->quam7;
                        $room4Child = $response2->chm87;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 21
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 21
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>' . number_format($priceTotalAdult, 2, '.', ',');
                    //echo '<br />el precio total de los ninos es =>' . number_format($precioChild, 2, '.', ',');
                } elseif ($tours == 98 and $idCategoria == 4) {


                    //$adult = $_SESSION['toursbooking']['adults'];
                    //$child = $_SESSION['toursbooking']['childs'];
                    #precio para las habitaciones adultos
                    $room1 = $_SESSION['toursbooking']['adult_r1'];
                    $room2 = $_SESSION['toursbooking']['adult_r2'];
                    $room3 = $_SESSION['toursbooking']['adult_r3'];
                    $room4 = $_SESSION['toursbooking']['adult_r4'];

                    #precio para las habitaciones child
                    $roomChild1 = $_SESSION['toursbooking']['child_r1'];
                    $roomChild2 = $_SESSION['toursbooking']['child_r2'];
                    $roomChild3 = $_SESSION['toursbooking']['child_r3'];
                    $roomChild4 = $_SESSION['toursbooking']['child_r4'];

                    //para verificar el precio si la habitacion 1 es sencilla, doble, triple o de cuatro 
                    if ($room1 == 1) {
                        $room1Adult = $response2->sglm8;
                        $room1Child = $response2->chm97;
                    } elseif ($room1 == 2) {
                        $room1Adult = $response2->dblm8;
                        $room1Child = $response2->chm97;
                    } elseif ($room1 == 3) {
                        $room1Adult = $response2->tplm8;
                        $room1Child = $response2->chm97;
                    } else {
                        $room1Adult = $response2->quam8;
                        $room1Child = $response2->chm97;
                    }

                    //para verificar el precio si la habitacion 2 es sencilla, doble, triple o de cuatro 
                    if ($room2 == 1) {
                        $room2Adult = $response2->sglm8;
                        $room2Child = $response2->chm97;
                    } elseif ($room2 == 2) {
                        $room2Adult = $response2->dblm8;
                        $room2Child = $response2->chm97;
                    } elseif ($room2 == 3) {
                        $room2Adult = $response2->tplm8;
                        $room2Child = $response2->chm97;
                    } elseif ($room2 == 4) {
                        $room2Adult = $response2->quam8;
                        $room2Child = $response2->chm97;
                    } else {
                        $room2Adult = 0;
                        $room2Child = 0;
                    }

                    //para verificar el precio si la habitacion 3 es sencilla, doble, triple o de cuatro 
                    if ($room3 == 1) {
                        $room3Adult = $response2->sglm8;
                        $room3Child = $response2->chm97;
                    } elseif ($room3 == 2) {
                        $room3Adult = $response2->dblm8;
                        $room3Child = $response2->chm97;
                    } elseif ($room3 == 3) {
                        $room3Adult = $response2->tplm8;
                        $room3Child = $response2->chm97;
                    } elseif ($room3 == 4) {
                        $room3Adult = $response2->quam8;
                        $room3Child = $response2->chm97;
                    } else {
                        $room3Adult = 0;
                        $room3Child = 0;
                    }

                    //para verificar el precio si la habitacion 4 es sencilla, doble, triple o de cuatro 
                    if ($room4 == 1) {
                        $room4Adult = $response2->sglm8;
                        $room4Child = $response2->chm97;
                    } elseif ($room4 == 2) {
                        $room4Adult = $response2->dblm8;
                        $room4Child = $response2->chm97;
                    } elseif ($room4 == 3) {
                        $room4Adult = $response2->tplm8;
                        $room4Child = $response2->chm97;
                    } elseif ($room4 == 4) {
                        $room4Adult = $response2->quam8;
                        $room4Child = $response2->chm97;
                    } else {
                        $room4Adult = 0;
                        $room4Child = 0;
                    }

                    #precio total para adultos 21
                    $precioAdulto = (($room1 * $room1Adult) + ($room2 * $room2Adult) + ($room3 * $room3Adult) + ($room4 * $room4Adult));
                    $priceTotalAdult = $precioAdulto;
                    #precio total para ninos 21
                    $precioChild = (($roomChild1 * $room1Child) + ($roomChild2 * $room2Child) + ($roomChild3 * $room3Child) + ($roomChild4 * $room4Child));
                    $priceTotalChild = $precioChild;
                    $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild;
                    $_SESSION['toursbooking']['totaltours'] = $precioAdulto +$precioChild+ $transporte;
                    // $_SESSION['hotel']['precioTotalHotel'] = $precioAdulto +$precioChild+ $transporte;
                    //echo 'el precio total de adultos es =>' . number_format($priceTotalAdult, 2, '.', ',');
                    //echo '<br />el precio total de los ninos es =>' . number_format($precioChild, 2, '.', ',');
                }

            }

            // echo '<pre>';
            // print_r($response2);
            // echo '<br />';
            // print_r($_SESSION['toursbooking']['totaltours']);
            // // print_r($totalpreciohotel);
            // echo '</pre>';
            // die;
                $trip_no1 = $_SESSION['toursbooking']['trip1'];
                $trip_no2 = $_SESSION['toursbooking']['trip2'];
                $service1 = $_SESSION['toursbooking']['service1'];
                $service2 = $_SESSION['toursbooking']['service2'];
                /* echo '<pre>';
                  print_r($_SESSION['toursbooking']);
                  echo '</pre>'; */

                if ($service1 == 'SUPER TOURS BUS' and $service2 == 'SUPER TOURS BUS') {
                    if ($trip_no1 == 101) {
                        $transportAdult = $response2->trip101;
                        $transportChild = $response2->trip101c;
                    } elseif ($trip_no1 == 201) {
                        $transportAdult = $response2->trip201;
                        $transportChild = $response2->trip201c;
                    } elseif ($trip_no1 == 301) {
                        $transportAdult = $response2->trip301;
                        $transportChild = $response2->trip301c;
                    }

                    if ($trip_no2 == 100) {
                        $transportAdult1 = $response2->trip100;
                        $transportChild1 = $response2->trip100c;
                    } elseif ($trip_no2 == 200) {
                        $transportAdult1 = $response2->trip200;
                        $transportChild1 = $response2->trip200c;
                    } elseif ($trip_no2 == 300) {
                        $transportAdult1 = $response2->trip300;
                        $transportChild1 = $response2->trip300c;
                    }
                } elseif ($service1 == 'PLANE' and $service2 == 'PLANE') {
                    /* precio de los tiquetes para adulto y nino ida por avion */
                    $transportAdult = $response2->t_in;
                    $transportChild = $response2->t_in;

                    /* precio de los tiquetes para adulto y nino venida por avion */
                    $transportAdult1 = $response2->t_out;
                    $transportChild1 = $response2->t_out;
                } elseif ($service1 == 'Car' and $service2 == 'Car') {
                    /* precio de los tiquetes para adulto y nino ida por avion */
                    $transportAdult = $response2->car_in;
                    $transportChild = $response2->car_in;

                    /* precio de los tiquetes para adulto y nino venida por avion */
                    $transportAdult1 = $response2->car_out;
                    $transportChild1 = $response2->car_out;
                } elseif ($service1 == 'SUPER TOURS BUS' and $service2 == 'PLANE') {
                    if ($trip_no1 == 101) {
                        $transportAdult = $response2->trip101;
                        $transportChild = $response2->trip101c;
                    } elseif ($trip_no1 == 201) {
                        $transportAdult = $response2->trip201;
                        $transportChild = $response2->trip201c;
                    } elseif ($trip_no1 == 301) {
                        $transportAdult = $response2->trip301;
                        $transportChild = $response2->trip301c;
                    }
                    $transportAdult1 = $response2->t_out;
                    $transportChild1 = $response2->t_out;
                } elseif ($service1 == 'SUPER TOURS BUS' and $service2 == 'Car') {
                    if ($trip_no1 == 101) {
                        $transportAdult = $response2->trip101;
                        $transportChild = $response2->trip101c;
                    } elseif ($trip_no1 == 201) {
                        $transportAdult = $response2->trip201;
                        $transportChild = $response2->trip201c;
                    } elseif ($trip_no1 == 301) {
                        $transportAdult = $response2->trip301;
                        $transportChild = $response2->trip301c;
                    }
                    $transportAdult1 = $response2->car_out;
                    $transportChild1 = $response2->car_out;
                } elseif ($service1 == 'PLANE' and $service2 == 'SUPER TOURS BUS') {
                    /* precio de los tiquetes para adulto y nino ida por avion */
                    $transportAdult = $response2->t_in;
                    $transportChild = $response2->t_in;

                    if ($trip_no2 == 100) {
                        $transportAdult1 = $response2->trip100;
                        $transportChild1 = $response2->trip100c;
                    } elseif ($trip_no2 == 200) {
                        $transportAdult1 = $response2->trip200;
                        $transportChild1 = $response2->trip200c;
                    } elseif ($trip_no2 == 300) {
                        $transportAdult1 = $response2->trip300;
                        $transportChild1 = $response2->trip300c;
                    }
                } elseif ($service1 == 'PLANE' and $service2 == 'Car') {
                    /* precio de los tiquetes para adulto y nino ida por avion */
                    $transportAdult = $response2->t_in;
                    $transportChild = $response2->t_in;

                    /* precio de los tiquetes para adulto y nino venida por avion */
                    $transportAdult1 = $response2->car_out;
                    $transportChild1 = $response2->car_out;
                } elseif ($service1 == 'Car' and $service2 == 'SUPER TOURS BUS') {
                    $transportAdult = $response2->car_in;
                    $transportChild = $response2->car_in;

                    if ($trip_no2 == 100) {
                        $transportAdult1 = $response2->trip100;
                        $transportChild1 = $response2->trip100c;
                    } elseif ($trip_no2 == 200) {
                        $transportAdult1 = $response2->trip200;
                        $transportChild1 = $response2->trip200c;
                    } elseif ($trip_no2 == 300) {
                        $transportAdult1 = $response2->trip300;
                        $transportChild1 = $response2->trip300c;
                    }
                } elseif ($service1 == 'Car' and $service2 == 'PLANE') {
                    $transportAdult = $response2->car_in;
                    $transportChild = $response2->car_in;

                    /* precio de los tiquetes para adulto y nino venida por avion */
                    $transportAdult1 = $response2->t_out;
                    $transportChild1 = $response2->t_out;
                }
                
                        // echo '<pre>';
                        // print_r($transportAdult);
                        // // print_r($totalpreciohotel);
                        // echo '</pre>';
                        // die;

                /* echo 'transportacion de los adultos Ida=>'.$transportAdult.'<br />';
                  echo 'transportacion de los ninos Ida=>'.$transportChild.'<br />';
                  echo '<br />';
                  echo 'transportacion de los adultos Venida=>'.$transportAdult1.'<br />';
                  echo 'transportacion de los ninos Venida=>'.$transportChild1.'<br />';
                  exit(); */
                  
                                    //   $costohotel = $this->costoHotel($fecha_salida, $fecha_retorno, $id_hotel, $room1, $room2, $room3, $room4, $nochesfree, $free_night_buffet, $type_rate);
                                    
                $_SESSION['toursbooking']['transporAdultIda'] = (isset($transportAdult)? $transportAdult : 0) ;
                $_SESSION['toursbooking']['transporChildIda'] = (isset($transportChild)? $transportChild : 0) ;
                $_SESSION['toursbooking']['transporAdultRetorno'] = (isset($transportAdult1)? $transportAdult1 : 0) ;
                $_SESSION['toursbooking']['transporChildRetorno'] = (isset($transportChild1)? $transportChild1 : 0) ;
                $_SESSION['toursbooking']['precioHotelAdulto'] = (isset($priceTotalAdult)? $priceTotalAdult : 0) ;
                $_SESSION['toursbooking']['precioHotelChild'] = (isset($precioChild)? $precioChild : 0) ; 
                $adult_r1 = $_SESSION['toursbooking']['adult_r1'];
                $adult_r2 = $_SESSION['toursbooking']['adult_r2'];
                $adult_r3 = $_SESSION['toursbooking']['adult_r3'];
                $adult_r4 = $_SESSION['toursbooking']['adult_r4'];
                $child_r1 = $_SESSION['toursbooking']['child_r1'];
                $child_r2 = $_SESSION['toursbooking']['child_r2'];
                $child_r3 = $_SESSION['toursbooking']['child_r3'];
                $child_r4 = $_SESSION['toursbooking']['child_r4'];

                  $tipos = $this->tipoHabitacion($room1, $room2, $room3, $room4);
                  
                $sgl2 = $tipos['sgl'];
                $dbl2 = $tipos['dbl'];
                $tpl2 = $tipos['tpl'];
                $qua2 = $tipos['qua'];

                $fecha_salida = $_SESSION['toursbooking']['fecha_llegada'];
                $fecha_retorno = $_SESSION['toursbooking']['fecha_salida'];
                $id_hotel = $_SESSION['toursbooking']['hotelid'];
                $room1c = $_SESSION['toursbooking']['child_r1'];
                $room2c = $_SESSION['toursbooking']['child_r2'];
                $room3c = $_SESSION['toursbooking']['child_r3'];
                $room4c = $_SESSION['toursbooking']['child_r4'];
                $nochesfree = 0;
                $free_night_buffet = 0;
                $type_rate = 0;
                 /*echo '<pre>';
                 print_r($_SESSION['toursbooking']);
                 // print_r($totalpreciohotel);
                 echo '</pre>';
                 die;*/
                  $costohotel = $this->costoHotel($fecha_salida, $fecha_retorno, $id_hotel, $room1, $room2, $room3, $room4, $room1c, $room2c, $room3c, $room4c, $nochesfree, $free_night_buffet, $type_rate);

                //   echo '<pre>';
                //   print_r($costohotel);
                //    echo '</pre>';
                //    die;
                  $_SESSION['toursbooking']['sql'] = $costohotel['sgl'];
                  $_SESSION['toursbooking']['dbl'] = $costohotel['dbl'];
                  $_SESSION['toursbooking']['tpl'] = $costohotel['tpl'];
                  $_SESSION['toursbooking']['qua'] = $costohotel['qua'];

                  
                $_SESSION['toursbooking']['sql2'] = $sgl2;
                $_SESSION['toursbooking']['dbl2'] = $dbl2;
                $_SESSION['toursbooking']['tpl2'] = $tpl2;
                $_SESSION['toursbooking']['qua2'] = $qua2;

                $sqlpar = "SELECT * FROM parques_add JOIN parques ON parques_add.idfk_parq = parques.id WHERE estado_parq = 1 AND multid_parq = 1 ORDER BY id_parq ASC";
                $parq = Doo::db()->query($sqlpar, array());
                $parques = $parq->fetchAll(PDO::FETCH_ASSOC);
        
                $sqlgpar = "SELECT gpq.id,gpq.nombre,pqd.estado_parq,pqd.fechacr_parq FROM parques_add pqd JOIN parques pq ON pq.id = pqd.idfk_parq JOIN grupo_parques gpq ON pq.id_grupo = gpq.id WHERE pqd.estado_parq = 1 AND multid_parq = 1 GROUP BY id_grupo ASC";
                $parqg = Doo::db()->query($sqlgpar, array());
                $parquesg = $parqg->fetchAll(PDO::FETCH_ASSOC);
                    $this->data["grupoparques"] = $parquesg;
                    $this->data["parques"] = $parques;
                    $_SESSION['hotel']['categoria'] = $idCategoria;
                    // if ($_SESSION['breakfast'] == 1) { //ESTO ES PARA EL DESAYUNO
                    //     $_SESSION['toursbooking']['totaltours'] = $_SESSION['toursbooking']['totaltours'] + $_SESSION['toursbooking']['super_breakfastprice'] * $_SESSION['toursbooking']['totalpax'] + $_SESSION['toursbooking']['noche'];
                    // }elseif ($_SESSION['breakfast2'] == 1) {
                    //     $_SESSION['toursbooking']['totaltours'] = $_SESSION['toursbooking']['totaltours'] + $_SESSION['toursbooking']['breackfastprice'] * $_SESSION['toursbooking']['totalpax'] + $_SESSION['toursbooking']['noche'];
                    // // }
                        // echo '<pre>';
                        // // print_r($_SESSION);
                        // // print_r($response2);
                        // // print_r($costohotel);
                        // print_r($_SESSION['toursbooking']['totaltours'] );
                        // echo '</pre>';
                        // die;
                //  echo '<pre>';
                //    print_r($_SESSION);
                //   echo '</pre>';
                //   exit(); 
                $_SESSION['toursbooking']['tqp'] = $_SESSION['toursbooking']['tqp1'];
                $this->renderc('/page/3-day-tour', $this->data);
            } catch (Exception $e) {
                return Doo::conf()->APP_URL . "multi-days-tours";
                // procedimiento en caso de reportar erroreseric
            }
        } else {
            return Doo::conf()->APP_URL . "multi-days-tours";
        }
    }

    
    public function costoHotel($fechaSalida, $fechaRetorno, $hotel, $room1, $room2, $room3, $room4, $nochesfree, $free_night_buffet, $type_rate, $noches_escogidas = 0) {
 
         $idpromo = $this->params["rates"];
         ////////////////////////////////////////////////Actualizacion
         $id_agency1 = 53;
         //$id_tour = $dat->id_tour;
 
         $frday = $this->params["frday"];
 
         Doo::loadModel("Agency");
         $dat = new Agency();
         $dat->id = $id_agency1;
         $dat = Doo::db()->find($dat, array('limit' => 1));
         $type_rate = $dat->type_rate;
 
         //echo $idpromo;
         
         //echo $hotel;
         
 //        $fecha->strtotime($fechaSalida);
 //        $fecha_fin->strtotime($fechaRetorno);
 //        
 //        echo $fecha;
 //        echo "--";
 //        echo $fecha_fin;
 
         if ($idpromo == 0) {
             
             if (isset($fechaSalida)) {
                     list($mes, $dia, $anyo) = explode("-", $fechaSalida);
                     $fec_salida = $mes . "-" . $dia . "-" . $anyo;  
                     //echo $fec_salida;
             } 
             
             
             //capturamos fecha retorno en formato unix
             $fecha_sal = strtotime($fec_salida);            
             //echo $fecha_sal;
             
             $sql = "SELECT ag.id,ag.company_name,ag.`tour_name` FROM agencia ag
                     LEFT JOIN ratesvalid rv ON (ag.id_tour = rv.id)
                     WHERE ag.id = '$id_agency1'  AND rv.`fecha_ini` <= '$fecha_sal' AND rv.`fecha_fin` >='$fecha_sal'";
             $rs = Doo::db()->query($sql);
             $consulta = $rs->fetchAll();
             
             
             //$dataList = array();
             
                 foreach ($consulta as $consul) {
 
                     $special_price_name1 = $consul['tour_name'];
                     
                     if($special_price_name1 != ''){
                         
                         //$special_price_name = $special_price_name1;
                         //echo $special_price_name;
                         $id_tour = $dat->id_tour;
                         //echo $id_tour;                        
                         
 
                     }else{
 
                         $special_price_name1 = '';
                         
                     }
 
                 }
                 
                 if($special_price_name1 == ''){
 
                         $sql1 = "SELECT ag.id,ag.company_name,ag.`tour_name2` FROM agencia ag
                                 LEFT JOIN ratesvalid rv ON (ag.id_tour2 = rv.id)
                                 WHERE ag.id = '$id_agency1'  AND rv.`fecha_ini` <= '$fecha_sal' AND rv.`fecha_fin` >='$fecha_sal'";
                         $rs1 = Doo::db()->query($sql1);
                         $consulta1 = $rs1->fetchAll();
                         
                         foreach ($consulta1 as $consul1) {
 
                             $id_tour = $dat->id_tour2;
                             //echo $id_tour;
                         }
                 }               
 
             
         } else {
             $id_tour = $idpromo;
         }
 
         if ($type_rate == 0) {
             $id_tour;
         }
         if ($type_rate == 1) {
             $id_tour;
         }
 
         $sqlTarifario = "SELECT id_tour as tarifario,id_tour2 as tarifario2 FROM agencia WHERE id = '53'";
         $resTarifario = Doo::db()->query($sqlTarifario);
         $idTarifario = $resTarifario->fetch();
         
         $fecha_ini = strtotime($fechaSalida);
         if($fecha_ini > '1576213200'){ //13-12-2019 00:00:00
             $_SESSION['toursbooking']['tarifario'] = $idTarifario['tarifario2'];
             $id_tour = $idTarifario['tarifario2'];
         }else{
             $_SESSION['toursbooking']['tarifario'] = $idTarifario['tarifario'];
             $id_tour = $idTarifario['tarifario'];
         }
 
         $sql = 'SELECT t1.id,t1.breakfast,t1.resoftfe,t1.nombre,t3.sgl,t3.dbl,t3.tpl,t3.qua,t3.sgl2,t3.dbl2,t3.tpl2,t3.qua2,t3.sgl3, t3.dbl3, t3.tpl3, t3.qua3, t3.sgl4, t3.dbl4, t3.tpl4, t3.qua4, t3.sgl5, t3.dbl5, t3.tpl5, t3.qua5, t3.sgl6, t3.dbl6, t3.tpl6, t3.qua6, t3.sgl7, t3.dbl7, t3.tpl7, t3.qua7, t3.sgl8, t3.dbl8, t3.tpl8, t3.qua8, t3.sglm,t3.dblm,t3.tplm,t3.quam,t3.sglm2,t3.dblm2,t3.tplm2,t3.quam2,t3.sglm3, t3.dblm3, t3.tplm3, t3.quam3, t3.sglm4, t3.dblm4, t3.tplm4, t3.quam4, t3.sglm5, t3.dblm5, t3.tplm5, t3.quam5, t3.sglm6, t3.dblm6, t3.tplm6, t3.quam6, t3.sglm7, t3.dblm7, t3.tplm7, t3.quam7, t3.sglm8, t3.dblm8, t3.tplm8, t3.quam8, t3.chv21, t3.chm21, t3.chv32, t3.chm32, t3.chv43, t3.chm43, t3.chv54, t3.chm54, t3.chv65, t3.chm65, t3.chv76, t3.chm76, t3.chv87, t3.chm87, t3.chv98, t3.chm98,t3.netax,t3.comtax,t3.costax,t3.id_ratesvalid,t3.breackfast,t3.fdv_adult21,t3.fdv_child21,t3.fdm_adult21,t3.fdm_child21,t3.fdv_adult32,t3.fdv_child32,t3.fdm_adult32,t3.fdm_child32,t3.fdv_adult43,t3.fdv_child43,t3.fdm_adult43,t3.fdm_child43,t3.fdv_adult54,t3.fdv_child54,t3.fdm_adult54,t3.fdm_child54,t3.fdv_adult65,t3.fdv_child65,t3.fdm_adult65,t3.fdm_child65,t3.fdv_adult76,t3.fdv_child76,t3.fdm_adult76,t3.fdm_child76,t3.fdv_adult87,t3.fdv_child87,t3.fdm_adult87,t3.fdm_child87,t3.fdv_adult98,t3.fdv_child98,t3.fdm_adult98,t3.fdm_child98,t1.categoria
        
                         FROM hoteles t1	
                             LEFT JOIN comifijas t3 ON (
                                             t1.id = t3.id_hotel                                                                                       
                                             AND t3.fecha_ini <= ? 
                                             AND t3.fecha_fin  >= ?
                                             )
                         WHERE t3.id_hotel  = ' . $hotel . ' AND t3.id_ratesvalid = ' . $id_tour . ' ';
 
         $fecha = new DateTime();
         
         $fecha_fin = new DateTime();
         $fecha->setTimestamp(strtotime($fechaSalida));
         $fecha_fin->setTimestamp(strtotime($fechaRetorno));
 
         //echo $fecha_fin->format('U = Y-m-d H:i:s') . "\n";
         $fecha2 = new DateTime();
         $fecha2->setTimestamp(strtotime($fechaSalida));
         //echo $fechaSalida;
 
         $fecha3 = new DateTime();
         $fecha3->setTimestamp(strtotime($fechaSalida));
 
         $fecha4 = new DateTime();
         $fecha4->setTimestamp(strtotime($fechaSalida));
         
         
         //Consulta para obtener los cargos por noche  de hoteles value y moderate PRIMER RANGO
         
         $sql6 = "SELECT schv, schm, schd FROM ratesvalid WHERE id ='$id_tour' AND fecha_schv <= '$fechaSalida' AND fecha_schm >= '$fechaSalida'";                  
 
         $rs6 = Doo::db()->query($sql6);
         $cargospn = $rs6->fetchAll();
         //cargos por noche
         foreach ($cargospn as $key5) {
             
             $cpnv = $key5['schv'];
             $cpnm = $key5['schm'];
             $cpnd = $key5['schd'];
             
         }
         //cargo por noche para Hotel Value         
         if($cpnv == ""){            
             //cargo por noche para Hotel Value
             $cpnv = "0.00";
             //print($cpnv);            
         }else{            
             //cargo por noche para Hotel Value        
             $cpnv = $key5['schv'];
             //print($cpnv);            
         }
         
         //cargo por noche para Hotel Moderate   
          
         if($cpnm == ""){            
             //cargo por noche para Hotel Moderate   
             $cpnm = "0.00";
             //print($cpnm);            
         }else{           
             //cargo por noche para Hotel Moderate        
             $cpnm = $key5['schm'];
             //print($cpnm);            
         }
         
         //cargo por noche para Hotel Deluxe  
         if($cpnd == ""){            
             //cargo por noche para Hotel Deluxe     
             $cpnd = "0.00";
             //print($cpnm);            
         }else{            
             //cargo por noche para Hotel Deluxe         
             $cpnd = $key5['schd'];
             //print($cpnm);            
         }
         
         //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
         
         //Consulta para obtener los cargos por noche  de hoteles value y moderate SEGUNDO RANGO
         
         $sql7 = "SELECT schv2, schm2, schd2 FROM ratesvalid WHERE id ='$id_tour' AND fecha_schv2 <= '$fechaSalida' AND fecha_schm2 >= '$fechaSalida'";                  
 
         $rs7 = Doo::db()->query($sql7);
         $cargospn2 = $rs7->fetchAll();
         //cargos por noche
         foreach ($cargospn2 as $key7) {
             
             $cpnv2 = $key7['schv2'];
             $cpnm2 = $key7['schm2'];
             $cpnd2 = $key7['schd2'];
             
         }
         //cargo por noche para Hotel Value       
         if($cpnv2 == ""){            
             //cargo por noche para Hotel Value
             $cpnv2 = "0.00";
             //print($cpnv);            
         }else{            
             //cargo por noche para Hotel Value        
             $cpnv2 = $key7['schv2'];
             //print($cpnv);            
         }    
         
         //cargo por noche para Hotel Moderate   
         if($cpnm2 == ""){            
             //cargo por noche para Hotel Moderate   
             $cpnm2 = "0.00";
             //print($cpnm);            
         }else{            
             //cargo por noche para Hotel Moderate        
             $cpnm2 = $key7['schm2'];
             //print($cpnm);            
         }
         
         
         //cargo por noche para Hotel Deluxe   
         if($cpnd2 == ""){            
             //cargo por noche para Hotel Deluxe   
             $cpnd2 = "0.00";
             //print($cpnm);            
         }else{            
             //cargo por noche para Hotel Deluxe        
             $cpnd2 = $key7['schd2'];
             //print($cpnm);            
         }  
         
         
         //Consulta para obtener los cargos por noche  de hoteles value y moderate TERCER RANGO
         
         $sql8 = "SELECT schv3, schm3, schd3 FROM ratesvalid WHERE id ='$id_tour' AND fecha_schv3 <= '$fechaSalida' AND fecha_schm3 >= '$fechaSalida'";                  
 
         $rs8 = Doo::db()->query($sql8);
         $cargospn3 = $rs8->fetchAll();
         //cargos por noche
         foreach ($cargospn3 as $key8) { 
             
             $cpnv3 = $key8['schv3'];
             $cpnm3 = $key8['schm3'];
             $cpnd3 = $key8['schd3'];       
      
         }
         //cargo por noche para Hotel Value        
         if($cpnv3 == ""){            
             //cargo por noche para Hotel Value
             $cpnv3 = "0.00";
             //print($cpnv);            
         }else{           
             //cargo por noche para Hotel Value        
             $cpnv3 = $key8['schv3'];
             //print($cpnv);          
         }
         
         //cargo por noche para Hotel Moderate           
         if($cpnm3 == ""){            
             //cargo por noche para Hotel Moderate   
             $cpnm3 = "0.00";
             //print($cpnm);            
         }else{           
             //cargo por noche para Hotel Moderate        
             $cpnm3 = $key8['schm3'];
             //print($cpnm);
             
         }
         
         //cargo por noche para Hotel Deluxe           
         if($cpnd3 == ""){            
             //cargo por noche para Hotel Deluxe  
             $cpnd3 = "0.00";
             //print($cpnm);            
         }else{           
             //cargo por noche para Hotel Deluxe        
             $cpnd3 = $key8['schd3'];
             //print($cpnm);
             
         }
         
         
         //Consulta para obtener los cargos por noche  de hoteles value y moderate CUARTO RANGO
         
         $sql9 = "SELECT schv4, schm4, schd4 FROM ratesvalid WHERE id ='$id_tour' AND fecha_schv4 <= '$fechaSalida' AND fecha_schm4 >= '$fechaSalida'";                  
 
         $rs9 = Doo::db()->query($sql9);
         $cargospn4 = $rs9->fetchAll();
         //cargos por noche
         foreach ($cargospn4 as $key9) {
             
             $cpnv4 = $key9['schv4'];
             $cpnm4 = $key9['schm4'];
             $cpnd4 = $key9['schd4'];
         }
         //cargo por noche para Hotel Value     
         if($cpnv4 == ""){            
             //cargo por noche para Hotel Value
             $cpnv4 = "0.00";
             //print($cpnv);            
         }else{           
             //cargo por noche para Hotel Value        
             $cpnv4 = $key9['schv4'];
             //print($cpnv);
             
         }
         
         //cargo por noche para Hotel Moderate    
          
         if($cpnm4 == ""){            
             //cargo por noche para Hotel Moderate   
             $cpnm4 = "0.00";
             //print($cpnm);            
         }else{            
             //cargo por noche para Hotel Moderate        
             $cpnm4 = $key9['schm4'];
             //print($cpnm);            
         }
         
         //cargo por noche para Hotel Deluxe    
          
         if($cpnd4 == ""){            
             //cargo por noche para Hotel Deluxe  
             $cpnd4 = "0.00";
             //print($cpnm);            
         }else{            
             //cargo por noche para Hotel Deluxe        
             $cpnd4 = $key9['schd4'];
             //print($cpnm);            
         }
         
         //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        
 
         $priceRoom1 = $priceRoom2 = $priceRoom3 = $priceRoom4 = $priceBreakfast = 0;
         //print_r($room1.' '.$room2.' '.$room3.' '.$room4);
         $totaladult = $room1 + $room2 + $room3 + $room4;
 //        echo $room1;
 //        echo $room2;
 //        echo $room3;
 //        echo $room4;
 
         
         
         $room1_c = $room1c;
         
         $room2_c = $room2c;
 //        echo $room2_c;
         $room3_c = $room3c;
 //        echo $room3_c;
         $room4_c = $room4c;
 //        echo $room4_c;
 
         $totalpeques = $room1_c + $room2_c + $room3_c + $room4_c;
         //echo $totalpeques;
         $totalpersonas = $totaladult + $totalpeques;
         
         
         
 //        print($hotel);
 //        print($id_tour);
         //echo $room1;
         //$hotel id(hotel)
         
         
 
         $numNoches = $this->numDiasNochesFechaok($fechaSalida, $fechaRetorno);
         //echo $numNoches;
         //echo $numNoches['noches'];
         $numNoches['noches'] = $_SESSION['toursbooking']['noches'];
        $numero_noches = $numNoches['noches'];
         //print($numero_noches);
         
         
 //**********************************************************************************
                 
                 $sql0 = "SELECT categoria as CATE FROM hoteles WHERE id = '$hotel'";
 
                 $rs0 = Doo::db()->query($sql0);
                 $cat = $rs0->fetchAll();
                 foreach($cat as $ctg){
                     $categoria = $ctg['CATE'];
                     //print($categoria);
                 }
        //  echo '</pre>';
        //  print($sql0);
        //  echo '</pre>';
        //  die;
                 //print($categoria);
 
                 if($categoria == '2'){
 
                     $sql = "SELECT pax1v_21 AS P1V_21, pax2v_21 AS P2V_21, pax1v_32 AS P1V_32, pax2v_32 AS P2V_32, pax1v_43 AS P1V_43, pax2v_43 AS P2V_43, pax1v_54 AS P1V_54, pax2v_54 AS P2V_54, pax1v_65 AS P1V_65, pax2v_65 AS P2V_65, pax1v_76 AS P1V_76, pax2v_76 AS P2V_76, pax1v_87 AS P1V_87, pax2v_87 AS P2V_87, pax1v_98 AS P1V_98, pax2v_98 AS P2V_98  FROM comifijas WHERE id_hotel = '$hotel' AND id_ratesvalid = '$id_tour' ";
 
                     $rs = Doo::db()->query($sql);
                     $tarivalue = $rs->fetchAll();
 
                     foreach($tarivalue as $tarv){
 
                         $tarifa_p1v21 = $tarv['P1V_21'];
                         $tarifa_p2v21 = $tarv['P2V_21'];
                         $tarifa_p1v32 = $tarv['P1V_32'];
                         $tarifa_p2v32 = $tarv['P2V_32'];
                         $tarifa_p1v43 = $tarv['P1V_43'];
                         $tarifa_p2v43 = $tarv['P2V_43'];
                         $tarifa_p1v54 = $tarv['P1V_54'];
                         $tarifa_p2v54 = $tarv['P2V_54'];
                         $tarifa_p1v65 = $tarv['P1V_65'];
                         $tarifa_p2v65 = $tarv['P2V_65'];
                         $tarifa_p1v76 = $tarv['P1V_76'];
                         $tarifa_p2v76 = $tarv['P2V_76'];
                         $tarifa_p1v87 = $tarv['P1V_87'];
                         $tarifa_p2v87 = $tarv['P2V_87'];
                         $tarifa_p1v98 = $tarv['P1V_98'];
                         $tarifa_p2v98 = $tarv['P2V_98'];                        
                                                 
 
                     }
 
                 }
 
                 if($categoria == '3'){
 
                     $sql2 = "SELECT pax1m_21 AS P1M_21, pax2m_21 AS P2M_21, pax1m_32 AS P1M_32, pax2m_32 AS P2M_32, pax1m_43 AS P1M_43, pax2m_43 AS P2M_43, pax1m_54 AS P1M_54, pax2m_54 AS P2M_54, pax1m_65 AS P1M_65, pax2m_65 AS P2M_65, pax1m_76 AS P1M_76, pax2m_76 AS P2M_76, pax1m_87 AS P1M_87, pax2m_87 AS P2M_87, pax1m_98 AS P1M_98, pax2m_98 AS P2M_98   FROM comifijas WHERE id_hotel = '$hotel' AND id_ratesvalid = '$id_tour' ";
 
                     $rs2 = Doo::db()->query($sql2);
                     $tarimode = $rs2->fetchAll();
 
                     foreach($tarimode as $tarm){
 
                         $tarifa_p1m21 = $tarm['P1M_21'];
                         $tarifa_p2m21 = $tarm['P2M_21'];
                         $tarifa_p1m32 = $tarm['P1M_32'];
                         $tarifa_p2m32 = $tarm['P2M_32'];
                         $tarifa_p1m43 = $tarm['P1M_43'];
                         $tarifa_p2m43 = $tarm['P2M_43'];
                         $tarifa_p1m54 = $tarm['P1M_54'];
                         $tarifa_p2m54 = $tarm['P2M_54'];
                         $tarifa_p1m65 = $tarm['P1M_65'];
                         $tarifa_p2m65 = $tarm['P2M_65'];
                         $tarifa_p1m76 = $tarm['P1M_76'];
                         $tarifa_p2m76 = $tarm['P2M_76'];
                         $tarifa_p1m87 = $tarm['P1M_87'];
                         $tarifa_p2m87 = $tarm['P2M_87'];
                         $tarifa_p1m98 = $tarm['P1M_98'];
                         $tarifa_p2m98 = $tarm['P2M_98'];
 
                     }
 
                 }
                 
                 if($categoria == '4'){
 
                     $sql4 = "SELECT pax1d_21 AS P1D_21, pax2d_21 AS P2D_21, pax1d_32 AS P1D_32, pax2d_32 AS P2D_32, pax1d_43 AS P1D_43, pax2d_43 AS P2D_43, pax1d_54 AS P1D_54, pax2d_54 AS P2D_54, pax1d_65 AS P1D_65, pax2d_65 AS P2D_65, pax1d_76 AS P1D_76, pax2d_76 AS P2D_76, pax1d_87 AS P1D_87, pax2d_87 AS P2D_87, pax1d_98 AS P1D_98, pax2d_98 AS P2D_98  FROM comifijas WHERE id_hotel = '$hotel' AND id_ratesvalid = '$id_tour' ";
 
                     $rs4 = Doo::db()->query($sql4);
                     $tarideluxe = $rs4->fetchAll();
 
                     foreach($tarideluxe as $tard){
 
                         $tarifa_p1d21 = $tard['P1D_21'];
                         $tarifa_p2d21 = $tard['P2D_21'];
                         $tarifa_p1d32 = $tard['P1D_32'];
                         $tarifa_p2d32 = $tard['P2D_32'];
                         $tarifa_p1d43 = $tard['P1D_43'];
                         $tarifa_p2d43 = $tard['P2D_43'];
                         $tarifa_p1d54 = $tard['P1D_54'];
                         $tarifa_p2d54 = $tard['P2D_54'];
                         $tarifa_p1d65 = $tard['P1D_65'];
                         $tarifa_p2d65 = $tard['P2D_65'];
                         $tarifa_p1d76 = $tard['P1D_76'];
                         $tarifa_p2d76 = $tard['P2D_76'];
                         $tarifa_p1d87 = $tard['P1D_87'];
                         $tarifa_p2d87 = $tard['P2D_87'];
                         $tarifa_p1d98 = $tard['P1D_98'];
                         $tarifa_p2d98 = $tard['P2D_98'];
 
                     }
 
                 }

             $pax_room1 = $room1 + $room1_c;
             $pax_room2 = $room2 + $room2_c;
             $pax_room3 = $room3 + $room3_c;
             $pax_room4 = $room4 + $room4_c;
 
  

             //VALUE TOUR 21 //////////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 VALUE 
 
             if($pax_room1 > 0 && $categoria == 2 && $numero_noches == 1){         
 
                 $pax1_r1_21v = ($room1 / $room1);
                 $pax2_r1_21v = ($room1 - $pax1_r1_21v)+($room1_c);
                 $tarifa_pax1_r1_21v = $pax1_r1_21v * $tarifa_p1v21;
                 $tarifa_pax2_r1_21v = $pax2_r1_21v * $tarifa_p2v21;                
                 $tarifa_total1_r1_21v = $tarifa_pax1_r1_21v + $tarifa_pax2_r1_21v;
                 $tarifa_total_r1_21v = number_format($tarifa_total1_r1_21v, 2, '.', '');
 
             }
 
             //ROOM2 VALUE
 
             if($pax_room2 > 0 && $categoria == 2 && $numero_noches == 1){         
 
                 $pax1_r2_21v = ($room2 / $room2);
                 $pax2_r2_21v = ($room2 - $pax1_r2_21v)+($room2_c);
                 $tarifa_pax1_r2_21v = $pax1_r2_21v * $tarifa_p1v21;
                 $tarifa_pax2_r2_21v = $pax2_r2_21v * $tarifa_p2v21;
                 $tarifa_total1_r2_21v = $tarifa_pax1_r2_21v + $tarifa_pax2_r2_21v;
                 $tarifa_total_r2_21v = number_format($tarifa_total1_r2_21v, 2, '.', '');
 
 
             }
 
             //ROOM3 VALUE
 
             if($pax_room3 > 0 && $categoria == 2 && $numero_noches == 1){         
 
                 $pax1_r3_21v = ($room3 / $room3);
                 $pax2_r3_21v = ($room3 - $pax1_r3_21v)+($room3_c);
                 $tarifa_pax1_r3_21v = $pax1_r3_21v * $tarifa_p1v21;
                 $tarifa_pax2_r3_21v = $pax2_r3_21v * $tarifa_p2v21;
                 $tarifa_total1_r3_21v = $tarifa_pax1_r3_21v + $tarifa_pax2_r3_21v;
                 $tarifa_total_r3_21v = number_format($tarifa_total1_r3_21v, 2, '.', '');
 
 
             }
 
             //ROOM4  VALUE
 
             if($pax_room4 > 0 && $categoria == 2 && $numero_noches == 1){         
 
                 $pax1_r4_21v = ($room4 / $room4);
                 $pax2_r4_21v = ($room4 - $pax1_r4_21v)+($room4_c);
                 $tarifa_pax1_r4_21v = $pax1_r4_21v * $tarifa_p1v21;
                 $tarifa_pax2_r4_21v = $pax2_r4_21v * $tarifa_p2v21;
                 $tarifa_total1_r4_21v = $tarifa_pax1_r4_21v + $tarifa_pax2_r4_21v;
                 $tarifa_total_r4_21v = number_format($tarifa_total1_r4_21v, 2, '.', '');
 
 
             }
             
 
             //MODERATE TOURS 21/////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 MODERATE 
 
             if($pax_room1 > 0 && $categoria == 3 && $numero_noches == 1){         
 
                 $pax1_r1_21m = ($room1 / $room1);
                 $pax2_r1_21m = ($room1 - $pax1_r1_21m)+($room1_c);
                 $tarifa_pax1_r1_21m = $pax1_r1_21m * $tarifa_p1m21;
                 $tarifa_pax2_r1_21m = $pax2_r1_21m * $tarifa_p2m21;
                 $tarifa_total1_r1_21m = $tarifa_pax1_r1_21m + $tarifa_pax2_r1_21m;
                 $tarifa_total_r1_21m = number_format($tarifa_total1_r1_21m, 2, '.', '');
                 
                 //echo $tarifa_total_r1_21m;
 
             }
 
             //ROOM2 MODERATE
 
             if($pax_room2 > 0 && $categoria == 3 && $numero_noches == 1){         
 
                 $pax1_r2_21m = ($room2 / $room2);
                 $pax2_r2_21m = ($room2 - $pax1_r2_21m)+($room2_c);
                 $tarifa_pax1_r2_21m = $pax1_r2_21m * $tarifa_p1m21;
                 $tarifa_pax2_r2_21m = $pax2_r2_21m * $tarifa_p2m21;
                 $tarifa_total1_r2_21m = $tarifa_pax1_r2_21m + $tarifa_pax2_r2_21m;
                 $tarifa_total_r2_21m = number_format($tarifa_total1_r2_21m, 2, '.', '');
 
 
             }
 
             //ROOM3 MODERATE
 
             if($pax_room3 > 0 && $categoria == 3 && $numero_noches == 1){         
 
                 $pax1_r3_21m = ($room3 / $room3);
                 $pax2_r3_21m = ($room3 - $pax1_r3_21m)+($room3_c);
                 $tarifa_pax1_r3_21m = $pax1_r3_21m * $tarifa_p1m21;
                 $tarifa_pax2_r3_21m = $pax2_r3_21m * $tarifa_p2m21;
                 $tarifa_total1_r3_21m = $tarifa_pax1_r3_21m + $tarifa_pax2_r3_21m;
                 $tarifa_total_r3_21m = number_format($tarifa_total1_r3_21m, 2, '.', '');
 
             }
 
             //ROOM4  MODERATE
 
             if($pax_room4 > 0 && $categoria == 3 && $numero_noches == 1){         
 
                 $pax1_r4_21m = ($room4 / $room4);
                 $pax2_r4_21m = ($room4 - $pax1_r4_21m)+($room4_c);
                 $tarifa_pax1_r4_21m = $pax1_r4_21m * $tarifa_p1m21;
                 $tarifa_pax2_r4_21m = $pax2_r4_21m * $tarifa_p2m21;
                 $tarifa_total1_r4_21m = $tarifa_pax1_r4_21m + $tarifa_pax2_r4_21m;
                 $tarifa_total_r4_21m = number_format($tarifa_total1_r4_21m, 2, '.', '');
 
             }          
              
                 
         //*************************************************************** 
             
         
         
         //DELUXE TOURS 21/////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 DELUXE 
 
             if($pax_room1 > 0 && $categoria == 4 && $numero_noches == 1){         
 
                 $pax1_r1_21d = ($room1 / $room1);
                 $pax2_r1_21d = ($room1 - $pax1_r1_21d)+($room1_c);
                 $tarifa_pax1_r1_21d = $pax1_r1_21d * $tarifa_p1d21;
                 $tarifa_pax2_r1_21d = $pax2_r1_21d * $tarifa_p2d21;
                 $tarifa_total1_r1_21d = $tarifa_pax1_r1_21d + $tarifa_pax2_r1_21d;
                 $tarifa_total_r1_21d = number_format($tarifa_total1_r1_21d, 2, '.', '');
                 
                 //echo $tarifa_total_r1_21m;
 
             }
            //  echo '<pre>';
            //  print_r($tarifa_total_r1_21d);
            //  echo '</pre>';
            //  die;
             //ROOM2 DELUXE
 
             if($pax_room2 > 0 && $categoria == 4 && $numero_noches == 1){         
 
                 $pax1_r2_21d = ($room2 / $room2);
                 $pax2_r2_21d = ($room2 - $pax1_r2_21d)+($room2_c);
                 $tarifa_pax1_r2_21d = $pax1_r2_21d * $tarifa_p1d21;
                 $tarifa_pax2_r2_21d = $pax2_r2_21d * $tarifa_p2d21;
                 $tarifa_total1_r2_21d = $tarifa_pax1_r2_21d + $tarifa_pax2_r2_21d;
                 $tarifa_total_r2_21d = number_format($tarifa_total1_r2_21d, 2, '.', '');
 
 
             }
 
             //ROOM3 DELUXE
 
             if($pax_room3 > 0 && $categoria == 4 && $numero_noches == 1){         
 
                 $pax1_r3_21d = ($room3 / $room3);
                 $pax2_r3_21d = ($room3 - $pax1_r3_21d)+($room3_c);
                 $tarifa_pax1_r3_21d = $pax1_r3_21d * $tarifa_p1d21;
                 $tarifa_pax2_r3_21d = $pax2_r3_21d * $tarifa_p2d21;
                 $tarifa_total1_r3_21d = $tarifa_pax1_r3_21d + $tarifa_pax2_r3_21d;
                 $tarifa_total_r3_21d = number_format($tarifa_total1_r3_21d, 2, '.', '');
 
             }
 
             //ROOM4  DELUXE
 
             if($pax_room4 > 0 && $categoria == 4 && $numero_noches == 1){         
 
                 $pax1_r4_21d = ($room4 / $room4);
                 $pax2_r4_21d = ($room4 - $pax1_r4_21d)+($room4_c);
                 $tarifa_pax1_r4_21d = $pax1_r4_21d * $tarifa_p1d21;
                 $tarifa_pax2_r4_21d = $pax2_r4_21d * $tarifa_p2d21;
                 $tarifa_total1_r4_21d = $tarifa_pax1_r4_21d + $tarifa_pax2_r4_21d;
                 $tarifa_total_r4_21d = number_format($tarifa_total1_r4_21d, 2, '.', '');
 
             }          
              
                 
         //***************************************************************     
         //VALUE TOUR 32 //////////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 VALUE 
 
             if($pax_room1 > 0 && $categoria == 2 && $numero_noches == 2){         
 
                 $pax1_r1_32v = ($room1 / $room1);
                 $pax2_r1_32v = ($room1 - $pax1_r1_32v)+($room1_c);
                 $tarifa_pax1_r1_32v = $pax1_r1_32v * $tarifa_p1v32;
                 $tarifa_pax2_r1_32v = $pax2_r1_32v * $tarifa_p2v32;                
                 $tarifa_total1_r1_32v = $tarifa_pax1_r1_32v + $tarifa_pax2_r1_32v;
                 $tarifa_total_r1_32v = number_format($tarifa_total1_r1_32v, 2, '.', '');
                 
                 //echo $tarifa_total_r1_32v;
                 
 
             }
 
             //ROOM2 VALUE
 
             if($pax_room2 > 0 && $categoria == 2 && $numero_noches == 2){         
 
                 $pax1_r2_32v = ($room2 / $room2);
                 $pax2_r2_32v = ($room2 - $pax1_r2_32v)+($room2_c);
                 $tarifa_pax1_r2_32v = $pax1_r2_32v * $tarifa_p1v32;
                 $tarifa_pax2_r2_32v = $pax2_r2_32v * $tarifa_p2v32;
                 $tarifa_total1_r2_32v = $tarifa_pax1_r2_32v + $tarifa_pax2_r2_32v;
                 $tarifa_total_r2_32v = number_format($tarifa_total1_r2_32v, 2, '.', '');
 
 
             }
 
             //ROOM3 VALUE
 
             if($pax_room3 > 0 && $categoria == 2 && $numero_noches == 2){         
 
                 $pax1_r3_32v = ($room3 / $room3);
                 $pax2_r3_32v = ($room3 - $pax1_r3_32v)+($room3_c);
                 $tarifa_pax1_r3_32v = $pax1_r3_32v * $tarifa_p1v32;
                 $tarifa_pax2_r3_32v = $pax2_r3_32v * $tarifa_p2v32;
                 $tarifa_total1_r3_32v = $tarifa_pax1_r3_32v + $tarifa_pax2_r3_32v;
                 $tarifa_total_r3_32v = number_format($tarifa_total1_r3_32v, 2, '.', '');
 
 
             }
 
             //ROOM4  VALUE
 
             if($pax_room4 > 0 && $categoria == 2 && $numero_noches == 2){         
 
                 $pax1_r4_32v = ($room4 / $room4);
                 $pax2_r4_32v = ($room4 - $pax1_r4_32v)+($room4_c);
                 $tarifa_pax1_r4_32v = $pax1_r4_32v * $tarifa_p1v32;
                 $tarifa_pax2_r4_32v = $pax2_r4_32v * $tarifa_p2v32;
                 $tarifa_total1_r4_32v = $tarifa_pax1_r4_32v + $tarifa_pax2_r4_32v;
                 $tarifa_total_r4_32v = number_format($tarifa_total1_r4_32v, 2, '.', '');
 
 
             }
             
 
             //MODERATE TOURS 32/////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 MODERATE 
 
             if($pax_room1 > 0 && $categoria == 3 && $numero_noches == 2){         
 
                 $pax1_r1_32m = ($room1 / $room1);
                 $pax2_r1_32m = ($room1 - $pax1_r1_32m)+($room1_c);
                 $tarifa_pax1_r1_32m = $pax1_r1_32m * $tarifa_p1m32;
                 $tarifa_pax2_r1_32m = $pax2_r1_32m * $tarifa_p2m32;
                 $tarifa_total1_r1_32m = $tarifa_pax1_r1_32m + $tarifa_pax2_r1_32m;
                 $tarifa_total_r1_32m = number_format($tarifa_total1_r1_32m, 2, '.', '');
                 
                 //echo $tarifa_total_r1_32m;
 
             }
 
             //ROOM2 MODERATE
 
             if($pax_room2 > 0 && $categoria == 3 && $numero_noches == 2){         
 
                 $pax1_r2_32m = ($room2 / $room2);
                 $pax2_r2_32m = ($room2 - $pax1_r2_32m)+($room2_c);
                 $tarifa_pax1_r2_32m = $pax1_r2_32m * $tarifa_p1m32;
                 $tarifa_pax2_r2_32m = $pax2_r2_32m * $tarifa_p2m32;
                 $tarifa_total1_r2_32m = $tarifa_pax1_r2_32m + $tarifa_pax2_r2_32m;
                 $tarifa_total_r2_32m = number_format($tarifa_total1_r2_32m, 2, '.', '');
 
 
             }
 
             //ROOM3 MODERATE
 
             if($pax_room3 > 0 && $categoria == 3 && $numero_noches == 2){         
 
                 $pax1_r3_32m = ($room3 / $room3);
                 $pax2_r3_32m = ($room3 - $pax1_r3_32m)+($room3_c);
                 $tarifa_pax1_r3_32m = $pax1_r3_32m * $tarifa_p1m32;
                 $tarifa_pax2_r3_32m = $pax2_r3_32m * $tarifa_p2m32;
                 $tarifa_total1_r3_32m = $tarifa_pax1_r3_32m + $tarifa_pax2_r3_32m;
                 $tarifa_total_r3_32m = number_format($tarifa_total1_r3_32m, 2, '.', '');
 
             }
 
             //ROOM4  MODERATE
 
             if($pax_room4 > 0 && $categoria == 3 && $numero_noches == 2){         
 
                 $pax1_r4_32m = ($room4 / $room4);
                 $pax2_r4_32m = ($room4 - $pax1_r4_32m)+($room4_c);
                 $tarifa_pax1_r4_32m = $pax1_r4_32m * $tarifa_p1m32;
                 $tarifa_pax2_r4_32m = $pax2_r4_32m * $tarifa_p2m32;
                 $tarifa_total1_r4_32m = $tarifa_pax1_r4_32m + $tarifa_pax2_r4_32m;
                 $tarifa_total_r4_32m = number_format($tarifa_total1_r4_32m, 2, '.', '');
 
             }          
              
                 
         //*************************************************************** 
             
             
             //DELUXE TOURS 32/////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 DELUXE 
 
             if($pax_room1 > 0 && $categoria == 4 && $numero_noches == 2){         
 
                 $pax1_r1_32d = ($room1 / $room1);
                 $pax2_r1_32d = ($room1 - $pax1_r1_32d)+($room1_c);
                 $tarifa_pax1_r1_32d = $pax1_r1_32d * $tarifa_p1d32;
                 $tarifa_pax2_r1_32d = $pax2_r1_32d * $tarifa_p2d32;
                 $tarifa_total1_r1_32d = $tarifa_pax1_r1_32d + $tarifa_pax2_r1_32d;
                 $tarifa_total_r1_32d = number_format($tarifa_total1_r1_32d, 2, '.', '');
                 
                 //echo $tarifa_total_r1_32m;
 
             }
 
             //ROOM2 DELUXE
 
             if($pax_room2 > 0 && $categoria == 4 && $numero_noches == 2){         
 
                 $pax1_r2_32d = ($room2 / $room2);
                 $pax2_r2_32d = ($room2 - $pax1_r2_32d)+($room2_c);
                 $tarifa_pax1_r2_32d = $pax1_r2_32d * $tarifa_p1d32;
                 $tarifa_pax2_r2_32d = $pax2_r2_32d * $tarifa_p2d32;
                 $tarifa_total1_r2_32d = $tarifa_pax1_r2_32d + $tarifa_pax2_r2_32d;
                 $tarifa_total_r2_32d = number_format($tarifa_total1_r2_32d, 2, '.', '');
 
 
             }
 
             //ROOM3 DELUXE
 
             if($pax_room3 > 0 && $categoria == 4 && $numero_noches == 2){         
 
                 $pax1_r3_32d = ($room3 / $room3);
                 $pax2_r3_32d = ($room3 - $pax1_r3_32d)+($room3_c);
                 $tarifa_pax1_r3_32d = $pax1_r3_32d * $tarifa_p1d32;
                 $tarifa_pax2_r3_32d = $pax2_r3_32d * $tarifa_p2d32;
                 $tarifa_total1_r3_32d = $tarifa_pax1_r3_32d + $tarifa_pax2_r3_32d;
                 $tarifa_total_r3_32d = number_format($tarifa_total1_r3_32d, 2, '.', '');
 
             }
 
             //ROOM4  DELUXE
 
             if($pax_room4 > 0 && $categoria == 4 && $numero_noches == 2){         
 
                 $pax1_r4_32d = ($room4 / $room4);
                 $pax2_r4_32d = ($room4 - $pax1_r4_32d)+($room4_c);
                 $tarifa_pax1_r4_32d = $pax1_r4_32d * $tarifa_p1d32;
                 $tarifa_pax2_r4_32d = $pax2_r4_32d * $tarifa_p2d32;
                 $tarifa_total1_r4_32d = $tarifa_pax1_r4_32d + $tarifa_pax2_r4_32d;
                 $tarifa_total_r4_32d = number_format($tarifa_total1_r4_32d, 2, '.', '');
 
             }          
              
                 
         //*************************************************************** 
             
             //VALUE TOUR 43 //////////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 VALUE 
 
             if($pax_room1 > 0 && $categoria == 2 && $numero_noches == 3){         
 
                 $pax1_r1_43v = ($room1 / $room1);
                 $pax2_r1_43v = ($room1 - $pax1_r1_43v)+($room1_c);
                 $tarifa_pax1_r1_43v = $pax1_r1_43v * $tarifa_p1v43;
                 $tarifa_pax2_r1_43v = $pax2_r1_43v * $tarifa_p2v43;                
                 $tarifa_total1_r1_43v = $tarifa_pax1_r1_43v + $tarifa_pax2_r1_43v;
                 $tarifa_total_r1_43v = number_format($tarifa_total1_r1_43v, 2, '.', '');
                 //echo $tarifa_total_r1_43v;
 
             }
 
             //ROOM2 VALUE
 
             if($pax_room2 > 0 && $categoria == 2 && $numero_noches == 3){         
 
                 $pax1_r2_43v = ($room2 / $room2);
                 $pax2_r2_43v = ($room2 - $pax1_r2_43v)+($room2_c);
                 $tarifa_pax1_r2_43v = $pax1_r2_43v * $tarifa_p1v43;
                 $tarifa_pax2_r2_43v = $pax2_r2_43v * $tarifa_p2v43;
                 $tarifa_total1_r2_43v = $tarifa_pax1_r2_43v + $tarifa_pax2_r2_43v;
                 $tarifa_total_r2_43v = number_format($tarifa_total1_r2_43v, 2, '.', '');
 
 
             }
 
             //ROOM3 VALUE
 
             if($pax_room3 > 0 && $categoria == 2 && $numero_noches == 3){         
 
                 $pax1_r3_43v = ($room3 / $room3);
                 $pax2_r3_43v = ($room3 - $pax1_r3_43v)+($room3_c);
                 $tarifa_pax1_r3_43v = $pax1_r3_43v * $tarifa_p1v43;
                 $tarifa_pax2_r3_43v = $pax2_r3_43v * $tarifa_p2v43;
                 $tarifa_total1_r3_43v = $tarifa_pax1_r3_43v + $tarifa_pax2_r3_43v;
                 $tarifa_total_r3_43v = number_format($tarifa_total1_r3_43v, 2, '.', '');
 
 
             }
 
             //ROOM4  VALUE
 
             if($pax_room4 > 0 && $categoria == 2 && $numero_noches == 3){         
 
                 $pax1_r4_43v = ($room4 / $room4);
                 $pax2_r4_43v = ($room4 - $pax1_r4_43v)+($room4_c);
                 $tarifa_pax1_r4_43v = $pax1_r4_43v * $tarifa_p1v43;
                 $tarifa_pax2_r4_43v = $pax2_r4_43v * $tarifa_p2v43;
                 $tarifa_total1_r4_43v = $tarifa_pax1_r4_43v + $tarifa_pax2_r4_43v;
                 $tarifa_total_r4_43v = number_format($tarifa_total1_r4_43v, 2, '.', '');
 
 
             }
             
 
             //MODERATE TOURS 43/////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 MODERATE 
 
             if($pax_room1 > 0 && $categoria == 3 && $numero_noches == 3){         
 
                 $pax1_r1_43m = ($room1 / $room1);
                 $pax2_r1_43m = ($room1 - $pax1_r1_43m)+($room1_c);
                 $tarifa_pax1_r1_43m = $pax1_r1_43m * $tarifa_p1m43;
                 $tarifa_pax2_r1_43m = $pax2_r1_43m * $tarifa_p2m43;
                 $tarifa_total1_r1_43m = $tarifa_pax1_r1_43m + $tarifa_pax2_r1_43m;
                 $tarifa_total_r1_43m = number_format($tarifa_total1_r1_43m, 2, '.', '');
                 
                 //echo $tarifa_total_r1_43m;
 
             }
 
             //ROOM2 MODERATE
 
             if($pax_room2 > 0 && $categoria == 3 && $numero_noches == 3){         
 
                 $pax1_r2_43m = ($room2 / $room2);
                 $pax2_r2_43m = ($room2 - $pax1_r2_43m)+($room2_c);
                 $tarifa_pax1_r2_43m = $pax1_r2_43m * $tarifa_p1m43;
                 $tarifa_pax2_r2_43m = $pax2_r2_43m * $tarifa_p2m43;
                 $tarifa_total1_r2_43m = $tarifa_pax1_r2_43m + $tarifa_pax2_r2_43m;
                 $tarifa_total_r2_43m = number_format($tarifa_total1_r2_43m, 2, '.', '');
 
 
             }
 
             //ROOM3 MODERATE
 
             if($pax_room3 > 0 && $categoria == 3 && $numero_noches == 3){         
 
                 $pax1_r3_43m = ($room3 / $room3);
                 $pax2_r3_43m = ($room3 - $pax1_r3_43m)+($room3_c);
                 $tarifa_pax1_r3_43m = $pax1_r3_43m * $tarifa_p1m43;
                 $tarifa_pax2_r3_43m = $pax2_r3_43m * $tarifa_p2m43;
                 $tarifa_total1_r3_43m = $tarifa_pax1_r3_43m + $tarifa_pax2_r3_43m;
                 $tarifa_total_r3_43m = number_format($tarifa_total1_r3_43m, 2, '.', '');
 
             }
 
             //ROOM4  MODERATE
 
             if($pax_room4 > 0 && $categoria == 3 && $numero_noches == 3){         
 
                 $pax1_r4_43m = ($room4 / $room4);
                 $pax2_r4_43m = ($room4 - $pax1_r4_43m)+($room4_c);
                 $tarifa_pax1_r4_43m = $pax1_r4_43m * $tarifa_p1m43;
                 $tarifa_pax2_r4_43m = $pax2_r4_43m * $tarifa_p2m43;
                 $tarifa_total1_r4_43m = $tarifa_pax1_r4_43m + $tarifa_pax2_r4_43m;
                 $tarifa_total_r4_43m = number_format($tarifa_total1_r4_43m, 2, '.', '');
 
             }          
              
                 
         //*************************************************************** 
             
             
             //DELUXE TOURS 43/////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 DELUXE 
 
             if($pax_room1 > 0 && $categoria == 4 && $numero_noches == 3){         
 
                 $pax1_r1_43d = ($room1 / $room1);
                 $pax2_r1_43d = ($room1 - $pax1_r1_43d)+($room1_c);
                 $tarifa_pax1_r1_43d = $pax1_r1_43d * $tarifa_p1d43;
                 $tarifa_pax2_r1_43d = $pax2_r1_43d * $tarifa_p2d43;
                 $tarifa_total1_r1_43d = $tarifa_pax1_r1_43d + $tarifa_pax2_r1_43d;
                 $tarifa_total_r1_43d = number_format($tarifa_total1_r1_43d, 2, '.', '');
                 
                 //echo $tarifa_total_r1_43d;
 
             }
 
             //ROOM2 DELUXE
 
             if($pax_room2 > 0 && $categoria == 4 && $numero_noches == 3){         
 
                 $pax1_r2_43d = ($room2 / $room2);
                 $pax2_r2_43d = ($room2 - $pax1_r2_43d)+($room2_c);
                 $tarifa_pax1_r2_43d = $pax1_r2_43d * $tarifa_p1d43;
                 $tarifa_pax2_r2_43d = $pax2_r2_43d * $tarifa_p2d43;
                 $tarifa_total1_r2_43d = $tarifa_pax1_r2_43d + $tarifa_pax2_r2_43d;
                 $tarifa_total_r2_43d = number_format($tarifa_total1_r2_43d, 2, '.', '');
 
 
             }
 
             //ROOM3 DELUXE
 
             if($pax_room3 > 0 && $categoria == 4 && $numero_noches == 3){         
 
                 $pax1_r3_43d = ($room3 / $room3);
                 $pax2_r3_43d = ($room3 - $pax1_r3_43d)+($room3_c);
                 $tarifa_pax1_r3_43d = $pax1_r3_43d * $tarifa_p1d43;
                 $tarifa_pax2_r3_43d = $pax2_r3_43d * $tarifa_p2d43;
                 $tarifa_total1_r3_43d = $tarifa_pax1_r3_43d + $tarifa_pax2_r3_43d;
                 $tarifa_total_r3_43d = number_format($tarifa_total1_r3_43d, 2, '.', '');
 
             }
 
             //ROOM4  DELUXE
 
             if($pax_room4 > 0 && $categoria == 4 && $numero_noches == 3){         
 
                 $pax1_r4_43d = ($room4 / $room4);
                 $pax2_r4_43d = ($room4 - $pax1_r4_43d)+($room4_c);
                 $tarifa_pax1_r4_43d = $pax1_r4_43d * $tarifa_p1d43;
                 $tarifa_pax2_r4_43d = $pax2_r4_43d * $tarifa_p2d43;
                 $tarifa_total1_r4_43d = $tarifa_pax1_r4_43d + $tarifa_pax2_r4_43d;
                 $tarifa_total_r4_43d = number_format($tarifa_total1_r4_43d, 2, '.', '');
 
             }          
              
                 
         //*************************************************************** 
             
             //VALUE TOUR 54 //////////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 VALUE 
 
             if($pax_room1 > 0 && $categoria == 2 && $numero_noches == 4){         
 
                 $pax1_r1_54v = ($room1 / $room1);
                 $pax2_r1_54v = ($room1 - $pax1_r1_54v)+($room1_c);
                 $tarifa_pax1_r1_54v = $pax1_r1_54v * $tarifa_p1v54;
                 $tarifa_pax2_r1_54v = $pax2_r1_54v * $tarifa_p2v54;                
                 $tarifa_total1_r1_54v = $tarifa_pax1_r1_54v + $tarifa_pax2_r1_54v;
                 $tarifa_total_r1_54v = number_format($tarifa_total1_r1_54v, 2, '.', '');
 
             }
 
             //ROOM2 VALUE
 
             if($pax_room2 > 0 && $categoria == 2 && $numero_noches == 4){         
 
                 $pax1_r2_54v = ($room2 / $room2);
                 $pax2_r2_54v = ($room2 - $pax1_r2_54v)+($room2_c);
                 $tarifa_pax1_r2_54v = $pax1_r2_54v * $tarifa_p1v54;
                 $tarifa_pax2_r2_54v = $pax2_r2_54v * $tarifa_p2v54;
                 $tarifa_total1_r2_54v = $tarifa_pax1_r2_54v + $tarifa_pax2_r2_54v;
                 $tarifa_total_r2_54v = number_format($tarifa_total1_r2_54v, 2, '.', '');
 
 
             }
 
             //ROOM3 VALUE
 
             if($pax_room3 > 0 && $categoria == 2 && $numero_noches == 4){         
 
                 $pax1_r3_54v = ($room3 / $room3);
                 $pax2_r3_54v = ($room3 - $pax1_r3_54v)+($room3_c);
                 $tarifa_pax1_r3_54v = $pax1_r3_54v * $tarifa_p1v54;
                 $tarifa_pax2_r3_54v = $pax2_r3_54v * $tarifa_p2v54;
                 $tarifa_total1_r3_54v = $tarifa_pax1_r3_54v + $tarifa_pax2_r3_54v;
                 $tarifa_total_r3_54v = number_format($tarifa_total1_r3_54v, 2, '.', '');
 
 
             }
 
             //ROOM4  VALUE
 
             if($pax_room4 > 0 && $categoria == 2 && $numero_noches == 4){         
 
                 $pax1_r4_54v = ($room4 / $room4);
                 $pax2_r4_54v = ($room4 - $pax1_r4_54v)+($room4_c);
                 $tarifa_pax1_r4_54v = $pax1_r4_54v * $tarifa_p1v54;
                 $tarifa_pax2_r4_54v = $pax2_r4_54v * $tarifa_p2v54;
                 $tarifa_total1_r4_54v = $tarifa_pax1_r4_54v + $tarifa_pax2_r4_54v;
                 $tarifa_total_r4_54v = number_format($tarifa_total1_r4_54v, 2, '.', '');
 
 
             }
             
 
             //MODERATE TOURS 54/////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 MODERATE 
 
             if($pax_room1 > 0 && $categoria == 3 && $numero_noches == 4){         
 
                 $pax1_r1_54m = ($room1 / $room1);
                 $pax2_r1_54m = ($room1 - $pax1_r1_54m)+($room1_c);
                 $tarifa_pax1_r1_54m = $pax1_r1_54m * $tarifa_p1m54;
                 $tarifa_pax2_r1_54m = $pax2_r1_54m * $tarifa_p2m54;
                 $tarifa_total1_r1_54m = $tarifa_pax1_r1_54m + $tarifa_pax2_r1_54m;
                 $tarifa_total_r1_54m = number_format($tarifa_total1_r1_54m, 2, '.', '');
                 
                 //echo $tarifa_total_r1_54m;
 
             }
 
             //ROOM2 MODERATE
 
             if($pax_room2 > 0 && $categoria == 3 && $numero_noches == 4){         
 
                 $pax1_r2_54m = ($room2 / $room2);
                 $pax2_r2_54m = ($room2 - $pax1_r2_54m)+($room2_c);
                 $tarifa_pax1_r2_54m = $pax1_r2_54m * $tarifa_p1m54;
                 $tarifa_pax2_r2_54m = $pax2_r2_54m * $tarifa_p2m54;
                 $tarifa_total1_r2_54m = $tarifa_pax1_r2_54m + $tarifa_pax2_r2_54m;
                 $tarifa_total_r2_54m = number_format($tarifa_total1_r2_54m, 2, '.', '');
 
 
             }
 
             //ROOM3 MODERATE
 
             if($pax_room3 > 0 && $categoria == 3 && $numero_noches == 4){         
 
                 $pax1_r3_54m = ($room3 / $room3);
                 $pax2_r3_54m = ($room3 - $pax1_r3_54m)+($room3_c);
                 $tarifa_pax1_r3_54m = $pax1_r3_54m * $tarifa_p1m54;
                 $tarifa_pax2_r3_54m = $pax2_r3_54m * $tarifa_p2m54;
                 $tarifa_total1_r3_54m = $tarifa_pax1_r3_54m + $tarifa_pax2_r3_54m;
                 $tarifa_total_r3_54m = number_format($tarifa_total1_r3_54m, 2, '.', '');
 
             }
 
             //ROOM4  MODERATE
 
             if($pax_room4 > 0 && $categoria == 3 && $numero_noches == 4){         
 
                 $pax1_r4_54m = ($room4 / $room4);
                 $pax2_r4_54m = ($room4 - $pax1_r4_54m)+($room4_c);
                 $tarifa_pax1_r4_54m = $pax1_r4_54m * $tarifa_p1m54;
                 $tarifa_pax2_r4_54m = $pax2_r4_54m * $tarifa_p2m54;
                 $tarifa_total1_r4_54m = $tarifa_pax1_r4_54m + $tarifa_pax2_r4_54m;
                 $tarifa_total_r4_54m = number_format($tarifa_total1_r4_54m, 2, '.', '');
 
             }          
              
                 
         //*************************************************************** 
             
             //DELUXE TOURS 54/////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 DELUXE 
 
             if($pax_room1 > 0 && $categoria == 4 && $numero_noches == 4){         
 
                 $pax1_r1_54d = ($room1 / $room1);
                 $pax2_r1_54d = ($room1 - $pax1_r1_54d)+($room1_c);
                 $tarifa_pax1_r1_54d = $pax1_r1_54d * $tarifa_p1d54;
                 $tarifa_pax2_r1_54d = $pax2_r1_54d * $tarifa_p2d54;
                 $tarifa_total1_r1_54d = $tarifa_pax1_r1_54d + $tarifa_pax2_r1_54d;
                 $tarifa_total_r1_54d = number_format($tarifa_total1_r1_54d, 2, '.', '');
                 
                 //echo $tarifa_total_r1_54m;
 
             }
 
             //ROOM2 DELUXE
 
             if($pax_room2 > 0 && $categoria == 4 && $numero_noches == 4){         
 
                 $pax1_r2_54d = ($room2 / $room2);
                 $pax2_r2_54d = ($room2 - $pax1_r2_54d)+($room2_c);
                 $tarifa_pax1_r2_54d = $pax1_r2_54d * $tarifa_p1d54;
                 $tarifa_pax2_r2_54d = $pax2_r2_54d * $tarifa_p2d54;
                 $tarifa_total1_r2_54d = $tarifa_pax1_r2_54d + $tarifa_pax2_r2_54d;
                 $tarifa_total_r2_54d = number_format($tarifa_total1_r2_54d, 2, '.', '');
 
 
             }
 
             //ROOM3 DELUXE
 
             if($pax_room3 > 0 && $categoria == 4 && $numero_noches == 4){         
 
                 $pax1_r3_54d = ($room3 / $room3);
                 $pax2_r3_54d = ($room3 - $pax1_r3_54d)+($room3_c);
                 $tarifa_pax1_r3_54d = $pax1_r3_54d * $tarifa_p1d54;
                 $tarifa_pax2_r3_54d = $pax2_r3_54d * $tarifa_p2d54;
                 $tarifa_total1_r3_54d = $tarifa_pax1_r3_54d + $tarifa_pax2_r3_54d;
                 $tarifa_total_r3_54d = number_format($tarifa_total1_r3_54d, 2, '.', '');
 
             }
 
             //ROOM4  DELUXE
 
             if($pax_room4 > 0 && $categoria == 4 && $numero_noches == 4){         
 
                 $pax1_r4_54d = ($room4 / $room4);
                 $pax2_r4_54d = ($room4 - $pax1_r4_54d)+($room4_c);
                 $tarifa_pax1_r4_54d = $pax1_r4_54d * $tarifa_p1d54;
                 $tarifa_pax2_r4_54d = $pax2_r4_54d * $tarifa_p2d54;
                 $tarifa_total1_r4_54d = $tarifa_pax1_r4_54d + $tarifa_pax2_r4_54d;
                 $tarifa_total_r4_54d = number_format($tarifa_total1_r4_54d, 2, '.', '');
 
             }          
              
                 
         //*************************************************************** 
         
             //VALUE TOUR 65 //////////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 VALUE 
 
             if($pax_room1 > 0 && $categoria == 2 && $numero_noches == 5){         
 
                 $pax1_r1_65v = ($room1 / $room1);
                 $pax2_r1_65v = ($room1 - $pax1_r1_65v)+($room1_c);
                 $tarifa_pax1_r1_65v = $pax1_r1_65v * $tarifa_p1v65;
                 $tarifa_pax2_r1_65v = $pax2_r1_65v * $tarifa_p2v65;                
                 $tarifa_total1_r1_65v = $tarifa_pax1_r1_65v + $tarifa_pax2_r1_65v;
                 $tarifa_total_r1_65v = number_format($tarifa_total1_r1_65v, 2, '.', '');
 
             }
 
             //ROOM2 VALUE
 
             if($pax_room2 > 0 && $categoria == 2 && $numero_noches == 5){         
 
                 $pax1_r2_65v = ($room2 / $room2);
                 $pax2_r2_65v = ($room2 - $pax1_r2_65v)+($room2_c);
                 $tarifa_pax1_r2_65v = $pax1_r2_65v * $tarifa_p1v65;
                 $tarifa_pax2_r2_65v = $pax2_r2_65v * $tarifa_p2v65;
                 $tarifa_total1_r2_65v = $tarifa_pax1_r2_65v + $tarifa_pax2_r2_65v;
                 $tarifa_total_r2_65v = number_format($tarifa_total1_r2_65v, 2, '.', '');
 
 
             }
 
             //ROOM3 VALUE
 
             if($pax_room3 > 0 && $categoria == 2 && $numero_noches == 5){         
 
                 $pax1_r3_65v = ($room3 / $room3);
                 $pax2_r3_65v = ($room3 - $pax1_r3_65v)+($room3_c);
                 $tarifa_pax1_r3_65v = $pax1_r3_65v * $tarifa_p1v65;
                 $tarifa_pax2_r3_65v = $pax2_r3_65v * $tarifa_p2v65;
                 $tarifa_total1_r3_65v = $tarifa_pax1_r3_65v + $tarifa_pax2_r3_65v;
                 $tarifa_total_r3_65v = number_format($tarifa_total1_r3_65v, 2, '.', '');
 
 
             }
 
             //ROOM4  VALUE
 
             if($pax_room4 > 0 && $categoria == 2 && $numero_noches == 5){         
 
                 $pax1_r4_65v = ($room4 / $room4);
                 $pax2_r4_65v = ($room4 - $pax1_r4_65v)+($room4_c);
                 $tarifa_pax1_r4_65v = $pax1_r4_65v * $tarifa_p1v65;
                 $tarifa_pax2_r4_65v = $pax2_r4_65v * $tarifa_p2v65;
                 $tarifa_total1_r4_65v = $tarifa_pax1_r4_65v + $tarifa_pax2_r4_65v;
                 $tarifa_total_r4_65v = number_format($tarifa_total1_r4_65v, 2, '.', '');
 
 
             }
             
 
             //MODERATE TOURS 65/////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 MODERATE 
 
             if($pax_room1 > 0 && $categoria == 3 && $numero_noches == 5){         
 
                 $pax1_r1_65m = ($room1 / $room1);
                 $pax2_r1_65m = ($room1 - $pax1_r1_65m)+($room1_c);
                 $tarifa_pax1_r1_65m = $pax1_r1_65m * $tarifa_p1m65;
                 $tarifa_pax2_r1_65m = $pax2_r1_65m * $tarifa_p2m65;
                 $tarifa_total1_r1_65m = $tarifa_pax1_r1_65m + $tarifa_pax2_r1_65m;
                 $tarifa_total_r1_65m = number_format($tarifa_total1_r1_65m, 2, '.', '');
                 
                 //echo $tarifa_total_r1_65m;
 
             }
 
             //ROOM2 MODERATE
 
             if($pax_room2 > 0 && $categoria == 3 && $numero_noches == 5){         
 
                 $pax1_r2_65m = ($room2 / $room2);
                 $pax2_r2_65m = ($room2 - $pax1_r2_65m)+($room2_c);
                 $tarifa_pax1_r2_65m = $pax1_r2_65m * $tarifa_p1m65;
                 $tarifa_pax2_r2_65m = $pax2_r2_65m * $tarifa_p2m65;
                 $tarifa_total1_r2_65m = $tarifa_pax1_r2_65m + $tarifa_pax2_r2_65m;
                 $tarifa_total_r2_65m = number_format($tarifa_total1_r2_65m, 2, '.', '');
 
 
             }
 
             //ROOM3 MODERATE
 
             if($pax_room3 > 0 && $categoria == 3 && $numero_noches == 5){         
 
                 $pax1_r3_65m = ($room3 / $room3);
                 $pax2_r3_65m = ($room3 - $pax1_r3_65m)+($room3_c);
                 $tarifa_pax1_r3_65m = $pax1_r3_65m * $tarifa_p1m65;
                 $tarifa_pax2_r3_65m = $pax2_r3_65m * $tarifa_p2m65;
                 $tarifa_total1_r3_65m = $tarifa_pax1_r3_65m + $tarifa_pax2_r3_65m;
                 $tarifa_total_r3_65m = number_format($tarifa_total1_r3_65m, 2, '.', '');
 
             }
 
             //ROOM4  MODERATE
 
             if($pax_room4 > 0 && $categoria == 3 && $numero_noches == 5){         
 
                 $pax1_r4_65m = ($room4 / $room4);
                 $pax2_r4_65m = ($room4 - $pax1_r4_65m)+($room4_c);
                 $tarifa_pax1_r4_65m = $pax1_r4_65m * $tarifa_p1m65;
                 $tarifa_pax2_r4_65m = $pax2_r4_65m * $tarifa_p2m65;
                 $tarifa_total1_r4_65m = $tarifa_pax1_r4_65m + $tarifa_pax2_r4_65m;
                 $tarifa_total_r4_65m = number_format($tarifa_total1_r4_65m, 2, '.', '');
 
             }          
              
                 
         //*************************************************************** 
             
             //DELUXE TOURS 65/////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 DELUXE
 
             if($pax_room1 > 0 && $categoria == 4 && $numero_noches == 5){         
 
                 $pax1_r1_65d = ($room1 / $room1);
                 $pax2_r1_65d = ($room1 - $pax1_r1_65d)+($room1_c);
                 $tarifa_pax1_r1_65d = $pax1_r1_65d * $tarifa_p1d65;
                 $tarifa_pax2_r1_65d = $pax2_r1_65d * $tarifa_p2d65;
                 $tarifa_total1_r1_65d = $tarifa_pax1_r1_65d + $tarifa_pax2_r1_65d;
                 $tarifa_total_r1_65d = number_format($tarifa_total1_r1_65d, 2, '.', '');
                 
                 //echo $tarifa_total_r1_65m;
 
             }
 
             //ROOM2 DELUXE
 
             if($pax_room2 > 0 && $categoria == 4 && $numero_noches == 5){         
 
                 $pax1_r2_65d = ($room2 / $room2);
                 $pax2_r2_65d = ($room2 - $pax1_r2_65d)+($room2_c);
                 $tarifa_pax1_r2_65d = $pax1_r2_65d * $tarifa_p1d65;
                 $tarifa_pax2_r2_65d = $pax2_r2_65d * $tarifa_p2d65;
                 $tarifa_total1_r2_65d = $tarifa_pax1_r2_65d + $tarifa_pax2_r2_65d;
                 $tarifa_total_r2_65d = number_format($tarifa_total1_r2_65d, 2, '.', '');
 
 
             }
 
             //ROOM3 DELUXE
 
             if($pax_room3 > 0 && $categoria == 4 && $numero_noches == 5){         
 
                 $pax1_r3_65d = ($room3 / $room3);
                 $pax2_r3_65d = ($room3 - $pax1_r3_65d)+($room3_c);
                 $tarifa_pax1_r3_65d = $pax1_r3_65d * $tarifa_p1d65;
                 $tarifa_pax2_r3_65d = $pax2_r3_65d * $tarifa_p2d65;
                 $tarifa_total1_r3_65d = $tarifa_pax1_r3_65d + $tarifa_pax2_r3_65d;
                 $tarifa_total_r3_65d = number_format($tarifa_total1_r3_65d, 2, '.', '');
 
             }
 
             //ROOM4  DELUXE
 
             if($pax_room4 > 0 && $categoria == 4 && $numero_noches == 5){         
 
                 $pax1_r4_65d = ($room4 / $room4);
                 $pax2_r4_65d = ($room4 - $pax1_r4_65d)+($room4_c);
                 $tarifa_pax1_r4_65d = $pax1_r4_65d * $tarifa_p1d65;
                 $tarifa_pax2_r4_65d = $pax2_r4_65d * $tarifa_p2d65;
                 $tarifa_total1_r4_65d = $tarifa_pax1_r4_65d + $tarifa_pax2_r4_65d;
                 $tarifa_total_r4_65d = number_format($tarifa_total1_r4_65d, 2, '.', '');
 
             }          
              
                 
         //*************************************************************** 
            
             //VALUE TOUR 76 //////////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 VALUE 
 
             if($pax_room1 > 0 && $categoria == 2 && $numero_noches == 6){         
 
                 $pax1_r1_76v = ($room1 / $room1);
                 $pax2_r1_76v = ($room1 - $pax1_r1_76v)+($room1_c);
                 $tarifa_pax1_r1_76v = $pax1_r1_76v * $tarifa_p1v76;
                 $tarifa_pax2_r1_76v = $pax2_r1_76v * $tarifa_p2v76;                
                 $tarifa_total1_r1_76v = $tarifa_pax1_r1_76v + $tarifa_pax2_r1_76v;
                 $tarifa_total_r1_76v = number_format($tarifa_total1_r1_76v, 2, '.', '');
 
             }
 
             //ROOM2 VALUE
 
             if($pax_room2 > 0 && $categoria == 2 && $numero_noches == 6){         
 
                 $pax1_r2_76v = ($room2 / $room2);
                 $pax2_r2_76v = ($room2 - $pax1_r2_76v)+($room2_c);
                 $tarifa_pax1_r2_76v = $pax1_r2_76v * $tarifa_p1v76;
                 $tarifa_pax2_r2_76v = $pax2_r2_76v * $tarifa_p2v76;
                 $tarifa_total1_r2_76v = $tarifa_pax1_r2_76v + $tarifa_pax2_r2_76v;
                 $tarifa_total_r2_76v = number_format($tarifa_total1_r2_76v, 2, '.', '');
 
 
             }
 
             //ROOM3 VALUE
 
             if($pax_room3 > 0 && $categoria == 2 && $numero_noches == 6){         
 
                 $pax1_r3_76v = ($room3 / $room3);
                 $pax2_r3_76v = ($room3 - $pax1_r3_76v)+($room3_c);
                 $tarifa_pax1_r3_76v = $pax1_r3_76v * $tarifa_p1v76;
                 $tarifa_pax2_r3_76v = $pax2_r3_76v * $tarifa_p2v76;
                 $tarifa_total1_r3_76v = $tarifa_pax1_r3_76v + $tarifa_pax2_r3_76v;
                 $tarifa_total_r3_76v = number_format($tarifa_total1_r3_76v, 2, '.', '');
 
 
             }
 
             //ROOM4  VALUE
 
             if($pax_room4 > 0 && $categoria == 2 && $numero_noches == 6){         
 
                 $pax1_r4_76v = ($room4 / $room4);
                 $pax2_r4_76v = ($room4 - $pax1_r4_76v)+($room4_c);
                 $tarifa_pax1_r4_76v = $pax1_r4_76v * $tarifa_p1v76;
                 $tarifa_pax2_r4_76v = $pax2_r4_76v * $tarifa_p2v76;
                 $tarifa_total1_r4_76v = $tarifa_pax1_r4_76v + $tarifa_pax2_r4_76v;
                 $tarifa_total_r4_76v = number_format($tarifa_total1_r4_76v, 2, '.', '');
 
 
             }
             
 
             //MODERATE TOURS 76/////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 MODERATE 
 
             if($pax_room1 > 0 && $categoria == 3 && $numero_noches == 6){         
 
                 $pax1_r1_76m = ($room1 / $room1);
                 $pax2_r1_76m = ($room1 - $pax1_r1_76m)+($room1_c);
                 $tarifa_pax1_r1_76m = $pax1_r1_76m * $tarifa_p1m76;
                 $tarifa_pax2_r1_76m = $pax2_r1_76m * $tarifa_p2m76;
                 $tarifa_total1_r1_76m = $tarifa_pax1_r1_76m + $tarifa_pax2_r1_76m;
                 $tarifa_total_r1_76m = number_format($tarifa_total1_r1_76m, 2, '.', '');
                 
                 //echo $tarifa_total_r1_76m;
 
             }
 
             //ROOM2 MODERATE
 
             if($pax_room2 > 0 && $categoria == 3 && $numero_noches == 6){         
 
                 $pax1_r2_76m = ($room2 / $room2);
                 $pax2_r2_76m = ($room2 - $pax1_r2_76m)+($room2_c);
                 $tarifa_pax1_r2_76m = $pax1_r2_76m * $tarifa_p1m76;
                 $tarifa_pax2_r2_76m = $pax2_r2_76m * $tarifa_p2m76;
                 $tarifa_total1_r2_76m = $tarifa_pax1_r2_76m + $tarifa_pax2_r2_76m;
                 $tarifa_total_r2_76m = number_format($tarifa_total1_r2_76m, 2, '.', '');
 
 
             }
 
             //ROOM3 MODERATE
 
             if($pax_room3 > 0 && $categoria == 3 && $numero_noches == 6){         
 
                 $pax1_r3_76m = ($room3 / $room3);
                 $pax2_r3_76m = ($room3 - $pax1_r3_76m)+($room3_c);
                 $tarifa_pax1_r3_76m = $pax1_r3_76m * $tarifa_p1m76;
                 $tarifa_pax2_r3_76m = $pax2_r3_76m * $tarifa_p2m76;
                 $tarifa_total1_r3_76m = $tarifa_pax1_r3_76m + $tarifa_pax2_r3_76m;
                 $tarifa_total_r3_76m = number_format($tarifa_total1_r3_76m, 2, '.', '');
 
             }
 
             //ROOM4  MODERATE
 
             if($pax_room4 > 0 && $categoria == 3 && $numero_noches == 6){         
 
                 $pax1_r4_76m = ($room4 / $room4);
                 $pax2_r4_76m = ($room4 - $pax1_r4_76m)+($room4_c);
                 $tarifa_pax1_r4_76m = $pax1_r4_76m * $tarifa_p1m76;
                 $tarifa_pax2_r4_76m = $pax2_r4_76m * $tarifa_p2m76;
                 $tarifa_total1_r4_76m = $tarifa_pax1_r4_76m + $tarifa_pax2_r4_76m;
                 $tarifa_total_r4_76m = number_format($tarifa_total1_r4_76m, 2, '.', '');
 
             }          
              
                 
         //*************************************************************** 
         
         //DELUXE TOURS 76/////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 DELUXE 
 
             if($pax_room1 > 0 && $categoria == 4 && $numero_noches == 6){         
 
                 $pax1_r1_76d = ($room1 / $room1);
                 $pax2_r1_76d = ($room1 - $pax1_r1_76d)+($room1_c);
                 $tarifa_pax1_r1_76d = $pax1_r1_76d * $tarifa_p1d76;
                 $tarifa_pax2_r1_76d = $pax2_r1_76d * $tarifa_p2d76;
                 $tarifa_total1_r1_76d = $tarifa_pax1_r1_76d + $tarifa_pax2_r1_76d;
                 $tarifa_total_r1_76d = number_format($tarifa_total1_r1_76d, 2, '.', '');
                 
                 //echo $tarifa_total_r1_76m;
 
             }
 
             //ROOM2 DELUXE 
 
             if($pax_room2 > 0 && $categoria == 4 && $numero_noches == 6){         
 
                 $pax1_r2_76d = ($room2 / $room2);
                 $pax2_r2_76d = ($room2 - $pax1_r2_76d)+($room2_c);
                 $tarifa_pax1_r2_76d = $pax1_r2_76d * $tarifa_p1d76;
                 $tarifa_pax2_r2_76d = $pax2_r2_76d * $tarifa_p2d76;
                 $tarifa_total1_r2_76d = $tarifa_pax1_r2_76d + $tarifa_pax2_r2_76d;
                 $tarifa_total_r2_76d = number_format($tarifa_total1_r2_76d, 2, '.', '');
 
 
             }
 
             //ROOM3 DELUXE 
 
             if($pax_room3 > 0 && $categoria == 4 && $numero_noches == 6){         
 
                 $pax1_r3_76d = ($room3 / $room3);
                 $pax2_r3_76d = ($room3 - $pax1_r3_76d)+($room3_c);
                 $tarifa_pax1_r3_76d = $pax1_r3_76d * $tarifa_p1d76;
                 $tarifa_pax2_r3_76d = $pax2_r3_76d * $tarifa_p2d76;
                 $tarifa_total1_r3_76d = $tarifa_pax1_r3_76d + $tarifa_pax2_r3_76d;
                 $tarifa_total_r3_76d = number_format($tarifa_total1_r3_76d, 2, '.', '');
 
             }
 
             //ROOM4  DELUXE 
 
             if($pax_room4 > 0 && $categoria == 4 && $numero_noches == 6){         
 
                 $pax1_r4_76d = ($room4 / $room4);
                 $pax2_r4_76d = ($room4 - $pax1_r4_76d)+($room4_c);
                 $tarifa_pax1_r4_76d = $pax1_r4_76d * $tarifa_p1d76;
                 $tarifa_pax2_r4_76d = $pax2_r4_76d * $tarifa_p2d76;
                 $tarifa_total1_r4_76d = $tarifa_pax1_r4_76d + $tarifa_pax2_r4_76d;
                 $tarifa_total_r4_76d = number_format($tarifa_total1_r4_76d, 2, '.', '');
 
             }          
              
                 
         //*************************************************************** 
             
         //VALUE TOUR 87 //////////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 VALUE 
 
             if($pax_room1 > 0 && $categoria == 2 && $numero_noches == 7){         
 
                 $pax1_r1_87v = ($room1 / $room1);
                 $pax2_r1_87v = ($room1 - $pax1_r1_87v)+($room1_c);
                 $tarifa_pax1_r1_87v = $pax1_r1_87v * $tarifa_p1v87;
                 $tarifa_pax2_r1_87v = $pax2_r1_87v * $tarifa_p2v87;                
                 $tarifa_total1_r1_87v = $tarifa_pax1_r1_87v + $tarifa_pax2_r1_87v;
                 $tarifa_total_r1_87v = number_format($tarifa_total1_r1_87v, 2, '.', '');
 
             }
 
             //ROOM2 VALUE
 
             if($pax_room2 > 0 && $categoria == 2 && $numero_noches == 7){         
 
                 $pax1_r2_87v = ($room2 / $room2);
                 $pax2_r2_87v = ($room2 - $pax1_r2_87v)+($room2_c);
                 $tarifa_pax1_r2_87v = $pax1_r2_87v * $tarifa_p1v87;
                 $tarifa_pax2_r2_87v = $pax2_r2_87v * $tarifa_p2v87;
                 $tarifa_total1_r2_87v = $tarifa_pax1_r2_87v + $tarifa_pax2_r2_87v;
                 $tarifa_total_r2_87v = number_format($tarifa_total1_r2_87v, 2, '.', '');
 
 
             }
 
             //ROOM3 VALUE
 
             if($pax_room3 > 0 && $categoria == 2 && $numero_noches == 7){         
 
                 $pax1_r3_87v = ($room3 / $room3);
                 $pax2_r3_87v = ($room3 - $pax1_r3_87v)+($room3_c);
                 $tarifa_pax1_r3_87v = $pax1_r3_87v * $tarifa_p1v87;
                 $tarifa_pax2_r3_87v = $pax2_r3_87v * $tarifa_p2v87;
                 $tarifa_total1_r3_87v = $tarifa_pax1_r3_87v + $tarifa_pax2_r3_87v;
                 $tarifa_total_r3_87v = number_format($tarifa_total1_r3_87v, 2, '.', '');
 
 
             }
 
             //ROOM4  VALUE
 
             if($pax_room4 > 0 && $categoria == 2 && $numero_noches == 7){         
 
                 $pax1_r4_87v = ($room4 / $room4);
                 $pax2_r4_87v = ($room4 - $pax1_r4_87v)+($room4_c);
                 $tarifa_pax1_r4_87v = $pax1_r4_87v * $tarifa_p1v87;
                 $tarifa_pax2_r4_87v = $pax2_r4_87v * $tarifa_p2v87;
                 $tarifa_total1_r4_87v = $tarifa_pax1_r4_87v + $tarifa_pax2_r4_87v;
                 $tarifa_total_r4_87v = number_format($tarifa_total1_r4_87v, 2, '.', '');
 
 
             }
             
 
             //MODERATE TOURS 87/////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 MODERATE 
 
             if($pax_room1 > 0 && $categoria == 3 && $numero_noches == 7){         
 
                 $pax1_r1_87m = ($room1 / $room1);
                 $pax2_r1_87m = ($room1 - $pax1_r1_87m)+($room1_c);
                 $tarifa_pax1_r1_87m = $pax1_r1_87m * $tarifa_p1m87;
                 $tarifa_pax2_r1_87m = $pax2_r1_87m * $tarifa_p2m87;
                 $tarifa_total1_r1_87m = $tarifa_pax1_r1_87m + $tarifa_pax2_r1_87m;
                 $tarifa_total_r1_87m = number_format($tarifa_total1_r1_87m, 2, '.', '');
                 
                 //echo $tarifa_total_r1_87m;
 
             }
 
             //ROOM2 MODERATE
 
             if($pax_room2 > 0 && $categoria == 3 && $numero_noches == 7){         
 
                 $pax1_r2_87m = ($room2 / $room2);
                 $pax2_r2_87m = ($room2 - $pax1_r2_87m)+($room2_c);
                 $tarifa_pax1_r2_87m = $pax1_r2_87m * $tarifa_p1m87;
                 $tarifa_pax2_r2_87m = $pax2_r2_87m * $tarifa_p2m87;
                 $tarifa_total1_r2_87m = $tarifa_pax1_r2_87m + $tarifa_pax2_r2_87m;
                 $tarifa_total_r2_87m = number_format($tarifa_total1_r2_87m, 2, '.', '');
 
 
             }
 
             //ROOM3 MODERATE
 
             if($pax_room3 > 0 && $categoria == 3 && $numero_noches == 7){         
 
                 $pax1_r3_87m = ($room3 / $room3);
                 $pax2_r3_87m = ($room3 - $pax1_r3_87m)+($room3_c);
                 $tarifa_pax1_r3_87m = $pax1_r3_87m * $tarifa_p1m87;
                 $tarifa_pax2_r3_87m = $pax2_r3_87m * $tarifa_p2m87;
                 $tarifa_total1_r3_87m = $tarifa_pax1_r3_87m + $tarifa_pax2_r3_87m;
                 $tarifa_total_r3_87m = number_format($tarifa_total1_r3_87m, 2, '.', '');
 
             }
 
             //ROOM4  MODERATE
 
             if($pax_room4 > 0 && $categoria == 3 && $numero_noches == 7){         
 
                 $pax1_r4_87m = ($room4 / $room4);
                 $pax2_r4_87m = ($room4 - $pax1_r4_87m)+($room4_c);
                 $tarifa_pax1_r4_87m = $pax1_r4_87m * $tarifa_p1m87;
                 $tarifa_pax2_r4_87m = $pax2_r4_87m * $tarifa_p2m87;
                 $tarifa_total1_r4_87m = $tarifa_pax1_r4_87m + $tarifa_pax2_r4_87m;
                 $tarifa_total_r4_87m = number_format($tarifa_total1_r4_87m, 2, '.', '');
 
             }          
              
                 
         //*************************************************************** 
         
             
             //DELUXE TOURS 87/////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 DELUXE
 
             if($pax_room1 > 0 && $categoria == 4 && $numero_noches == 7){         
 
                 $pax1_r1_87d = ($room1 / $room1);
                 $pax2_r1_87d = ($room1 - $pax1_r1_87d)+($room1_c);
                 $tarifa_pax1_r1_87d = $pax1_r1_87d * $tarifa_p1d87;
                 $tarifa_pax2_r1_87d = $pax2_r1_87d * $tarifa_p2d87;
                 $tarifa_total1_r1_87d = $tarifa_pax1_r1_87d + $tarifa_pax2_r1_87d;
                 $tarifa_total_r1_87d = number_format($tarifa_total1_r1_87d, 2, '.', '');
                 
                 //echo $tarifa_total_r1_87m;
 
             }
 
             //ROOM2 DELUXE
 
             if($pax_room2 > 0 && $categoria == 4 && $numero_noches == 7){         
 
                 $pax1_r2_87d = ($room2 / $room2);
                 $pax2_r2_87d = ($room2 - $pax1_r2_87d)+($room2_c);
                 $tarifa_pax1_r2_87d = $pax1_r2_87d * $tarifa_p1d87;
                 $tarifa_pax2_r2_87d = $pax2_r2_87d * $tarifa_p2d87;
                 $tarifa_total1_r2_87d = $tarifa_pax1_r2_87d + $tarifa_pax2_r2_87d;
                 $tarifa_total_r2_87d = number_format($tarifa_total1_r2_87d, 2, '.', '');
 
 
             }
 
             //ROOM3 DELUXE
 
             if($pax_room3 > 0 && $categoria == 4 && $numero_noches == 7){         
 
                 $pax1_r3_87d = ($room3 / $room3);
                 $pax2_r3_87d = ($room3 - $pax1_r3_87d)+($room3_c);
                 $tarifa_pax1_r3_87d = $pax1_r3_87d * $tarifa_p1d87;
                 $tarifa_pax2_r3_87d = $pax2_r3_87d * $tarifa_p2d87;
                 $tarifa_total1_r3_87d = $tarifa_pax1_r3_87d + $tarifa_pax2_r3_87d;
                 $tarifa_total_r3_87d = number_format($tarifa_total1_r3_87d, 2, '.', '');
 
             }
 
             //ROOM4  DELUXE
 
             if($pax_room4 > 0 && $categoria == 4 && $numero_noches == 7){         
 
                 $pax1_r4_87d = ($room4 / $room4);
                 $pax2_r4_87d = ($room4 - $pax1_r4_87d)+($room4_c);
                 $tarifa_pax1_r4_87d = $pax1_r4_87d * $tarifa_p1d87;
                 $tarifa_pax2_r4_87d = $pax2_r4_87d * $tarifa_p2d87;
                 $tarifa_total1_r4_87d = $tarifa_pax1_r4_87d + $tarifa_pax2_r4_87d;
                 $tarifa_total_r4_87d = number_format($tarifa_total1_r4_87d, 2, '.', '');
 
             }          
              
                 
         //*************************************************************** 
         
          //VALUE TOUR 98 //////////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 VALUE 
 
             if($pax_room1 > 0 && $categoria == 2 && $numero_noches == 8){         
 
                 $pax1_r1_98v = ($room1 / $room1);
                 $pax2_r1_98v = ($room1 - $pax1_r1_98v)+($room1_c);
                 $tarifa_pax1_r1_98v = $pax1_r1_98v * $tarifa_p1v98;
                 $tarifa_pax2_r1_98v = $pax2_r1_98v * $tarifa_p2v98;                
                 $tarifa_total1_r1_98v = $tarifa_pax1_r1_98v + $tarifa_pax2_r1_98v;
                 $tarifa_total_r1_98v = number_format($tarifa_total1_r1_98v, 2, '.', '');
 
             }
 
             //ROOM2 VALUE
 
             if($pax_room2 > 0 && $categoria == 2 && $numero_noches == 8){         
 
                 $pax1_r2_98v = ($room2 / $room2);
                 $pax2_r2_98v = ($room2 - $pax1_r2_98v)+($room2_c);
                 $tarifa_pax1_r2_98v = $pax1_r2_98v * $tarifa_p1v98;
                 $tarifa_pax2_r2_98v = $pax2_r2_98v * $tarifa_p2v98;
                 $tarifa_total1_r2_98v = $tarifa_pax1_r2_98v + $tarifa_pax2_r2_98v;
                 $tarifa_total_r2_98v = number_format($tarifa_total1_r2_98v, 2, '.', '');
 
 
             }
 
             //ROOM3 VALUE
 
             if($pax_room3 > 0 && $categoria == 2 && $numero_noches == 8){         
 
                 $pax1_r3_98v = ($room3 / $room3);
                 $pax2_r3_98v = ($room3 - $pax1_r3_98v)+($room3_c);
                 $tarifa_pax1_r3_98v = $pax1_r3_98v * $tarifa_p1v98;
                 $tarifa_pax2_r3_98v = $pax2_r3_98v * $tarifa_p2v98;
                 $tarifa_total1_r3_98v = $tarifa_pax1_r3_98v + $tarifa_pax2_r3_98v;
                 $tarifa_total_r3_98v = number_format($tarifa_total1_r3_98v, 2, '.', '');
 
 
             }
 
             //ROOM4  VALUE
 
             if($pax_room4 > 0 && $categoria == 2 && $numero_noches == 8){         
 
                 $pax1_r4_98v = ($room4 / $room4);
                 $pax2_r4_98v = ($room4 - $pax1_r4_98v)+($room4_c);
                 $tarifa_pax1_r4_98v = $pax1_r4_98v * $tarifa_p1v98;
                 $tarifa_pax2_r4_98v = $pax2_r4_98v * $tarifa_p2v98;
                 $tarifa_total1_r4_98v = $tarifa_pax1_r4_98v + $tarifa_pax2_r4_98v;
                 $tarifa_total_r4_98v = number_format($tarifa_total1_r4_98v, 2, '.', '');
 
 
             }
             
 
             //MODERATE TOURS 98/////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 MODERATE 
 
             if($pax_room1 > 0 && $categoria == 3 && $numero_noches == 8){         
 
                 $pax1_r1_98m = ($room1 / $room1);
                 $pax2_r1_98m = ($room1 - $pax1_r1_98m)+($room1_c);
                 $tarifa_pax1_r1_98m = $pax1_r1_98m * $tarifa_p1m98;
                 $tarifa_pax2_r1_98m = $pax2_r1_98m * $tarifa_p2m98;
                 $tarifa_total1_r1_98m = $tarifa_pax1_r1_98m + $tarifa_pax2_r1_98m;
                 $tarifa_total_r1_98m = number_format($tarifa_total1_r1_98m, 2, '.', '');
                 
                 //echo $tarifa_total_r1_98m;
 
             }
 
             //ROOM2 MODERATE
 
             if($pax_room2 > 0 && $categoria == 3 && $numero_noches == 8){         
 
                 $pax1_r2_98m = ($room2 / $room2);
                 $pax2_r2_98m = ($room2 - $pax1_r2_98m)+($room2_c);
                 $tarifa_pax1_r2_98m = $pax1_r2_98m * $tarifa_p1m98;
                 $tarifa_pax2_r2_98m = $pax2_r2_98m * $tarifa_p2m98;
                 $tarifa_total1_r2_98m = $tarifa_pax1_r2_98m + $tarifa_pax2_r2_98m;
                 $tarifa_total_r2_98m = number_format($tarifa_total1_r2_98m, 2, '.', '');
 
 
             }
 
             //ROOM3 MODERATE
 
             if($pax_room3 > 0 && $categoria == 3 && $numero_noches == 8){         
 
                 $pax1_r3_98m = ($room3 / $room3);
                 $pax2_r3_98m = ($room3 - $pax1_r3_98m)+($room3_c);
                 $tarifa_pax1_r3_98m = $pax1_r3_98m * $tarifa_p1m98;
                 $tarifa_pax2_r3_98m = $pax2_r3_98m * $tarifa_p2m98;
                 $tarifa_total1_r3_98m = $tarifa_pax1_r3_98m + $tarifa_pax2_r3_98m;
                 $tarifa_total_r3_98m = number_format($tarifa_total1_r3_98m, 2, '.', '');
 
             }
 
             //ROOM4  MODERATE
 
             if($pax_room4 > 0 && $categoria == 3 && $numero_noches == 8){         
 
                 $pax1_r4_98m = ($room4 / $room4);
                 $pax2_r4_98m = ($room4 - $pax1_r4_98m)+($room4_c);
                 $tarifa_pax1_r4_98m = $pax1_r4_98m * $tarifa_p1m98;
                 $tarifa_pax2_r4_98m = $pax2_r4_98m * $tarifa_p2m98;
                 $tarifa_total1_r4_98m = $tarifa_pax1_r4_98m + $tarifa_pax2_r4_98m;
                 $tarifa_total_r4_98m = number_format($tarifa_total1_r4_98m, 2, '.', '');
 
             }          
              
                 
         //***************************************************************    
           
             //DELUXE TOURS 98/////////////////////////////////////////////////////////////////////////////////////////
 
             //ROOM1 DELUXE 
 
             if($pax_room1 > 0 && $categoria == 4 && $numero_noches == 8){         
 
                 $pax1_r1_98d = ($room1 / $room1);
                 $pax2_r1_98d = ($room1 - $pax1_r1_98d)+($room1_c);
                 $tarifa_pax1_r1_98d = $pax1_r1_98d * $tarifa_p1d98;
                 $tarifa_pax2_r1_98d = $pax2_r1_98d * $tarifa_p2d98;
                 $tarifa_total1_r1_98d = $tarifa_pax1_r1_98d + $tarifa_pax2_r1_98d;
                 $tarifa_total_r1_98d = number_format($tarifa_total1_r1_98d, 2, '.', '');
                 
                 //echo $tarifa_total_r1_98m;
 
             }
 
             //ROOM2 DELUXE
 
             if($pax_room2 > 0 && $categoria == 4 && $numero_noches == 8){         
 
                 $pax1_r2_98d = ($room2 / $room2);
                 $pax2_r2_98d = ($room2 - $pax1_r2_98d)+($room2_c);
                 $tarifa_pax1_r2_98d = $pax1_r2_98d * $tarifa_p1d98;
                 $tarifa_pax2_r2_98d = $pax2_r2_98d * $tarifa_p2d98;
                 $tarifa_total1_r2_98d = $tarifa_pax1_r2_98d + $tarifa_pax2_r2_98d;
                 $tarifa_total_r2_98d = number_format($tarifa_total1_r2_98d, 2, '.', '');
 
 
             }
 
             //ROOM3 DELUXE
 
             if($pax_room3 > 0 && $categoria == 4 && $numero_noches == 8){         
 
                 $pax1_r3_98d = ($room3 / $room3);
                 $pax2_r3_98d = ($room3 - $pax1_r3_98d)+($room3_c);
                 $tarifa_pax1_r3_98d = $pax1_r3_98d * $tarifa_p1d98;
                 $tarifa_pax2_r3_98d = $pax2_r3_98d * $tarifa_p2d98;
                 $tarifa_total1_r3_98d = $tarifa_pax1_r3_98d + $tarifa_pax2_r3_98d;
                 $tarifa_total_r3_98d = number_format($tarifa_total1_r3_98d, 2, '.', '');
 
             }
 
             //ROOM4  DELUXE
 
             if($pax_room4 > 0 && $categoria == 4 && $numero_noches == 8){         
 
                 $pax1_r4_98d = ($room4 / $room4);
                 $pax2_r4_98d = ($room4 - $pax1_r4_98d)+($room4_c);
                 $tarifa_pax1_r4_98d = $pax1_r4_98d * $tarifa_p1d98;
                 $tarifa_pax2_r4_98d = $pax2_r4_98d * $tarifa_p2d98;
                 $tarifa_total1_r4_98d = $tarifa_pax1_r4_98d + $tarifa_pax2_r4_98d;
                 $tarifa_total_r4_98d = number_format($tarifa_total1_r4_98d, 2, '.', '');
 
             }          
              
                 
         //***************************************************************  
         
         
         if ($numNoches['noches'] == $nochesfree) {
             while ($fecha->format("Y-m-d") < $fecha_fin->format("Y-m-d")) {
                 $fec = $fecha->getTimestamp();
                 $rs = Doo::db()->query($sql, array($fec, $fec));
                 $costohotel = $rs->fetch();
 
 
                 //Desayunos
                 if ($costohotel ['breakfast'] == 0 || $costohotel ['categoria'] > 2) {
                     $priceBreakfast += ($costohotel ['breackfast'] * $totaladult);
                 } else {
                     $priceBreakfast += 0;
                 }
                 if ($free_night_buffet == 0) {
                     $totalBreakfast = $priceBreakfast;
                 } else {
                     $totalBreakfast = 0;
                 }
                 date_add($fecha, date_interval_create_from_date_string('1 days'));
             }
         } else {
             //restamos noches gratis
             date_add($fecha_fin, date_interval_create_from_date_string((-1 * $nochesfree) . ' days'));
             
             //echo $tarifa_total_r1_21v;
 
             //Costo habitacion 1
             if (isset($room1) && $room1 > 0) {
                 $contador = 0;
                 while ($fecha->format("Y-m-d") < $fecha_fin->format("Y-m-d")) {
                     if ($noches_escogidas != 0) {
                         if ($noches_escogidas == $contador) {
                             break;
                         }
                     }
                     //$fec = strtotime($toursbooking ['fecha_llegada']);//$fecha->getTimestamp();
                     /////captura de tarifas relacionadas con las noches escogidas/////////////////////////////////////////////////////////////////
                     //echo $noches_escogidas;
 
                     $fec = $fecha->getTimestamp();
 
 
                     // echo $fec;
 
                     $sql = 'SELECT t1.id,t1.breakfast,t1.resoftfe,t1.nombre,t3.id as comifi,t3.sgl,t3.dbl,t3.tpl,t3.qua,t3.sgl2,t3.dbl2,t3.tpl2,t3.qua2,t3.sgl3,t3.dbl3,t3.tpl3,t3.qua3,t3.sgl4,t3.dbl4,t3.tpl4,t3.qua4,t3.sgl5,t3.dbl5,t3.tpl5,t3.qua5,t3.sgl6,t3.dbl6,t3.tpl6,t3.qua6,t3.sgl7,t3.dbl7,t3.tpl7,t3.qua7,t3.sgl8,t3.dbl8,t3.tpl8,t3.qua8,t3.sglm,t3.dblm,t3.tplm,t3.quam,t3.sglm2,t3.dblm2,t3.tplm2,t3.quam2,t3.sglm3,t3.dblm3,t3.tplm3,t3.quam3,t3.sglm4,t3.dblm4,t3.tplm4,t3.quam4,t3.sglm5,t3.dblm5,t3.tplm5,t3.quam5,t3.sglm6,t3.dblm6,t3.tplm6,t3.quam6,t3.sglm7,t3.dblm7,t3.tplm7,t3.quam7,t3.sglm8,t3.dblm8,t3.tplm8,t3.quam8,t3.sgld,t3.dbld,t3.tpld,t3.quad,t3.sgld2,t3.dbld2,t3.tpld2,t3.quad2,t3.sgld3,t3.dbld3,t3.tpld3,t3.quad3,t3.sgld4,t3.dbld4,t3.tpld4,t3.quad4,t3.sgld5,t3.dbld5,t3.tpld5,t3.quad5,t3.sgld6,t3.dbld6,t3.tpld6,t3.quad6,t3.sgld7,t3.dbld7,t3.tpld7,t3.quad7,t3.sgld8,t3.dbld8,t3.tpld8,t3.quad8,t3.chv21,t3.chm21,t3.chd21,t3.chv32,t3.chm32,t3.chd32,t3.chv43,t3.chm43,t3.chd43,t3.chv54,t3.chm54,t3.chd54,t3.chv65,t3.chm65,t3.chd65,t3.chv76,t3.chm76,t3.chd76,t3.chv87,t3.chm87,t3.chd87,t3.chv98,t3.chm98,t3.chd98,t3.netax,t3.comtax,t3.costax,t3.id_ratesvalid,t3.breackfast,t3.fdv_adult21,t3.fdv_child21,t3.fdm_adult21,t3.fdm_child21,t3.fdd_adult21,t3.fdd_child21,t3.fdv_adult32,t3.fdv_child32,t3.fdm_adult32,t3.fdm_child32,t3.fdd_adult32,t3.fdd_child32,t3.fdv_adult43,t3.fdv_child43,t3.fdm_adult43,t3.fdm_child43,t3.fdd_adult43,t3.fdd_child43,t3.fdv_adult54,t3.fdv_child54,t3.fdm_adult54,t3.fdm_child54,t3.fdd_adult54,t3.fdd_child54,t3.fdv_adult65,t3.fdv_child65,t3.fdm_adult65,t3.fdm_child65,t3.fdd_adult65,t3.fdd_child65,t3.fdv_adult76,t3.fdv_child76,t3.fdm_adult76,t3.fdm_child76,t3.fdd_adult76,t3.fdd_child76,t3.fdv_adult87,t3.fdv_child87,t3.fdm_adult87,t3.fdm_child87,t3.fdd_adult87,t3.fdd_child87,t3.fdv_adult98,t3.fdv_child98,t3.fdm_adult98,t3.fdm_child98,t3.fdd_adult98,t3.fdd_child98,t1.categoria
                     
                         FROM hoteles t1	
                                                 LEFT JOIN comifijas t3 ON (
                                                 t1.id = t3.id_hotel 											
                                                 AND t3.fecha_ini <= ' . $fec . ' 
                                                 AND t3.fecha_fin  >= ' . $fec . '
                                                 )
                         WHERE t3.id_hotel  = ' . $hotel . ' AND t3.id_ratesvalid = ' . $id_tour . '';
 
                     $rs = Doo::db()->query($sql);
                     $costohotel = $rs->fetch();
 //                    print_r($type_rate);
 //                    print_r(Doo::db()->showSQL());
                     if (empty($costohotel)) {
                         echo ' <script>/*$("input[type=\'checkbox\'").attr("checked",false).change();*/
                             $( "#dialog-message-t" ).dialog({
                                 modal: true,
                                 buttons: {
                                     Ok: function() {
                                         $( this ).dialog( "close" );
                                     }
                                 }
                             });</script>
                      ';
                         exit;
                     }
 
                     //$neto = $costohotel['netax'];
                     //$commisionable = $costohotel['comtax'];
                     //$special= $costohotel['costax'];
                     //$idrv = $costohotel['id_ratesvalid'];
                     //DESAYUNOS DE HOTEL
                     $desayuno = $costohotel['breackfast'];
                     //echo $desayuno;
                     $costo_desayuno = $totalpersonas * $desayuno;
                     //echo $costo_desayuno;
                     //echo $idrv;
                     // GLOBAL $idrv;
                     // GLOBAL $desayuno;
 
                     $categor = $costohotel['categoria'];
                     //$numero_noches = $numNoches['noches'];
 
 //                    if ($categor == "2"){
 //
 //                        //cargo para hoteles con categoria Value
 //                        $cargo_por_noche = $cpnv;
 //                        $cargo_total = ($numero_noches)*($cpnv);
 //                        //echo "Cargo por Noche Categoria Value: ".$cargo_por_noche;
 //                        //echo "Cargo Total:  ".$cargo_total;
 //
 //                    }else if ($categor == "3"){
 //
 //                        //cargo para hoteles con categoria Moderate
 //                        $cargo_por_noche = $cpnm;
 //                        $cargo_total = ($numero_noches)*($cpnm);
 //                        //echo "Cargo por Noche Categoria Moderate: ".$cargo_por_noche;
 //                        //echo "Cargo Total:  ".$cargo_total;                    
 //
 //                    }
 
                     GLOBAL $chv21;
                     GLOBAL $chm21;
                     GLOBAL $chd21;
 
                     GLOBAL $chv32;
                     GLOBAL $chm32;
                     GLOBAL $chd32;
 
                     GLOBAL $chv43;
                     GLOBAL $chm43;
                     GLOBAL $chd43;
 
                     GLOBAL $chv54;
                     GLOBAL $chm54;
                     GLOBAL $chd54;
 
                     GLOBAL $chv65;
                     GLOBAL $chm65;
                     GLOBAL $chd65;
 
                     GLOBAL $chv76;
                     GLOBAL $chm76;
                     GLOBAL $chd76;
 
                     GLOBAL $chv87;
                     GLOBAL $chm87;
                     GLOBAL $chd87;
 
                     GLOBAL $chv98;
                     GLOBAL $chm98;
                     GLOBAL $chd98;
 
                     GLOBAL $fdv_adult21;
                     GLOBAL $fdv_child21;
                     GLOBAL $fdv_adult32;
                     GLOBAL $fdv_child32;
                     GLOBAL $fdv_adult43;
                     GLOBAL $fdv_child43;
                     GLOBAL $fdv_adult54;
                     GLOBAL $fdv_child54;
                     GLOBAL $fdv_adult65;
                     GLOBAL $fdv_child65;
                     GLOBAL $fdv_adult76;
                     GLOBAL $fdv_child76;
                     GLOBAL $fdv_adult87;
                     GLOBAL $fdv_child87;
                     GLOBAL $fdv_adult98;
                     GLOBAL $fdv_child98;
 
                     GLOBAL $fdm_adult21;
                     GLOBAL $fdm_child21;
                     GLOBAL $fdm_adult32;
                     GLOBAL $fdm_child32;
                     GLOBAL $fdm_adult43;
                     GLOBAL $fdm_child43;
                     GLOBAL $fdm_adult54;
                     GLOBAL $fdm_child54;
                     GLOBAL $fdm_adult65;
                     GLOBAL $fdm_child65;
                     GLOBAL $fdm_adult76;
                     GLOBAL $fdm_child76;
                     GLOBAL $fdm_adult87;
                     GLOBAL $fdm_child87;
                     GLOBAL $fdm_adult98;
                     GLOBAL $fdm_child98;
                     
                     GLOBAL $fdd_adult21;
                     GLOBAL $fdd_child21;
                     GLOBAL $fdd_adult32;
                     GLOBAL $fdd_child32;
                     GLOBAL $fdd_adult43;
                     GLOBAL $fdd_child43;
                     GLOBAL $fdd_adult54;
                     GLOBAL $fdd_child54;
                     GLOBAL $fdd_adult65;
                     GLOBAL $fdd_child65;
                     GLOBAL $fdd_adult76;
                     GLOBAL $fdd_child76;
                     GLOBAL $fdd_adult87;
                     GLOBAL $fdd_child87;
                     GLOBAL $fdd_adult98;
                     GLOBAL $fdd_child98;
 
 
 
                     $chv21 = $costohotel['chv21'];
                     $chm21 = $costohotel['chm21'];
                     $chd21 = $costohotel['chd21'];
 
                     $chv32 = $costohotel['chv32'];
                     $chm32 = $costohotel['chm32'];
                     $chd32 = $costohotel['chd32'];
 
                     $chv43 = $costohotel['chv43'];
                     $chm43 = $costohotel['chm43'];
                     $chd43 = $costohotel['chd43'];
 
                     $chv54 = $costohotel['chv54'];
                     $chm54 = $costohotel['chm54'];
                     $chd54 = $costohotel['chd54'];
 
                     $chv65 = $costohotel['chv65'];
                     $chm65 = $costohotel['chm65'];
                     $chd65 = $costohotel['chd65'];
 
                     $chv76 = $costohotel['chv76'];
                     $chm76 = $costohotel['chm76'];
                     $chd76 = $costohotel['chd76'];
 
                     $chv87 = $costohotel['chv87'];
                     $chm87 = $costohotel['chm87'];
                     $chd87 = $costohotel['chd87'];
                     
 
                     $chv98 = $costohotel['chv98'];
                     $chm98 = $costohotel['chm98'];
                     $chd98 = $costohotel['chd98'];
 
                     $fdv_adult21 = $costohotel['fdv_adult21'];
                     $fdv_child21 = $costohotel['fdv_child21'];
                     $fdm_adult21 = $costohotel['fdm_adult21'];
                     $fdm_child21 = $costohotel['fdm_child21'];
                     $fdd_adult21 = $costohotel['fdd_adult21'];
                     $fdd_child21 = $costohotel['fdd_child21'];
 
                     $fdv_adult32 = $costohotel['fdv_adult32'];
                     $fdv_child32 = $costohotel['fdv_child32'];
                     $fdm_adult32 = $costohotel['fdm_adult32'];
                     $fdm_child32 = $costohotel['fdm_child32'];
                     $fdd_adult32 = $costohotel['fdd_adult32'];
                     $fdd_child32 = $costohotel['fdd_child32'];
 
                     $fdv_adult43 = $costohotel['fdv_adult43'];
                     $fdv_child43 = $costohotel['fdv_child43'];
                     $fdm_adult43 = $costohotel['fdm_adult43'];
                     $fdm_child43 = $costohotel['fdm_child43'];
                     $fdd_adult43 = $costohotel['fdd_adult43'];
                     $fdd_child43 = $costohotel['fdd_child43'];
 
                     $fdv_adult54 = $costohotel['fdv_adult54'];
                     $fdv_child54 = $costohotel['fdv_child54'];
                     $fdm_adult54 = $costohotel['fdm_adult54'];
                     $fdm_child54 = $costohotel['fdm_child54'];
                     $fdd_adult54 = $costohotel['fdd_adult54'];
                     $fdd_child54 = $costohotel['fdd_child54'];
 
                     $fdv_adult65 = $costohotel['fdv_adult65'];
                     $fdv_child65 = $costohotel['fdv_child65'];
                     $fdm_adult65 = $costohotel['fdm_adult65'];
                     $fdm_child65 = $costohotel['fdm_child65'];
                     $fdd_adult65 = $costohotel['fdd_adult65'];
                     $fdd_child65 = $costohotel['fdd_child65'];
 
                     $fdv_adult76 = $costohotel['fdv_adult76'];
                     $fdv_child76 = $costohotel['fdv_child76'];
                     $fdm_adult76 = $costohotel['fdm_adult76'];
                     $fdm_child76 = $costohotel['fdm_child76'];
                     $fdd_adult76 = $costohotel['fdd_adult76'];
                     $fdd_child76 = $costohotel['fdd_child76'];
 
                     $fdv_adult87 = $costohotel['fdv_adult87'];
                     $fdv_child87 = $costohotel['fdv_child87'];
                     $fdm_adult87 = $costohotel['fdm_adult87'];
                     $fdm_child87 = $costohotel['fdm_child87'];
                     $fdd_adult87 = $costohotel['fdd_adult87'];
                     $fdd_child87 = $costohotel['fdd_child87'];
 
                     $fdv_adult98 = $costohotel['fdv_adult98'];
                     $fdv_child98 = $costohotel['fdv_child98'];
                     $fdm_adult98 = $costohotel['fdm_adult98'];
                     $fdm_child98 = $costohotel['fdm_child98'];
                     $fdd_adult98 = $costohotel['fdd_adult98'];
                     $fdd_child98 = $costohotel['fdd_child98'];
 
 
 
 
                     //TOUR 21 VALUE
 
                     //costos para tarifario tipo1 (incluye freeday & costo de ninos)
                     if ($numNoches['noches'] == 1 && $categor == 2 && $room1 > 0 && $tarifa_p1v21 == '0.00') {
                         
                         $numero_noches = $numNoches['noches'];                 
                         $cargo_total = ($numero_noches)*($cpnv);
                         $cargo_total2 = ($numero_noches)*($cpnv2);
                         $cargo_total3 = ($numero_noches)*($cpnv3);
                         $cargo_total4 = ($numero_noches)*($cpnv4);
                         
                         if ($room1 == 1) {
                             $priceRoom1 += $costohotel ['sgl'] + ($chv21 * $room1_c) + ($fdv_adult21 * $room1 * $frday) + ($fdv_child21 * $room1_c * $frday) + ($cargo_total) + ($cargo_total2) + ($cargo_total3) + ($cargo_total4);
                             //echo $priceRoom1;
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += $costohotel ['dbl'] + (($chv21 * $room1_c) / 2) + (($fdv_adult21 * $room1 * $frday) / 2) + (($fdv_child21 * $room1_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += $costohotel ['tpl'] + (($chv21 * $room1_c) / 3) + (($fdv_adult21 * $room1 * $frday) / 3) + (($fdv_child21 * $room1_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += $costohotel ['qua'] + (($chv21 * $room1_c) / 4) + (($fdv_adult21 * $room1 * $frday) / 4) + (($fdv_child21 * $room1_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                         }
                     }
 
                     
                     
                     //costos para tarifario tipo2 (tarifarios comisionables)        
                     if ($numNoches['noches'] == 1 && $categor == 2 && $room1 > 0 && $tarifa_p1v21 > '0.00') {
                         
                         $numero_noches = $numNoches['noches'];                                              
                         $cargo_total = ($numero_noches)*($cpnv);
                         $cargo_total2 = ($numero_noches)*($cpnv2);
                         $cargo_total3 = ($numero_noches)*($cpnv3);
                         $cargo_total4 = ($numero_noches)*($cpnv4);
                         
                         if ($room1 == 1) {
                             $priceRoom1 += $tarifa_total_r1_21v + ($fdv_adult21 * $room1 * $frday) + ($fdv_child21 * $room1_c * $frday) + ($cargo_total) + ($cargo_total2) + ($cargo_total3) + ($cargo_total4);
                             //echo $priceRoom1;
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += $tarifa_total_r1_21v + (($fdv_adult21 * $room1 * $frday) / 2) + (($fdv_child21 * $room1_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += $tarifa_total_r1_21v + (($fdv_adult21 * $room1 * $frday) / 3) + (($fdv_child21 * $room1_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += $tarifa_total_r1_21v + (($fdv_adult21 * $room1 * $frday) / 4) + (($fdv_child21 * $room1_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                         }
                     }
                             
                     //TOUR 21 MODERATE       
 
 
                     if ($numNoches['noches'] == 1 && $categor == 3 && $room1 > 0 && $tarifa_p1m21 == '0.00') {
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnm);
                         $cargo_total2 = ($numero_noches)*($cpnm2);
                         $cargo_total3 = ($numero_noches)*($cpnm3);
                         $cargo_total4 = ($numero_noches)*($cpnm4);
                         
                         
                         if ($room1 == 1) {
                             $priceRoom1 += $costohotel ['sglm'] + ($chm21 * $room1_c) + ($fdm_adult21 * $room1 * $frday) + ($fdm_child21 * $room1_c * $frday) + ($cargo_total) + ($cargo_total2) + ($cargo_total3) + ($cargo_total4);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += $costohotel ['dblm'] + (($chm21 * $room1_c) / 2) + (($fdm_adult21 * $room1 * $frday) / 2) + (($fdm_child21 * $room1_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += $costohotel ['tplm'] + (($chm21 * $room1_c) / 3) + (($fdm_adult21 * $room1 * $frday) / 3) + (($fdm_child21 * $room1_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += $costohotel ['quam'] + (($chm21 * $room1_c) / 4) + (($fdm_adult21 * $room1 * $frday) / 4) + (($fdm_child21 * $room1_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                         }
                     }
                     
                     if ($numNoches['noches'] == 1 && $categor == 3 && $room1 > 0 && $tarifa_p1m21 > '0.00') {
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnm);
                         $cargo_total2 = ($numero_noches)*($cpnm2);
                         $cargo_total3 = ($numero_noches)*($cpnm3);
                         $cargo_total4 = ($numero_noches)*($cpnm4);
                         
                         
                         if ($room1 == 1) {
                             $priceRoom1 += $tarifa_total_r1_21m + ($fdm_adult21 * $room1 * $frday) + ($fdm_child21 * $room1_c * $frday) + ($cargo_total) + ($cargo_total2) + ($cargo_total3) + ($cargo_total4);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += $tarifa_total_r1_21m + (($fdm_adult21 * $room1 * $frday) / 2) + (($fdm_child21 * $room1_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += $tarifa_total_r1_21m + (($fdm_adult21 * $room1 * $frday) / 3) + (($fdm_child21 * $room1_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += $tarifa_total_r1_21m + (($fdm_adult21 * $room1 * $frday) / 4) + (($fdm_child21 * $room1_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                         }
                     }
                     
                     //TOUR 21 DELUXE      
 
 
                     if ($numNoches['noches'] == 1 && $categor == 4 && $room1 > 0 && $tarifa_p1d21 == '0.00') {
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnd);
                         $cargo_total2 = ($numero_noches)*($cpnd2);
                         $cargo_total3 = ($numero_noches)*($cpnd3);
                         $cargo_total4 = ($numero_noches)*($cpnd4);
                         
                         
                         if ($room1 == 1) {
                             $priceRoom1 += $costohotel ['sgld'] + ($chd21 * $room1_c) + ($fdd_adult21 * $room1 * $frday) + ($fdd_child21 * $room1_c * $frday) + ($cargo_total) + ($cargo_total2) + ($cargo_total3) + ($cargo_total4);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += $costohotel ['dbld'] + (($chd21 * $room1_c) / 2) + (($fdd_adult21 * $room1 * $frday) / 2) + (($fdd_child21 * $room1_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += $costohotel ['tpld'] + (($chd21 * $room1_c) / 3) + (($fdd_adult21 * $room1 * $frday) / 3) + (($fdd_child21 * $room1_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += $costohotel ['quad'] + (($chd21 * $room1_c) / 4) + (($fdd_adult21 * $room1 * $frday) / 4) + (($fdd_child21 * $room1_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                         }
                     }
                     
                     if ($numNoches['noches'] == 1 && $categor == 4 && $room1 > 0 && $tarifa_p1d21 > '0.00') {
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnd);
                         $cargo_total2 = ($numero_noches)*($cpnd2);
                         $cargo_total3 = ($numero_noches)*($cpnd3);
                         $cargo_total4 = ($numero_noches)*($cpnd4);
                         
                         
                         if ($room1 == 1) {
                             $priceRoom1 += $tarifa_total_r1_21d + ($fdd_adult21 * $room1 * $frday) + ($fdd_child21 * $room1_c * $frday) + ($cargo_total) + ($cargo_total2) + ($cargo_total3) + ($cargo_total4);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += $tarifa_total_r1_21d + (($fdd_adult21 * $room1 * $frday) / 2) + (($fdd_child21 * $room1_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += $tarifa_total_r1_21d + (($fdd_adult21 * $room1 * $frday) / 3) + (($fdd_child21 * $room1_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += $tarifa_total_r1_21d + (($fdd_adult21 * $room1 * $frday) / 4) + (($fdd_child21 * $room1_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                         }
                     }
 
 
                     //TOUR 32 VALUE
 
 
 
                     if ($numNoches['noches'] == 2 && $categor == 2 && $room1 > 0 && $tarifa_p1v32 == '0.00') {
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnv);
                         $cargo_total2 = ($numero_noches)*($cpnv2);
                         $cargo_total3 = ($numero_noches)*($cpnv3);
                         $cargo_total4 = ($numero_noches)*($cpnv4);
 
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 += ($costohotel ['sgl2'] / 2) + (($chv32 * $room1_c) / 2) + (($fdv_adult32 * $room1 * $frday) / 2) + (($fdv_child32 * $room1_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += ($costohotel ['dbl2'] / 2) + (($chv32 * $room1_c) / 4) + (($fdv_adult32 * $room1 * $frday) / 4) + (($fdv_child32 * $room1_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += ($costohotel ['tpl2'] / 2) + (($chv32 * $room1_c) / 6) + (($fdv_adult32 * $room1 * $frday) / 6) + (($fdv_child32 * $room1_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += ($costohotel ['qua2'] / 2) + (($chv32 * $room1_c) / 8) + (($fdv_adult32 * $room1 * $frday) / 8) + (($fdv_child32 * $room1_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                         }
                     }
                     
                     if ($numNoches['noches'] == 2 && $categor == 2 && $room1 > 0 && $tarifa_p1v32 > '0.00') {
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnv);
                         $cargo_total2 = ($numero_noches)*($cpnv2);
                         $cargo_total3 = ($numero_noches)*($cpnv3);
                         $cargo_total4 = ($numero_noches)*($cpnv4);
 
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 += $tarifa_total_r1_32v + (($fdv_adult32 * $room1 * $frday) / 2) + (($fdv_child32 * $room1_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += $tarifa_total_r1_32v + (($fdv_adult32 * $room1 * $frday) / 4) + (($fdv_child32 * $room1_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += $tarifa_total_r1_32v + (($fdv_adult32 * $room1 * $frday) / 6) + (($fdv_child32 * $room1_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += $tarifa_total_r1_32v + (($fdv_adult32 * $room1 * $frday) / 8) + (($fdv_child32 * $room1_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                         }
                     }
 
                     //TOUR 32 MODERATE
 
 
                     if ($numNoches['noches'] == 2 && $categor == 3 && $room1 > 0 && $tarifa_p1m32 == '0.00') {
                         
                                                 
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnm);
                         $cargo_total2 = ($numero_noches)*($cpnm2);
                         $cargo_total3 = ($numero_noches)*($cpnm3);
                         $cargo_total4 = ($numero_noches)*($cpnm4);
 
                         if ($room1 == 1) {
                             $priceRoom1 += ($costohotel ['sglm2'] / 2) + (($chm32 * $room1_c) / 2) + (($fdm_adult32 * $room1 * $frday) / 2) + (($fdm_child32 * $room1_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += ($costohotel ['dblm2'] / 2) + (($chm32 * $room1_c) / 4) + (($fdm_adult32 * $room1 * $frday) / 4) + (($fdm_child32 * $room1_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += ($costohotel ['tplm2'] / 2) + (($chm32 * $room1_c) / 6) + (($fdm_adult32 * $room1 * $frday) / 6) + (($fdm_child32 * $room1_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += ($costohotel ['quam2'] / 2) + (($chm32 * $room1_c) / 8) + (($fdm_adult32 * $room1 * $frday) / 8) + (($fdm_child32 * $room1_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                         }
                     }
                     
                     if ($numNoches['noches'] == 2 && $categor == 3 && $room1 > 0 && $tarifa_p1m32 > '0.00') {
                         
                         //echo "aqui";
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnm);
                         $cargo_total2 = ($numero_noches)*($cpnm2);
                         $cargo_total3 = ($numero_noches)*($cpnm3);
                         $cargo_total4 = ($numero_noches)*($cpnm4);
 
                         if ($room1 == 1) {
                             $priceRoom1 += $tarifa_total_r1_32m + (($fdm_adult32 * $room1 * $frday) / 2) + (($fdm_child32 * $room1_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += $tarifa_total_r1_32m + (($fdm_adult32 * $room1 * $frday) / 4) + (($fdm_child32 * $room1_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += $tarifa_total_r1_32m + (($fdm_adult32 * $room1 * $frday) / 6) + (($fdm_child32 * $room1_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += $tarifa_total_r1_32m + (($fdm_adult32 * $room1 * $frday) / 8) + (($fdm_child32 * $room1_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                         }
                     }
                     
                     //TOUR 32 DELUXE
 
 
                     if ($numNoches['noches'] == 2 && $categor == 4 && $room1 > 0 && $tarifa_p1d32 == '0.00') {
                         
                                                 
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnd);
                         $cargo_total2 = ($numero_noches)*($cpnd2);
                         $cargo_total3 = ($numero_noches)*($cpnd3);
                         $cargo_total4 = ($numero_noches)*($cpnd4);
 
                         if ($room1 == 1) {
                             $priceRoom1 += ($costohotel ['sgld2'] / 2) + (($chd32 * $room1_c) / 2) + (($fdd_adult32 * $room1 * $frday) / 2) + (($fdd_child32 * $room1_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += ($costohotel ['dbld2'] / 2) + (($chd32 * $room1_c) / 4) + (($fdd_adult32 * $room1 * $frday) / 4) + (($fdd_child32 * $room1_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += ($costohotel ['tpld2'] / 2) + (($chd32 * $room1_c) / 6) + (($fdd_adult32 * $room1 * $frday) / 6) + (($fdd_child32 * $room1_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += ($costohotel ['quad2'] / 2) + (($chd32 * $room1_c) / 8) + (($fdd_adult32 * $room1 * $frday) / 8) + (($fdd_child32 * $room1_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                         }
                     }
                     
                     if ($numNoches['noches'] == 2 && $categor == 4 && $room1 > 0 && $tarifa_p1d32 > '0.00') {
                         
                         //echo "aqui";
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnd);
                         $cargo_total2 = ($numero_noches)*($cpnd2);
                         $cargo_total3 = ($numero_noches)*($cpnd3);
                         $cargo_total4 = ($numero_noches)*($cpnd4);
 
                         if ($room1 == 1) {
                             $priceRoom1 += $tarifa_total_r1_32d + (($fdd_adult32 * $room1 * $frday) / 2) + (($fdd_child32 * $room1_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += $tarifa_total_r1_32d + (($fdd_adult32 * $room1 * $frday) / 4) + (($fdd_child32 * $room1_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += $tarifa_total_r1_32d + (($fdd_adult32 * $room1 * $frday) / 6) + (($fdd_child32 * $room1_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += $tarifa_total_r1_32d + (($fdd_adult32 * $room1 * $frday) / 8) + (($fdd_child32 * $room1_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                         }
                     }
 
 
                     //TOUR 43 VALUE
 
                     
                     if ($numNoches['noches'] == 3 && $categor == 2 && $room1 > 0 && $tarifa_p1v43 == '0.00') {
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnv);
                         $cargo_total2 = ($numero_noches)*($cpnv2);
                         $cargo_total3 = ($numero_noches)*($cpnv3);
                         $cargo_total4 = ($numero_noches)*($cpnv4);
                        
 
                         if ($room1 == 1) {
                             $priceRoom1 += ($costohotel ['sgl3'] / 3) + (($chv43 * $room1_c) / 3) + (($fdv_adult43 * $room1 * $frday) / 3) + (($fdv_child43 * $room1_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += ($costohotel ['dbl3'] / 3) + (($chv43 * $room1_c) / 6) + (($fdv_adult43 * $room1 * $frday) / 6) + (($fdv_child43 * $room1_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += ($costohotel ['tpl3'] / 3) + (($chv43 * $room1_c) / 9) + (($fdv_adult43 * $room1 * $frday) / 9) + (($fdv_child43 * $room1_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += ($costohotel ['qua3'] / 3) + (($chv43 * $room1_c) / 12) + (($fdv_adult43 * $room1 * $frday) / 12) + (($fdv_child43 * $room1_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                         }
                     }
                     
                     if ($numNoches['noches'] == 3 && $categor == 2 && $room1 > 0 && $tarifa_p1v43 > '0.00') {
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnv);
                         $cargo_total2 = ($numero_noches)*($cpnv2);
                         $cargo_total3 = ($numero_noches)*($cpnv3);
                         $cargo_total4 = ($numero_noches)*($cpnv4);
                        
 
                         if ($room1 == 1) {
                             $priceRoom1 +=  $tarifa_total_r1_43v + (($fdv_adult43 * $room1 * $frday) / 3) + (($fdv_child43 * $room1_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 +=  $tarifa_total_r1_43v + (($fdv_adult43 * $room1 * $frday) / 6) + (($fdv_child43 * $room1_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 +=  $tarifa_total_r1_43v + (($fdv_adult43 * $room1 * $frday) / 9) + (($fdv_child43 * $room1_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 +=  $tarifa_total_r1_43v + (($fdv_adult43 * $room1 * $frday) / 12) + (($fdv_child43 * $room1_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                         }
                     }
                     
                     
                     //TOUR 43 MODERATE
 
                     
                     
                     if ($numNoches['noches'] == 3 && $categor == 3 && $room1 > 0 && $tarifa_p1m43 == '0.00') {
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnm);
                         $cargo_total2 = ($numero_noches)*($cpnm2);
                         $cargo_total3 = ($numero_noches)*($cpnm3);
                         $cargo_total4 = ($numero_noches)*($cpnm4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 += ($costohotel ['sglm3'] / 3) + (($chm43 * $room1_c) / 3) + (($fdm_adult43 * $room1 * $frday) / 3) + (($fdm_child43 * $room1_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += ($costohotel ['dblm3'] / 3) + (($chm43 * $room1_c) / 6) + (($fdm_adult43 * $room1 * $frday) / 6) + (($fdm_child43 * $room1_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += ($costohotel ['tplm3'] / 3) + (($chm43 * $room1_c) / 9) + (($fdm_adult43 * $room1 * $frday) / 9) + (($fdm_child43 * $room1_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += ($costohotel ['quam3'] / 3) + (($chm43 * $room1_c) / 12) + (($fdm_adult43 * $room1 * $frday) / 12) + (($fdm_child43 * $room1_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                         }
                     }
                     
                     if ($numNoches['noches'] == 3 && $categor == 3 && $room1 > 0 && $tarifa_p1m43 > '0.00') {
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnm);
                         $cargo_total2 = ($numero_noches)*($cpnm2);
                         $cargo_total3 = ($numero_noches)*($cpnm3);
                         $cargo_total4 = ($numero_noches)*($cpnm4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 += $tarifa_total_r1_43m + (($fdm_adult43 * $room1 * $frday) / 3) + (($fdm_child43 * $room1_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += $tarifa_total_r1_43m + (($fdm_adult43 * $room1 * $frday) / 6) + (($fdm_child43 * $room1_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += $tarifa_total_r1_43m + (($fdm_adult43 * $room1 * $frday) / 9) + (($fdm_child43 * $room1_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += $tarifa_total_r1_43m + (($fdm_adult43 * $room1 * $frday) / 12) + (($fdm_child43 * $room1_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                         }
                     }
                     
                     //TOUR 43 DELUXE
 
                     
                     
                     if ($numNoches['noches'] == 3 && $categor == 4 && $room1 > 0 && $tarifa_p1d43 == '0.00') {
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnd);
                         $cargo_total2 = ($numero_noches)*($cpnd2);
                         $cargo_total3 = ($numero_noches)*($cpnd3);
                         $cargo_total4 = ($numero_noches)*($cpnd4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 += ($costohotel ['sgld3'] / 3) + (($chd43 * $room1_c) / 3) + (($fdd_adult43 * $room1 * $frday) / 3) + (($fdd_child43 * $room1_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += ($costohotel ['dbld3'] / 3) + (($chd43 * $room1_c) / 6) + (($fdd_adult43 * $room1 * $frday) / 6) + (($fdd_child43 * $room1_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += ($costohotel ['tpld3'] / 3) + (($chd43 * $room1_c) / 9) + (($fdd_adult43 * $room1 * $frday) / 9) + (($fdd_child43 * $room1_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += ($costohotel ['quad3'] / 3) + (($chd43 * $room1_c) / 12) + (($fdd_adult43 * $room1 * $frday) / 12) + (($fdd_child43 * $room1_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                         }
                     }
                     
                     if ($numNoches['noches'] == 3 && $categor == 4 && $room1 > 0 && $tarifa_p1d43 > '0.00') {
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnd);
                         $cargo_total2 = ($numero_noches)*($cpnd2);
                         $cargo_total3 = ($numero_noches)*($cpnd3);
                         $cargo_total4 = ($numero_noches)*($cpnd4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 += $tarifa_total_r1_43d + (($fdd_adult43 * $room1 * $frday) / 3) + (($fdd_child43 * $room1_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += $tarifa_total_r1_43d + (($fdd_adult43 * $room1 * $frday) / 6) + (($fdd_child43 * $room1_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += $tarifa_total_r1_43d + (($fdd_adult43 * $room1 * $frday) / 9) + (($fdd_child43 * $room1_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += $tarifa_total_r1_43d + (($fdd_adult43 * $room1 * $frday) / 12) + (($fdd_child43 * $room1_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                         }
                     }
 
 
                     //TOUR 54 VALUE 
 
 
                     if ($numNoches['noches'] == 4 && $categor == 2 && $room1 > 0 && $tarifa_p1v54 == '0.00') {
                         
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnv);
                         $cargo_total2 = ($numero_noches)*($cpnv2);
                         $cargo_total3 = ($numero_noches)*($cpnv3);
                         $cargo_total4 = ($numero_noches)*($cpnv4);
 
                         if ($room1 == 1) {
                             $priceRoom1 += ($costohotel ['sgl4'] / 4) + (($chv54 * $room1_c) / 4) + (($fdv_adult54 * $room1 * $frday) / 4) + (($fdv_child54 * $room1_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += ($costohotel ['dbl4'] / 4) + (($chv54 * $room1_c) / 8) + (($fdv_adult54 * $room1 * $frday) / 8) + (($fdv_child54 * $room1_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += ($costohotel ['tpl4'] / 4) + (($chv54 * $room1_c) / 12) + (($fdv_adult54 * $room1 * $frday) / 12) + (($fdv_child54 * $room1_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += ($costohotel ['qua4'] / 4) + (($chv54 * $room1_c) / 16) + (($fdv_adult54 * $room1 * $frday) / 16) + (($fdv_child54 * $room1_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                         }
                     }
                     
                     if ($numNoches['noches'] == 4 && $categor == 2 && $room1 > 0 && $tarifa_p1v54 > '0.00') {
                         
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnv);
                         $cargo_total2 = ($numero_noches)*($cpnv2);
                         $cargo_total3 = ($numero_noches)*($cpnv3);
                         $cargo_total4 = ($numero_noches)*($cpnv4);
 
                         if ($room1 == 1) {
                             $priceRoom1 +=  $tarifa_total_r1_54v + (($fdv_adult54 * $room1 * $frday) / 4) + (($fdv_child54 * $room1_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 +=  $tarifa_total_r1_54v + (($fdv_adult54 * $room1 * $frday) / 8) + (($fdv_child54 * $room1_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 +=  $tarifa_total_r1_54v + (($fdv_adult54 * $room1 * $frday) / 12) + (($fdv_child54 * $room1_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 +=  $tarifa_total_r1_54v + (($fdv_adult54 * $room1 * $frday) / 16) + (($fdv_child54 * $room1_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                         }
                     }
                     
                     
                     
                     
                     //TOUR 54 MODERATE
 
 
 
 
                     if ($numNoches['noches'] == 4 && $categor == 3 && $room1 > 0 && $tarifa_p1m54 == '0.00') {
                         
                         $numero_noches = $numNoches['noches'];
                         $cargo_total = ($numero_noches)*($cpnm);
                         $cargo_total2 = ($numero_noches)*($cpnm2);
                         $cargo_total3 = ($numero_noches)*($cpnm3);
                         $cargo_total4 = ($numero_noches)*($cpnm4);
 
                         if ($room1 == 1) {
                             $priceRoom1 += ($costohotel ['sglm4'] / 4) + (($chm54 * $room1_c) / 4) + (($fdm_adult54 * $room1 * $frday) / 4) + (($fdm_child54 * $room1_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += ($costohotel ['dblm4'] / 4) + (($chm54 * $room1_c) / 8) + (($fdm_adult54 * $room1 * $frday) / 8) + (($fdm_child54 * $room1_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += ($costohotel ['tplm4'] / 4) + (($chm54 * $room1_c) / 12) + (($fdm_adult54 * $room1 * $frday) / 12) + (($fdm_child54 * $room1_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += ($costohotel ['quam4'] / 4) + (($chm54 * $room1_c) / 16) + (($fdm_adult54 * $room1 * $frday) / 16) + (($fdm_child54 * $room1_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                         }
                     }
                     
                     if ($numNoches['noches'] == 4 && $categor == 3 && $room1 > 0 && $tarifa_p1m54 > '0.00') {
                         
                         $numero_noches = $numNoches['noches'];
                         $cargo_total = ($numero_noches)*($cpnm);
                         $cargo_total2 = ($numero_noches)*($cpnm2);
                         $cargo_total3 = ($numero_noches)*($cpnm3);
                         $cargo_total4 = ($numero_noches)*($cpnm4);
 
                         if ($room1 == 1) {
                             $priceRoom1 += $tarifa_total_r1_54m + (($fdm_adult54 * $room1 * $frday) / 4) + (($fdm_child54 * $room1_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += $tarifa_total_r1_54m + (($fdm_adult54 * $room1 * $frday) / 8) + (($fdm_child54 * $room1_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += $tarifa_total_r1_54m + (($fdm_adult54 * $room1 * $frday) / 12) + (($fdm_child54 * $room1_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += $tarifa_total_r1_54m + (($fdm_adult54 * $room1 * $frday) / 16) + (($fdm_child54 * $room1_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                         }
                     }
 
                      //TOUR 54 DELUXE
 
 
 
 
                      if ($numNoches['noches'] == 4 && $categor == 4 && $room1 > 0 && $tarifa_p1d54 == '0.00') {
                         
                         $numero_noches = $numNoches['noches'];
                         $cargo_total = ($numero_noches)*($cpnd);
                         $cargo_total2 = ($numero_noches)*($cpnd2);
                         $cargo_total3 = ($numero_noches)*($cpnd3);
                         $cargo_total4 = ($numero_noches)*($cpnd4);
 
                         if ($room1 == 1) {
                             $priceRoom1 += ($costohotel ['sgld4'] / 4) + (($chd54 * $room1_c) / 4) + (($fdd_adult54 * $room1 * $frday) / 4) + (($fdd_child54 * $room1_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += ($costohotel ['dbld4'] / 4) + (($chd54 * $room1_c) / 8) + (($fdd_adult54 * $room1 * $frday) / 8) + (($fdd_child54 * $room1_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += ($costohotel ['tpld4'] / 4) + (($chd54 * $room1_c) / 12) + (($fdd_adult54 * $room1 * $frday) / 12) + (($fdd_child54 * $room1_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += ($costohotel ['quad4'] / 4) + (($chd54 * $room1_c) / 16) + (($fdd_adult54 * $room1 * $frday) / 16) + (($fdd_child54 * $room1_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                         }
                     }
                     
                     if ($numNoches['noches'] == 4 && $categor == 4 && $room1 > 0 && $tarifa_p1d54 > '0.00') {
                         
                         $numero_noches = $numNoches['noches'];
                         $cargo_total = ($numero_noches)*($cpnd);
                         $cargo_total2 = ($numero_noches)*($cpnd2);
                         $cargo_total3 = ($numero_noches)*($cpnd3);
                         $cargo_total4 = ($numero_noches)*($cpnd4);
 
                         if ($room1 == 1) {
                             $priceRoom1 += $tarifa_total_r1_54d + (($fdd_adult54 * $room1 * $frday) / 4) + (($fdd_child54 * $room1_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += $tarifa_total_r1_54d + (($fdd_adult54 * $room1 * $frday) / 8) + (($fdd_child54 * $room1_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += $tarifa_total_r1_54d + (($fdd_adult54 * $room1 * $frday) / 12) + (($fdd_child54 * $room1_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += $tarifa_total_r1_54d + (($fdd_adult54 * $room1 * $frday) / 16) + (($fdd_child54 * $room1_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                         }
                     }
                     
                     
                     
                     //TOUR 65 VALUE
 
 
 
                     if ($numNoches['noches'] == 5 && $categor == 2 && $room1 > 0 && $tarifa_p1v65 == '0.00') {
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnv);
                         $cargo_total2 = ($numero_noches)*($cpnv2);
                         $cargo_total3 = ($numero_noches)*($cpnv3);
                         $cargo_total4 = ($numero_noches)*($cpnv4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 += ($costohotel ['sgl5'] / 5) + (($chv65 * $room1_c) / 5) + (($fdv_adult65 * $room1 * $frday) / 5) + (($fdv_child65 * $room1_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += ($costohotel ['dbl5'] / 5) + (($chv65 * $room1_c) / 10) + (($fdv_adult65 * $room1 * $frday) / 10) + (($fdv_child65 * $room1_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10) + (($cargo_total3)/10) + (($cargo_total4)/10);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += ($costohotel ['tpl5'] / 5) + (($chv65 * $room1_c) / 15) + (($fdv_adult65 * $room1 * $frday) / 15) + (($fdv_child65 * $room1_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15) + (($cargo_total3)/15) + (($cargo_total4)/15);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += ($costohotel ['qua5'] / 5) + (($chv65 * $room1_c) / 20) + (($fdv_adult65 * $room1 * $frday) / 20) + (($fdv_child65 * $room1_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20) + (($cargo_total3)/20) + (($cargo_total4)/20);
                         }
                         
                     }
                     
                     if ($numNoches['noches'] == 5 && $categor == 2 && $room1 > 0 && $tarifa_p1v65 > '0.00') {
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnv);
                         $cargo_total2 = ($numero_noches)*($cpnv2);
                         $cargo_total3 = ($numero_noches)*($cpnv3);
                         $cargo_total4 = ($numero_noches)*($cpnv4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 += $tarifa_total_r1_65v + (($fdv_adult65 * $room1 * $frday) / 5) + (($fdv_child65 * $room1_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += $tarifa_total_r1_65v + (($fdv_adult65 * $room1 * $frday) / 10) + (($fdv_child65 * $room1_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10) + (($cargo_total3)/10) + (($cargo_total4)/10);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += $tarifa_total_r1_65v + (($fdv_adult65 * $room1 * $frday) / 15) + (($fdv_child65 * $room1_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15) + (($cargo_total3)/15) + (($cargo_total4)/15);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += $tarifa_total_r1_65v + (($fdv_adult65 * $room1 * $frday) / 20) + (($fdv_child65 * $room1_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20) + (($cargo_total3)/20) + (($cargo_total4)/20);
                         }
                         
                     }
 
                     //TOUR 65 MODERATE
 
 
 
                     if ($numNoches['noches'] == 5 && $categor == 3 && $room1 > 0 && $tarifa_p1m65 == '0.00') {
                         
                         $numero_noches = $numNoches['noches'];
                         $cargo_total = ($numero_noches)*($cpnm);
                         $cargo_total2 = ($numero_noches)*($cpnm2);
                         $cargo_total3 = ($numero_noches)*($cpnm3);
                         $cargo_total4 = ($numero_noches)*($cpnm4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 += ($costohotel ['sglm5']) / 5 + (($chm65 * $room1_c) / 5) + (($fdm_adult65 * $room1 * $frday) / 5) + (($fdm_child65 * $room1_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += ($costohotel ['dblm5']) / 5 + (($chm65 * $room1_c) / 10) + (($fdm_adult65 * $room1 * $frday) / 10) + (($fdm_child65 * $room1_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10)  + (($cargo_total3)/10) + (($cargo_total4)/10);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += ($costohotel ['tplm5']) / 5 + (($chm65 * $room1_c) / 15) + (($fdm_adult65 * $room1 * $frday) / 15) + (($fdm_child65 * $room1_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15)  + (($cargo_total3)/15) + (($cargo_total4)/15);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += ($costohotel ['quam5']) / 5 + (($chm65 * $room1_c) / 20) + (($fdm_adult65 * $room1 * $frday) / 20) + (($fdm_child65 * $room1_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20)  + (($cargo_total3)/20) + (($cargo_total4)/20);
                         }
                     }
                     
                     if ($numNoches['noches'] == 5 && $categor == 3 && $room1 > 0 && $tarifa_p1m65 > '0.00') {
                         
                         $numero_noches = $numNoches['noches'];
                         $cargo_total = ($numero_noches)*($cpnm);
                         $cargo_total2 = ($numero_noches)*($cpnm2);
                         $cargo_total3 = ($numero_noches)*($cpnm3);
                         $cargo_total4 = ($numero_noches)*($cpnm4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 +=  $tarifa_total_r1_65m + (($fdm_adult65 * $room1 * $frday) / 5) + (($fdm_child65 * $room1_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 +=  $tarifa_total_r1_65m + (($fdm_adult65 * $room1 * $frday) / 10) + (($fdm_child65 * $room1_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10)  + (($cargo_total3)/10) + (($cargo_total4)/10);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 +=  $tarifa_total_r1_65m + (($fdm_adult65 * $room1 * $frday) / 15) + (($fdm_child65 * $room1_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15)  + (($cargo_total3)/15) + (($cargo_total4)/15);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 +=  $tarifa_total_r1_65m + (($fdm_adult65 * $room1 * $frday) / 20) + (($fdm_child65 * $room1_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20)  + (($cargo_total3)/20) + (($cargo_total4)/20);
                         }
                     }
 
                     //TOUR 65 DELUXE
 
 
 
                     if ($numNoches['noches'] == 5 && $categor == 4 && $room1 > 0 && $tarifa_p1d65 == '0.00') {
                         
                         $numero_noches = $numNoches['noches'];
                         $cargo_total = ($numero_noches)*($cpnd);
                         $cargo_total2 = ($numero_noches)*($cpnd2);
                         $cargo_total3 = ($numero_noches)*($cpnd3);
                         $cargo_total4 = ($numero_noches)*($cpnd4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 += ($costohotel ['sgld5']) / 5 + (($chd65 * $room1_c) / 5) + (($fdd_adult65 * $room1 * $frday) / 5) + (($fdd_child65 * $room1_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += ($costohotel ['dbld5']) / 5 + (($chd65 * $room1_c) / 10) + (($fdd_adult65 * $room1 * $frday) / 10) + (($fdd_child65 * $room1_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10)  + (($cargo_total3)/10) + (($cargo_total4)/10);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += ($costohotel ['tpld5']) / 5 + (($chd65 * $room1_c) / 15) + (($fdd_adult65 * $room1 * $frday) / 15) + (($fdd_child65 * $room1_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15)  + (($cargo_total3)/15) + (($cargo_total4)/15);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += ($costohotel ['quad5']) / 5 + (($chd65 * $room1_c) / 20) + (($fdd_adult65 * $room1 * $frday) / 20) + (($fdd_child65 * $room1_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20)  + (($cargo_total3)/20) + (($cargo_total4)/20);
                         }
                     }
                     
                     if ($numNoches['noches'] == 5 && $categor == 4 && $room1 > 0 && $tarifa_p1d65 > '0.00') {
                         
                         $numero_noches = $numNoches['noches'];
                         $cargo_total = ($numero_noches)*($cpnd);
                         $cargo_total2 = ($numero_noches)*($cpnd2);
                         $cargo_total3 = ($numero_noches)*($cpnd3);
                         $cargo_total4 = ($numero_noches)*($cpnd4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 +=  $tarifa_total_r1_65d + (($fdd_adult65 * $room1 * $frday) / 5) + (($fdd_child65 * $room1_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 +=  $tarifa_total_r1_65d + (($fdd_adult65 * $room1 * $frday) / 10) + (($fdd_child65 * $room1_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10)  + (($cargo_total3)/10) + (($cargo_total4)/10);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 +=  $tarifa_total_r1_65d + (($fdd_adult65 * $room1 * $frday) / 15) + (($fdd_child65 * $room1_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15)  + (($cargo_total3)/15) + (($cargo_total4)/15);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 +=  $tarifa_total_r1_65d + (($fdd_adult65 * $room1 * $frday) / 20) + (($fdd_child65 * $room1_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20)  + (($cargo_total3)/20) + (($cargo_total4)/20);
                         }
                     }
 
 
                     //TOUR 76 VALUE
 
 
 
                     if ($numNoches['noches'] == 6 && $categor == 2 && $room1 > 0 && $tarifa_p1v76 == '0.00') {
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnv);
                         $cargo_total2 = ($numero_noches)*($cpnv2);
                         $cargo_total3 = ($numero_noches)*($cpnv3);
                         $cargo_total4 = ($numero_noches)*($cpnv4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 += ($costohotel ['sgl6']) / 6 + (($chv76 * $room1_c) / 6) + (($fdv_adult76 * $room1 * $frday) / 6) + (($fdv_child76 * $room1_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += ($costohotel ['dbl6']) / 6 + (($chv76 * $room1_c) / 12) + (($fdv_adult76 * $room1 * $frday) / 12) + (($fdv_child76 * $room1_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += ($costohotel ['tpl6']) / 6 + (($chv76 * $room1_c) / 18) + (($fdv_adult76 * $room1 * $frday) / 18) + (($fdv_child76 * $room1_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += ($costohotel ['qua6']) / 6 + (($chv76 * $room1_c) / 24) + (($fdv_adult76 * $room1 * $frday) / 24) + (($fdv_child76 * $room1_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                         }
                     }
                     
                     if ($numNoches['noches'] == 6 && $categor == 2 && $room1 > 0 && $tarifa_p1v76 > '0.00') {
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnv);
                         $cargo_total2 = ($numero_noches)*($cpnv2);
                         $cargo_total3 = ($numero_noches)*($cpnv3);
                         $cargo_total4 = ($numero_noches)*($cpnv4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 +=  $tarifa_total_r1_76v + (($fdv_adult76 * $room1 * $frday) / 6) + (($fdv_child76 * $room1_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 +=  $tarifa_total_r1_76v + (($fdv_adult76 * $room1 * $frday) / 12) + (($fdv_child76 * $room1_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 +=  $tarifa_total_r1_76v + (($fdv_adult76 * $room1 * $frday) / 18) + (($fdv_child76 * $room1_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 +=  $tarifa_total_r1_76v + (($fdv_adult76 * $room1 * $frday) / 24) + (($fdv_child76 * $room1_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                         }
                         
                     }
 
                     //TOUR 76 MODERATE 
 
 
 
 
                     if ($numNoches['noches'] == 6 && $categor == 3 && $room1 > 0 && $tarifa_p1m76 == '0.00') {
                         
                         $numero_noches = $numNoches['noches'];
                         $cargo_total = ($numero_noches)*($cpnm);
                         $cargo_total2 = ($numero_noches)*($cpnm2);
                         $cargo_total3 = ($numero_noches)*($cpnm3);
                         $cargo_total4 = ($numero_noches)*($cpnm4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 += ($costohotel ['sglm6']) / 6 + (($chm76 * $room1_c) / 6) + (($fdm_adult76 * $room1 * $frday) / 6) + (($fdm_child76 * $room1_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += ($costohotel ['dblm6']) / 6 + (($chm76 * $room1_c) / 12) + (($fdm_adult76 * $room1 * $frday) / 12) + (($fdm_child76 * $room1_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += ($costohotel ['tplm6']) / 6 + (($chm76 * $room1_c) / 18) + (($fdm_adult76 * $room1 * $frday) / 18) + (($fdm_child76 * $room1_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += ($costohotel ['quam6']) / 6 + (($chm76 * $room1_c) / 24) + (($fdm_adult76 * $room1 * $frday) / 24) + (($fdm_child76 * $room1_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                         }
                     }
                     
                     if ($numNoches['noches'] == 6 && $categor == 3 && $room1 > 0 && $tarifa_p1m76 > '0.00') {
                         
                         $numero_noches = $numNoches['noches'];
                         $cargo_total = ($numero_noches)*($cpnm);
                         $cargo_total2 = ($numero_noches)*($cpnm2);
                         $cargo_total3 = ($numero_noches)*($cpnm3);
                         $cargo_total4 = ($numero_noches)*($cpnm4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 +=  $tarifa_total_r1_76m + (($fdm_adult76 * $room1 * $frday) / 6) + (($fdm_child76 * $room1_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 +=  $tarifa_total_r1_76m + (($fdm_adult76 * $room1 * $frday) / 12) + (($fdm_child76 * $room1_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 +=  $tarifa_total_r1_76m + (($fdm_adult76 * $room1 * $frday) / 18) + (($fdm_child76 * $room1_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 +=  $tarifa_total_r1_76m + (($fdm_adult76 * $room1 * $frday) / 24) + (($fdm_child76 * $room1_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                         }
                     }
 
                     //TOUR 76 DELUXE 
 
 
 
 
                     if ($numNoches['noches'] == 6 && $categor == 4 && $room1 > 0 && $tarifa_p1d76 == '0.00') {
                         
                         $numero_noches = $numNoches['noches'];
                         $cargo_total = ($numero_noches)*($cpnd);
                         $cargo_total2 = ($numero_noches)*($cpnd2);
                         $cargo_total3 = ($numero_noches)*($cpnd3);
                         $cargo_total4 = ($numero_noches)*($cpnd4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 += ($costohotel ['sgld6']) / 6 + (($chd76 * $room1_c) / 6) + (($fdd_adult76 * $room1 * $frday) / 6) + (($fdd_child76 * $room1_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += ($costohotel ['dbld6']) / 6 + (($chd76 * $room1_c) / 12) + (($fdd_adult76 * $room1 * $frday) / 12) + (($fdd_child76 * $room1_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += ($costohotel ['tpld6']) / 6 + (($chd76 * $room1_c) / 18) + (($fdd_adult76 * $room1 * $frday) / 18) + (($fdd_child76 * $room1_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += ($costohotel ['quad6']) / 6 + (($chd76 * $room1_c) / 24) + (($fdd_adult76 * $room1 * $frday) / 24) + (($fdd_child76 * $room1_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                         }
                     }
                     
                     if ($numNoches['noches'] == 6 && $categor == 4 && $room1 > 0 && $tarifa_p1d76 > '0.00') {
                         
                         $numero_noches = $numNoches['noches'];
                         $cargo_total = ($numero_noches)*($cpnd);
                         $cargo_total2 = ($numero_noches)*($cpnd2);
                         $cargo_total3 = ($numero_noches)*($cpnd3);
                         $cargo_total4 = ($numero_noches)*($cpnd4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 +=  $tarifa_total_r1_76d + (($fdd_adult76 * $room1 * $frday) / 6) + (($fdd_child76 * $room1_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 +=  $tarifa_total_r1_76d + (($fdd_adult76 * $room1 * $frday) / 12) + (($fdd_child76 * $room1_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 +=  $tarifa_total_r1_76d + (($fdd_adult76 * $room1 * $frday) / 18) + (($fdd_child76 * $room1_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 +=  $tarifa_total_r1_76d + (($fdd_adult76 * $room1 * $frday) / 24) + (($fdd_child76 * $room1_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                         }
                     }
                     
                     //************************************************************************************************************************************    
                          
                     //TOUR 87 VALUE
 
 
 
                     if ($numNoches['noches'] == 7 && $categor == 2 && $room1 > 0 && $tarifa_p1v87 == '0.00') {
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnv);
                         $cargo_total2 = ($numero_noches)*($cpnv2);
                         $cargo_total3 = ($numero_noches)*($cpnv3);
                         $cargo_total4 = ($numero_noches)*($cpnv4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 += ($costohotel ['sgl7']) / 7 + (($chv87 * $room1_c) / 7) + (($fdv_adult87 * $room1 * $frday) / 7) + (($fdv_child87 * $room1_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += ($costohotel ['dbl7']) / 7 + (($chv87 * $room1_c) / 14) + (($fdv_adult87 * $room1 * $frday) / 14) + (($fdv_child87 * $room1_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += ($costohotel ['tpl7']) / 7 + (($chv87 * $room1_c) / 21) + (($fdv_adult87 * $room1 * $frday) / 21) + (($fdv_child87 * $room1_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += ($costohotel ['qua7']) / 7 + (($chv87 * $room1_c) / 28) + (($fdv_adult87 * $room1 * $frday) / 28) + (($fdv_child87 * $room1_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                         }
                     }
 
                     if ($numNoches['noches'] == 7 && $categor == 2 && $room1 > 0 && $tarifa_p1v87 > '0.00') {
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnv);
                         $cargo_total2 = ($numero_noches)*($cpnv2);
                         $cargo_total3 = ($numero_noches)*($cpnv3);
                         $cargo_total4 = ($numero_noches)*($cpnv4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 +=  $tarifa_total_r1_87v + (($fdv_adult87 * $room1 * $frday) / 7) + (($fdv_child87 * $room1_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 +=  $tarifa_total_r1_87v + (($fdv_adult87 * $room1 * $frday) / 14) + (($fdv_child87 * $room1_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 +=  $tarifa_total_r1_87v + (($fdv_adult87 * $room1 * $frday) / 21) + (($fdv_child87 * $room1_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 +=  $tarifa_total_r1_87v + (($fdv_adult87 * $room1 * $frday) / 28) + (($fdv_child87 * $room1_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                         }
                     }
                     //TOUR 87 MODERATE
 
 
                     if ($numNoches['noches'] == 7 && $categor == 3 && $room1 > 0 && $tarifa_p1m87 == '0.00') {
                         
                         $numero_noches = $numNoches['noches'];
                         $cargo_total = ($numero_noches)*($cpnm);
                         $cargo_total2 = ($numero_noches)*($cpnm2);
                         $cargo_total3 = ($numero_noches)*($cpnm3);
                         $cargo_total4 = ($numero_noches)*($cpnm4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 += ($costohotel ['sglm7']) / 7 + (($chm87 * $room1_c) / 7) + (($fdm_adult87 * $room1 * $frday) / 7) + (($fdm_child87 * $room1_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += ($costohotel ['dblm7']) / 7 + (($chm87 * $room1_c) / 14) + (($fdm_adult87 * $room1 * $frday) / 14) + (($fdm_child87 * $room1_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += ($costohotel ['tplm7']) / 7 + (($chm87 * $room1_c) / 21) + (($fdm_adult87 * $room1 * $frday) / 21) + (($fdm_child87 * $room1_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += ($costohotel ['quam7']) / 7 + (($chm87 * $room1_c) / 28) + (($fdm_adult87 * $room1 * $frday) / 28) + (($fdm_child87 * $room1_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                         }
                     }
                     
                     if ($numNoches['noches'] == 7 && $categor == 3 && $room1 > 0 && $tarifa_p1m87 > '0.00') {
                         
                         $numero_noches = $numNoches['noches'];
                         $cargo_total = ($numero_noches)*($cpnm);
                         $cargo_total2 = ($numero_noches)*($cpnm2);
                         $cargo_total3 = ($numero_noches)*($cpnm3);
                         $cargo_total4 = ($numero_noches)*($cpnm4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 +=  $tarifa_total_r1_87m + (($fdm_adult87 * $room1 * $frday) / 7) + (($fdm_child87 * $room1_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 +=  $tarifa_total_r1_87m + (($fdm_adult87 * $room1 * $frday) / 14) + (($fdm_child87 * $room1_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 +=  $tarifa_total_r1_87m + (($fdm_adult87 * $room1 * $frday) / 21) + (($fdm_child87 * $room1_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 +=  $tarifa_total_r1_87m + (($fdm_adult87 * $room1 * $frday) / 28) + (($fdm_child87 * $room1_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                         }
                     }
 
                     //TOUR 87 DELUXE
 
 
                     if ($numNoches['noches'] == 7 && $categor == 4 && $room1 > 0 && $tarifa_p1d87 == '0.00') {
                         
                         $numero_noches = $numNoches['noches'];
                         $cargo_total = ($numero_noches)*($cpnd);
                         $cargo_total2 = ($numero_noches)*($cpnd2);
                         $cargo_total3 = ($numero_noches)*($cpnd3);
                         $cargo_total4 = ($numero_noches)*($cpnd4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 += ($costohotel ['sgld7']) / 7 + (($chd87 * $room1_c) / 7) + (($fdd_adult87 * $room1 * $frday) / 7) + (($fdd_child87 * $room1_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += ($costohotel ['dbld7']) / 7 + (($chd87 * $room1_c) / 14) + (($fdd_adult87 * $room1 * $frday) / 14) + (($fdd_child87 * $room1_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += ($costohotel ['tpld7']) / 7 + (($chd87 * $room1_c) / 21) + (($fdd_adult87 * $room1 * $frday) / 21) + (($fdd_child87 * $room1_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += ($costohotel ['quad7']) / 7 + (($chd87 * $room1_c) / 28) + (($fdd_adult87 * $room1 * $frday) / 28) + (($fdd_child87 * $room1_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                         }
                     }
                     
                     if ($numNoches['noches'] == 7 && $categor == 4 && $room1 > 0 && $tarifa_p1d87 > '0.00') {
                         
                         $numero_noches = $numNoches['noches'];
                         $cargo_total = ($numero_noches)*($cpnd);
                         $cargo_total2 = ($numero_noches)*($cpnd2);
                         $cargo_total3 = ($numero_noches)*($cpnd3);
                         $cargo_total4 = ($numero_noches)*($cpnd4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 +=  $tarifa_total_r1_87d + (($fdd_adult87 * $room1 * $frday) / 7) + (($fdd_child87 * $room1_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 +=  $tarifa_total_r1_87d + (($fdd_adult87 * $room1 * $frday) / 14) + (($fdd_child87 * $room1_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 +=  $tarifa_total_r1_87d + (($fdd_adult87 * $room1 * $frday) / 21) + (($fdd_child87 * $room1_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 +=  $tarifa_total_r1_87d + (($fdd_adult87 * $room1 * $frday) / 28) + (($fdd_child87 * $room1_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                         }
                     }
 
                     //TOUR 98 VALUE
 
 
 
                     if ($numNoches['noches'] == 8 && $categor == 2 && $room1 > 0 && $tarifa_p1v98 == '0.00') {
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnv);
                         $cargo_total2 = ($numero_noches)*($cpnv2);
                         $cargo_total3 = ($numero_noches)*($cpnv3);
                         $cargo_total4 = ($numero_noches)*($cpnv4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 += ($costohotel ['sgl8']) / 8 + (($chv98 * $room1_c) / 8) + (($fdv_adult98 * $room1 * $frday) / 8) + (($fdv_child98 * $room1_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += ($costohotel ['dbl8']) / 8 + (($chv98 * $room1_c) / 16) + (($fdv_adult98 * $room1 * $frday) / 16) + (($fdv_child98 * $room1_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += ($costohotel ['tpl8']) / 8 + (($chv98 * $room1_c) / 24) + (($fdv_adult98 * $room1 * $frday) / 24) + (($fdv_child98 * $room1_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += ($costohotel ['qua8']) / 8 + (($chv98 * $room1_c) / 32) + (($fdv_adult98 * $room1 * $frday) / 32) + (($fdv_child98 * $room1_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                         }
                     }
                     
                     if ($numNoches['noches'] == 8 && $categor == 2 && $room1 > 0 && $tarifa_p1v98 > '0.00') {
                         
                         $numero_noches = $numNoches['noches'];                        
                         $cargo_total = ($numero_noches)*($cpnv);
                         $cargo_total2 = ($numero_noches)*($cpnv2);
                         $cargo_total3 = ($numero_noches)*($cpnv3);
                         $cargo_total4 = ($numero_noches)*($cpnv4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 +=  $tarifa_total_r1_98v + (($fdv_adult98 * $room1 * $frday) / 8) + (($fdv_child98 * $room1_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 +=  $tarifa_total_r1_98v + (($fdv_adult98 * $room1 * $frday) / 16) + (($fdv_child98 * $room1_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 +=  $tarifa_total_r1_98v + (($fdv_adult98 * $room1 * $frday) / 24) + (($fdv_child98 * $room1_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 +=  $tarifa_total_r1_98v + (($fdv_adult98 * $room1 * $frday) / 32) + (($fdv_child98 * $room1_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                         }
                     }
 
                     //TOUR 98 MODERATE
 
 
                     if ($numNoches['noches'] == 8 && $categor == 3 && $room1 > 0 && $tarifa_p1m98 == '0.00') {
                         
                         $numero_noches = $numNoches['noches'];
                         $cargo_total = ($numero_noches)*($cpnm);
                         $cargo_total2 = ($numero_noches)*($cpnm2);
                         $cargo_total3 = ($numero_noches)*($cpnm3);
                         $cargo_total4 = ($numero_noches)*($cpnm4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 += ($costohotel ['sglm8']) / 8 + (($chm98 * $room1_c) / 8) + (($fdm_adult98 * $room1 * $frday) / 8) + (($fdm_child98 * $room1_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += ($costohotel ['dblm8']) / 8 + (($chm98 * $room1_c) / 16) + (($fdm_adult98 * $room1 * $frday) / 16) + (($fdm_child98 * $room1_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += ($costohotel ['tplm8']) / 8 + (($chm98 * $room1_c) / 24) + (($fdm_adult98 * $room1 * $frday) / 24) + (($fdm_child98 * $room1_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += ($costohotel ['quam8']) / 8 + (($chm98 * $room1_c) / 32) + (($fdm_adult98 * $room1 * $frday) / 32) + (($fdm_child98 * $room1_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                         }
                     }
                     
                     if ($numNoches['noches'] == 8 && $categor == 3 && $room1 > 0 && $tarifa_p1m98 > '0.00') {
                         
                         $numero_noches = $numNoches['noches'];
                         $cargo_total = ($numero_noches)*($cpnm);
                         $cargo_total2 = ($numero_noches)*($cpnm2);
                         $cargo_total3 = ($numero_noches)*($cpnm3);
                         $cargo_total4 = ($numero_noches)*($cpnm4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 +=  $tarifa_total_r1_98m + (($fdm_adult98 * $room1 * $frday) / 8) + (($fdm_child98 * $room1_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 +=  $tarifa_total_r1_98m + (($fdm_adult98 * $room1 * $frday) / 16) + (($fdm_child98 * $room1_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 +=  $tarifa_total_r1_98m + (($fdm_adult98 * $room1 * $frday) / 24) + (($fdm_child98 * $room1_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 +=  $tarifa_total_r1_98m + (($fdm_adult98 * $room1 * $frday) / 32) + (($fdm_child98 * $room1_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                         }
                     }
 
                     //TOUR 98 DELUXE
 
 
                     if ($numNoches['noches'] == 8 && $categor == 4 && $room1 > 0 && $tarifa_p1d98 == '0.00') {
                         
                         $numero_noches = $numNoches['noches'];
                         $cargo_total = ($numero_noches)*($cpnd);
                         $cargo_total2 = ($numero_noches)*($cpnd2);
                         $cargo_total3 = ($numero_noches)*($cpnd3);
                         $cargo_total4 = ($numero_noches)*($cpnd4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 += ($costohotel ['sgld8']) / 8 + (($chd98 * $room1_c) / 8) + (($fdd_adult98 * $room1 * $frday) / 8) + (($fdd_child98 * $room1_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 += ($costohotel ['dbld8']) / 8 + (($chd98 * $room1_c) / 16) + (($fdd_adult98 * $room1 * $frday) / 16) + (($fdd_child98 * $room1_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 += ($costohotel ['tpld8']) / 8 + (($chd98 * $room1_c) / 24) + (($fdd_adult98 * $room1 * $frday) / 24) + (($fdd_child98 * $room1_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 += ($costohotel ['quad8']) / 8 + (($chd98 * $room1_c) / 32) + (($fdd_adult98 * $room1 * $frday) / 32) + (($fdd_child98 * $room1_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                         }
                     }
                     
                     if ($numNoches['noches'] == 8 && $categor == 4 && $room1 > 0 && $tarifa_p1d98 > '0.00') {
                         
                         $numero_noches = $numNoches['noches'];
                         $cargo_total = ($numero_noches)*($cpnd);
                         $cargo_total2 = ($numero_noches)*($cpnd2);
                         $cargo_total3 = ($numero_noches)*($cpnd3);
                         $cargo_total4 = ($numero_noches)*($cpnd4);
                         
 
                         if ($room1 == 1) {
                             $priceRoom1 +=  $tarifa_total_r1_98d + (($fdd_adult98 * $room1 * $frday) / 8) + (($fdd_child98 * $room1_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                         }
                         if ($room1 == 2) {
                             $priceRoom1 +=  $tarifa_total_r1_98d + (($fdd_adult98 * $room1 * $frday) / 16) + (($fdd_child98 * $room1_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                         }
                         if ($room1 == 3) {
                             $priceRoom1 +=  $tarifa_total_r1_98d + (($fdd_adult98 * $room1 * $frday) / 24) + (($fdd_child98 * $room1_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                         }
                         if ($room1 == 4) {
                             $priceRoom1 +=  $tarifa_total_r1_98d + (($fdd_adult98 * $room1 * $frday) / 32) + (($fdd_child98 * $room1_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                         }
                     }
 
                     date_add($fecha, date_interval_create_from_date_string('1 days'));
                     $contador++;
 //                    print_r(Doo::db()->showSQL());
                 }
 //                exit;
                 //$priceRoom1 = (round($priceRoom1) * $room1);
                 $priceRoom1 = $priceRoom1 * $room1;
             } else {
                 $priceRoom1 = 0;
             }
         }
 
         //Costo habitacion 2
         // /room # 2
         if (isset($room2) && $room2 > 0) {
             $contador = 0;
             while ($fecha2->format("Y-m-d") < $fecha_fin->format("Y-m-d")) {
                 if ($noches_escogidas != 0) {
                     if ($noches_escogidas == $contador) {
                         break;
                     }
                 }
                 //$fec = strtotime($toursbooking ['fecha_llegada']);//$fecha->getTimestamp();
                 $fec = $fecha2->getTimestamp();
 
                 $sql = 'SELECT t1.id,t1.breakfast,t1.resoftfe,t1.nombre,t3.id as comifi,t3.sgl,t3.dbl,t3.tpl,t3.qua,t3.sgl2,t3.dbl2,t3.tpl2,t3.qua2,t3.sgl3,t3.dbl3,t3.tpl3,t3.qua3,t3.sgl4,t3.dbl4,t3.tpl4,t3.qua4,t3.sgl5,t3.dbl5,t3.tpl5,t3.qua5,t3.sgl6,t3.dbl6,t3.tpl6,t3.qua6,t3.sgl7,t3.dbl7,t3.tpl7,t3.qua7,t3.sgl8,t3.dbl8,t3.tpl8,t3.qua8,t3.sglm,t3.dblm,t3.tplm,t3.quam,t3.sglm2,t3.dblm2,t3.tplm2,t3.quam2,t3.sglm3,t3.dblm3,t3.tplm3,t3.quam3,t3.sglm4,t3.dblm4,t3.tplm4,t3.quam4,t3.sglm5,t3.dblm5,t3.tplm5,t3.quam5,t3.sglm6,t3.dblm6,t3.tplm6,t3.quam6,t3.sglm7,t3.dblm7,t3.tplm7,t3.quam7,t3.sglm8,t3.dblm8,t3.tplm8,t3.quam8,t3.sgld,t3.dbld,t3.tpld,t3.quad,t3.sgld2,t3.dbld2,t3.tpld2,t3.quad2,t3.sgld3,t3.dbld3,t3.tpld3,t3.quad3,t3.sgld4,t3.dbld4,t3.tpld4,t3.quad4,t3.sgld5,t3.dbld5,t3.tpld5,t3.quad5,t3.sgld6,t3.dbld6,t3.tpld6,t3.quad6,t3.sgld7,t3.dbld7,t3.tpld7,t3.quad7,t3.sgld8,t3.dbld8,t3.tpld8,t3.quad8,t3.chv21,t3.chm21,t3.chd21,t3.chv32,t3.chm32,t3.chd32,t3.chv43,t3.chm43,t3.chd43,t3.chv54,t3.chm54,t3.chd54,t3.chv65,t3.chm65,t3.chd65,t3.chv76,t3.chm76,t3.chd76,t3.chv87,t3.chm87,t3.chd87,t3.chv98,t3.chm98,t3.chd98,t3.netax,t3.comtax,t3.costax,t3.id_ratesvalid,t3.breackfast,t3.fdv_adult21,t3.fdv_child21,t3.fdm_adult21,t3.fdm_child21,t3.fdd_adult21,t3.fdd_child21,t3.fdv_adult32,t3.fdv_child32,t3.fdm_adult32,t3.fdm_child32,t3.fdd_adult32,t3.fdd_child32,t3.fdv_adult43,t3.fdv_child43,t3.fdm_adult43,t3.fdm_child43,t3.fdd_adult43,t3.fdd_child43,t3.fdv_adult54,t3.fdv_child54,t3.fdm_adult54,t3.fdm_child54,t3.fdd_adult54,t3.fdd_child54,t3.fdv_adult65,t3.fdv_child65,t3.fdm_adult65,t3.fdm_child65,t3.fdd_adult65,t3.fdd_child65,t3.fdv_adult76,t3.fdv_child76,t3.fdm_adult76,t3.fdm_child76,t3.fdd_adult76,t3.fdd_child76,t3.fdv_adult87,t3.fdv_child87,t3.fdm_adult87,t3.fdm_child87,t3.fdd_adult87,t3.fdd_child87,t3.fdv_adult98,t3.fdv_child98,t3.fdm_adult98,t3.fdm_child98,t3.fdd_adult98,t3.fdd_child98,t1.categoria
                         FROM hoteles t1	
                         LEFT JOIN comifijas t3 ON (
                         t1.id = t3.id_hotel											
                         AND t3.fecha_ini <= ' . $fec . ' 
                         AND t3.fecha_fin  >= ' . $fec . '
                         )
                         WHERE t3.id_hotel  = ' . $hotel . ' AND t3.id_ratesvalid = ' . $id_tour . '';
                 $rs = Doo::db()->query($sql);
                 $costohotel = $rs->fetch();
                 if (empty($costohotel)) {
                     echo ' <script>$("input[type=\'checkbox\'").attr("checked",false).change();
                             $( "#dialog-message-t" ).dialog({
                                 modal: true,
                                 buttons: {
                                     Ok: function() {
                                         $( this ).dialog( "close" );
                                     }
                                 }
                             });</script>
                      ';
                     exit;
                 }
 
                 //$bandera = 2; 
                 //TOUR 21 VALUE
 
 
 
                 if ($numNoches['noches'] == 1 && $categor == 2 && $room2 > 0 && $tarifa_p1v21 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room2 == 1) {
                         
                         //($chv21*$room1_c)+($fdv_adult21*$room1*$free_night_buffet)+($fdv_child21*$room1_c*$free_night_buffet);
                         $priceRoom2 += $costohotel ['sgl'] + ($chv21 * $room2_c) + ($fdv_adult21 * $room2 * $frday) + ($fdv_child21 * $room2_c * $frday) + ($cargo_total) + ($cargo_total2) + ($cargo_total3) + ($cargo_total4);
                         //echo $priceRoom2;
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += $costohotel ['dbl'] + (($chv21 * $room2_c) / 2) + (($fdv_adult21 * $room2 * $frday) / 2) + (($fdv_child21 * $room2_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += $costohotel ['tpl'] + (($chv21 * $room2_c) / 3) + (($fdv_adult21 * $room2 * $frday) / 3) + (($fdv_child21 * $room2_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += $costohotel ['qua'] + (($chv21 * $room2_c) / 4) + (($fdv_adult21 * $room2 * $frday) / 4) + (($fdv_child21 * $room2_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                 }
                 
                 if ($numNoches['noches'] == 1 && $categor == 2 && $room2 > 0 && $tarifa_p1v21 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room2 == 1) {
                         
                         //($chv21*$room1_c)+($fdv_adult21*$room1*$free_night_buffet)+($fdv_child21*$room1_c*$free_night_buffet);
                         $priceRoom2 +=  $tarifa_total_r2_21v + ($fdv_adult21 * $room2 * $frday) + ($fdv_child21 * $room2_c * $frday) + ($cargo_total) + ($cargo_total2) + ($cargo_total3) + ($cargo_total4);
                         //echo $priceRoom2;
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_21v + (($fdv_adult21 * $room2 * $frday) / 2) + (($fdv_child21 * $room2_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_21v + (($fdv_adult21 * $room2 * $frday) / 3) + (($fdv_child21 * $room2_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_21v + (($fdv_adult21 * $room2 * $frday) / 4) + (($fdv_child21 * $room2_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                 }
 
                 //TOUR 21 MODERATE
 
 
                 if ($numNoches['noches'] == 1 && $categor == 3 && $room2 > 0 && $tarifa_p1m21 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += $costohotel ['sglm'] + ($chm21 * $room2_c) + ($fdm_adult21 * $room2 * $frday) + ($fdm_child21 * $room2_c * $frday) + ($cargo_total) + ($cargo_total2) + ($cargo_total3) + ($cargo_total4);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += $costohotel ['dblm'] + (($chm21 * $room2_c) / 2) + (($fdm_adult21 * $room2 * $frday) / 2) + (($fdm_child21 * $room2_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += $costohotel ['tplm'] + (($chm21 * $room2_c) / 3) + (($fdm_adult21 * $room2 * $frday) / 3) + (($fdm_child21 * $room2_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += $costohotel ['quam'] + (($chm21 * $room2_c) / 4) + (($fdm_adult21 * $room2 * $frday) / 4) + (($fdm_child21 * $room2_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                 }
                 
                 if ($numNoches['noches'] == 1 && $categor == 3 && $room2 > 0 && $tarifa_p1m21 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_21m + ($fdm_adult21 * $room2 * $frday) + ($fdm_child21 * $room2_c * $frday) + ($cargo_total) + ($cargo_total2) + ($cargo_total3) + ($cargo_total4);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_21m + (($fdm_adult21 * $room2 * $frday) / 2) + (($fdm_child21 * $room2_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_21m + (($fdm_adult21 * $room2 * $frday) / 3) + (($fdm_child21 * $room2_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_21m + (($fdm_adult21 * $room2 * $frday) / 4) + (($fdm_child21 * $room2_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                 }
 
                 //TOUR 21 DELUXE
 
 
                 if ($numNoches['noches'] == 1 && $categor == 4 && $room2 > 0 && $tarifa_p1d21 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += $costohotel ['sgld'] + ($chd21 * $room2_c) + ($fdd_adult21 * $room2 * $frday) + ($fdd_child21 * $room2_c * $frday) + ($cargo_total) + ($cargo_total2) + ($cargo_total3) + ($cargo_total4);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += $costohotel ['dbld'] + (($chd21 * $room2_c) / 2) + (($fdd_adult21 * $room2 * $frday) / 2) + (($fdd_child21 * $room2_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += $costohotel ['tpld'] + (($chd21 * $room2_c) / 3) + (($fdd_adult21 * $room2 * $frday) / 3) + (($fdd_child21 * $room2_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += $costohotel ['quad'] + (($chd21 * $room2_c) / 4) + (($fdd_adult21 * $room2 * $frday) / 4) + (($fdd_child21 * $room2_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                 }
                 
                 if ($numNoches['noches'] == 1 && $categor == 4 && $room2 > 0 && $tarifa_p1d21 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_21d + ($fdd_adult21 * $room2 * $frday) + ($fdd_child21 * $room2_c * $frday) + ($cargo_total) + ($cargo_total2) + ($cargo_total3) + ($cargo_total4);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_21d + (($fdd_adult21 * $room2 * $frday) / 2) + (($fdd_child21 * $room2_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_21d + (($fdd_adult21 * $room2 * $frday) / 3) + (($fdd_child21 * $room2_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_21d + (($fdd_adult21 * $room2 * $frday) / 4) + (($fdd_child21 * $room2_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                 }
 
                 //TOUR 32 VALUE
 
 
                 if ($numNoches['noches'] == 2 && $categor == 2 && $room2 > 0 && $tarifa_p1v32 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
 
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += ($costohotel ['sgl2']) / 2 + (($chv32 * $room2_c) / 2) + (($fdv_adult32 * $room2 * $frday) / 2) + (($fdv_child32 * $room2_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += ($costohotel ['dbl2']) / 2 + (($chv32 * $room2_c) / 4) + (($fdv_adult32 * $room2 * $frday) / 4) + (($fdv_child32 * $room2_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += ($costohotel ['tpl2']) / 2 + (($chv32 * $room2_c) / 6) + (($fdv_adult32 * $room2 * $frday) / 6) + (($fdv_child32 * $room2_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += ($costohotel ['qua2']) / 2 + (($chv32 * $room2_c) / 8) + (($fdv_adult32 * $room2 * $frday) / 8) + (($fdv_child32 * $room2_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                 }
                 
                 if ($numNoches['noches'] == 2 && $categor == 2 && $room2 > 0 && $tarifa_p1v32 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
 
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_32v + (($fdv_adult32 * $room2 * $frday) / 2) + (($fdv_child32 * $room2_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_32v + (($fdv_adult32 * $room2 * $frday) / 4) + (($fdv_child32 * $room2_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_32v + (($fdv_adult32 * $room2 * $frday) / 6) + (($fdv_child32 * $room2_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_32v + (($fdv_adult32 * $room2 * $frday) / 8) + (($fdv_child32 * $room2_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                 }
 
 
                 //TOUR 32 MODERATE
 
 
 
                 if ($numNoches['noches'] == 2 && $categor == 3 && $room2 > 0 && $tarifa_p1m32 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += ($costohotel ['sglm2']) / 2 + (($chm32 * $room2_c) / 2) + (($fdm_adult32 * $room2 * $frday) / 2) + (($fdm_child32 * $room2_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += ($costohotel ['dblm2']) / 2 + (($chm32 * $room2_c) / 4) + (($fdm_adult32 * $room2 * $frday) / 4) + (($fdm_child32 * $room2_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += ($costohotel ['tplm2']) / 2 + (($chm32 * $room2_c) / 6) + (($fdm_adult32 * $room2 * $frday) / 6) + (($fdm_child32 * $room2_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += ($costohotel ['quam2']) / 2 + (($chm32 * $room2_c) / 8) + (($fdm_adult32 * $room2 * $frday) / 8) + (($fdm_child32 * $room2_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                 }
                 
                 if ($numNoches['noches'] == 2 && $categor == 3 && $room2 > 0 && $tarifa_p1m32 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_32m + (($fdm_adult32 * $room2 * $frday) / 2) + (($fdm_child32 * $room2_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_32m + (($fdm_adult32 * $room2 * $frday) / 4) + (($fdm_child32 * $room2_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_32m + (($fdm_adult32 * $room2 * $frday) / 6) + (($fdm_child32 * $room2_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_32m + (($fdm_adult32 * $room2 * $frday) / 8) + (($fdm_child32 * $room2_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                 }
                 
                 //TOUR 32 DELUXE
 
 
 
                 if ($numNoches['noches'] == 2 && $categor == 4 && $room2 > 0 && $tarifa_p1d32 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += ($costohotel ['sgld2']) / 2 + (($chd32 * $room2_c) / 2) + (($fdd_adult32 * $room2 * $frday) / 2) + (($fdd_child32 * $room2_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += ($costohotel ['dbld2']) / 2 + (($chd32 * $room2_c) / 4) + (($fdd_adult32 * $room2 * $frday) / 4) + (($fdd_child32 * $room2_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += ($costohotel ['tpld2']) / 2 + (($chd32 * $room2_c) / 6) + (($fdd_adult32 * $room2 * $frday) / 6) + (($fdd_child32 * $room2_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += ($costohotel ['quad2']) / 2 + (($chd32 * $room2_c) / 8) + (($fdd_adult32 * $room2 * $frday) / 8) + (($fdd_child32 * $room2_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                 }
                 
                 if ($numNoches['noches'] == 2 && $categor == 4 && $room2 > 0 && $tarifa_p1d32 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_32d + (($fdd_adult32 * $room2 * $frday) / 2) + (($fdd_child32 * $room2_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_32d + (($fdd_adult32 * $room2 * $frday) / 4) + (($fdd_child32 * $room2_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_32d + (($fdd_adult32 * $room2 * $frday) / 6) + (($fdd_child32 * $room2_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_32d + (($fdd_adult32 * $room2 * $frday) / 8) + (($fdd_child32 * $room2_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                 }
 
 
                 //TOUR 43 VALUE
 
 
                 if ($numNoches['noches'] == 3 && $categor == 2 && $room2 > 0 && $tarifa_p1v43 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += ($costohotel ['sgl3']) / 3 + (($chv43 * $room2_c) / 3) + (($fdv_adult43 * $room2 * $frday) / 3) + (($fdv_child43 * $room2_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += ($costohotel ['dbl3']) / 3 + (($chv43 * $room2_c) / 6) + (($fdv_adult43 * $room2 * $frday) / 6) + (($fdv_child43 * $room2_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += ($costohotel ['tpl3']) / 3 + (($chv43 * $room2_c) / 9) + (($fdv_adult43 * $room2 * $frday) / 9) + (($fdv_child43 * $room2_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += ($costohotel ['qua3']) / 3 + (($chv43 * $room2_c) / 12) + (($fdv_adult43 * $room2 * $frday) / 12) + (($fdv_child43 * $room2_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                 }
                 
                 if ($numNoches['noches'] == 3 && $categor == 2 && $room2 > 0 && $tarifa_p1v43 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_43v + (($fdv_adult43 * $room2 * $frday) / 3) + (($fdv_child43 * $room2_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_43v + (($fdv_adult43 * $room2 * $frday) / 6) + (($fdv_child43 * $room2_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_43v + (($fdv_adult43 * $room2 * $frday) / 9) + (($fdv_child43 * $room2_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_43v + (($fdv_adult43 * $room2 * $frday) / 12) + (($fdv_child43 * $room2_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                 }
 
                 //TOUR 43 MODERATE
 
 
 
                 if ($numNoches['noches'] == 3 && $categor == 3 && $room2 > 0 && $tarifa_p1m43 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += ($costohotel ['sglm3']) / 3 + (($chm43 * $room2_c) / 3) + (($fdm_adult43 * $room2 * $frday) / 3) + (($fdm_child43 * $room2_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += ($costohotel ['dblm3']) / 3 + (($chm43 * $room2_c) / 6) + (($fdm_adult43 * $room2 * $frday) / 6) + (($fdm_child43 * $room2_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += ($costohotel ['tplm3']) / 3 + (($chm43 * $room2_c) / 9) + (($fdm_adult43 * $room2 * $frday) / 9) + (($fdm_child43 * $room2_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += ($costohotel ['quam3']) / 3 + (($chm43 * $room2_c) / 12) + (($fdm_adult43 * $room2 * $frday) / 12) + (($fdm_child43 * $room2_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                 }
                 
                 if ($numNoches['noches'] == 3 && $categor == 3 && $room2 > 0 && $tarifa_p1m43 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_43m + (($fdm_adult43 * $room2 * $frday) / 3) + (($fdm_child43 * $room2_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_43m + (($fdm_adult43 * $room2 * $frday) / 6) + (($fdm_child43 * $room2_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_43m + (($fdm_adult43 * $room2 * $frday) / 9) + (($fdm_child43 * $room2_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_43m + (($fdm_adult43 * $room2 * $frday) / 12) + (($fdm_child43 * $room2_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                 }
                 
                 //TOUR 43 DELUXE
 
 
 
                 if ($numNoches['noches'] == 3 && $categor == 4 && $room2 > 0 && $tarifa_p1d43 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += ($costohotel ['sgld3']) / 3 + (($chd43 * $room2_c) / 3) + (($fdd_adult43 * $room2 * $frday) / 3) + (($fdd_child43 * $room2_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += ($costohotel ['dbld3']) / 3 + (($chd43 * $room2_c) / 6) + (($fdd_adult43 * $room2 * $frday) / 6) + (($fdd_child43 * $room2_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += ($costohotel ['tpld3']) / 3 + (($chd43 * $room2_c) / 9) + (($fdd_adult43 * $room2 * $frday) / 9) + (($fdd_child43 * $room2_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += ($costohotel ['quad3']) / 3 + (($chd43 * $room2_c) / 12) + (($fdd_adult43 * $room2 * $frday) / 12) + (($fdd_child43 * $room2_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                 }
                 
                 if ($numNoches['noches'] == 3 && $categor == 4 && $room2 > 0 && $tarifa_p1d43 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_43d + (($fdd_adult43 * $room2 * $frday) / 3) + (($fdd_child43 * $room2_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_43d + (($fdd_adult43 * $room2 * $frday) / 6) + (($fdd_child43 * $room2_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_43d + (($fdd_adult43 * $room2 * $frday) / 9) + (($fdd_child43 * $room2_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_43d + (($fdd_adult43 * $room2 * $frday) / 12) + (($fdd_child43 * $room2_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                 }
                 
 
                 //TOUR 54 VALUE
 
 
 
                 if ($numNoches['noches'] == 4 && $categor == 2 && $room2 > 0 && $tarifa_p1v54 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += ($costohotel ['sgl4']) / 4 + (($chv54 * $room2_c) / 4) + (($fdv_adult54 * $room2 * $frday) / 4) + (($fdv_child54 * $room2_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += ($costohotel ['dbl4']) / 4 + (($chv54 * $room2_c) / 8) + (($fdv_adult54 * $room2 * $frday) / 8) + (($fdv_child54 * $room2_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += ($costohotel ['tpl4']) / 4 + (($chv54 * $room2_c) / 12) + (($fdv_adult54 * $room2 * $frday) / 12) + (($fdv_child54 * $room2_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += ($costohotel ['qua4']) / 4 + (($chv54 * $room2_c) / 16) + (($fdv_adult54 * $room2 * $frday) / 16) + (($fdv_child54 * $room2_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                 }
                 
                 if ($numNoches['noches'] == 4 && $categor == 2 && $room2 > 0 && $tarifa_p1v54 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_54v + (($fdv_adult54 * $room2 * $frday) / 4) + (($fdv_child54 * $room2_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_54v + (($fdv_adult54 * $room2 * $frday) / 8) + (($fdv_child54 * $room2_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_54v + (($fdv_adult54 * $room2 * $frday) / 12) + (($fdv_child54 * $room2_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_54v+ (($fdv_adult54 * $room2 * $frday) / 16) + (($fdv_child54 * $room2_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                 }
 
 
                 //TOUR 54 MODERATE
 
 
                 if ($numNoches['noches'] == 4 && $categor == 3 && $room2 > 0 && $tarifa_p1m54 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += ($costohotel ['sglm4']) / 4 + (($chm54 * $room2_c) / 4) + (($fdm_adult54 * $room2 * $frday) / 4) + (($fdm_child54 * $room2_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += ($costohotel ['dblm4']) / 4 + (($chm54 * $room2_c) / 8) + (($fdm_adult54 * $room2 * $frday) / 8) + (($fdm_child54 * $room2_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += ($costohotel ['tplm4']) / 4 + (($chm54 * $room2_c) / 12) + (($fdm_adult54 * $room2 * $frday) / 12) + (($fdm_child54 * $room2_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += ($costohotel ['quam4']) / 4 + (($chm54 * $room2_c) / 16) + (($fdm_adult54 * $room2 * $frday) / 16) + (($fdm_child54 * $room2_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                 }
                 
                 if ($numNoches['noches'] == 4 && $categor == 3 && $room2 > 0 && $tarifa_p1m54 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_54m + (($fdm_adult54 * $room2 * $frday) / 4) + (($fdm_child54 * $room2_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_54m + (($fdm_adult54 * $room2 * $frday) / 8) + (($fdm_child54 * $room2_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_54m + (($fdm_adult54 * $room2 * $frday) / 12) + (($fdm_child54 * $room2_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_54m + (($fdm_adult54 * $room2 * $frday) / 16) + (($fdm_child54 * $room2_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                 }
                 
                 
                 //TOUR 54 DELUXE
 
 
                 if ($numNoches['noches'] == 4 && $categor == 4 && $room2 > 0 && $tarifa_p1d54 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += ($costohotel ['sgld4']) / 4 + (($chd54 * $room2_c) / 4) + (($fdd_adult54 * $room2 * $frday) / 4) + (($fdd_child54 * $room2_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += ($costohotel ['dbld4']) / 4 + (($chd54 * $room2_c) / 8) + (($fdd_adult54 * $room2 * $frday) / 8) + (($fdd_child54 * $room2_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += ($costohotel ['tpld4']) / 4 + (($chd54 * $room2_c) / 12) + (($fdd_adult54 * $room2 * $frday) / 12) + (($fdd_child54 * $room2_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += ($costohotel ['quad4']) / 4 + (($chd54 * $room2_c) / 16) + (($fdd_adult54 * $room2 * $frday) / 16) + (($fdd_child54 * $room2_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                 }
                 
                 if ($numNoches['noches'] == 4 && $categor == 4 && $room2 > 0 && $tarifa_p1d54 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_54d + (($fdd_adult54 * $room2 * $frday) / 4) + (($fdd_child54 * $room2_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_54d + (($fdd_adult54 * $room2 * $frday) / 8) + (($fdd_child54 * $room2_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_54d + (($fdd_adult54 * $room2 * $frday) / 12) + (($fdd_child54 * $room2_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_54d + (($fdd_adult54 * $room2 * $frday) / 16) + (($fdd_child54 * $room2_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                 }
 
 
                 //TOUR 65 VALUE
 
 
                 if ($numNoches['noches'] == 5 && $categor == 2 && $room2 > 0 && $tarifa_p1v65 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += ($costohotel ['sgl5']) / 5 + (($chv65 * $room2_c) / 5) + (($fdv_adult65 * $room2 * $frday) / 5) + (($fdv_child65 * $room2_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += ($costohotel ['dbl5']) / 5 + (($chv65 * $room2_c) / 10) + (($fdv_adult65 * $room2 * $frday) / 10) + (($fdv_child65 * $room2_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10) + (($cargo_total3)/10) + (($cargo_total4)/10);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += ($costohotel ['tpl5']) / 5 + (($chv65 * $room2_c) / 15) + (($fdv_adult65 * $room2 * $frday) / 15) + (($fdv_child65 * $room2_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15) + (($cargo_total3)/15) + (($cargo_total4)/15);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += ($costohotel ['qua5']) / 5 + (($chv65 * $room2_c) / 20) + (($fdv_adult65 * $room2 * $frday) / 20) + (($fdv_child65 * $room2_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20) + (($cargo_total3)/20) + (($cargo_total4)/20);
                     }
                 }
                 
                 if ($numNoches['noches'] == 5 && $categor == 2 && $room2 > 0 && $tarifa_p1v65 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_65v + (($fdv_adult65 * $room2 * $frday) / 5) + (($fdv_child65 * $room2_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_65v + (($fdv_adult65 * $room2 * $frday) / 10) + (($fdv_child65 * $room2_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10) + (($cargo_total3)/10) + (($cargo_total4)/10);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_65v + (($fdv_adult65 * $room2 * $frday) / 15) + (($fdv_child65 * $room2_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15) + (($cargo_total3)/15) + (($cargo_total4)/15);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_65v + (($fdv_adult65 * $room2 * $frday) / 20) + (($fdv_child65 * $room2_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20) + (($cargo_total3)/20) + (($cargo_total4)/20);
                     }
                 }
 
                 //TOUR 65 MODERATE
 
 
                 if ($numNoches['noches'] == 5 && $categor == 3 && $room2 > 0 && $tarifa_p1m65 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += ($costohotel ['sglm5']) / 5 + (($chm65 * $room2_c) / 5) + (($fdm_adult65 * $room2 * $frday) / 5) + (($fdm_child65 * $room2_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += ($costohotel ['dblm5']) / 5 + (($chm65 * $room2_c) / 10) + (($fdm_adult65 * $room2 * $frday) / 10) + (($fdm_child65 * $room2_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10) + (($cargo_total3)/10) + (($cargo_total4)/10);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += ($costohotel ['tplm5']) / 5 + (($chm65 * $room2_c) / 15) + (($fdm_adult65 * $room2 * $frday) / 15) + (($fdm_child65 * $room2_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15) + (($cargo_total3)/15) + (($cargo_total4)/15);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += ($costohotel ['quam5']) / 5 + (($chm65 * $room2_c) / 20) + (($fdm_adult65 * $room2 * $frday) / 20) + (($fdm_child65 * $room2_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20) + (($cargo_total3)/20) + (($cargo_total4)/20);
                     }
                 }
                 
                 if ($numNoches['noches'] == 5 && $categor == 3 && $room2 > 0 && $tarifa_p1m65 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_65m + (($fdm_adult65 * $room2 * $frday) / 5) + (($fdm_child65 * $room2_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_65m + (($fdm_adult65 * $room2 * $frday) / 10) + (($fdm_child65 * $room2_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10) + (($cargo_total3)/10) + (($cargo_total4)/10);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_65m + (($fdm_adult65 * $room2 * $frday) / 15) + (($fdm_child65 * $room2_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15) + (($cargo_total3)/15) + (($cargo_total4)/15);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_65m + (($fdm_adult65 * $room2 * $frday) / 20) + (($fdm_child65 * $room2_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20) + (($cargo_total3)/20) + (($cargo_total4)/20);
                     }
                 }
                 
                 //TOUR 65 DELUXE
 
 
                 if ($numNoches['noches'] == 5 && $categor == 4 && $room2 > 0 && $tarifa_p1d65 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += ($costohotel ['sgld5']) / 5 + (($chd65 * $room2_c) / 5) + (($fdd_adult65 * $room2 * $frday) / 5) + (($fdd_child65 * $room2_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += ($costohotel ['dbld5']) / 5 + (($chd65 * $room2_c) / 10) + (($fdd_adult65 * $room2 * $frday) / 10) + (($fdd_child65 * $room2_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10) + (($cargo_total3)/10) + (($cargo_total4)/10);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += ($costohotel ['tpld5']) / 5 + (($chd65 * $room2_c) / 15) + (($fdd_adult65 * $room2 * $frday) / 15) + (($fdd_child65 * $room2_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15) + (($cargo_total3)/15) + (($cargo_total4)/15);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += ($costohotel ['quad5']) / 5 + (($chd65 * $room2_c) / 20) + (($fdd_adult65 * $room2 * $frday) / 20) + (($fdd_child65 * $room2_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20) + (($cargo_total3)/20) + (($cargo_total4)/20);
                     }
                 }
                 
                 if ($numNoches['noches'] == 5 && $categor == 4 && $room2 > 0 && $tarifa_p1d65 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_65d + (($fdd_adult65 * $room2 * $frday) / 5) + (($fdd_child65 * $room2_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_65d + (($fdd_adult65 * $room2 * $frday) / 10) + (($fdd_child65 * $room2_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10) + (($cargo_total3)/10) + (($cargo_total4)/10);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_65d + (($fdd_adult65 * $room2 * $frday) / 15) + (($fdd_child65 * $room2_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15) + (($cargo_total3)/15) + (($cargo_total4)/15);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_65d + (($fdd_adult65 * $room2 * $frday) / 20) + (($fdd_child65 * $room2_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20) + (($cargo_total3)/20) + (($cargo_total4)/20);
                     }
                 }
 
 
                 //TOUR 76 VALUE
 
 
 
                 if ($numNoches['noches'] == 6 && $categor == 2 && $room2 > 0 && $tarifa_p1v76 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += ($costohotel ['sgl6']) / 6 + (($chv76 * $room2_c) / 6) + (($fdv_adult76 * $room2 * $frday) / 6) + (($fdv_child76 * $room2_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += ($costohotel ['dbl6']) / 6 + (($chv76 * $room2_c) / 12) + (($fdv_adult76 * $room2 * $frday) / 12) + (($fdv_child76 * $room2_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += ($costohotel ['tpl6']) / 6 + (($chv76 * $room2_c) / 18) + (($fdv_adult76 * $room2 * $frday) / 18) + (($fdv_child76 * $room2_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += ($costohotel ['qua6']) / 6 + (($chv76 * $room2_c) / 24) + (($fdv_adult76 * $room2 * $frday) / 24) + (($fdv_child76 * $room2_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                 }
                 
                 if ($numNoches['noches'] == 6 && $categor == 2 && $room2 > 0 && $tarifa_p1v76 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_76v + (($fdv_adult76 * $room2 * $frday) / 6) + (($fdv_child76 * $room2_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_76v + (($fdv_adult76 * $room2 * $frday) / 12) + (($fdv_child76 * $room2_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_76v + (($fdv_adult76 * $room2 * $frday) / 18) + (($fdv_child76 * $room2_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_76v + (($fdv_adult76 * $room2 * $frday) / 24) + (($fdv_child76 * $room2_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                 }
 
                 //TOUR 76 MODERATE
 
 
                 if ($numNoches['noches'] == 6 && $categor == 3 && $room2 > 0 && $tarifa_p1m76 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += ($costohotel ['sglm6']) / 6 + (($chm76 * $room2_c) / 6) + (($fdm_adult76 * $room2 * $frday) / 6) + (($fdm_child76 * $room2_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += ($costohotel ['dblm6']) / 6 + (($chm76 * $room2_c) / 12) + (($fdm_adult76 * $room2 * $frday) / 12) + (($fdm_child76 * $room2_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += ($costohotel ['tplm6']) / 6 + (($chm76 * $room2_c) / 18) + (($fdm_adult76 * $room2 * $frday) / 18) + (($fdm_child76 * $room2_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += ($costohotel ['quam6']) / 6 + (($chm76 * $room2_c) / 24) + (($fdm_adult76 * $room2 * $frday) / 24) + (($fdm_child76 * $room2_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                 }
                 
                 if ($numNoches['noches'] == 6 && $categor == 3 && $room2 > 0 && $tarifa_p1m76 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_76m + (($fdm_adult76 * $room2 * $frday) / 6) + (($fdm_child76 * $room2_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_76m + (($fdm_adult76 * $room2 * $frday) / 12) + (($fdm_child76 * $room2_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_76m + (($fdm_adult76 * $room2 * $frday) / 18) + (($fdm_child76 * $room2_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_76m + (($fdm_adult76 * $room2 * $frday) / 24) + (($fdm_child76 * $room2_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                 }
                 
                 //TOUR 76 DELUXE
 
 
                 if ($numNoches['noches'] == 6 && $categor == 4 && $room2 > 0 && $tarifa_p1d76 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += ($costohotel ['sgld6']) / 6 + (($chd76 * $room2_c) / 6) + (($fdd_adult76 * $room2 * $frday) / 6) + (($fdd_child76 * $room2_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += ($costohotel ['dbld6']) / 6 + (($chd76 * $room2_c) / 12) + (($fdd_adult76 * $room2 * $frday) / 12) + (($fdd_child76 * $room2_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += ($costohotel ['tpld6']) / 6 + (($chd76 * $room2_c) / 18) + (($fdd_adult76 * $room2 * $frday) / 18) + (($fdd_child76 * $room2_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += ($costohotel ['quad6']) / 6 + (($chd76 * $room2_c) / 24) + (($fdd_adult76 * $room2 * $frday) / 24) + (($fdd_child76 * $room2_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                 }
                 
                 if ($numNoches['noches'] == 6 && $categor == 4 && $room2 > 0 && $tarifa_p1d76 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_76d + (($fdd_adult76 * $room2 * $frday) / 6) + (($fdd_child76 * $room2_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_76d + (($fdd_adult76 * $room2 * $frday) / 12) + (($fdd_child76 * $room2_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_76d + (($fdd_adult76 * $room2 * $frday) / 18) + (($fdd_child76 * $room2_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_76d + (($fdd_adult76 * $room2 * $frday) / 24) + (($fdd_child76 * $room2_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                 }
 
                 //TOUR 87 VALUE 
 
 
 
                 if ($numNoches['noches'] == 7 && $categor == 2 && $room2 > 0 && $tarifa_p1v87 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += ($costohotel ['sgl7']) / 7 + (($chv87 * $room2_c) / 7) + (($fdv_adult87 * $room2 * $frday) / 7) + (($fdv_child87 * $room2_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += ($costohotel ['dbl7']) / 7 + (($chv87 * $room2_c) / 14) + (($fdv_adult87 * $room2 * $frday) / 14) + (($fdv_child87 * $room2_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += ($costohotel ['tpl7']) / 7 + (($chv87 * $room2_c) / 21) + (($fdv_adult87 * $room2 * $frday) / 21) + (($fdv_child87 * $room2_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += ($costohotel ['qua7']) / 7 + (($chv87 * $room2_c) / 28) + (($fdv_adult87 * $room2 * $frday) / 28) + (($fdv_child87 * $room2_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                     }
                 }
                 
                 if ($numNoches['noches'] == 7 && $categor == 2 && $room2 > 0 && $tarifa_p1v87 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_87v + (($fdv_adult87 * $room2 * $frday) / 7) + (($fdv_child87 * $room2_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_87v + (($fdv_adult87 * $room2 * $frday) / 14) + (($fdv_child87 * $room2_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_87v + (($fdv_adult87 * $room2 * $frday) / 21) + (($fdv_child87 * $room2_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_87v + (($fdv_adult87 * $room2 * $frday) / 28) + (($fdv_child87 * $room2_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                     }
                 }
 
                 //TOUR 87 MODERATE
 
 
 
                 if ($numNoches['noches'] == 7 && $categor == 3 && $room2 > 0 && $tarifa_p1m87 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
 
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += ($costohotel ['sglm7']) / 7 + (($chm87 * $room2_c) / 7) + (($fdm_adult87 * $room2 * $frday) / 7) + (($fdm_child87 * $room2_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += ($costohotel ['dblm7']) / 7 + (($chm87 * $room2_c) / 14) + (($fdm_adult87 * $room2 * $frday) / 14) + (($fdm_child87 * $room2_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += ($costohotel ['tplm7']) / 7 + (($chm87 * $room2_c) / 21) + (($fdm_adult87 * $room2 * $frday) / 21) + (($fdm_child87 * $room2_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += ($costohotel ['quam7']) / 7 + (($chm87 * $room2_c) / 28) + (($fdm_adult87 * $room2 * $frday) / 28) + (($fdm_child87 * $room2_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                     }
                 }
                 
                 if ($numNoches['noches'] == 7 && $categor == 3 && $room2 > 0 && $tarifa_p1m87 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
 
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_87m + (($fdm_adult87 * $room2 * $frday) / 7) + (($fdm_child87 * $room2_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_87m + (($fdm_adult87 * $room2 * $frday) / 14) + (($fdm_child87 * $room2_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_87m + (($fdm_adult87 * $room2 * $frday) / 21) + (($fdm_child87 * $room2_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_87m + (($fdm_adult87 * $room2 * $frday) / 28) + (($fdm_child87 * $room2_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                     }
                 }
                 
                 //TOUR 87 DELUXE
 
 
 
                 if ($numNoches['noches'] == 7 && $categor == 4 && $room2 > 0 && $tarifa_p1d87 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
 
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += ($costohotel ['sgld7']) / 7 + (($chd87 * $room2_c) / 7) + (($fdd_adult87 * $room2 * $frday) / 7) + (($fdd_child87 * $room2_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += ($costohotel ['dbld7']) / 7 + (($chd87 * $room2_c) / 14) + (($fdd_adult87 * $room2 * $frday) / 14) + (($fdd_child87 * $room2_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += ($costohotel ['tpld7']) / 7 + (($chd87 * $room2_c) / 21) + (($fdd_adult87 * $room2 * $frday) / 21) + (($fdd_child87 * $room2_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += ($costohotel ['quad7']) / 7 + (($chd87 * $room2_c) / 28) + (($fdd_adult87 * $room2 * $frday) / 28) + (($fdd_child87 * $room2_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                     }
                 }
                 
                 if ($numNoches['noches'] == 7 && $categor == 4 && $room2 > 0 && $tarifa_p1d87 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
 
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_87m + (($fdd_adult87 * $room2 * $frday) / 7) + (($fdd_child87 * $room2_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_87m + (($fdd_adult87 * $room2 * $frday) / 14) + (($fdd_child87 * $room2_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_87m + (($fdd_adult87 * $room2 * $frday) / 21) + (($fdd_child87 * $room2_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_87m + (($fdd_adult87 * $room2 * $frday) / 28) + (($fdd_child87 * $room2_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                     }
                 }
 
 
                 // TOUR 98 VALUE
 
 
 
                 if ($numNoches['noches'] == 8 && $categor == 2 && $room2 > 0 && $tarifa_p1v98 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += ($costohotel ['sgl8']) / 8 + (($chv98 * $room2_c) / 8) + (($fdv_adult98 * $room2 * $frday) / 8) + (($fdv_child98 * $room2_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += ($costohotel ['dbl8']) / 8 + (($chv98 * $room2_c) / 16) + (($fdv_adult98 * $room2 * $frday) / 16) + (($fdv_child98 * $room2_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += ($costohotel ['tpl8']) / 8 + (($chv98 * $room2_c) / 24) + (($fdv_adult98 * $room2 * $frday) / 24) + (($fdv_child98 * $room2_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += ($costohotel ['qua8']) / 8 + (($chv98 * $room2_c) / 32) + (($fdv_adult98 * $room2 * $frday) / 32) + (($fdv_child98 * $room2_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                     }
                 }
                 
                 if ($numNoches['noches'] == 8 && $categor == 2 && $room2 > 0 && $tarifa_p1v98 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_98v + (($fdv_adult98 * $room2 * $frday) / 8) + (($fdv_child98 * $room2_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_98v + (($fdv_adult98 * $room2 * $frday) / 16) + (($fdv_child98 * $room2_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_98v + (($fdv_adult98 * $room2 * $frday) / 24) + (($fdv_child98 * $room2_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_98v + (($fdv_adult98 * $room2 * $frday) / 32) + (($fdv_child98 * $room2_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                     }
                 }
 
                 //TOUR 98 MODERATE
 
 
                 if ($numNoches['noches'] == 8 && $categor == 3 && $room2 > 0 && $tarifa_p1m98 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += ($costohotel ['sglm8']) / 8 + (($chm98 * $room2_c) / 8) + (($fdm_adult98 * $room2 * $frday) / 8) + (($fdm_child98 * $room2_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += ($costohotel ['dblm8']) / 8 + (($chm98 * $room2_c) / 16) + (($fdm_adult98 * $room2 * $frday) / 16) + (($fdm_child98 * $room2_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += ($costohotel ['tplm8']) / 8 + (($chm98 * $room2_c) / 24) + (($fdm_adult98 * $room2 * $frday) / 24) + (($fdm_child98 * $room2_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += ($costohotel ['quam8']) / 8 + (($chm98 * $room2_c) / 32) + (($fdm_adult98 * $room2 * $frday) / 32) + (($fdm_child98 * $room2_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                     }
                 }
                 
                 if ($numNoches['noches'] == 8 && $categor == 3 && $room2 > 0 && $tarifa_p1m98 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_98m + (($fdm_adult98 * $room2 * $frday) / 8) + (($fdm_child98 * $room2_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_98m + (($fdm_adult98 * $room2 * $frday) / 16) + (($fdm_child98 * $room2_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_98m + (($fdm_adult98 * $room2 * $frday) / 24) + (($fdm_child98 * $room2_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_98m + (($fdm_adult98 * $room2 * $frday) / 32) + (($fdm_child98 * $room2_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                     }
                 }
                 
                 //TOUR 98 DELUXE
 
 
                 if ($numNoches['noches'] == 8 && $categor == 4 && $room2 > 0 && $tarifa_p1d98 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 += ($costohotel ['sgld8']) / 8 + (($chd98 * $room2_c) / 8) + (($fdd_adult98 * $room2 * $frday) / 8) + (($fdd_child98 * $room2_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 += ($costohotel ['dbld8']) / 8 + (($chd98 * $room2_c) / 16) + (($fdd_adult98 * $room2 * $frday) / 16) + (($fdd_child98 * $room2_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 += ($costohotel ['tpld8']) / 8 + (($chd98 * $room2_c) / 24) + (($fdd_adult98 * $room2 * $frday) / 24) + (($fdd_child98 * $room2_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 += ($costohotel ['quad8']) / 8 + (($chd98 * $room2_c) / 32) + (($fdd_adult98 * $room2 * $frday) / 32) + (($fdd_child98 * $room2_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                     }
                 }
                 
                 if ($numNoches['noches'] == 8 && $categor == 4 && $room2 > 0 && $tarifa_p1d98 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room2 == 1) {
 
                         $priceRoom2 +=  $tarifa_total_r2_98d + (($fdd_adult98 * $room2 * $frday) / 8) + (($fdd_child98 * $room2_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room2 == 2) {
 
                         $priceRoom2 +=  $tarifa_total_r2_98d + (($fdd_adult98 * $room2 * $frday) / 16) + (($fdd_child98 * $room2_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                     if ($room2 == 3) {
 
                         $priceRoom2 +=  $tarifa_total_r2_98d + (($fdd_adult98 * $room2 * $frday) / 24) + (($fdd_child98 * $room2_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                     if ($room2 == 4) {
 
                         $priceRoom2 +=  $tarifa_total_r2_98d + (($fdd_adult98 * $room2 * $frday) / 32) + (($fdd_child98 * $room2_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                     }
                 }
 
                 if ($room2 == 0) {
 
                     $priceRoom2 = 0;
                 }
 
                 date_add($fecha2, date_interval_create_from_date_string('1 days'));
                 $contador++;
             }
 
             //$priceRoom2 = round($priceRoom2) * $room2;
             $priceRoom2 = $priceRoom2 * $room2;
         } else {
             $priceRoom2 = 0;
         }
         //Costo habitacion 3
         // /room # 3
         if (isset($room3) && $room3 > 0) {
             $contador = 0;
             while ($fecha3->format("Y-m-d") < $fecha_fin->format("Y-m-d")) {
                 if ($noches_escogidas != 0) {
                     if ($noches_escogidas == $contador) {
                         break;
                     }
                 }
                 //$fec = strtotime($toursbooking ['fecha_llegada']);//$fecha->getTimestamp();
 
                 $fec = $fecha3->getTimestamp();
                 $sql = 'SELECT t1.id,t1.breakfast,t1.resoftfe,t1.nombre,t3.id as comifi,t3.sgl,t3.dbl,t3.tpl,t3.qua,t3.sgl2,t3.dbl2,t3.tpl2,t3.qua2,t3.sgl3,t3.dbl3,t3.tpl3,t3.qua3,t3.sgl4,t3.dbl4,t3.tpl4,t3.qua4,t3.sgl5,t3.dbl5,t3.tpl5,t3.qua5,t3.sgl6,t3.dbl6,t3.tpl6,t3.qua6,t3.sgl7,t3.dbl7,t3.tpl7,t3.qua7,t3.sgl8,t3.dbl8,t3.tpl8,t3.qua8,t3.sglm,t3.dblm,t3.tplm,t3.quam,t3.sglm2,t3.dblm2,t3.tplm2,t3.quam2,t3.sglm3,t3.dblm3,t3.tplm3,t3.quam3,t3.sglm4,t3.dblm4,t3.tplm4,t3.quam4,t3.sglm5,t3.dblm5,t3.tplm5,t3.quam5,t3.sglm6,t3.dblm6,t3.tplm6,t3.quam6,t3.sglm7,t3.dblm7,t3.tplm7,t3.quam7,t3.sglm8,t3.dblm8,t3.tplm8,t3.quam8,t3.sgld,t3.dbld,t3.tpld,t3.quad,t3.sgld2,t3.dbld2,t3.tpld2,t3.quad2,t3.sgld3,t3.dbld3,t3.tpld3,t3.quad3,t3.sgld4,t3.dbld4,t3.tpld4,t3.quad4,t3.sgld5,t3.dbld5,t3.tpld5,t3.quad5,t3.sgld6,t3.dbld6,t3.tpld6,t3.quad6,t3.sgld7,t3.dbld7,t3.tpld7,t3.quad7,t3.sgld8,t3.dbld8,t3.tpld8,t3.quad8,t3.chv21,t3.chm21,t3.chd21,t3.chv32,t3.chm32,t3.chd32,t3.chv43,t3.chm43,t3.chd43,t3.chv54,t3.chm54,t3.chd54,t3.chv65,t3.chm65,t3.chd65,t3.chv76,t3.chm76,t3.chd76,t3.chv87,t3.chm87,t3.chd87,t3.chv98,t3.chm98,t3.chd98,t3.netax,t3.comtax,t3.costax,t3.id_ratesvalid,t3.breackfast,t3.fdv_adult21,t3.fdv_child21,t3.fdm_adult21,t3.fdm_child21,t3.fdd_adult21,t3.fdd_child21,t3.fdv_adult32,t3.fdv_child32,t3.fdm_adult32,t3.fdm_child32,t3.fdd_adult32,t3.fdd_child32,t3.fdv_adult43,t3.fdv_child43,t3.fdm_adult43,t3.fdm_child43,t3.fdd_adult43,t3.fdd_child43,t3.fdv_adult54,t3.fdv_child54,t3.fdm_adult54,t3.fdm_child54,t3.fdd_adult54,t3.fdd_child54,t3.fdv_adult65,t3.fdv_child65,t3.fdm_adult65,t3.fdm_child65,t3.fdd_adult65,t3.fdd_child65,t3.fdv_adult76,t3.fdv_child76,t3.fdm_adult76,t3.fdm_child76,t3.fdd_adult76,t3.fdd_child76,t3.fdv_adult87,t3.fdv_child87,t3.fdm_adult87,t3.fdm_child87,t3.fdd_adult87,t3.fdd_child87,t3.fdv_adult98,t3.fdv_child98,t3.fdm_adult98,t3.fdm_child98,t3.fdd_adult98,t3.fdd_child98,t1.categoria		
                         FROM hoteles t1	
                         LEFT JOIN comifijas t3 ON (
                         t1.id = t3.id_hotel											
                         AND t3.fecha_ini <= ' . $fec . ' 
                         AND t3.fecha_fin  >= ' . $fec . '
                         )
                         WHERE t3.id_hotel  = ' . $hotel . ' AND t3.id_ratesvalid = ' . $id_tour . '';
                 $rs = Doo::db()->query($sql);
                 $costohotel = $rs->fetch();
                 if (empty($costohotel)) {
                     echo ' <script>$("input[type=\'checkbox\'").attr("checked",false).change();
                             $( "#dialog-message-t" ).dialog({
                                 modal: true,
                                 buttons: {
                                     Ok: function() {
                                         $( this ).dialog( "close" );
                                     }
                                 }
                             });</script>
                      ';
                     exit;
                 }
 
                 //$bandera = 2 ;
                 //TOUR 21 VALUE
 
 
 
                 if ($numNoches['noches'] == 1 && $categor == 2 && $room3 > 0 && $tarifa_p1v21 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
 
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += $costohotel ['sgl'] + ($chv21 * $room3_c) + ($fdv_adult21 * $room3 * $frday) + ($fdv_child21 * $room3_c * $frday) + $cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4;
                         //echo $priceRoom3;
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += $costohotel ['dbl'] + (($chv21 * $room3_c) / 2) + (($fdv_adult21 * $room3 * $frday) / 2) + (($fdv_child21 * $room3_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += $costohotel ['tpl'] + (($chv21 * $room3_c) / 3) + (($fdv_adult21 * $room3 * $frday) / 3) + (($fdv_child21 * $room3_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += $costohotel ['qua'] + (($chv21 * $room3_c) / 4) + (($fdv_adult21 * $room3 * $frday) / 4) + (($fdv_child21 * $room3_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                 }
                 
                 if ($numNoches['noches'] == 1 && $categor == 2 && $room3 > 0 && $tarifa_p1v21 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);                    
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_21v + ($fdv_adult21 * $room3 * $frday) + ($fdv_child21 * $room3_c * $frday) + $cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4;
                         //echo $priceRoom3;
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_21v + (($fdv_adult21 * $room3 * $frday) / 2) + (($fdv_child21 * $room3_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_21v + (($fdv_adult21 * $room3 * $frday) / 3) + (($fdv_child21 * $room3_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_21v + (($fdv_adult21 * $room3 * $frday) / 4) + (($fdv_child21 * $room3_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     
                 }
 
                 //TOUR 21 MODERATE
 
 
 
                 if ($numNoches['noches'] == 1 && $categor == 3 && $room3 > 0 && $tarifa_p1m21 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += $costohotel ['sglm'] + ($chm21 * $room3_c) + ($fdm_adult21 * $room3 * $frday) + ($fdm_child21 * $room3_c * $frday) + $cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4;
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += $costohotel ['dblm'] + (($chm21 * $room3_c) / 2) + (($fdm_adult21 * $room3 * $frday) / 2) + (($fdm_child21 * $room3_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += $costohotel ['tplm'] + (($chm21 * $room3_c) / 3) + (($fdm_adult21 * $room3 * $frday) / 3) + (($fdm_child21 * $room3_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += $costohotel ['quam'] + (($chm21 * $room3_c) / 4) + (($fdm_adult21 * $room3 * $frday) / 4) + (($fdm_child21 * $room3_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                 }
                 
                 if ($numNoches['noches'] == 1 && $categor == 3 && $room3 > 0 && $tarifa_p1m21 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_21m + ($fdm_adult21 * $room3 * $frday) + ($fdm_child21 * $room3_c * $frday) + $cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4;
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_21m + (($fdm_adult21 * $room3 * $frday) / 2) + (($fdm_child21 * $room3_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_21m + (($fdm_adult21 * $room3 * $frday) / 3) + (($fdm_child21 * $room3_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_21m + (($fdm_adult21 * $room3 * $frday) / 4) + (($fdm_child21 * $room3_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                 }
                 
                 //TOUR 21 DELUXE
 
 
 
                 if ($numNoches['noches'] == 1 && $categor == 4 && $room3 > 0 && $tarifa_p1d21 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += $costohotel ['sgld'] + ($chd21 * $room3_c) + ($fdd_adult21 * $room3 * $frday) + ($fdd_child21 * $room3_c * $frday) + $cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4;
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += $costohotel ['dbld'] + (($chd21 * $room3_c) / 2) + (($fdd_adult21 * $room3 * $frday) / 2) + (($fdd_child21 * $room3_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += $costohotel ['tpld'] + (($chd21 * $room3_c) / 3) + (($fdd_adult21 * $room3 * $frday) / 3) + (($fdd_child21 * $room3_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += $costohotel ['quad'] + (($chd21 * $room3_c) / 4) + (($fdd_adult21 * $room3 * $frday) / 4) + (($fdd_child21 * $room3_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                 }
                 
                 if ($numNoches['noches'] == 1 && $categor == 4 && $room3 > 0 && $tarifa_p1d21 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_21d + ($fdd_adult21 * $room3 * $frday) + ($fdd_child21 * $room3_c * $frday) + $cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4;
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_21d + (($fdd_adult21 * $room3 * $frday) / 2) + (($fdd_child21 * $room3_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_21d + (($fdd_adult21 * $room3 * $frday) / 3) + (($fdd_child21 * $room3_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_21d + (($fdd_adult21 * $room3 * $frday) / 4) + (($fdd_child21 * $room3_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                 }
 
 
                 //TOUR 32 VALUE
 
 
 
                 if ($numNoches['noches'] == 2 && $categor == 2 && $room3 > 0 && $tarifa_p1v32 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += ($costohotel ['sgl2']) / 2 + (($chv32 * $room3_c) / 2) + (($fdv_adult32 * $room3 * $frday) / 2) + (($fdv_child32 * $room3_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += ($costohotel ['dbl2']) / 2 + (($chv32 * $room3_c) / 4) + (($fdv_adult32 * $room3 * $frday) / 4) + (($fdv_child32 * $room3_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += ($costohotel ['tpl2']) / 2 + (($chv32 * $room3_c) / 6) + (($fdv_adult32 * $room3 * $frday) / 6) + (($fdv_child32 * $room3_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += ($costohotel ['qua2']) / 2 + (($chv32 * $room3_c) / 8) + (($fdv_adult32 * $room3 * $frday) / 8) + (($fdv_child32 * $room3_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     
                 }
                 
                 if ($numNoches['noches'] == 2 && $categor == 2 && $room3 > 0 && $tarifa_p1v32 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_32v + (($fdv_adult32 * $room3 * $frday) / 2) + (($fdv_child32 * $room3_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_32v + (($fdv_adult32 * $room3 * $frday) / 4) + (($fdv_child32 * $room3_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_32v + (($fdv_adult32 * $room3 * $frday) / 6) + (($fdv_child32 * $room3_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_32v + (($fdv_adult32 * $room3 * $frday) / 8) + (($fdv_child32 * $room3_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     
                 }
 
 
                 //TOUR 32 MODERATE
 
 
 
                 if ($numNoches['noches'] == 2 && $categor == 3 && $room3 > 0 && $tarifa_p1m32 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += ($costohotel ['sglm2']) / 2 + (($chm32 * $room3_c) / 2) + (($fdm_adult32 * $room3 * $frday) / 2) + (($fdm_child32 * $room3_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += ($costohotel ['dblm2']) / 2 + (($chm32 * $room3_c) / 4) + (($fdm_adult32 * $room3 * $frday) / 4) + (($fdm_child32 * $room3_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += ($costohotel ['tplm2']) / 2 + (($chm32 * $room3_c) / 6) + (($fdm_adult32 * $room3 * $frday) / 6) + (($fdm_child32 * $room3_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += ($costohotel ['quam2']) / 2 + (($chm32 * $room3_c) / 8) + (($fdm_adult32 * $room3 * $frday) / 8) + (($fdm_child32 * $room3_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                 }
                 
                 if ($numNoches['noches'] == 2 && $categor == 3 && $room3 > 0 && $tarifa_p1m32 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_32m + (($fdm_adult32 * $room3 * $frday) / 2) + (($fdm_child32 * $room3_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_32m + (($fdm_adult32 * $room3 * $frday) / 4) + (($fdm_child32 * $room3_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_32m + (($fdm_adult32 * $room3 * $frday) / 6) + (($fdm_child32 * $room3_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_32m + (($fdm_adult32 * $room3 * $frday) / 8) + (($fdm_child32 * $room3_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                 }
                 
                 //TOUR 32 DELUXE
 
 
 
                 if ($numNoches['noches'] == 2 && $categor == 4 && $room3 > 0 && $tarifa_p1d32 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += ($costohotel ['sgld2']) / 2 + (($chd32 * $room3_c) / 2) + (($fdd_adult32 * $room3 * $frday) / 2) + (($fdd_child32 * $room3_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += ($costohotel ['dbld2']) / 2 + (($chd32 * $room3_c) / 4) + (($fdd_adult32 * $room3 * $frday) / 4) + (($fdd_child32 * $room3_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += ($costohotel ['tpld2']) / 2 + (($chd32 * $room3_c) / 6) + (($fdd_adult32 * $room3 * $frday) / 6) + (($fdd_child32 * $room3_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += ($costohotel ['quad2']) / 2 + (($chd32 * $room3_c) / 8) + (($fdd_adult32 * $room3 * $frday) / 8) + (($fdd_child32 * $room3_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                 }
                 
                 if ($numNoches['noches'] == 2 && $categor == 4 && $room3 > 0 && $tarifa_p1d32 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_32d + (($fdd_adult32 * $room3 * $frday) / 2) + (($fdd_child32 * $room3_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_32d + (($fdd_adult32 * $room3 * $frday) / 4) + (($fdd_child32 * $room3_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_32d + (($fdd_adult32 * $room3 * $frday) / 6) + (($fdd_child32 * $room3_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_32d + (($fdd_adult32 * $room3 * $frday) / 8) + (($fdd_child32 * $room3_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                 }
 
                 //TOUR 43 VALUE
 
 
 
                 if ($numNoches['noches'] == 3 && $categor == 2 && $room3 > 0 && $tarifa_p1v43 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += ($costohotel ['sgl3']) / 3 + (($chv43 * $room3_c) / 3) + (($fdv_adult43 * $room3 * $frday) / 3) + (($fdv_child43 * $room3_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += ($costohotel ['dbl3']) / 3 + (($chv43 * $room3_c) / 6) + (($fdv_adult43 * $room3 * $frday) / 6) + (($fdv_child43 * $room3_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += ($costohotel ['tpl3']) / 3 + (($chv43 * $room3_c) / 9) + (($fdv_adult43 * $room3 * $frday) / 9) + (($fdv_child43 * $room3_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += ($costohotel ['qua3']) / 3 + (($chv43 * $room3_c) / 12) + (($fdv_adult43 * $room3 * $frday) / 12) + (($fdv_child43 * $room3_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                 }
                 
                 if ($numNoches['noches'] == 3 && $categor == 2 && $room3 > 0 && $tarifa_p1v43 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_43v + (($fdv_adult43 * $room3 * $frday) / 3) + (($fdv_child43 * $room3_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_43v + (($fdv_adult43 * $room3 * $frday) / 6) + (($fdv_child43 * $room3_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_43v + (($fdv_adult43 * $room3 * $frday) / 9) + (($fdv_child43 * $room3_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_43v + (($fdv_adult43 * $room3 * $frday) / 12) + (($fdv_child43 * $room3_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                 }
 
                 //TOUR 43 MODERATE
 
 
 
                 if ($numNoches['noches'] == 3 && $categor == 3 && $room3 > 0 && $tarifa_p1m43 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += ($costohotel ['sglm3']) / 3 + (($chm43 * $room3_c) / 3) + (($fdm_adult43 * $room3 * $frday) / 3) + (($fdm_child43 * $room3_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += ($costohotel ['dblm3']) / 3 + (($chm43 * $room3_c) / 6) + (($fdm_adult43 * $room3 * $frday) / 6) + (($fdm_child43 * $room3_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += ($costohotel ['tplm3']) / 3 + (($chm43 * $room3_c) / 9) + (($fdm_adult43 * $room3 * $frday) / 9) + (($fdm_child43 * $room3_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += ($costohotel ['quam3']) / 3 + (($chm43 * $room3_c) / 12) + (($fdm_adult43 * $room3 * $frday) / 12) + (($fdm_child43 * $room3_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                 }
                 
                 if ($numNoches['noches'] == 3 && $categor == 3 && $room3 > 0 && $tarifa_p1m43 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_43m + (($fdm_adult43 * $room3 * $frday) / 3) + (($fdm_child43 * $room3_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_43m + (($fdm_adult43 * $room3 * $frday) / 6) + (($fdm_child43 * $room3_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_43m + (($fdm_adult43 * $room3 * $frday) / 9) + (($fdm_child43 * $room3_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_43m + (($fdm_adult43 * $room3 * $frday) / 12) + (($fdm_child43 * $room3_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     
                 }
                 
                 //TOUR 43 DELUXE
 
 
 
                 if ($numNoches['noches'] == 3 && $categor == 4 && $room3 > 0 && $tarifa_p1d43 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += ($costohotel ['sgld3']) / 3 + (($chd43 * $room3_c) / 3) + (($fdd_adult43 * $room3 * $frday) / 3) + (($fdd_child43 * $room3_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += ($costohotel ['dbld3']) / 3 + (($chd43 * $room3_c) / 6) + (($fdd_adult43 * $room3 * $frday) / 6) + (($fdd_child43 * $room3_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += ($costohotel ['tpld3']) / 3 + (($chd43 * $room3_c) / 9) + (($fdd_adult43 * $room3 * $frday) / 9) + (($fdd_child43 * $room3_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += ($costohotel ['quad3']) / 3 + (($chd43 * $room3_c) / 12) + (($fdd_adult43 * $room3 * $frday) / 12) + (($fdd_child43 * $room3_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                 }
                 
                 if ($numNoches['noches'] == 3 && $categor == 4 && $room3 > 0 && $tarifa_p1d43 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_43d + (($fdd_adult43 * $room3 * $frday) / 3) + (($fdd_child43 * $room3_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_43d + (($fdd_adult43 * $room3 * $frday) / 6) + (($fdd_child43 * $room3_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_43d + (($fdd_adult43 * $room3 * $frday) / 9) + (($fdd_child43 * $room3_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_43d + (($fdd_adult43 * $room3 * $frday) / 12) + (($fdd_child43 * $room3_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     
                 }
 
                 //TOUR 54 VALUE
 
 
 
                 if ($numNoches['noches'] == 4 && $categor == 2 && $room3 > 0 && $tarifa_p1v54 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += ($costohotel ['sgl4']) / 4 + (($chv54 * $room3_c) / 4) + (($fdv_adult54 * $room3 * $frday) / 4) + (($fdv_child54 * $room3_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += ($costohotel ['dbl4']) / 4 + (($chv54 * $room3_c) / 8) + (($fdv_adult54 * $room3 * $frday) / 8) + (($fdv_child54 * $room3_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += ($costohotel ['tpl4']) / 4 + (($chv54 * $room3_c) / 12) + (($fdv_adult54 * $room3 * $frday) / 12) + (($fdv_child54 * $room3_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += ($costohotel ['qua4']) / 4 + (($chv54 * $room3_c) / 16) + (($fdv_adult54 * $room3 * $frday) / 16) + (($fdv_child54 * $room3_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                 }
 
                 if ($numNoches['noches'] == 4 && $categor == 2 && $room3 > 0 && $tarifa_p1v54 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_54v + (($fdv_adult54 * $room3 * $frday) / 4) + (($fdv_child54 * $room3_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_54v + (($fdv_adult54 * $room3 * $frday) / 8) + (($fdv_child54 * $room3_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_54v + (($fdv_adult54 * $room3 * $frday) / 12) + (($fdv_child54 * $room3_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_54v + (($fdv_adult54 * $room3 * $frday) / 16) + (($fdv_child54 * $room3_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                 }
                 
                 //TOUR 54 MODERATE
 
 
                 if ($numNoches['noches'] == 4 && $categor == 3 && $room3 > 0 && $tarifa_p1m54 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
 
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += ($costohotel ['sglm4']) / 4 + (($chm54 * $room3_c) / 4) + (($fdm_adult54 * $room3 * $frday) / 4) + (($fdm_child54 * $room3_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += ($costohotel ['dblm4']) / 4 + (($chm54 * $room3_c) / 8) + (($fdm_adult54 * $room3 * $frday) / 8) + (($fdm_child54 * $room3_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += ($costohotel ['tplm4']) / 4 + (($chm54 * $room3_c) / 12) + (($fdm_adult54 * $room3 * $frday) / 12) + (($fdm_child54 * $room3_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += ($costohotel ['quam4']) / 4 + (($chm54 * $room3_c) / 16) + (($fdm_adult54 * $room3 * $frday) / 16) + (($fdm_child54 * $room3_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                 }
                 
                 if ($numNoches['noches'] == 4 && $categor == 3 && $room3 > 0 && $tarifa_p1m54 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
 
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_54m + (($fdm_adult54 * $room3 * $frday) / 4) + (($fdm_child54 * $room3_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_54m + (($fdm_adult54 * $room3 * $frday) / 8) + (($fdm_child54 * $room3_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_54m + (($fdm_adult54 * $room3 * $frday) / 12) + (($fdm_child54 * $room3_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_54m + (($fdm_adult54 * $room3 * $frday) / 16) + (($fdm_child54 * $room3_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                 }
                 
                 //TOUR 54 DELUXE
 
 
                 if ($numNoches['noches'] == 4 && $categor == 4 && $room3 > 0 && $tarifa_p1d54 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
 
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += ($costohotel ['sgld4']) / 4 + (($chd54 * $room3_c) / 4) + (($fdd_adult54 * $room3 * $frday) / 4) + (($fdd_child54 * $room3_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += ($costohotel ['dbld4']) / 4 + (($chd54 * $room3_c) / 8) + (($fdd_adult54 * $room3 * $frday) / 8) + (($fdd_child54 * $room3_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += ($costohotel ['tpld4']) / 4 + (($chd54 * $room3_c) / 12) + (($fdd_adult54 * $room3 * $frday) / 12) + (($fdd_child54 * $room3_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += ($costohotel ['quad4']) / 4 + (($chd54 * $room3_c) / 16) + (($fdd_adult54 * $room3 * $frday) / 16) + (($fdd_child54 * $room3_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                 }
                 
                 if ($numNoches['noches'] == 4 && $categor == 4 && $room3 > 0 && $tarifa_p1d54 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
 
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_54d + (($fdd_adult54 * $room3 * $frday) / 4) + (($fdd_child54 * $room3_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_54d + (($fdd_adult54 * $room3 * $frday) / 8) + (($fdd_child54 * $room3_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_54d + (($fdd_adult54 * $room3 * $frday) / 12) + (($fdd_child54 * $room3_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_54d + (($fdd_adult54 * $room3 * $frday) / 16) + (($fdd_child54 * $room3_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                 }
 
 
                 // TOUR 65 VALUE
 
 
 
                 if ($numNoches['noches'] == 5 && $categor == 2 && $room3 > 0 && $tarifa_p1v65 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += ($costohotel ['sgl5']) / 5 + (($chv65 * $room3_c) / 5) + (($fdv_adult65 * $room3 * $frday) / 5) + (($fdv_child65 * $room3_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += ($costohotel ['dbl5']) / 5 + (($chv65 * $room3_c) / 10) + (($fdv_adult65 * $room3 * $frday) / 10) + (($fdv_child65 * $room3_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10) + (($cargo_total3)/10) + (($cargo_total4)/10);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += ($costohotel ['tpl5']) / 5 + (($chv65 * $room3_c) / 15) + (($fdv_adult65 * $room3 * $frday) / 15) + (($fdv_child65 * $room3_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15) + (($cargo_total3)/15) + (($cargo_total4)/15);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += ($costohotel ['qua5']) / 5 + (($chv65 * $room3_c) / 20) + (($fdv_adult65 * $room3 * $frday) / 20) + (($fdv_child65 * $room3_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20) + (($cargo_total3)/20) + (($cargo_total4)/20);
                     }
                 }
                 
                 if ($numNoches['noches'] == 5 && $categor == 2 && $room3 > 0 && $tarifa_p1v65 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_65v + (($fdv_adult65 * $room3 * $frday) / 5) + (($fdv_child65 * $room3_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_65v + (($fdv_adult65 * $room3 * $frday) / 10) + (($fdv_child65 * $room3_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10) + (($cargo_total3)/10) + (($cargo_total4)/10);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_65v + (($fdv_adult65 * $room3 * $frday) / 15) + (($fdv_child65 * $room3_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15) + (($cargo_total3)/15) + (($cargo_total4)/15);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_65v + (($fdv_adult65 * $room3 * $frday) / 20) + (($fdv_child65 * $room3_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20) + (($cargo_total3)/20) + (($cargo_total4)/20);
                     }
                 }
 
                 //TOUR 65 MODERATE
 
                 if ($numNoches['noches'] == 5 && $categor == 3 && $room3 > 0 && $tarifa_p1m65 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += ($costohotel ['sglm5']) / 5 + (($chm65 * $room3_c) / 5) + (($fdm_adult65 * $room3 * $frday) / 5) + (($fdm_child65 * $room3_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += ($costohotel ['dblm5']) / 5 + (($chm65 * $room3_c) / 10) + (($fdm_adult65 * $room3 * $frday) / 10) + (($fdm_child65 * $room3_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10) + (($cargo_total3)/10) + (($cargo_total4)/10);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += ($costohotel ['tplm5']) / 5 + (($chm65 * $room3_c) / 15) + (($fdm_adult65 * $room3 * $frday) / 15) + (($fdm_child65 * $room3_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15) + (($cargo_total3)/15) + (($cargo_total4)/15);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += ($costohotel ['quam5']) / 5 + (($chm65 * $room3_c) / 20) + (($fdm_adult65 * $room3 * $frday) / 20) + (($fdm_child65 * $room3_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20) + (($cargo_total3)/20) + (($cargo_total4)/20);
                     }
                     
                 }
                 
                 if ($numNoches['noches'] == 5 && $categor == 3 && $room3 > 0 && $tarifa_p1m65 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_65m + (($fdm_adult65 * $room3 * $frday) / 5) + (($fdm_child65 * $room3_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_65m + (($fdm_adult65 * $room3 * $frday) / 10) + (($fdm_child65 * $room3_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10) + (($cargo_total3)/10) + (($cargo_total4)/10);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_65m + (($fdm_adult65 * $room3 * $frday) / 15) + (($fdm_child65 * $room3_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15) + (($cargo_total3)/15) + (($cargo_total4)/15);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_65m + (($fdm_adult65 * $room3 * $frday) / 20) + (($fdm_child65 * $room3_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20) + (($cargo_total3)/20) + (($cargo_total4)/20);
                     }
                 }
                 
                 //TOUR 65 DELUXE
 
                 if ($numNoches['noches'] == 5 && $categor == 4 && $room3 > 0 && $tarifa_p1d65 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += ($costohotel ['sgld5']) / 5 + (($chd65 * $room3_c) / 5) + (($fdd_adult65 * $room3 * $frday) / 5) + (($fdd_child65 * $room3_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += ($costohotel ['dbld5']) / 5 + (($chd65 * $room3_c) / 10) + (($fdd_adult65 * $room3 * $frday) / 10) + (($fdd_child65 * $room3_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10) + (($cargo_total3)/10) + (($cargo_total4)/10);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += ($costohotel ['tpld5']) / 5 + (($chd65 * $room3_c) / 15) + (($fdd_adult65 * $room3 * $frday) / 15) + (($fdd_child65 * $room3_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15) + (($cargo_total3)/15) + (($cargo_total4)/15);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += ($costohotel ['quad5']) / 5 + (($chd65 * $room3_c) / 20) + (($fdd_adult65 * $room3 * $frday) / 20) + (($fdd_child65 * $room3_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20) + (($cargo_total3)/20) + (($cargo_total4)/20);
                     }
                     
                 }
                 
                 if ($numNoches['noches'] == 5 && $categor == 4 && $room3 > 0 && $tarifa_p1d65 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_65d + (($fdd_adult65 * $room3 * $frday) / 5) + (($fdd_child65 * $room3_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_65d + (($fdd_adult65 * $room3 * $frday) / 10) + (($fdd_child65 * $room3_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10) + (($cargo_total3)/10) + (($cargo_total4)/10);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_65d + (($fdd_adult65 * $room3 * $frday) / 15) + (($fdd_child65 * $room3_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15) + (($cargo_total3)/15) + (($cargo_total4)/15);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_65d + (($fdd_adult65 * $room3 * $frday) / 20) + (($fdd_child65 * $room3_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20) + (($cargo_total3)/20) + (($cargo_total4)/20);
                     }
                 }
                 
                 //TOUR 76 VALUE
 
 
 
                 if ($numNoches['noches'] == 6 && $categor == 2 && $room3 > 0 && $tarifa_p1v76 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
 
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += ($costohotel ['sgl6']) / 6 + (($chv76 * $room3_c) / 6) + (($fdv_adult76 * $room3 * $frday) / 6) + (($fdv_child76 * $room3_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += ($costohotel ['dbl6']) / 6 + (($chv76 * $room3_c) / 12) + (($fdv_adult76 * $room3 * $frday) / 12) + (($fdv_child76 * $room3_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += ($costohotel ['tpl6']) / 6 + (($chv76 * $room3_c) / 18) + (($fdv_adult76 * $room3 * $frday) / 18) + (($fdv_child76 * $room3_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += ($costohotel ['qua6']) / 6 + (($chv76 * $room3_c) / 24) + (($fdv_adult76 * $room3 * $frday) / 24) + (($fdv_child76 * $room3_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                 }
                 
                 if ($numNoches['noches'] == 6 && $categor == 2 && $room3 > 0 && $tarifa_p1v76 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
 
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_76v + (($fdv_adult76 * $room3 * $frday) / 6) + (($fdv_child76 * $room3_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_76v + (($fdv_adult76 * $room3 * $frday) / 12) + (($fdv_child76 * $room3_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_76v + (($fdv_adult76 * $room3 * $frday) / 18) + (($fdv_child76 * $room3_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_76v + (($fdv_adult76 * $room3 * $frday) / 24) + (($fdv_child76 * $room3_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                 }
 
                 //TOUR 76 MODERATE
 
                 if ($numNoches['noches'] == 6 && $categor == 3 && $room3 > 0 && $tarifa_p1m76 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += ($costohotel ['sglm6']) / 6 + (($chm76 * $room3_c) / 6) + (($fdm_adult76 * $room3 * $frday) / 6) + (($fdm_child76 * $room3_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += ($costohotel ['dblm6']) / 6 + (($chm76 * $room3_c) / 12) + (($fdm_adult76 * $room3 * $frday) / 12) + (($fdm_child76 * $room3_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += ($costohotel ['tplm6']) / 6 + (($chm76 * $room3_c) / 18) + (($fdm_adult76 * $room3 * $frday) / 18) + (($fdm_child76 * $room3_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += ($costohotel ['quam6']) / 6 + (($chm76 * $room3_c) / 24) + (($fdm_adult76 * $room3 * $frday) / 24) + (($fdm_child76 * $room3_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                 }
                 
                 if ($numNoches['noches'] == 6 && $categor == 3 && $room3 > 0 && $tarifa_p1m76 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_76m + (($fdm_adult76 * $room3 * $frday) / 6) + (($fdm_child76 * $room3_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_76m + (($fdm_adult76 * $room3 * $frday) / 12) + (($fdm_child76 * $room3_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_76m + (($fdm_adult76 * $room3 * $frday) / 18) + (($fdm_child76 * $room3_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_76m + (($fdm_adult76 * $room3 * $frday) / 24) + (($fdm_child76 * $room3_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                 }
                 
                 //TOUR 76 DELUXE
 
                 if ($numNoches['noches'] == 6 && $categor == 4 && $room3 > 0 && $tarifa_p1d76 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += ($costohotel ['sgld6']) / 6 + (($chd76 * $room3_c) / 6) + (($fdd_adult76 * $room3 * $frday) / 6) + (($fdd_child76 * $room3_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += ($costohotel ['dbld6']) / 6 + (($chd76 * $room3_c) / 12) + (($fdd_adult76 * $room3 * $frday) / 12) + (($fdd_child76 * $room3_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += ($costohotel ['tpld6']) / 6 + (($chd76 * $room3_c) / 18) + (($fdd_adult76 * $room3 * $frday) / 18) + (($fdd_child76 * $room3_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += ($costohotel ['quad6']) / 6 + (($chd76 * $room3_c) / 24) + (($fdd_adult76 * $room3 * $frday) / 24) + (($fdd_child76 * $room3_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                 }
                 
                 if ($numNoches['noches'] == 6 && $categor == 4 && $room3 > 0 && $tarifa_p1d76 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_76d + (($fdd_adult76 * $room3 * $frday) / 6) + (($fdd_child76 * $room3_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_76d + (($fdd_adult76 * $room3 * $frday) / 12) + (($fdd_child76 * $room3_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_76d + (($fdd_adult76 * $room3 * $frday) / 18) + (($fdd_child76 * $room3_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_76d + (($fdd_adult76 * $room3 * $frday) / 24) + (($fdd_child76 * $room3_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                 }
                 
                 //TOUR 87 VALUE
 
                 if ($numNoches['noches'] == 7 && $categor == 2 && $room3 > 0 && $tarifa_p1v87 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += ($costohotel ['sgl7']) / 7 + (($chv87 * $room3_c) / 7) + (($fdv_adult87 * $room3 * $frday) / 7) + (($fdv_child87 * $room3_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += ($costohotel ['dbl7']) / 7 + (($chv87 * $room3_c) / 14) + (($fdv_adult87 * $room3 * $frday) / 14) + (($fdv_child87 * $room3_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += ($costohotel ['tpl7']) / 7 + (($chv87 * $room3_c) / 21) + (($fdv_adult87 * $room3 * $frday) / 21) + (($fdv_child87 * $room3_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += ($costohotel ['qua7']) / 7 + (($chv87 * $room3_c) / 28) + (($fdv_adult87 * $room3 * $frday) / 28) + (($fdv_child87 * $room3_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                     }
                 }
                 
                 if ($numNoches['noches'] == 7 && $categor == 2 && $room3 > 0 && $tarifa_p1v87 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_87v + (($fdv_adult87 * $room3 * $frday) / 7) + (($fdv_child87 * $room3_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_87v + (($fdv_adult87 * $room3 * $frday) / 14) + (($fdv_child87 * $room3_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_87v + (($fdv_adult87 * $room3 * $frday) / 21) + (($fdv_child87 * $room3_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_87v + (($fdv_adult87 * $room3 * $frday) / 28) + (($fdv_child87 * $room3_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                     }
                 }
 
                 //TOUR 87 MODERATE
 
                 if ($numNoches['noches'] == 7 && $categor == 3 && $room3 > 0 && $tarifa_p1m87 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += ($costohotel ['sglm7']) / 7 + (($chm87 * $room3_c) / 7) + (($fdm_adult87 * $room3 * $frday) / 7) + (($fdm_child87 * $room3_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += ($costohotel ['dblm7']) / 7 + (($chm87 * $room3_c) / 14) + (($fdm_adult87 * $room3 * $frday) / 14) + (($fdm_child87 * $room3_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += ($costohotel ['tplm7']) / 7 + (($chm87 * $room3_c) / 21) + (($fdm_adult87 * $room3 * $frday) / 21) + (($fdm_child87 * $room3_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += ($costohotel ['quam7']) / 7 + (($chm87 * $room3_c) / 28) + (($fdm_adult87 * $room3 * $frday) / 28) + (($fdm_child87 * $room3_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                     }
                 }
                 
                 if ($numNoches['noches'] == 7 && $categor == 3 && $room3 > 0 && $tarifa_p1m87 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_87m + (($fdm_adult87 * $room3 * $frday) / 7) + (($fdm_child87 * $room3_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_87m + (($fdm_adult87 * $room3 * $frday) / 14) + (($fdm_child87 * $room3_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_87m + (($fdm_adult87 * $room3 * $frday) / 21) + (($fdm_child87 * $room3_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_87m + (($fdm_adult87 * $room3 * $frday) / 28) + (($fdm_child87 * $room3_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                     }
                 }
                 
                 //TOUR 87 DELUXE
 
                 if ($numNoches['noches'] == 7 && $categor == 4 && $room3 > 0 && $tarifa_p1d87 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += ($costohotel ['sgld7']) / 7 + (($chd87 * $room3_c) / 7) + (($fdd_adult87 * $room3 * $frday) / 7) + (($fdd_child87 * $room3_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += ($costohotel ['dbld7']) / 7 + (($chd87 * $room3_c) / 14) + (($fdd_adult87 * $room3 * $frday) / 14) + (($fdd_child87 * $room3_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += ($costohotel ['tpld7']) / 7 + (($chd87 * $room3_c) / 21) + (($fdd_adult87 * $room3 * $frday) / 21) + (($fdd_child87 * $room3_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += ($costohotel ['quad7']) / 7 + (($chd87 * $room3_c) / 28) + (($fdd_adult87 * $room3 * $frday) / 28) + (($fdd_child87 * $room3_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                     }
                 }
                 
                 if ($numNoches['noches'] == 7 && $categor == 4 && $room3 > 0 && $tarifa_p1d87 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_87d + (($fdd_adult87 * $room3 * $frday) / 7) + (($fdd_child87 * $room3_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_87d + (($fdd_adult87 * $room3 * $frday) / 14) + (($fdd_child87 * $room3_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_87d + (($fdd_adult87 * $room3 * $frday) / 21) + (($fdd_child87 * $room3_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_87d + (($fdd_adult87 * $room3 * $frday) / 28) + (($fdd_child87 * $room3_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                     }
                 }
 
                 //TOUR 98 VALUE
 
 
 
                 if ($numNoches['noches'] == 8 && $categor == 2 && $room3 > 0 && $tarifa_p1v98 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += ($costohotel ['sgl8']) / 8 + (($chv98 * $room3_c) / 8) + (($fdv_adult98 * $room3 * $frday) / 8) + (($fdv_child98 * $room3_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += ($costohotel ['dbl8']) / 8 + (($chv98 * $room3_c) / 16) + (($fdv_adult98 * $room3 * $frday) / 16) + (($fdv_child98 * $room3_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += ($costohotel ['tpl8']) / 8 + (($chv98 * $room3_c) / 24) + (($fdv_adult98 * $room3 * $frday) / 24) + (($fdv_child98 * $room3_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += ($costohotel ['qua8']) / 8 + (($chv98 * $room3_c) / 32) + (($fdv_adult98 * $room3 * $frday) / 32) + (($fdv_child98 * $room3_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                     }
                 }
                 
                 if ($numNoches['noches'] == 8 && $categor == 2 && $room3 > 0 && $tarifa_p1v98 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_98v + (($fdv_adult98 * $room3 * $frday) / 8) + (($fdv_child98 * $room3_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_98v + (($fdv_adult98 * $room3 * $frday) / 16) + (($fdv_child98 * $room3_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_98v + (($fdv_adult98 * $room3 * $frday) / 24) + (($fdv_child98 * $room3_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_98v + (($fdv_adult98 * $room3 * $frday) / 32) + (($fdv_child98 * $room3_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                     }
                 }
                 
                 //TOUR 98 MODERATE
 
                 if ($numNoches['noches'] == 8 && $categor == 3 && $room3 > 0 && $tarifa_p1m98 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += ($costohotel ['sglm8']) / 8 + (($chm98 * $room3_c) / 8) + (($fdm_adult98 * $room3 * $frday) / 8) + (($fdm_child98 * $room3_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += ($costohotel ['dblm8']) / 8 + (($chm98 * $room3_c) / 16) + (($fdm_adult98 * $room3 * $frday) / 16) + (($fdm_child98 * $room3_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += ($costohotel ['tplm8']) / 8 + (($chm98 * $room3_c) / 24) + (($fdm_adult98 * $room3 * $frday) / 24) + (($fdm_child98 * $room3_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += ($costohotel ['quam8']) / 8 + (($chm98 * $room3_c) / 32) + (($fdm_adult98 * $room3 * $frday) / 32) + (($fdm_child98 * $room3_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                     }
                 }
                 
                 if ($numNoches['noches'] == 8 && $categor == 3 && $room3 > 0 && $tarifa_p1m98 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_98m + (($fdm_adult98 * $room3 * $frday) / 8) + (($fdm_child98 * $room3_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_98m + (($fdm_adult98 * $room3 * $frday) / 16) + (($fdm_child98 * $room3_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_98m + (($fdm_adult98 * $room3 * $frday) / 24) + (($fdm_child98 * $room3_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_98m + (($fdm_adult98 * $room3 * $frday) / 32) + (($fdm_child98 * $room3_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                     }
                 }
                 
                 //TOUR 98 DELUXE
 
                 if ($numNoches['noches'] == 8 && $categor == 4 && $room3 > 0 && $tarifa_p1d98 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 += ($costohotel ['sgld8']) / 8 + (($chd98 * $room3_c) / 8) + (($fdd_adult98 * $room3 * $frday) / 8) + (($fdd_child98 * $room3_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 += ($costohotel ['dbld8']) / 8 + (($chd98 * $room3_c) / 16) + (($fdd_adult98 * $room3 * $frday) / 16) + (($fdd_child98 * $room3_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 += ($costohotel ['tpld8']) / 8 + (($chd98 * $room3_c) / 24) + (($fdd_adult98 * $room3 * $frday) / 24) + (($fdd_child98 * $room3_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 += ($costohotel ['quad8']) / 8 + (($chd98 * $room3_c) / 32) + (($fdd_adult98 * $room3 * $frday) / 32) + (($fdd_child98 * $room3_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                     }
                 }
                 
                 if ($numNoches['noches'] == 8 && $categor == 4 && $room3 > 0 && $tarifa_p1d98 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room3 == 1) {
 
                         $priceRoom3 +=  $tarifa_total_r3_98d + (($fdd_adult98 * $room3 * $frday) / 8) + (($fdd_child98 * $room3_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room3 == 2) {
 
                         $priceRoom3 +=  $tarifa_total_r3_98d + (($fdd_adult98 * $room3 * $frday) / 16) + (($fdd_child98 * $room3_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                     if ($room3 == 3) {
 
                         $priceRoom3 +=  $tarifa_total_r3_98d + (($fdd_adult98 * $room3 * $frday) / 24) + (($fdd_child98 * $room3_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                     if ($room3 == 4) {
 
                         $priceRoom3 +=  $tarifa_total_r3_98d + (($fdd_adult98 * $room3 * $frday) / 32) + (($fdd_child98 * $room3_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                     }
                 }
 
                 if ($room3 == 0) {
 
                     $priceRoom3 = 0;
                 }
 
                 date_add($fecha3, date_interval_create_from_date_string('1 days'));
                 $contador++;
             }
             //$priceRoom3 = (round($priceRoom3) * $room3);
             $priceRoom3 = $priceRoom3 * $room3;
         } else {
             $priceRoom3 = 0;
         }
         //Costo habitacion 4
         // /room # 4
         if (isset($room4) && $room4 > 0) {
             $contador = 0;
             while ($fecha4->format("Y-m-d") < $fecha_fin->format("Y-m-d")) {
                 if ($noches_escogidas != 0) {
                     if ($noches_escogidas == $contador) {
                         break;
                     }
                 }
                 //$fec = strtotime($toursbooking ['fecha_llegada']);//$fecha->getTimestamp();
                 $fec = $fecha4->getTimestamp();
 
 
                 $sql = 'SELECT t1.id,t1.breakfast,t1.resoftfe,t1.nombre,t3.id as comifi,t3.sgl,t3.dbl,t3.tpl,t3.qua,t3.sgl2,t3.dbl2,t3.tpl2,t3.qua2,t3.sgl3,t3.dbl3,t3.tpl3,t3.qua3,t3.sgl4,t3.dbl4,t3.tpl4,t3.qua4,t3.sgl5,t3.dbl5,t3.tpl5,t3.qua5,t3.sgl6,t3.dbl6,t3.tpl6,t3.qua6,t3.sgl7,t3.dbl7,t3.tpl7,t3.qua7,t3.sgl8,t3.dbl8,t3.tpl8,t3.qua8,t3.sglm,t3.dblm,t3.tplm,t3.quam,t3.sglm2,t3.dblm2,t3.tplm2,t3.quam2,t3.sglm3,t3.dblm3,t3.tplm3,t3.quam3,t3.sglm4,t3.dblm4,t3.tplm4,t3.quam4,t3.sglm5,t3.dblm5,t3.tplm5,t3.quam5,t3.sglm6,t3.dblm6,t3.tplm6,t3.quam6,t3.sglm7,t3.dblm7,t3.tplm7,t3.quam7,t3.sglm8,t3.dblm8,t3.tplm8,t3.quam8,t3.sgld,t3.dbld,t3.tpld,t3.quad,t3.sgld2,t3.dbld2,t3.tpld2,t3.quad2,t3.sgld3,t3.dbld3,t3.tpld3,t3.quad3,t3.sgld4,t3.dbld4,t3.tpld4,t3.quad4,t3.sgld5,t3.dbld5,t3.tpld5,t3.quad5,t3.sgld6,t3.dbld6,t3.tpld6,t3.quad6,t3.sgld7,t3.dbld7,t3.tpld7,t3.quad7,t3.sgld8,t3.dbld8,t3.tpld8,t3.quad8,t3.chv21,t3.chm21,t3.chd21,t3.chv32,t3.chm32,t3.chd32,t3.chv43,t3.chm43,t3.chd43,t3.chv54,t3.chm54,t3.chd54,t3.chv65,t3.chm65,t3.chd65,t3.chv76,t3.chm76,t3.chd76,t3.chv87,t3.chm87,t3.chd87,t3.chv98,t3.chm98,t3.chd98,t3.netax,t3.comtax,t3.costax,t3.id_ratesvalid,t3.breackfast,t3.fdv_adult21,t3.fdv_child21,t3.fdm_adult21,t3.fdm_child21,t3.fdd_adult21,t3.fdd_child21,t3.fdv_adult32,t3.fdv_child32,t3.fdm_adult32,t3.fdm_child32,t3.fdd_adult32,t3.fdd_child32,t3.fdv_adult43,t3.fdv_child43,t3.fdm_adult43,t3.fdm_child43,t3.fdd_adult43,t3.fdd_child43,t3.fdv_adult54,t3.fdv_child54,t3.fdm_adult54,t3.fdm_child54,t3.fdd_adult54,t3.fdd_child54,t3.fdv_adult65,t3.fdv_child65,t3.fdm_adult65,t3.fdm_child65,t3.fdd_adult65,t3.fdd_child65,t3.fdv_adult76,t3.fdv_child76,t3.fdm_adult76,t3.fdm_child76,t3.fdd_adult76,t3.fdd_child76,t3.fdv_adult87,t3.fdv_child87,t3.fdm_adult87,t3.fdm_child87,t3.fdd_adult87,t3.fdd_child87,t3.fdv_adult98,t3.fdv_child98,t3.fdm_adult98,t3.fdm_child98,t3.fdd_adult98,t3.fdd_child98,t1.categoria
                         FROM hoteles t1	
                         LEFT JOIN comifijas t3 ON (
                         t1.id = t3.id_hotel											
                         AND t3.fecha_ini <= ' . $fec . ' 
                         AND t3.fecha_fin  >= ' . $fec . '
                         )
                         WHERE t3.id_hotel  = ' . $hotel . ' AND t3.id_ratesvalid = ' . $id_tour . '';
                 $rs = Doo::db()->query($sql);
                 $costohotel = $rs->fetch();
 
                 if (empty($costohotel)) {
                     echo ' <script>$("input[type=\'checkbox\'").attr("checked",false).change();
                             $( "#dialog-message-t" ).dialog({
                                 modal: true,
                                 buttons: {
                                     Ok: function() {
                                         $( this ).dialog( "close" );
                                     }
                                 }
                             });</script>
                      ';
                     exit;
                 }
                 //print_r(Doo::db()->showSQL());
                 //$bandera = 2;
                 
                 
                 //TOUR 21 VALUE            
 
 
                 if ($numNoches['noches'] == 1 && $categor == 2 && $room4 > 0 && $tarifa_p1v21 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += $costohotel ['sgl'] + ($chv21 * $room4_c) + ($fdv_adult21 * $room4 * $frday) + ($fdv_child21 * $room4_c * $frday) + $cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4;
                         //echo $priceRoom4;
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += $costohotel ['dbl'] + (($chv21 * $room4_c) / 2) + (($fdv_adult21 * $room4 * $frday) / 2) + (($fdv_child21 * $room4_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += $costohotel ['tpl'] + (($chv21 * $room4_c) / 3) + (($fdv_adult21 * $room4 * $frday) / 3) + (($fdv_child21 * $room4_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += $costohotel ['qua'] + (($chv21 * $room4_c) / 4) + (($fdv_adult21 * $room4 * $frday) / 4) + (($fdv_child21 * $room4_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                 }
                 
                 if ($numNoches['noches'] == 1 && $categor == 2 && $room4 > 0 && $tarifa_p1v21 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 +=  $tarifa_total_r4_21v + ($fdv_adult21 * $room4 * $frday) + ($fdv_child21 * $room4_c * $frday) + $cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4;
                         //echo $priceRoom4;
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 +=  $tarifa_total_r4_21v + (($fdv_adult21 * $room4 * $frday) / 2) + (($fdv_child21 * $room4_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 +=  $tarifa_total_r4_21v + (($fdv_adult21 * $room4 * $frday) / 3) + (($fdv_child21 * $room4_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 +=  $tarifa_total_r4_21v + (($fdv_adult21 * $room4 * $frday) / 4) + (($fdv_child21 * $room4_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                 }
 
                 //TOUR 21 MODERATE
 
                 if ($numNoches['noches'] == 1 && $categor == 3 && $room4 > 0 && $tarifa_p1m21 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += $costohotel ['sglm'] + ($chm21 * $room4_c) + ($fdm_adult21 * $room4 * $frday) + ($fdm_child21 * $room4_c * $frday) + $cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4;
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += $costohotel ['dblm'] + (($chm21 * $room4_c) / 2) + (($fdm_adult21 * $room4 * $frday) / 2) + (($fdm_child21 * $room4_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += $costohotel ['tplm'] + (($chm21 * $room4_c) / 3) + (($fdm_adult21 * $room4 * $frday) / 3) + (($fdm_child21 * $room4_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += $costohotel ['quam'] + (($chm21 * $room4_c) / 4) + (($fdm_adult21 * $room4 * $frday) / 4) + (($fdm_child21 * $room4_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                 }
                 
                 if ($numNoches['noches'] == 1 && $categor == 3 && $room4 > 0 && $tarifa_p1m21 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
 
                     if ($room4 == 1) {
 
                         $priceRoom4 +=  $tarifa_total_r4_21m + ($fdm_adult21 * $room4 * $frday) + ($fdm_child21 * $room4_c * $frday) + $cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4;
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 +=  $tarifa_total_r4_21m + (($fdm_adult21 * $room4 * $frday) / 2) + (($fdm_child21 * $room4_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 +=  $tarifa_total_r4_21m + (($fdm_adult21 * $room4 * $frday) / 3) + (($fdm_child21 * $room4_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 +=  $tarifa_total_r4_21m + (($fdm_adult21 * $room4 * $frday) / 4) + (($fdm_child21 * $room4_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                 }
                 
                 //TOUR 21 DELUXE
 
                 if ($numNoches['noches'] == 1 && $categor == 4 && $room4 > 0 && $tarifa_p1d21 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += $costohotel ['sgld'] + ($chd21 * $room4_c) + ($fdd_adult21 * $room4 * $frday) + ($fdd_child21 * $room4_c * $frday) + $cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4;
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += $costohotel ['dbld'] + (($chd21 * $room4_c) / 2) + (($fdd_adult21 * $room4 * $frday) / 2) + (($fdd_child21 * $room4_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += $costohotel ['tpld'] + (($chd21 * $room4_c) / 3) + (($fdd_adult21 * $room4 * $frday) / 3) + (($fdd_child21 * $room4_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += $costohotel ['quad'] + (($chd21 * $room4_c) / 4) + (($fdd_adult21 * $room4 * $frday) / 4) + (($fdd_child21 * $room4_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                 }
                 
                 if ($numNoches['noches'] == 1 && $categor == 4 && $room4 > 0 && $tarifa_p1d21 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
 
                     if ($room4 == 1) {
 
                         $priceRoom4 +=  $tarifa_total_r4_21d + ($fdd_adult21 * $room4 * $frday) + ($fdd_child21 * $room4_c * $frday) + $cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4;
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 +=  $tarifa_total_r4_21d + (($fdd_adult21 * $room4 * $frday) / 2) + (($fdd_child21 * $room4_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 +=  $tarifa_total_r4_21d + (($fdd_adult21 * $room4 * $frday) / 3) + (($fdd_child21 * $room4_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 +=  $tarifa_total_r4_21d + (($fdd_adult21 * $room4 * $frday) / 4) + (($fdd_child21 * $room4_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                 }
 
                 //TOUR 32 VALUE                    
 
 
 
                 if ($numNoches['noches'] == 2 && $categor == 2 && $room4 > 0 && $tarifa_p1v32 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += ($costohotel ['sgl2']) / 2 + (($chv32 * $room4_c) / 2) + (($fdv_adult32 * $room4 * $frday) / 2) + (($fdv_child32 * $room4_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += ($costohotel ['dbl2']) / 2 + (($chv32 * $room4_c) / 4) + (($fdv_adult32 * $room4 * $frday) / 4) + (($fdv_child32 * $room4_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += ($costohotel ['tpl2']) / 2 + (($chv32 * $room4_c) / 6) + (($fdv_adult32 * $room4 * $frday) / 6) + (($fdv_child32 * $room4_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += ($costohotel ['qua2']) / 2 + (($chv32 * $room4_c) / 8) + (($fdv_adult32 * $room4 * $frday) / 8) + (($fdv_child32 * $room4_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                 }
                 
                 if ($numNoches['noches'] == 2 && $categor == 2 && $room4 > 0 && $tarifa_p1v32 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
 
                     if ($room4 == 1) {
 
                         $priceRoom4 +=  $tarifa_total_r4_32v + (($fdv_adult32 * $room4 * $frday) / 2) + (($fdv_child32 * $room4_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 +=  $tarifa_total_r4_32v + (($fdv_adult32 * $room4 * $frday) / 4) + (($fdv_child32 * $room4_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 +=  $tarifa_total_r4_32v + (($fdv_adult32 * $room4 * $frday) / 6) + (($fdv_child32 * $room4_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 +=  $tarifa_total_r4_32v + (($fdv_adult32 * $room4 * $frday) / 8) + (($fdv_child32 * $room4_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                 }
 
                 //TOUR 32 MODERATE
 
                 if ($numNoches['noches'] == 2 && $categor == 3 && $room4 > 0 && $tarifa_p1m32 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += ($costohotel ['sglm2']) / 2 + (($chm32 * $room4_c) / 2) + (($fdm_adult32 * $room4 * $frday) / 2) + (($fdm_child32 * $room4_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += ($costohotel ['dblm2']) / 2 + (($chm32 * $room4_c) / 4) + (($fdm_adult32 * $room4 * $frday) / 4) + (($fdm_child32 * $room4_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += ($costohotel ['tplm2']) / 2 + (($chm32 * $room4_c) / 6) + (($fdm_adult32 * $room4 * $frday) / 6) + (($fdm_child32 * $room4_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += ($costohotel ['quam2']) / 2 + (($chm32 * $room4_c) / 8) + (($fdm_adult32 * $room4 * $frday) / 8) + (($fdm_child32 * $room4_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                 }
                 
                 if ($numNoches['noches'] == 2 && $categor == 3 && $room4 > 0 && $tarifa_p1m32 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 +=  $tarifa_total_r4_32m + (($fdm_adult32 * $room4 * $frday) / 2) + (($fdm_child32 * $room4_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 +=  $tarifa_total_r4_32m + (($fdm_adult32 * $room4 * $frday) / 4) + (($fdm_child32 * $room4_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 +=  $tarifa_total_r4_32m + (($fdm_adult32 * $room4 * $frday) / 6) + (($fdm_child32 * $room4_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 +=  $tarifa_total_r4_32m + (($fdm_adult32 * $room4 * $frday) / 8) + (($fdm_child32 * $room4_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                 }
                 
                 //TOUR 32 DELUXE
 
                 if ($numNoches['noches'] == 2 && $categor == 4 && $room4 > 0 && $tarifa_p1d32 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += ($costohotel ['sgld2']) / 2 + (($chd32 * $room4_c) / 2) + (($fdd_adult32 * $room4 * $frday) / 2) + (($fdd_child32 * $room4_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += ($costohotel ['dbld2']) / 2 + (($chd32 * $room4_c) / 4) + (($fdd_adult32 * $room4 * $frday) / 4) + (($fdd_child32 * $room4_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += ($costohotel ['tpld2']) / 2 + (($chd32 * $room4_c) / 6) + (($fdd_adult32 * $room4 * $frday) / 6) + (($fdd_child32 * $room4_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += ($costohotel ['quad2']) / 2 + (($chd32 * $room4_c) / 8) + (($fdd_adult32 * $room4 * $frday) / 8) + (($fdd_child32 * $room4_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                 }
                 
                 if ($numNoches['noches'] == 2 && $categor == 4 && $room4 > 0 && $tarifa_p1d32 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 +=  $tarifa_total_r4_32d + (($fdd_adult32 * $room4 * $frday) / 2) + (($fdd_child32 * $room4_c * $frday) / 2) + (($cargo_total)/2) + (($cargo_total2)/2) + (($cargo_total3)/2) + (($cargo_total4)/2);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 +=  $tarifa_total_r4_32d + (($fdd_adult32 * $room4 * $frday) / 4) + (($fdd_child32 * $room4_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 +=  $tarifa_total_r4_32d + (($fdd_adult32 * $room4 * $frday) / 6) + (($fdd_child32 * $room4_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 +=  $tarifa_total_r4_32d + (($fdd_adult32 * $room4 * $frday) / 8) + (($fdd_child32 * $room4_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                 }
 
 
                 // TOUR 43 VALUE                  
 
 
 
                 if ($numNoches['noches'] == 3 && $categor == 2 && $room4 > 0 && $tarifa_p1v43 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);                    
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += ($costohotel ['sgl3']) / 3 + (($chv43 * $room4_c) / 3) + (($fdv_adult43 * $room4 * $frday) / 3) + (($fdv_child43 * $room4_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += ($costohotel ['dbl3']) / 3 + (($chv43 * $room4_c) / 6) + (($fdv_adult43 * $room4 * $frday) / 6) + (($fdv_child43 * $room4_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += ($costohotel ['tpl3']) / 3 + (($chv43 * $room4_c) / 9) + (($fdv_adult43 * $room4 * $frday) / 9) + (($fdv_child43 * $room4_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += ($costohotel ['qua3']) / 3 + (($chv43 * $room4_c) / 12) + (($fdv_adult43 * $room4 * $frday) / 12) + (($fdv_child43 * $room4_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                 }
                 
                 if ($numNoches['noches'] == 3 && $categor == 2 && $room4 > 0 && $tarifa_p1v43 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);                   
 
                     if ($room4 == 1) {
 
                         $priceRoom4 +=  $tarifa_total_r4_43v + (($fdv_adult43 * $room4 * $frday) / 3) + (($fdv_child43 * $room4_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 +=  $tarifa_total_r4_43v + (($fdv_adult43 * $room4 * $frday) / 6) + (($fdv_child43 * $room4_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 +=  $tarifa_total_r4_43v + (($fdv_adult43 * $room4 * $frday) / 9) + (($fdv_child43 * $room4_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 +=  $tarifa_total_r4_43v + (($fdv_adult43 * $room4 * $frday) / 12) + (($fdv_child43 * $room4_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                 }
 
                 //TOUR 43 MODERATE
 
                 if ($numNoches['noches'] == 3 && $categor == 3 && $room4 > 0 && $tarifa_p1m43 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += ($costohotel ['sglm3']) / 3 + (($chm43 * $room4_c) / 3) + (($fdm_adult43 * $room4 * $frday) / 3) + (($fdm_child43 * $room4_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += ($costohotel ['dblm3']) / 3 + (($chm43 * $room4_c) / 6) + (($fdm_adult43 * $room4 * $frday) / 6) + (($fdm_child43 * $room4_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += ($costohotel ['tplm3']) / 3 + (($chm43 * $room4_c) / 9) + (($fdm_adult43 * $room4 * $frday) / 9) + (($fdm_child43 * $room4_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += ($costohotel ['quam3']) / 3 + (($chm43 * $room4_c) / 12) + (($fdm_adult43 * $room4 * $frday) / 12) + (($fdm_child43 * $room4_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                 }
                 
                 if ($numNoches['noches'] == 3 && $categor == 3 && $room4 > 0 && $tarifa_p1m43 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += $tarifa_total_r4_43m + (($fdm_adult43 * $room4 * $frday) / 3) + (($fdm_child43 * $room4_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += $tarifa_total_r4_43m + (($fdm_adult43 * $room4 * $frday) / 6) + (($fdm_child43 * $room4_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += $tarifa_total_r4_43m + (($fdm_adult43 * $room4 * $frday) / 9) + (($fdm_child43 * $room4_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += $tarifa_total_r4_43m + (($fdm_adult43 * $room4 * $frday) / 12) + (($fdm_child43 * $room4_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                 }
                 
                 //TOUR 43 DELUXE
 
                 if ($numNoches['noches'] == 3 && $categor == 4 && $room4 > 0 && $tarifa_p1d43 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += ($costohotel ['sgld3']) / 3 + (($chd43 * $room4_c) / 3) + (($fdd_adult43 * $room4 * $frday) / 3) + (($fdd_child43 * $room4_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += ($costohotel ['dbld3']) / 3 + (($chd43 * $room4_c) / 6) + (($fdd_adult43 * $room4 * $frday) / 6) + (($fdd_child43 * $room4_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += ($costohotel ['tpld3']) / 3 + (($chd43 * $room4_c) / 9) + (($fdd_adult43 * $room4 * $frday) / 9) + (($fdd_child43 * $room4_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += ($costohotel ['quad3']) / 3 + (($chd43 * $room4_c) / 12) + (($fdd_adult43 * $room4 * $frday) / 12) + (($fdd_child43 * $room4_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                 }
                 
                 if ($numNoches['noches'] == 3 && $categor == 4 && $room4 > 0 && $tarifa_p1d43 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += $tarifa_total_r4_43d + (($fdd_adult43 * $room4 * $frday) / 3) + (($fdd_child43 * $room4_c * $frday) / 3) + (($cargo_total)/3) + (($cargo_total2)/3) + (($cargo_total3)/3) + (($cargo_total4)/3);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += $tarifa_total_r4_43d + (($fdd_adult43 * $room4 * $frday) / 6) + (($fdd_child43 * $room4_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += $tarifa_total_r4_43d + (($fdd_adult43 * $room4 * $frday) / 9) + (($fdd_child43 * $room4_c * $frday) / 9) + (($cargo_total)/9) + (($cargo_total2)/9) + (($cargo_total3)/9) + (($cargo_total4)/9);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += $tarifa_total_r4_43d + (($fdd_adult43 * $room4 * $frday) / 12) + (($fdd_child43 * $room4_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                 }
                 
                 
                 //**************************************************************************************************
 
                 //TOUR 54 VALUE 
 
                 if ($numNoches['noches'] == 4 && $categor == 2 && $room4 > 0 && $tarifa_p1v54 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);                    
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += ($costohotel ['sgl4']) / 4 + (($chv54 * $room4_c) / 4) + (($fdv_adult54 * $room4 * $frday) / 4) + (($fdv_child54 * $room4_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += ($costohotel ['dbl4']) / 4 + (($chv54 * $room4_c) / 8) + (($fdv_adult54 * $room4 * $frday) / 8) + (($fdv_child54 * $room4_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += ($costohotel ['tpl4']) / 4 + (($chv54 * $room4_c) / 12) + (($fdv_adult54 * $room4 * $frday) / 12) + (($fdv_child54 * $room4_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += ($costohotel ['qua4']) / 4 + (($chv54 * $room4_c) / 16) + (($fdv_adult54 * $room4 * $frday) / 16) + (($fdv_child54 * $room4_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                 }
                 
                 if ($numNoches['noches'] == 4 && $categor == 2 && $room4 > 0 && $tarifa_p1v54 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
 
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 +=  $tarifa_total_r4_54v + (($fdv_adult54 * $room4 * $frday) / 4) + (($fdv_child54 * $room4_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 +=  $tarifa_total_r4_54v + (($fdv_adult54 * $room4 * $frday) / 8) + (($fdv_child54 * $room4_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 +=  $tarifa_total_r4_54v + (($fdv_adult54 * $room4 * $frday) / 12) + (($fdv_child54 * $room4_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 +=  $tarifa_total_r4_54v + (($fdv_adult54 * $room4 * $frday) / 16) + (($fdv_child54 * $room4_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                 }
 
                 //TOUR 54 MODERATE    
 
 
 
                 if ($numNoches['noches'] == 4 && $categor == 3 && $room4 > 0 && $tarifa_p1m54 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += ($costohotel ['sglm4']) / 4 + (($chm54 * $room4_c) / 4) + (($fdm_adult54 * $room4 * $frday) / 4) + (($fdm_child54 * $room4_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += ($costohotel ['dblm4']) / 4 + (($chm54 * $room4_c) / 8) + (($fdm_adult54 * $room4 * $frday) / 8) + (($fdm_child54 * $room4_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += ($costohotel ['tplm4']) / 4 + (($chm54 * $room4_c) / 12) + (($fdm_adult54 * $room4 * $frday) / 12) + (($fdm_child54 * $room4_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += ($costohotel ['quam4']) / 4 + (($chm54 * $room4_c) / 16) + (($fdm_adult54 * $room4 * $frday) / 16) + (($fdm_child54 * $room4_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                 }
                 
                 if ($numNoches['noches'] == 4 && $categor == 3 && $room4 > 0 && $tarifa_p1m54 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += $tarifa_total_r4_54m + (($fdm_adult54 * $room4 * $frday) / 4) + (($fdm_child54 * $room4_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += $tarifa_total_r4_54m + (($fdm_adult54 * $room4 * $frday) / 8) + (($fdm_child54 * $room4_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += $tarifa_total_r4_54m + (($fdm_adult54 * $room4 * $frday) / 12) + (($fdm_child54 * $room4_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += $tarifa_total_r4_54m + (($fdm_adult54 * $room4 * $frday) / 16) + (($fdm_child54 * $room4_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                 }
                 
                 //TOUR 54 DELUXE
 
                 if ($numNoches['noches'] == 4 && $categor == 4 && $room4 > 0 && $tarifa_p1d54 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += ($costohotel ['sgld4']) / 4 + (($chd54 * $room4_c) / 4) + (($fdd_adult54 * $room4 * $frday) / 4) + (($fdd_child54 * $room4_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += ($costohotel ['dbld4']) / 4 + (($chd54 * $room4_c) / 8) + (($fdd_adult54 * $room4 * $frday) / 8) + (($fdd_child54 * $room4_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += ($costohotel ['tpld4']) / 4 + (($chd54 * $room4_c) / 12) + (($fdd_adult54 * $room4 * $frday) / 12) + (($fdd_child54 * $room4_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += ($costohotel ['quad4']) / 4 + (($chd54 * $room4_c) / 16) + (($fdd_adult54 * $room4 * $frday) / 16) + (($fdd_child54 * $room4_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                 }
                 
                 if ($numNoches['noches'] == 4 && $categor == 4 && $room4 > 0 && $tarifa_p1d54 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += $tarifa_total_r4_54d + (($fdd_adult54 * $room4 * $frday) / 4) + (($fdd_child54 * $room4_c * $frday) / 4) + (($cargo_total)/4) + (($cargo_total2)/4) + (($cargo_total3)/4) + (($cargo_total4)/4);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += $tarifa_total_r4_54d + (($fdd_adult54 * $room4 * $frday) / 8) + (($fdd_child54 * $room4_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += $tarifa_total_r4_54d + (($fdd_adult54 * $room4 * $frday) / 12) + (($fdd_child54 * $room4_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += $tarifa_total_r4_54d + (($fdd_adult54 * $room4 * $frday) / 16) + (($fdd_child54 * $room4_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                 }
 
                 //TOUR 65 VALUE                      
 
 
 
                 if ($numNoches['noches'] == 5 && $categor == 2 && $room4 > 0 && $tarifa_p1v65 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += ($costohotel ['sgl5']) / 5 + (($chv65 * $room4_c) / 5) + (($fdv_adult65 * $room4 * $frday) / 5) + (($fdv_child65 * $room4_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += ($costohotel ['dbl5']) / 5 + (($chv65 * $room4_c) / 10) + (($fdv_adult65 * $room4 * $frday) / 10) + (($fdv_child65 * $room4_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10) + (($cargo_total3)/10) + (($cargo_total4)/10);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += ($costohotel ['tpl5']) / 5 + (($chv65 * $room4_c) / 15) + (($fdv_adult65 * $room4 * $frday) / 15) + (($fdv_child65 * $room4_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15) + (($cargo_total3)/15) + (($cargo_total4)/15);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += ($costohotel ['qua5']) / 5 + (($chv65 * $room4_c) / 20) + (($fdv_adult65 * $room4 * $frday) / 20) + (($fdv_child65 * $room4_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20) + (($cargo_total3)/20) + (($cargo_total4)/20);
                     }
                 }
                 
                 if ($numNoches['noches'] == 5 && $categor == 2 && $room4 > 0 && $tarifa_p1v65 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += $tarifa_total_r4_65v + (($fdv_adult65 * $room4 * $frday) / 5) + (($fdv_child65 * $room4_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += $tarifa_total_r4_65v + (($fdv_adult65 * $room4 * $frday) / 10) + (($fdv_child65 * $room4_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10) + (($cargo_total3)/10) + (($cargo_total4)/10);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += $tarifa_total_r4_65v + (($fdv_adult65 * $room4 * $frday) / 15) + (($fdv_child65 * $room4_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15) + (($cargo_total3)/15) + (($cargo_total4)/15);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += $tarifa_total_r4_65v + (($fdv_adult65 * $room4 * $frday) / 20) + (($fdv_child65 * $room4_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20) + (($cargo_total3)/20) + (($cargo_total4)/20);
                     }
                     
                 }
 
                 //TOUR 65 MODERATE
 
 
                 if ($numNoches['noches'] == 5 && $categor == 3 && $room4 > 0 && $tarifa_p1m65 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += ($costohotel ['sglm5']) / 5 + (($chm65 * $room4_c) / 5) + (($fdm_adult65 * $room4 * $frday) / 5) + (($fdm_child65 * $room4_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += ($costohotel ['dblm5']) / 5 + (($chm65 * $room4_c) / 10) + (($fdm_adult65 * $room4 * $frday) / 10) + (($fdm_child65 * $room4_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10) + (($cargo_total3)/10) + (($cargo_total4)/10);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += ($costohotel ['tplm5']) / 5 + (($chm65 * $room4_c) / 15) + (($fdm_adult65 * $room4 * $frday) / 15) + (($fdm_child65 * $room4_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15) + (($cargo_total3)/15) + (($cargo_total4)/15);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += ($costohotel ['quam5']) / 5 + (($chm65 * $room4_c) / 20) + (($fdm_adult65 * $room4 * $frday) / 20) + (($fdm_child65 * $room4_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20) + (($cargo_total3)/20) + (($cargo_total4)/20);
                     }
                 }
                 
                 if ($numNoches['noches'] == 5 && $categor == 3 && $room4 > 0 && $tarifa_p1m65 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 +=  $tarifa_total_r4_65m + (($fdm_adult65 * $room4 * $frday) / 5) + (($fdm_child65 * $room4_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 +=  $tarifa_total_r4_65m + (($fdm_adult65 * $room4 * $frday) / 10) + (($fdm_child65 * $room4_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10) + (($cargo_total3)/10) + (($cargo_total4)/10);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 +=  $tarifa_total_r4_65m + (($fdm_adult65 * $room4 * $frday) / 15) + (($fdm_child65 * $room4_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15) + (($cargo_total3)/15) + (($cargo_total4)/15);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 +=  $tarifa_total_r4_65m + (($fdm_adult65 * $room4 * $frday) / 20) + (($fdm_child65 * $room4_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20) + (($cargo_total3)/20) + (($cargo_total4)/20);
                     }
                 }
                 
                 //TOUR 65 DELUXE
 
 
                 if ($numNoches['noches'] == 5 && $categor == 4 && $room4 > 0 && $tarifa_p1d65 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += ($costohotel ['sgld5']) / 5 + (($chd65 * $room4_c) / 5) + (($fdd_adult65 * $room4 * $frday) / 5) + (($fdd_child65 * $room4_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += ($costohotel ['dbld5']) / 5 + (($chd65 * $room4_c) / 10) + (($fdd_adult65 * $room4 * $frday) / 10) + (($fdd_child65 * $room4_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10) + (($cargo_total3)/10) + (($cargo_total4)/10);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += ($costohotel ['tpld5']) / 5 + (($chd65 * $room4_c) / 15) + (($fdd_adult65 * $room4 * $frday) / 15) + (($fdd_child65 * $room4_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15) + (($cargo_total3)/15) + (($cargo_total4)/15);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += ($costohotel ['quad5']) / 5 + (($chd65 * $room4_c) / 20) + (($fdd_adult65 * $room4 * $frday) / 20) + (($fdd_child65 * $room4_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20) + (($cargo_total3)/20) + (($cargo_total4)/20);
                     }
                 }
                 
                 if ($numNoches['noches'] == 5 && $categor == 4 && $room4 > 0 && $tarifa_p1d65 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 +=  $tarifa_total_r4_65d + (($fdd_adult65 * $room4 * $frday) / 5) + (($fdd_child65 * $room4_c * $frday) / 5) + (($cargo_total)/5) + (($cargo_total2)/5) + (($cargo_total3)/5) + (($cargo_total4)/5);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 +=  $tarifa_total_r4_65d + (($fdd_adult65 * $room4 * $frday) / 10) + (($fdd_child65 * $room4_c * $frday) / 10) + (($cargo_total)/10) + (($cargo_total2)/10) + (($cargo_total3)/10) + (($cargo_total4)/10);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 +=  $tarifa_total_r4_65d + (($fdd_adult65 * $room4 * $frday) / 15) + (($fdd_child65 * $room4_c * $frday) / 15) + (($cargo_total)/15) + (($cargo_total2)/15) + (($cargo_total3)/15) + (($cargo_total4)/15);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 +=  $tarifa_total_r4_65d + (($fdd_adult65 * $room4 * $frday) / 20) + (($fdd_child65 * $room4_c * $frday) / 20) + (($cargo_total)/20) + (($cargo_total2)/20) + (($cargo_total3)/20) + (($cargo_total4)/20);
                     }
                 }
 
                 //TOUR 76 VALUE
 
 
 
                 if ($numNoches['noches'] == 6 && $categor == 2 && $room4 > 0 && $tarifa_p1v76 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += ($costohotel ['sgl6']) / 6 + (($chv76 * $room4_c) / 6) + (($fdv_adult76 * $room4 * $frday) / 6) + (($fdv_child76 * $room4_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += ($costohotel ['dbl6']) / 6 + (($chv76 * $room4_c) / 12) + (($fdv_adult76 * $room4 * $frday) / 12) + (($fdv_child76 * $room4_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += ($costohotel ['tpl6']) / 6 + (($chv76 * $room4_c) / 18) + (($fdv_adult76 * $room4 * $frday) / 18) + (($fdv_child76 * $room4_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += ($costohotel ['qua6']) / 6 + (($chv76 * $room4_c) / 24) + (($fdv_adult76 * $room4 * $frday) / 24) + (($fdv_child76 * $room4_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                 }
                 
                 if ($numNoches['noches'] == 6 && $categor == 2 && $room4 > 0 && $tarifa_p1v76 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 +=  $tarifa_total_r4_76v + (($fdv_adult76 * $room4 * $frday) / 6) + (($fdv_child76 * $room4_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 +=  $tarifa_total_r4_76v + (($fdv_adult76 * $room4 * $frday) / 12) + (($fdv_child76 * $room4_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 +=  $tarifa_total_r4_76v + (($fdv_adult76 * $room4 * $frday) / 18) + (($fdv_child76 * $room4_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 +=  $tarifa_total_r4_76v + (($fdv_adult76 * $room4 * $frday) / 24) + (($fdv_child76 * $room4_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                 }
 
                 //TOUR 76 MODERATE
 
                 if ($numNoches['noches'] == 6 && $categor == 3 && $room4 > 0 && $tarifa_p1m76 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);                    
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += ($costohotel ['sglm6']) / 6 + (($chm76 * $room4_c) / 6) + (($fdm_adult76 * $room4 * $frday) / 6) + (($fdm_child76 * $room4_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += ($costohotel ['dblm6']) / 6 + (($chm76 * $room4_c) / 12) + (($fdm_adult76 * $room4 * $frday) / 12) + (($fdm_child76 * $room4_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += ($costohotel ['tplm6']) / 6 + (($chm76 * $room4_c) / 18) + (($fdm_adult76 * $room4 * $frday) / 18) + (($fdm_child76 * $room4_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += ($costohotel ['quam6']) / 6 + (($chm76 * $room4_c) / 24) + (($fdm_adult76 * $room4 * $frday) / 24) + (($fdm_child76 * $room4_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                 }
                 
                 if ($numNoches['noches'] == 6 && $categor == 3 && $room4 > 0 && $tarifa_p1m76 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);                    
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 +=  $tarifa_total_r4_76m + (($fdm_adult76 * $room4 * $frday) / 6) + (($fdm_child76 * $room4_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 +=  $tarifa_total_r4_76m + (($fdm_adult76 * $room4 * $frday) / 12) + (($fdm_child76 * $room4_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 +=  $tarifa_total_r4_76m + (($fdm_adult76 * $room4 * $frday) / 18) + (($fdm_child76 * $room4_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 +=  $tarifa_total_r4_76m + (($fdm_adult76 * $room4 * $frday) / 24) + (($fdm_child76 * $room4_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                 }
                 
                 //TOUR 76 DELUXE
 
                 if ($numNoches['noches'] == 6 && $categor == 4 && $room4 > 0 && $tarifa_p1d76 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);                    
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += ($costohotel ['sgld6']) / 6 + (($chd76 * $room4_c) / 6) + (($fdd_adult76 * $room4 * $frday) / 6) + (($fdd_child76 * $room4_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += ($costohotel ['dbld6']) / 6 + (($chd76 * $room4_c) / 12) + (($fdd_adult76 * $room4 * $frday) / 12) + (($fdd_child76 * $room4_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += ($costohotel ['tpld6']) / 6 + (($chd76 * $room4_c) / 18) + (($fdd_adult76 * $room4 * $frday) / 18) + (($fdd_child76 * $room4_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += ($costohotel ['quad6']) / 6 + (($chd76 * $room4_c) / 24) + (($fdd_adult76 * $room4 * $frday) / 24) + (($fdd_child76 * $room4_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                 }
                 
                 if ($numNoches['noches'] == 6 && $categor == 4 && $room4 > 0 && $tarifa_p1d76 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);                    
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 +=  $tarifa_total_r4_76d + (($fdd_adult76 * $room4 * $frday) / 6) + (($fdd_child76 * $room4_c * $frday) / 6) + (($cargo_total)/6) + (($cargo_total2)/6) + (($cargo_total3)/6) + (($cargo_total4)/6);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 +=  $tarifa_total_r4_76d + (($fdd_adult76 * $room4 * $frday) / 12) + (($fdd_child76 * $room4_c * $frday) / 12) + (($cargo_total)/12) + (($cargo_total2)/12) + (($cargo_total3)/12) + (($cargo_total4)/12);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 +=  $tarifa_total_r4_76d + (($fdd_adult76 * $room4 * $frday) / 18) + (($fdd_child76 * $room4_c * $frday) / 18) + (($cargo_total)/18) + (($cargo_total2)/18) + (($cargo_total3)/18) + (($cargo_total4)/18);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 +=  $tarifa_total_r4_76d + (($fdd_adult76 * $room4 * $frday) / 24) + (($fdd_child76 * $room4_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                 }
 
 
                 //TOUR 87 VALUE 
 
 
                 if ($numNoches['noches'] == 7 && $categor == 2 && $room4 > 0 && $tarifa_p1v87 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += ($costohotel ['sgl7']) / 7 + (($chv87 * $room4_c) / 7) + (($fdv_adult87 * $room4 * $frday) / 7) + (($fdv_child87 * $room4_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += ($costohotel ['dbl7']) / 7 + (($chv87 * $room4_c) / 14) + (($fdv_adult87 * $room4 * $frday) / 14) + (($fdv_child87 * $room4_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += ($costohotel ['tpl7']) / 7 + (($chv87 * $room4_c) / 21) + (($fdv_adult87 * $room4 * $frday) / 21) + (($fdv_child87 * $room4_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += ($costohotel ['qua7']) / 7 + (($chv87 * $room4_c) / 28) + (($fdv_adult87 * $room4 * $frday) / 28) + (($fdv_child87 * $room4_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                     }
                 }
                 
                 if ($numNoches['noches'] == 7 && $categor == 2 && $room4 > 0 && $tarifa_p1v87 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 +=  $tarifa_total_r4_87v + (($fdv_adult87 * $room4 * $frday) / 7) + (($fdv_child87 * $room4_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 +=  $tarifa_total_r4_87v + (($fdv_adult87 * $room4 * $frday) / 14) + (($fdv_child87 * $room4_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 +=  $tarifa_total_r4_87v + (($fdv_adult87 * $room4 * $frday) / 21) + (($fdv_child87 * $room4_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 +=  $tarifa_total_r4_87v + (($fdv_adult87 * $room4 * $frday) / 28) + (($fdv_child87 * $room4_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                     }
                 }
 
                 //TOUR 87 MODERATE
 
                 if ($numNoches['noches'] == 7 && $categor == 3 && $room4 > 0 && $tarifa_p1m87 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += ($costohotel ['sglm7']) / 7 + (($chm87 * $room4_c) / 7) + (($fdm_adult87 * $room4 * $frday) / 7) + (($fdm_child87 * $room4_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += ($costohotel ['dblm7']) / 7 + (($chm87 * $room4_c) / 14) + (($fdm_adult87 * $room4 * $frday) / 14) + (($fdm_child87 * $room4_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += ($costohotel ['tplm7']) / 7 + (($chm87 * $room4_c) / 21) + (($fdm_adult87 * $room4 * $frday) / 21) + (($fdm_child87 * $room4_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += ($costohotel ['quam7']) / 7 + (($chm87 * $room4_c) / 28) + (($fdm_adult87 * $room4 * $frday) / 28) + (($fdm_child87 * $room4_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                     }
                 }
                 
                 if ($numNoches['noches'] == 7 && $categor == 3 && $room4 > 0 && $tarifa_p1m87 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 +=  $tarifa_total_r4_87m + (($fdm_adult87 * $room4 * $frday) / 7) + (($fdm_child87 * $room4_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 +=  $tarifa_total_r4_87m + (($fdm_adult87 * $room4 * $frday) / 14) + (($fdm_child87 * $room4_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 +=  $tarifa_total_r4_87m + (($fdm_adult87 * $room4 * $frday) / 21) + (($fdm_child87 * $room4_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 +=  $tarifa_total_r4_87m + (($fdm_adult87 * $room4 * $frday) / 28) + (($fdm_child87 * $room4_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                     }
                 }
                 
                 //TOUR 87 DELUXE
 
                 if ($numNoches['noches'] == 7 && $categor == 4 && $room4 > 0 && $tarifa_p1d87 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += ($costohotel ['sgld7']) / 7 + (($chd87 * $room4_c) / 7) + (($fdd_adult87 * $room4 * $frday) / 7) + (($fdd_child87 * $room4_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += ($costohotel ['dbld7']) / 7 + (($chd87 * $room4_c) / 14) + (($fdd_adult87 * $room4 * $frday) / 14) + (($fdd_child87 * $room4_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += ($costohotel ['tpld7']) / 7 + (($chd87 * $room4_c) / 21) + (($fdd_adult87 * $room4 * $frday) / 21) + (($fdd_child87 * $room4_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += ($costohotel ['quad7']) / 7 + (($chd87 * $room4_c) / 28) + (($fdd_adult87 * $room4 * $frday) / 28) + (($fdd_child87 * $room4_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                     }
                 }
                 
                 if ($numNoches['noches'] == 7 && $categor == 4 && $room4 > 0 && $tarifa_p1d87 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 +=  $tarifa_total_r4_87d + (($fdd_adult87 * $room4 * $frday) / 7) + (($fdd_child87 * $room4_c * $frday) / 7) + (($cargo_total)/7) + (($cargo_total2)/7) + (($cargo_total3)/7) + (($cargo_total4)/7);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 +=  $tarifa_total_r4_87d + (($fdd_adult87 * $room4 * $frday) / 14) + (($fdd_child87 * $room4_c * $frday) / 14) + (($cargo_total)/14) + (($cargo_total2)/14) + (($cargo_total3)/14) + (($cargo_total4)/14);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 +=  $tarifa_total_r4_87d + (($fdd_adult87 * $room4 * $frday) / 21) + (($fdd_child87 * $room4_c * $frday) / 21) + (($cargo_total)/21) + (($cargo_total2)/21) + (($cargo_total3)/21) + (($cargo_total4)/21);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 +=  $tarifa_total_r4_87d + (($fdd_adult87 * $room4 * $frday) / 28) + (($fdd_child87 * $room4_c * $frday) / 28) + (($cargo_total)/28) + (($cargo_total2)/28) + (($cargo_total3)/28) + (($cargo_total4)/28);
                     }
                 }
 
 
 
 
                 //TOUR 98 VALUE 
 
                 if ($numNoches['noches'] == 8 && $categor == 2 && $room4 > 0 && $tarifa_p1v98 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
 
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += ($costohotel ['sgl8']) / 8 + (($chv98 * $room4_c) / 8) + (($fdv_adult98 * $room4 * $frday) / 8) + (($fdv_child98 * $room4_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += ($costohotel ['dbl8']) / 8 + (($chv98 * $room4_c) / 16) + (($fdv_adult98 * $room4 * $frday) / 16) + (($fdv_child98 * $room4_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += ($costohotel ['tpl8']) / 8 + (($chv98 * $room4_c) / 24) + (($fdv_adult98 * $room4 * $frday) / 24) + (($fdv_child98 * $room4_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += ($costohotel ['qua8']) / 8 + (($chv98 * $room4_c) / 32) + (($fdv_adult98 * $room4 * $frday) / 32) + (($fdv_child98 * $room4_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                     }
                 }
                 
                 if ($numNoches['noches'] == 8 && $categor == 2 && $room4 > 0 && $tarifa_p1v98 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];                        
                     $cargo_total = ($numero_noches)*($cpnv);
                     $cargo_total2 = ($numero_noches)*($cpnv2);
                     $cargo_total3 = ($numero_noches)*($cpnv3);
                     $cargo_total4 = ($numero_noches)*($cpnv4);
 
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 +=  $tarifa_total_r4_98v + (($fdv_adult98 * $room4 * $frday) / 8) + (($fdv_child98 * $room4_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 +=  $tarifa_total_r4_98v + (($fdv_adult98 * $room4 * $frday) / 16) + (($fdv_child98 * $room4_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 +=  $tarifa_total_r4_98v + (($fdv_adult98 * $room4 * $frday) / 24) + (($fdv_child98 * $room4_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 +=  $tarifa_total_r4_98v + (($fdv_adult98 * $room4 * $frday) / 32) + (($fdv_child98 * $room4_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                     }
                 }
 
 
                 //TOUR 98 MODERATE
 
 
                 if ($numNoches['noches'] == 8 && $categor == 3 && $room4 > 0 && $tarifa_p1m98 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += ($costohotel ['sglm8']) / 8 + (($chm98 * $room4_c) / 8) + (($fdm_adult98 * $room4 * $frday) / 8) + (($fdm_child98 * $room4_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += ($costohotel ['dblm8']) / 8 + (($chm98 * $room4_c) / 16) + (($fdm_adult98 * $room4 * $frday) / 16) + (($fdm_child98 * $room4_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += ($costohotel ['tplm8']) / 8 + (($chm98 * $room4_c) / 24) + (($fdm_adult98 * $room4 * $frday) / 24) + (($fdm_child98 * $room4_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += ($costohotel ['quam8']) / 8 + (($chm98 * $room4_c) / 32) + (($fdm_adult98 * $room4 * $frday) / 32) + (($fdm_child98 * $room4_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                     }
                 }
                 
                 if ($numNoches['noches'] == 8 && $categor == 3 && $room4 > 0 && $tarifa_p1m98 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnm);
                     $cargo_total2 = ($numero_noches)*($cpnm2);
                     $cargo_total3 = ($numero_noches)*($cpnm3);
                     $cargo_total4 = ($numero_noches)*($cpnm4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 +=  $tarifa_total_r4_98m + (($fdm_adult98 * $room4 * $frday) / 8) + (($fdm_child98 * $room4_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 +=  $tarifa_total_r4_98m + (($fdm_adult98 * $room4 * $frday) / 16) + (($fdm_child98 * $room4_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 +=  $tarifa_total_r4_98m + (($fdm_adult98 * $room4 * $frday) / 24) + (($fdm_child98 * $room4_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 +=  $tarifa_total_r4_98m + (($fdm_adult98 * $room4 * $frday) / 32) + (($fdm_child98 * $room4_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                     }
                 }
                 
                 //TOUR 98 DELUXE
 
 
                 if ($numNoches['noches'] == 8 && $categor == 4 && $room4 > 0 && $tarifa_p1d98 == '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 += ($costohotel ['sgld8']) / 8 + (($chd98 * $room4_c) / 8) + (($fdd_adult98 * $room4 * $frday) / 8) + (($fdd_child98 * $room4_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 += ($costohotel ['dbld8']) / 8 + (($chd98 * $room4_c) / 16) + (($fdd_adult98 * $room4 * $frday) / 16) + (($fdd_child98 * $room4_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 += ($costohotel ['tpld8']) / 8 + (($chd98 * $room4_c) / 24) + (($fdd_adult98 * $room4 * $frday) / 24) + (($fdd_child98 * $room4_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 += ($costohotel ['quad8']) / 8 + (($chd98 * $room4_c) / 32) + (($fdd_adult98 * $room4 * $frday) / 32) + (($fdd_child98 * $room4_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                     }
                 }
                 
                 if ($numNoches['noches'] == 8 && $categor == 4 && $room4 > 0 && $tarifa_p1d98 > '0.00') {
                     
                     $numero_noches = $numNoches['noches'];
                     $cargo_total = ($numero_noches)*($cpnd);
                     $cargo_total2 = ($numero_noches)*($cpnd2);
                     $cargo_total3 = ($numero_noches)*($cpnd3);
                     $cargo_total4 = ($numero_noches)*($cpnd4);
                     
 
                     if ($room4 == 1) {
 
                         $priceRoom4 +=  $tarifa_total_r4_98d + (($fdd_adult98 * $room4 * $frday) / 8) + (($fdd_child98 * $room4_c * $frday) / 8) + (($cargo_total)/8) + (($cargo_total2)/8) + (($cargo_total3)/8) + (($cargo_total4)/8);
                     }
                     if ($room4 == 2) {
 
                         $priceRoom4 +=  $tarifa_total_r4_98d + (($fdd_adult98 * $room4 * $frday) / 16) + (($fdd_child98 * $room4_c * $frday) / 16) + (($cargo_total)/16) + (($cargo_total2)/16) + (($cargo_total3)/16) + (($cargo_total4)/16);
                     }
                     if ($room4 == 3) {
 
                         $priceRoom4 +=  $tarifa_total_r4_98d + (($fdd_adult98 * $room4 * $frday) / 24) + (($fdd_child98 * $room4_c * $frday) / 24) + (($cargo_total)/24) + (($cargo_total2)/24) + (($cargo_total3)/24) + (($cargo_total4)/24);
                     }
                     if ($room4 == 4) {
 
                         $priceRoom4 +=  $tarifa_total_r4_98d + (($fdd_adult98 * $room4 * $frday) / 32) + (($fdd_child98 * $room4_c * $frday) / 32) + (($cargo_total)/32) + (($cargo_total2)/32) + (($cargo_total3)/32) + (($cargo_total4)/32);
                     }
                 }
 
                 if ($room4 == 0) {
 
                     $priceRoom4 = 0;
                 }
                 date_add($fecha4, date_interval_create_from_date_string('1 days'));
                 $contador++;
             }
             //$priceRoom4 = (round($priceRoom4) * $room4);
             $priceRoom4 = $priceRoom4 * $room4;
         } else {
             $priceRoom4 = 0;
         }
         //Desayunos
         if ($costohotel ['breakfast'] == 0 || $costohotel ['categoria'] > 2) {
             $priceBreakfast += ($costohotel ['breackfast']);
         } else {
             $priceBreakfast += 0;
         }
         date_add($fecha, date_interval_create_from_date_string('1 days'));
 //                echo $costohotel['sgl'];
 
         if ($free_night_buffet == 1) {
 
             $totalBreakfast = $priceBreakfast * ($numNoches['noches'] - $nochesfree);
             // $totalBreakfast = $priceBreakfast * ($numNoches['noches']);
             //$totalBreakfast = $priceBreakfast + ($gastoNoche * $nochesfree);
             // $totalBreakfast = $priceBreakfast + ($gastoNoche);
         } else {
             $totalBreakfast = $priceBreakfast * $numNoches['noches'];
         }
         
         
 //        echo $totalBreakfast;
 //        print_r($priceRoom1);
 //        exit;
         //Precios per tipos de habitaciones
         $sgl = (($room1 == 1) ? $priceRoom1 : 0) + (($room2 == 1) ? $priceRoom2 : 0) + (($room3 == 1) ? $priceRoom3 : 0) + (($room4 == 1) ? $priceRoom4 : 0);
         $dbl = (($room1 == 2) ? $priceRoom1 : 0) + (($room2 == 2) ? $priceRoom2 : 0) + (($room3 == 2) ? $priceRoom3 : 0) + (($room4 == 2) ? $priceRoom4 : 0);
         $tpl = (($room1 == 3) ? $priceRoom1 : 0) + (($room2 == 3) ? $priceRoom2 : 0) + (($room3 == 3) ? $priceRoom3 : 0) + (($room4 == 3) ? $priceRoom4 : 0);
         $qua = (($room1 == 4) ? $priceRoom1 : 0) + (($room2 == 4) ? $priceRoom2 : 0) + (($room3 == 4) ? $priceRoom3 : 0) + (($room4 == 4) ? $priceRoom4 : 0);
 
         $totalhotel = array();
         
         $totalhotel['priceRoom1'] = $priceRoom1;
         //echo $priceRoom1;
         $totalhotel['priceRoom2'] = $priceRoom2;
         //echo $priceRoom2;
         $totalhotel['priceRoom3'] = $priceRoom3;
         //echo $priceRoom3;
         $totalhotel['priceRoom4'] = $priceRoom4;
         //echo $priceRoom4;
         $totalhotel['sgl'] = $sgl;
         //echo $sgl;
         $totalhotel['dbl'] = $dbl;
         //echo $dbl;
         $totalhotel['tpl'] = $tpl;
         //echo $tpl;
         $totalhotel['qua'] = $qua;
         //echo $qua;
         $totalhotel['priceBreakfast'] = (isset($totalBreakfast)) ? $totalBreakfast : $priceBreakfast;
         //echo '<input type="hidden" readonly="readonly" value="' . $sgl . '" name="pricesql" id="pricesql"/>';
         $totalhotel['free_night_buffet'] = $free_night_buffet;  
         
         //tour21 value room1
         
         if ($numNoches['noches'] == 1 && $categor == 2 && $room1 > 0 && $tarifa_p1v21 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 1 && $categor == 2 && $room1 > 0 && $tarifa_p1v21 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             
             
             
             $totalhotel['total'] = $tarifa_total_r1_21v + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4)+ $priceRoom2 + $priceRoom3 + $priceRoom4;
             //echo $totalhotel['total'];
             
         }
         
         //tour21 value room2
         
         if ($numNoches['noches'] == 1 && $categor == 2 && $room2 > 0 && $tarifa_p1v21 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 1 && $categor == 2 && $room2 > 0 && $tarifa_p1v21 > '0.00') {            
                         
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             
             //echo "<<".$cargo_total;
             
             $totalhotel['total'] = $tarifa_total_r1_21v + $tarifa_total_r2_21v + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour21 value room3
         
         if ($numNoches['noches'] == 1 && $categor == 2 && $room3 > 0 && $tarifa_p1v21 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 1 && $categor == 2 && $room3 > 0 && $tarifa_p1v21 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);            
             
             $totalhotel['total'] = $tarifa_total_r1_21v + $tarifa_total_r2_21v + $tarifa_total_r3_21v + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour21 value room4
         
         if ($numNoches['noches'] == 1 && $categor == 2 && $room4 > 0 && $tarifa_p1v21 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 1 && $categor == 2 && $room4 > 0 && $tarifa_p1v21 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);       
             
             $totalhotel['total'] = $tarifa_total_r1_21v + $tarifa_total_r2_21v + $tarifa_total_r3_21v + $tarifa_total_r4_21v + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         //tour21 moderate room1
         
         if ($numNoches['noches'] == 1 && $categor == 3 && $room1 > 0 && $tarifa_p1m21 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 1 && $categor == 3 && $room1 > 0 && $tarifa_p1m21 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_21m + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         //tour21 moderate room2
         
         if ($numNoches['noches'] == 1 && $categor == 3 && $room2 > 0 && $tarifa_p1m21 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 1 && $categor == 3 && $room2 > 0 && $tarifa_p1m21 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);            
             $totalhotel['total'] = $tarifa_total_r1_21m + $tarifa_total_r2_21m + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour21 moderate room3
         
         if ($numNoches['noches'] == 1 && $categor == 3 && $room3 > 0 && $tarifa_p1m21 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 1 && $categor == 3 && $room3 > 0 && $tarifa_p1m21 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_21m + $tarifa_total_r2_21m + $tarifa_total_r3_21m + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour21 moderate room4
         
         if ($numNoches['noches'] == 1 && $categor == 3 && $room4 > 0 && $tarifa_p1m21 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 1 && $categor == 3 && $room4 > 0 && $tarifa_p1m21 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_21m + $tarifa_total_r2_21m + $tarifa_total_r3_21m + $tarifa_total_r4_21m + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         
         //*****************DELUXE*********************************************************************************
         
         //tour21 DELUXE room1
         
         if ($numNoches['noches'] == 1 && $categor == 4 && $room1 > 0 && $tarifa_p1d21 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 1 && $categor == 4 && $room1 > 0 && $tarifa_p1d21 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_21d + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         //tour21 deluxe room2
         
         if ($numNoches['noches'] == 1 && $categor == 4 && $room2 > 0 && $tarifa_p1d21 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 1 && $categor == 4 && $room2 > 0 && $tarifa_p1d21 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);            
             $totalhotel['total'] = $tarifa_total_r1_21d + $tarifa_total_r2_21d + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour21 deluxe room3
         
         if ($numNoches['noches'] == 1 && $categor == 4 && $room3 > 0 && $tarifa_p1d21 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 1 && $categor == 4 && $room3 > 0 && $tarifa_p1d21 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_21d + $tarifa_total_r2_21d + $tarifa_total_r3_21d + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour21 deluxe room4
         
         if ($numNoches['noches'] == 1 && $categor == 4 && $room4 > 0 && $tarifa_p1d21 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 1 && $categor == 4 && $room4 > 0 && $tarifa_p1d21 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_21d + $tarifa_total_r2_21d + $tarifa_total_r3_21d + $tarifa_total_r4_21d + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         
         //*****************
         
         
         
         //tour32 value room1
         
         if ($numNoches['noches'] == 2 && $categor == 2 && $room1 > 0 && $tarifa_p1v32 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 2 && $categor == 2 && $room1 > 0 && $tarifa_p1v32 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
                         
             $totalhotel['total'] = $tarifa_total_r1_32v + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         //tour32 value room2
         
         if ($numNoches['noches'] == 2 && $categor == 2 && $room2 > 0 && $tarifa_p1v32 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 2 && $categor == 2 && $room2 > 0 && $tarifa_p1v32 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             $totalhotel['total'] = $tarifa_total_r1_32v + $tarifa_total_r2_32v + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour32 value room3
         
         if ($numNoches['noches'] == 2 && $categor == 2 && $room3 > 0 && $tarifa_p1v32 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 2 && $categor == 2 && $room3 > 0 && $tarifa_p1v32 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             $totalhotel['total'] = $tarifa_total_r1_32v + $tarifa_total_r2_32v + $tarifa_total_r3_32v + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour32 value room4
         
         if ($numNoches['noches'] == 2 && $categor == 2 && $room4 > 0 && $tarifa_p1v32 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 2 && $categor == 2 && $room4 > 0 && $tarifa_p1v32 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             $totalhotel['total'] = $tarifa_total_r1_32v + $tarifa_total_r2_32v + $tarifa_total_r3_32v + $tarifa_total_r4_32v + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         
         //tour32 moderate room1
         
         if ($numNoches['noches'] == 2 && $categor == 3 && $room1 > 0 && $tarifa_p1m32 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 2 && $categor == 3 && $room1 > 0 && $tarifa_p1m32 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             
             $totalhotel['total'] = $tarifa_total_r1_32m + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
             //echo $totalhotel['total'];
         }
         
         //tour32 moderate room2
         
         if ($numNoches['noches'] == 2 && $categor == 3 && $room2 > 0 && $tarifa_p1m32 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 2 && $categor == 3 && $room2 > 0 && $tarifa_p1m32 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_32m + $tarifa_total_r2_32m + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour32 moderate room3
         
         if ($numNoches['noches'] == 2 && $categor == 3 && $room3 > 0 && $tarifa_p1m32 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 2 && $categor == 3 && $room3 > 0 && $tarifa_p1m32 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);            
             $totalhotel['total'] = $tarifa_total_r1_32m + $tarifa_total_r2_32m + $tarifa_total_r3_32m + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour32 moderate room4
         
         if ($numNoches['noches'] == 2 && $categor == 3 && $room4 > 0 && $tarifa_p1m32 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 2 && $categor == 3 && $room4 > 0 && $tarifa_p1m32 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);  
             $totalhotel['total'] = $tarifa_total_r1_32m + $tarifa_total_r2_32m + $tarifa_total_r3_32m + $tarifa_total_r4_32m + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         //tour32 deluxe room1
         
         if ($numNoches['noches'] == 2 && $categor == 4 && $room1 > 0 && $tarifa_p1d32 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 2 && $categor == 4 && $room1 > 0 && $tarifa_p1d32 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             
             $totalhotel['total'] = $tarifa_total_r1_32d + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
             //echo $totalhotel['total'];
         }
         
         //tour32 deluxe room2
         
         if ($numNoches['noches'] == 2 && $categor == 4 && $room2 > 0 && $tarifa_p1d32 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 2 && $categor == 4 && $room2 > 0 && $tarifa_p1d32 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_32d + $tarifa_total_r2_32d + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour32 deluxe room3
         
         if ($numNoches['noches'] == 2 && $categor == 4 && $room3 > 0 && $tarifa_p1d32 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 2 && $categor == 4 && $room3 > 0 && $tarifa_p1d32 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);            
             $totalhotel['total'] = $tarifa_total_r1_32d + $tarifa_total_r2_32d + $tarifa_total_r3_32d + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour32 deluxe room4
         
         if ($numNoches['noches'] == 2 && $categor == 4 && $room4 > 0 && $tarifa_p1d32 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 2 && $categor == 4 && $room4 > 0 && $tarifa_p1d32 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);  
             $totalhotel['total'] = $tarifa_total_r1_32d + $tarifa_total_r2_32d + $tarifa_total_r3_32d + $tarifa_total_r4_32d + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         
         
         //tour43 value room1
         
         if ($numNoches['noches'] == 3 && $categor == 2 && $room1 > 0 && $tarifa_p1v43 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 3 && $categor == 2 && $room1 > 0 && $tarifa_p1v43 > '0.00') {
             
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             $totalhotel['total'] = $tarifa_total_r1_43v + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         //tour43 value room2
         
         if ($numNoches['noches'] == 3 && $categor == 2 && $room2 > 0 && $tarifa_p1v43 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 3 && $categor == 2 && $room2 > 0 && $tarifa_p1v43 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);            
             $totalhotel['total'] = $tarifa_total_r1_43v + $tarifa_total_r2_43v + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour43 value room3
         
         if ($numNoches['noches'] == 3 && $categor == 2 && $room3 > 0 && $tarifa_p1v43 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 3 && $categor == 2 && $room3 > 0 && $tarifa_p1v43 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);       
             $totalhotel['total'] = $tarifa_total_r1_43v + $tarifa_total_r2_43v + $tarifa_total_r3_43v + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour43 value room4
         
         if ($numNoches['noches'] == 3 && $categor == 2 && $room4 > 0 && $tarifa_p1v43 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 3 && $categor == 2 && $room4 > 0 && $tarifa_p1v43 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4); 
             $totalhotel['total'] = $tarifa_total_r1_43v + $tarifa_total_r2_43v + $tarifa_total_r3_43v + $tarifa_total_r4_43v + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         
         //tour43 moderate room1
         
         if ($numNoches['noches'] == 3 && $categor == 3 && $room1 > 0 && $tarifa_p1m43 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 3 && $categor == 3 && $room1 > 0 && $tarifa_p1m43 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_43m + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         //tour43 moderate room2
         
         if ($numNoches['noches'] == 3 && $categor == 3 && $room2 > 0 && $tarifa_p1m43 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 3 && $categor == 3 && $room2 > 0 && $tarifa_p1m43 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_43m + $tarifa_total_r2_43m + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour43 moderate room3
         
         if ($numNoches['noches'] == 3 && $categor == 3 && $room3 > 0 && $tarifa_p1m43 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 3 && $categor == 3 && $room3 > 0 && $tarifa_p1m43 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_43m + $tarifa_total_r2_43m + $tarifa_total_r3_43m + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour43 moderate room4
         
         if ($numNoches['noches'] == 3 && $categor == 3 && $room4 > 0 && $tarifa_p1m43 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 3 && $categor == 3 && $room4 > 0 && $tarifa_p1m43 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_43m + $tarifa_total_r2_43m + $tarifa_total_r3_43m + $tarifa_total_r4_43m + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         //tour43 deluxe room1
         
         if ($numNoches['noches'] == 3 && $categor == 4 && $room1 > 0 && $tarifa_p1d43 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 3 && $categor == 4 && $room1 > 0 && $tarifa_p1d43 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_43d + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         //tour43 deluxe room2
         
         if ($numNoches['noches'] == 3 && $categor == 4 && $room2 > 0 && $tarifa_p1d43 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 3 && $categor == 4 && $room2 > 0 && $tarifa_p1d43 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_43d + $tarifa_total_r2_43d + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour43 deluxe room3
         
         if ($numNoches['noches'] == 3 && $categor == 4 && $room3 > 0 && $tarifa_p1d43 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 3 && $categor == 4 && $room3 > 0 && $tarifa_p1d43 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_43d + $tarifa_total_r2_43d + $tarifa_total_r3_43d + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour43 deluxe room4
         
         if ($numNoches['noches'] == 3 && $categor == 4 && $room4 > 0 && $tarifa_p1d43 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 3 && $categor == 4 && $room4 > 0 && $tarifa_p1d43 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_43d + $tarifa_total_r2_43d + $tarifa_total_r3_43d + $tarifa_total_r4_43d + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         //*********************************************************************************************
         
         //tour54 value room1
         
         if ($numNoches['noches'] == 4 && $categor == 2 && $room1 > 0 && $tarifa_p1v54 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 4 && $categor == 2 && $room1 > 0 && $tarifa_p1v54 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             $totalhotel['total'] = $tarifa_total_r1_54v + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         //tour54 value room2
         
         if ($numNoches['noches'] == 4 && $categor == 2 && $room2 > 0 && $tarifa_p1v54 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 4 && $categor == 2 && $room2 > 0 && $tarifa_p1v54 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             $totalhotel['total'] = $tarifa_total_r1_54v + $tarifa_total_r2_54v + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour54 value room3
         
         if ($numNoches['noches'] == 4 && $categor == 2 && $room3 > 0 && $tarifa_p1v54 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 4 && $categor == 2 && $room3 > 0 && $tarifa_p1v54 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             
             $totalhotel['total'] = $tarifa_total_r1_54v + $tarifa_total_r2_54v + $tarifa_total_r3_54v + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour54 value room4
         
         if ($numNoches['noches'] == 4 && $categor == 2 && $room4 > 0 && $tarifa_p1v54 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 4 && $categor == 2 && $room4 > 0 && $tarifa_p1v54 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             
             $totalhotel['total'] = $tarifa_total_r1_54v + $tarifa_total_r2_54v + $tarifa_total_r3_54v + $tarifa_total_r4_54v + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         
         
         //tour54 moderate room1
         
         if ($numNoches['noches'] == 4 && $categor == 3 && $room1 > 0 && $tarifa_p1m54 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 4 && $categor == 3 && $room1 > 0 && $tarifa_p1m54 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_54m + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         //tour54 moderate room2
         
         if ($numNoches['noches'] == 4 && $categor == 3 && $room2 > 0 && $tarifa_p1m54 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 4 && $categor == 3 && $room2 > 0 && $tarifa_p1m54 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_54m + $tarifa_total_r2_54m + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour54 moderate room3
         
         if ($numNoches['noches'] == 4 && $categor == 3 && $room3 > 0 && $tarifa_p1m54 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 4 && $categor == 3 && $room3 > 0 && $tarifa_p1m54 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_54m + $tarifa_total_r2_54m + $tarifa_total_r3_54m + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour54 moderate room4
         
         if ($numNoches['noches'] == 4 && $categor == 3 && $room4 > 0 && $tarifa_p1m54 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 4 && $categor == 3 && $room4 > 0 && $tarifa_p1m54 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_54m + $tarifa_total_r2_54m + $tarifa_total_r3_54m + $tarifa_total_r4_54m + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         //tour54 deluxe room1
         
         if ($numNoches['noches'] == 4 && $categor == 4 && $room1 > 0 && $tarifa_p1d54 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 4 && $categor == 4 && $room1 > 0 && $tarifa_p1d54 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_54d + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         //tour54 deluxe room2
         
         if ($numNoches['noches'] == 4 && $categor == 4 && $room2 > 0 && $tarifa_p1d54 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 4 && $categor == 4 && $room2 > 0 && $tarifa_p1d54 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_54d + $tarifa_total_r2_54d + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour54 deluxe room3
         
         if ($numNoches['noches'] == 4 && $categor == 4 && $room3 > 0 && $tarifa_p1d54 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 4 && $categor == 4 && $room3 > 0 && $tarifa_p1d54 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_54d + $tarifa_total_r2_54d + $tarifa_total_r3_54d + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour54 deluxe room4
         
         if ($numNoches['noches'] == 4 && $categor == 4 && $room4 > 0 && $tarifa_p1d54 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 4 && $categor == 4 && $room4 > 0 && $tarifa_p1d54 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_54d + $tarifa_total_r2_54d + $tarifa_total_r3_54d + $tarifa_total_r4_54d + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         
         //tour65 value room1
         
         if ($numNoches['noches'] == 5 && $categor == 2 && $room1 > 0 && $tarifa_p1v65 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 5 && $categor == 2 && $room1 > 0 && $tarifa_p1v65 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             $totalhotel['total'] = $tarifa_total_r1_65v + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         //tour65 value room2
         
         if ($numNoches['noches'] == 5 && $categor == 2 && $room2 > 0 && $tarifa_p1v65 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 5 && $categor == 2 && $room2 > 0 && $tarifa_p1v65 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             $totalhotel['total'] = $tarifa_total_r1_65v + $tarifa_total_r2_65v + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour65 value room3
         
         if ($numNoches['noches'] == 5 && $categor == 2 && $room3 > 0 && $tarifa_p1v65 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 5 && $categor == 2 && $room3 > 0 && $tarifa_p1v65 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             $totalhotel['total'] = $tarifa_total_r1_65v + $tarifa_total_r2_65v + $tarifa_total_r3_65v + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour65 value room4
         
         if ($numNoches['noches'] == 5 && $categor == 2 && $room4 > 0 && $tarifa_p1v65 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 5 && $categor == 2 && $room4 > 0 && $tarifa_p1v65 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             $totalhotel['total'] = $tarifa_total_r1_65v + $tarifa_total_r2_65v + $tarifa_total_r3_65v + $tarifa_total_r4_65v + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         
         
         //tour65 moderate room1
         
         if ($numNoches['noches'] == 5 && $categor == 3 && $room1 > 0 && $tarifa_p1m65 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 5 && $categor == 3 && $room1 > 0 && $tarifa_p1m65 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_65m + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         //tour65 moderate room2
         
         if ($numNoches['noches'] == 5 && $categor == 3 && $room2 > 0 && $tarifa_p1m65 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 5 && $categor == 3 && $room2 > 0 && $tarifa_p1m65 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_65m + $tarifa_total_r2_65m + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour65 moderate room3
         
         if ($numNoches['noches'] == 5 && $categor == 3 && $room3 > 0 && $tarifa_p1m65 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 5 && $categor == 3 && $room3 > 0 && $tarifa_p1m65 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_65m + $tarifa_total_r2_65m + $tarifa_total_r3_65m + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour65 moderate room4
         
         if ($numNoches['noches'] == 5 && $categor == 3 && $room4 > 0 && $tarifa_p1m65 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 5 && $categor == 3 && $room4 > 0 && $tarifa_p1m65 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_65m + $tarifa_total_r2_65m + $tarifa_total_r3_65m + $tarifa_total_r4_65m + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         //tour65 deluxe room1
         
         if ($numNoches['noches'] == 5 && $categor == 4 && $room1 > 0 && $tarifa_p1d65 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 5 && $categor == 4 && $room1 > 0 && $tarifa_p1d65 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_65d + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         //tour65 deluxe room2
         
         if ($numNoches['noches'] == 5 && $categor == 4 && $room2 > 0 && $tarifa_p1d65 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 5 && $categor == 4 && $room2 > 0 && $tarifa_p1d65 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_65d + $tarifa_total_r2_65d + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour65 deluxe room3
         
         if ($numNoches['noches'] == 5 && $categor == 4 && $room3 > 0 && $tarifa_p1d65 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 5 && $categor == 4 && $room3 > 0 && $tarifa_p1d65 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_65d + $tarifa_total_r2_65d + $tarifa_total_r3_65d + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour65 deluxe room4
         
         if ($numNoches['noches'] == 5 && $categor == 4 && $room4 > 0 && $tarifa_p1d65 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 5 && $categor == 4 && $room4 > 0 && $tarifa_p1d65 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_65d + $tarifa_total_r2_65d + $tarifa_total_r3_65d + $tarifa_total_r4_65d + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         
         //tour76 value room1
         
         if ($numNoches['noches'] == 6 && $categor == 2 && $room1 > 0 && $tarifa_p1v76 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 6 && $categor == 2 && $room1 > 0 && $tarifa_p1v76 > '0.00') {
             
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             $totalhotel['total'] = $tarifa_total_r1_76v + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         //tour76 value room2
         
         if ($numNoches['noches'] == 6 && $categor == 2 && $room2 > 0 && $tarifa_p1v76 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 6 && $categor == 2 && $room2 > 0 && $tarifa_p1v76 > '0.00') {
             
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             $totalhotel['total'] = $tarifa_total_r1_76v + $tarifa_total_r2_76v + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour76 value room3
         
         if ($numNoches['noches'] == 6 && $categor == 2 && $room3 > 0 && $tarifa_p1v76 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 6 && $categor == 2 && $room3 > 0 && $tarifa_p1v76 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             $totalhotel['total'] = $tarifa_total_r1_76v + $tarifa_total_r2_76v + $tarifa_total_r3_76v + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour76 value room4
         
         if ($numNoches['noches'] == 6 && $categor == 2 && $room4 > 0 && $tarifa_p1v76 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 6 && $categor == 2 && $room4 > 0 && $tarifa_p1v76 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             $totalhotel['total'] = $tarifa_total_r1_76v + $tarifa_total_r2_76v + $tarifa_total_r3_76v + $tarifa_total_r4_76v + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         
         //tour76 moderate room1
         
         if ($numNoches['noches'] == 6 && $categor == 3 && $room1 > 0 && $tarifa_p1m76 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 6 && $categor == 3 && $room1 > 0 && $tarifa_p1m76 > '0.00') {
             
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_76m + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         //tour76 moderate room2
         
         if ($numNoches['noches'] == 6 && $categor == 3 && $room2 > 0 && $tarifa_p1m76 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 6 && $categor == 3 && $room2 > 0 && $tarifa_p1m76 > '0.00') {            
             
             $totalhotel['total'] = $tarifa_total_r1_76m + $tarifa_total_r2_76m + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour76 moderate room3
         
         if ($numNoches['noches'] == 6 && $categor == 3 && $room3 > 0 && $tarifa_p1m76 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 6 && $categor == 3 && $room3 > 0 && $tarifa_p1m76 > '0.00') {
             
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_76m + $tarifa_total_r2_76m + $tarifa_total_r3_76m + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour76 moderate room4
         
         if ($numNoches['noches'] == 6 && $categor == 3 && $room4 > 0 && $tarifa_p1m76 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 6 && $categor == 3 && $room4 > 0 && $tarifa_p1m76 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_76m + $tarifa_total_r2_76m + $tarifa_total_r3_76m + $tarifa_total_r4_76m + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         //tour76 deluxe room1
         
         if ($numNoches['noches'] == 6 && $categor == 4 && $room1 > 0 && $tarifa_p1d76 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 6 && $categor == 4 && $room1 > 0 && $tarifa_p1d76 > '0.00') {
             
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_76d + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         //tour76 deluxe room2
         
         if ($numNoches['noches'] == 6 && $categor == 4 && $room2 > 0 && $tarifa_p1d76 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 6 && $categor == 4 && $room2 > 0 && $tarifa_p1d76 > '0.00') {            
             
             $totalhotel['total'] = $tarifa_total_r1_76d + $tarifa_total_r2_76d + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour76 deluxe room3
         
         if ($numNoches['noches'] == 6 && $categor == 4 && $room3 > 0 && $tarifa_p1d76 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 6 && $categor == 4 && $room3 > 0 && $tarifa_p1d76 > '0.00') {
             
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_76d + $tarifa_total_r2_76d + $tarifa_total_r3_76d + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour76 deluxe room4
         
         if ($numNoches['noches'] == 6 && $categor == 4 && $room4 > 0 && $tarifa_p1d76 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 6 && $categor == 4 && $room4 > 0 && $tarifa_p1d76 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_76d + $tarifa_total_r2_76d + $tarifa_total_r3_76d + $tarifa_total_r4_76d + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         
         //tour87 value room1
         
         if ($numNoches['noches'] == 7 && $categor == 2 && $room1 > 0 && $tarifa_p1v87 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 7 && $categor == 2 && $room1 > 0 && $tarifa_p1v87 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             $totalhotel['total'] = $tarifa_total_r1_87v + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         //tour87 value room2
         
         if ($numNoches['noches'] == 7 && $categor == 2 && $room2 > 0 && $tarifa_p1v87 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 7 && $categor == 2 && $room2 > 0 && $tarifa_p1v87 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             $totalhotel['total'] = $tarifa_total_r1_87v + $tarifa_total_r2_87v + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour87 value room3
         
         if ($numNoches['noches'] == 7 && $categor == 2 && $room3 > 0 && $tarifa_p1v87 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 7 && $categor == 2 && $room3 > 0 && $tarifa_p1v87 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             $totalhotel['total'] = $tarifa_total_r1_87v + $tarifa_total_r2_87v + $tarifa_total_r3_87v + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour87 value room4        
         if ($numNoches['noches'] == 7 && $categor == 2 && $room4 > 0 && $tarifa_p1v87 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 7 && $categor == 2 && $room4 > 0 && $tarifa_p1v87 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             $totalhotel['total'] = $tarifa_total_r1_87v + $tarifa_total_r2_87v + $tarifa_total_r3_87v + $tarifa_total_r4_87v + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         
         
         //tour87 moderate room1
         
         if ($numNoches['noches'] == 7 && $categor == 3 && $room1 > 0 && $tarifa_p1m87 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 7 && $categor == 3 && $room1 > 0 && $tarifa_p1m87 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_87m + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         //tour87 moderate room2
         
         if ($numNoches['noches'] == 7 && $categor == 3 && $room2 > 0 && $tarifa_p1m87 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 7 && $categor == 3 && $room2 > 0 && $tarifa_p1m87 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_87m + $tarifa_total_r2_87m + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour87 moderate room3
         
         if ($numNoches['noches'] == 7 && $categor == 3 && $room3 > 0 && $tarifa_p1m87 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 7 && $categor == 3 && $room3 > 0 && $tarifa_p1m87 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_87m + $tarifa_total_r2_87m + $tarifa_total_r3_87m + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour87 moderate room4
         
         if ($numNoches['noches'] == 7 && $categor == 3 && $room4 > 0 && $tarifa_p1m87 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 7 && $categor == 3 && $room4 > 0 && $tarifa_p1m87 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_87m + $tarifa_total_r2_87m + $tarifa_total_r3_87m + $tarifa_total_r4_87m + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         //tour87 deluxe room1
         
         if ($numNoches['noches'] == 7 && $categor == 4 && $room1 > 0 && $tarifa_p1d87 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 7 && $categor == 4 && $room1 > 0 && $tarifa_p1d87 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_87d + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         //tour87 deluxe room2
         
         if ($numNoches['noches'] == 7 && $categor == 4 && $room2 > 0 && $tarifa_p1d87 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 7 && $categor == 4 && $room2 > 0 && $tarifa_p1d87 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_87d + $tarifa_total_r2_87d + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour87 deluxe room3
         
         if ($numNoches['noches'] == 7 && $categor == 4 && $room3 > 0 && $tarifa_p1d87 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 7 && $categor == 4 && $room3 > 0 && $tarifa_p1d87 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_87d + $tarifa_total_r2_87d + $tarifa_total_r3_87d + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour87 deluxe room4
         
         if ($numNoches['noches'] == 7 && $categor == 4 && $room4 > 0 && $tarifa_p1d87 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 7 && $categor == 4 && $room4 > 0 && $tarifa_p1d87 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_87d + $tarifa_total_r2_87d + $tarifa_total_r3_87d + $tarifa_total_r4_87d + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         
         
         //tour98 value room1
         
         if ($numNoches['noches'] == 8 && $categor == 2 && $room1 > 0 && $tarifa_p1v98 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 8 && $categor == 2 && $room1 > 0 && $tarifa_p1v98 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             $totalhotel['total'] = $tarifa_total_r1_98v + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         //tour98 value room2
         
         if ($numNoches['noches'] == 8 && $categor == 2 && $room2 > 0 && $tarifa_p1v98 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 8 && $categor == 2 && $room2 > 0 && $tarifa_p1v98 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             $totalhotel['total'] = $tarifa_total_r1_98v + $tarifa_total_r2_98v + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour98 value room3
         
         if ($numNoches['noches'] == 8 && $categor == 2 && $room3 > 0 && $tarifa_p1v98 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 8 && $categor == 2 && $room3 > 0 && $tarifa_p1v98 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             $totalhotel['total'] = $tarifa_total_r1_98v + $tarifa_total_r2_98v + $tarifa_total_r3_98v + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour98 value room4
         
         if ($numNoches['noches'] == 8 && $categor == 2 && $room4 > 0 && $tarifa_p1v98 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 8 && $categor == 2 && $room4 > 0 && $tarifa_p1v98 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnv);
             $cargo_total2 = ($nochales)*($cpnv2);
             $cargo_total3 = ($nochales)*($cpnv3);
             $cargo_total4 = ($nochales)*($cpnv4);
             $totalhotel['total'] = $tarifa_total_r1_98v + $tarifa_total_r2_98v + $tarifa_total_r3_98v + $tarifa_total_r4_98v + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         
         //tour98 moderate room1
         
         if ($numNoches['noches'] == 8 && $categor == 3 && $room1 > 0 && $tarifa_p1m98 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 8 && $categor == 3 && $room1 > 0 && $tarifa_p1m98 > '0.00') {
             
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_98m + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         //tour98 moderate room2
         
         if ($numNoches['noches'] == 8 && $categor == 3 && $room2 > 0 && $tarifa_p1m98 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 8 && $categor == 3 && $room2 > 0 && $tarifa_p1m98 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_98m + $tarifa_total_r2_98m + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour98 moderate room3
         
         if ($numNoches['noches'] == 8 && $categor == 3 && $room3 > 0 && $tarifa_p1m98 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 8 && $categor == 3 && $room3 > 0 && $tarifa_p1m98 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_98m + $tarifa_total_r2_98m + $tarifa_total_r3_98m + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour98 moderate room4
         
         if ($numNoches['noches'] == 8 && $categor == 3 && $room4 > 0 && $tarifa_p1m98 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 8 && $categor == 3 && $room4 > 0 && $tarifa_p1m98 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnm);
             $cargo_total2 = ($nochales)*($cpnm2);
             $cargo_total3 = ($nochales)*($cpnm3);
             $cargo_total4 = ($nochales)*($cpnm4);
             $totalhotel['total'] = $tarifa_total_r1_98m + $tarifa_total_r2_98m + $tarifa_total_r3_98m + $tarifa_total_r4_98m + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         //tour98 deluxe room1
         
         if ($numNoches['noches'] == 8 && $categor == 4 && $room1 > 0 && $tarifa_p1d98 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 8 && $categor == 4 && $room1 > 0 && $tarifa_p1d98 > '0.00') {
             
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_98d + ($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         //tour98 deluxe room2
         
         if ($numNoches['noches'] == 8 && $categor == 4 && $room2 > 0 && $tarifa_p1d98 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 8 && $categor == 4 && $room2 > 0 && $tarifa_p1d98 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_98d + $tarifa_total_r2_98d + 2*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom3 + $priceRoom4;
         }
         
         //tour98 deluxe room3
         
         if ($numNoches['noches'] == 8 && $categor == 4 && $room3 > 0 && $tarifa_p1d98 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 8 && $categor == 4 && $room3 > 0 && $tarifa_p1d98 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_98d + $tarifa_total_r2_98d + $tarifa_total_r3_98d + 3*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4) + $priceRoom4;
         }
         
         //tour98 deluxe room4
         
         if ($numNoches['noches'] == 8 && $categor == 4 && $room4 > 0 && $tarifa_p1d98 == '0.00') {
             $totalhotel['total'] = $priceRoom1 + $priceRoom2 + $priceRoom3 + $priceRoom4;
         }
         
         if ($numNoches['noches'] == 8 && $categor == 4 && $room4 > 0 && $tarifa_p1d98 > '0.00') {
             
             $nochales = $numNoches['noches'];
             $cargo_total = ($nochales)*($cpnd);
             $cargo_total2 = ($nochales)*($cpnd2);
             $cargo_total3 = ($nochales)*($cpnd3);
             $cargo_total4 = ($nochales)*($cpnd4);
             $totalhotel['total'] = $tarifa_total_r1_98d + $tarifa_total_r2_98d + $tarifa_total_r3_98d + $tarifa_total_r4_98d + 4*($cargo_total + $cargo_total2 + $cargo_total3 + $cargo_total4);
         }
         
         
         
         
         //echo $totalhotel['total'];
 
         /* echo json_encode($totalhotel);
          *   exit; */
     // 	echo '<pre>';
        // print_r($priceRoom1); echo '<br>';
        // print_r($priceRoom2); echo '<br>';
        // print_r($priceRoom3); echo '<br>';
        // print_r($priceRoom4); echo '<br>';
        
        // print_r($fechaSalida); echo '<br>';
        // print_r($fechaRetorno); echo '<br>';
        // print_r($hotel); echo '<br>';
        // print_r($room1); echo '<br>';
        // print_r($room2); echo '<br>';
        // print_r($room3); echo '<br>';
        // print_r($room4); echo '<br>';
        // print_r($nochesfree); echo '<br>';
        // print_r($free_night_buffet); echo '<br>';
        // print_r($type_rate); echo '<br>';
        // print_r($noches_escogidas); echo '<br>';
        // print_r($totalhotel); echo '<br>';
     	// echo '</pre>';
        // exit;
        
         return $totalhotel;
         
     }




    public function transporPark($dato) {
        Doo::loadModel("Agency");
        if (isset($_SESSION['data_agency'])) {
            $dat = new Agency($_SESSION['data_agency']);
        } else {
            $dat = new Agency();
            $dat->type_rate = 0;
            $dat->id = -1;
        }

        $fecha = substr($_SESSION['toursbooking']['fecha_salida'], 0, 4) . '-01-01 00:00:00';
        //echo 'id del parque =>'.$dato;

        if (true) {
            //echo $dato;
            if ($dat->type_rate == 1) {

                $sql = 'SELECT t1.id,t1.nombre,t2.nombre AS grupo,t3.adult,t3.child,t2.id as id_grupo
                        FROM parques t1 
                        LEFT JOIN grupo_parques t2 ON (t1.id_grupo = t2.id)
                        LEFT JOIN parques_tarifasgrupo t3 ON (t1.id_grupo = t3.id_grupo)
                        WHERE t3.type_rate = 2  AND t3.id_agency = ' . $dat->id . ' AND t3.annio = ?  AND t1.id = ?';
                $rs = Doo::db()->query($sql, array(
                    $fecha, $dato
                ));
                $parkdatos = $rs->fetch();
                if (!($parkdatos['adult'] && $parkdatos['child'])) {
                    $sql = 'SELECT t1.id,t1.nombre,t2.nombre AS grupo,t3.adult,t3.child,t2.id as id_grupo
                            FROM parques t1 
                            LEFT JOIN grupo_parques t2 ON (t1.id_grupo = t2.id)
                            LEFT JOIN parques_tarifasgrupo t3 ON (t1.id_grupo = t3.id_grupo)
                            WHERE t3.type_rate = 1 AND t3.annio = ? AND t1.id = ?';
                    $rs = Doo::db()->query($sql, array($fecha, $dato));
                    $parkdatos = $rs->fetch();
                }
                } else {


                $sql = 'SELECT t1.id,t1.nombre,t2.nombre AS grupo,t3.adult,t3.child,t2.id as id_grupo ,t3.start_date,t3.end_date
											FROM parques t1 
											LEFT JOIN grupo_parques t2 ON (t1.id_grupo = t2.id)
											LEFT JOIN parques_tarifasgrupo t3 ON (t1.id_grupo = t3.id_grupo)
							WHERE t3.type_rate = ' . $dat->type_rate . ' AND t3.annio = ? AND t1.id = ? AND "'.$_SESSION['toursbooking']['fecha_llegada'].'" >= t3.start_date  AND "'.$_SESSION['toursbooking']['fecha_salida'].'" <= t3.end_date ';
                $rs = Doo::db()->query($sql, array(
                    $fecha, $dato
                ));
                $parkdatos = $rs->fetch();
            }
        } else {
            //echo 'aca';
            $pax = $_SESSION ['toursbooking']['totalpax'];
            #entra en esta parte del condicional siempre y cuando el incluya el valor el tiquete echo 'entra aqui';
            //echo '$dat->type_rate =>'.$dat->type_rate;
            if ($dat->type_rate == 1) {

                $sql = 'SELECT t1.id,t1.nombre,t2.nombre AS grupo,t3.amount,t3.price,t2.id as id_grupo
											FROM parques t1 
											LEFT JOIN grupo_parques t2 ON (t1.id_grupo = t2.id)
											LEFT JOIN parques_tarifasvipgrupo t3 ON (t1.id_grupo = t3.id_grupo)
							WHERE t3.type_rate = 2  AND t3.id_agency = ' . $dat->id . ' AND annio = ?  AND t1.id = ?  AND t3.amount = ? ';
                $rs = Doo::db()->query($sql, array($fecha, $dato, $pax));
                $parkdatos = $rs->fetch();
                if (!($parkdatos['price'] && $parkdatos['amount'])) {
                    $sql = 'SELECT t1.id,t1.nombre,t2.nombre AS grupo,t3.amount,t3.price,t2.id as id_grupo
                            FROM parques t1 
                            LEFT JOIN grupo_parques t2 ON (t1.id_grupo = t2.id)
                            LEFT JOIN parques_tarifasvipgrupo t3 ON (t1.id_grupo = t3.id_grupo)
                            WHERE t3.type_rate = 1 AND t1.id = ? AND t3.annio = ? AND t3.amount = ? ';
                    $rs = Doo::db()->query($sql, array($dato, $fecha, $pax));
                    $parkdatos = $rs->fetch();
                }
            } else {
                //echo $dato;
                $sql = 'SELECT t1.id,t1.nombre,t2.nombre AS grupo,t3.amount,t3.price,t2.id as id_grupo
                        FROM parques t1 
                        LEFT JOIN grupo_parques t2 ON (t1.id_grupo = t2.id)
                        LEFT JOIN parques_tarifasvipgrupo t3 ON (t1.id_grupo = t3.id_grupo)
			WHERE t3.type_rate = ' . $dat->type_rate . ' AND t1.id = ? AND t3.annio = ? AND t3.amount = ? ';
                $rs = Doo::db()->query($sql, array($dato, $fecha, $pax));
                $parkdatos = $rs->fetch();
 

            }
            $priceXp = $parkdatos['price'] / $pax;
            $parkdatos['adult'] = $priceXp;
            $parkdatos['child'] = $priceXp;
        }
//        print_r($dato);

        // if ($_SESSION ['toursbooking']['sarrival'] == 4) {
        //     $parkdatos['adult'] = 0;
        //     $parkdatos['child'] = 0;
        // }
        /* echo "<script> console.log('";
          print_r(Doo::db()->showSQL());
          echo "');</script>"; */
//        print_r($parkdatos);
        // if ($dato == 12) {
        //     $parkdatos['adult'] = 24;
        //     $parkdatos['child'] = 24;
        // }
        
        return $parkdatos;
    }

    public function ajaxparks() {
        try {
            $tikes = $this->params["resp"];
            $dato = $this->params ["id"];
            $toursbooking = $_SESSION["toursbooking"];

            
            Doo::loadModel("Agency");
            if (isset($_SESSION['data_agency'])) {
                $dat = new Agency($_SESSION['data_agency']);
            } else {
                $dat = new Agency();
                $dat->type_rate = 0;
                $dat->id = -1;
            }

            if (isset($_SESSION ['toursbooking']['ticketpark'])) {
                unset($_SESSION ['toursbooking']['ticketpark']);
            }
            $arreglo = array();
            if (isset($this->params["id"])) {
                $dato = $this->params ["id"];
                list ($park, $grupo) = explode(",", $dato);
                $dato = $park;
            }


            if (isset($this->params ["ides"])) {
                $ides = $this->params ["ides"];
                list ($park, $grupo) = explode(",", $ides);
                $dato = $park;
            }
         
            //echo 'function ajaxparks =>'.$dato;
            $dias = $_SESSION['toursbooking']['dias'];
            $noches = $_SESSION['toursbooking']['noches'];
            $tours = $dias . $noches;

            //echo 'dias = '.$dias.' noches = '.$noches;

            $parkdatos = $this->transporPark($dato); //Datos del parque 19
            /*echo '<pre>';
             print_r($parkdatos);
             echo '</pre>';
             die;*/
 
            unset($_SESSION['borrando']);
            if (isset($this->params ["ides"])) {
                $park = $this->params ["ides"];
                $transp1 = $parkdatos['adult'] *  $_SESSION['toursbooking']['adult'];
                $transp2 = $parkdatos['child'] *  $_SESSION['toursbooking']['child'];
                $transp3 = $transp1+$transp2;
                $_SESSION ['toursbooking'] ['totaltours'] = $_SESSION ['toursbooking'] ['totaltours'] - $transp3 ;
                echo "<script>$('#tqpm').html('$ ".number_format($_SESSION ['toursbooking'] ['totaltours'],2)."');</script>";

                if ($parkdatos['adult'] >= 0 && $parkdatos ['child'] >= 0) {
                    // $transp = $parkdatos['adult'] + $parkdatos['child'] * ($_SESSION['toursbooking']['adult']+$_SESSION['toursbooking']['child']);
                    $park_existe = false;
                    if (isset($_SESSION['grupos'][$parkdatos['id_grupo']])) {
                        if ($_SESSION ['grupos'][$parkdatos['id_grupo']] > 0) {
                            $grupo_new_variable = $parkdatos['id_grupo'];
                            $grupo1_new_variable = $_SESSION ['grupos1']['park' . $grupo_new_variable . ''];
                            $parks_new_variable = explode(",", $grupo1_new_variable);
                            $park_existe = false;
                            foreach ($parks_new_variable as $value_new_variable) {
                                if ($value_new_variable == $parkdatos['id']) {
                                    $park_existe = true;
                                    break;
                                }
                            }
                        }
                    }
                    // $_SESSION['toursbooking']['totaltours'] = $_SESSION['toursbooking']['totaltours'] - 
                    // unset($_SESSION ['grupos1']);
                    
                    if ($park_existe) {
                        $_SESSION ['toursbooking']['parktotal'] = $_SESSION['toursbooking']['parktotal'] - (($parkdatos['adult'] * $toursbooking['adults']) + ($parkdatos ['child'] * $toursbooking ['childs']));
                        #distribucion para transportacion en adultos y childs
                        $_SESSION ['toursbooking']['parktotal_adult'] = $_SESSION ['toursbooking'] ['parktotal_adult'] - (($parkdatos ['adult'] * $toursbooking ['adults']));
                        $_SESSION ['toursbooking']['parktotal_child'] = $_SESSION ['toursbooking'] ['parktotal_child'] - (($parkdatos ['child'] * $toursbooking ['childs']));
                    } else {
                        $_SESSION ['toursbooking']['parktotal'] = $_SESSION['toursbooking']['parktotal'];
                        #distribucion para transportacion en adultos y childs
                        $_SESSION ['toursbooking']['parktotal_adult'] = $_SESSION['toursbooking']['parktotal_adult'];
                        $_SESSION ['toursbooking']['parktotal_child'] = $_SESSION['toursbooking']['parktotal_child'];
                    }
                    

                    $total = $_SESSION ['toursbooking'] ['parktotal'] + $toursbooking ['tq'];
                    $tqp = ($toursbooking ['tq'] / $toursbooking ['totalpax']) + ($_SESSION ['toursbooking'] ['parktotal'] / $toursbooking ['totalpax']);
                    $_SESSION['toursbooking']['tqp'] = $tqp;

                    
                    if (isset($_SESSION ['grupos'])) {
                        if (isset($_SESSION ['grupos'] [$grupo]) && isset($_SESSION ['grupos1'] ['park' . $grupo . ''])) {

                            $_SESSION ['grupos'] [$grupo] -= 1;

                            if (isset($_SESSION ['grupos1'] ['park' . $grupo . ''])) {
                                $parks = array();
                                $parks = explode(",", $_SESSION ['grupos1'] ['park' . $grupo . '']);
                                $contador = 0;
                                unset($_SESSION ['grupos1'] ['park' . $grupo . '']);
                                $_SESSION ['grupos1'] ['park' . $grupo . ''] = "";
                                $list = '';
                                
                                for ($i = 0; $i < count($parks); $i++) {
                                    if (trim($parks[$i]) != trim($dato) && trim($parks[$i]) != '') {
                                        $list = $list . $parks[$i];
                                        if ($i + 1 < count($parks)) {
                                            $list = $list . ',';
                                        }
                                    }
                                }
                                if (trim($list) == '') {
                                    unset($_SESSION ['grupos1']['park' . $grupo . '']);
                                } else {
                                    $_SESSION ['grupos1']['park' . $grupo . ''] = $list;
                                }
                            }
                            
                          
                        } else {
                            $_SESSION['grupos'][$grupo] = $_SESSION['grupos'] [$grupo] - 1;
                        }
                    } else {
                        $_SESSION['grupos'][$grupo] = $_SESSION ['grupos'] [$grupo] - 1;
                    }


                   
                    $_SESSION['borrando'] = true;
                    $this->tours_three();

                    if ($tikes == 1) {
                        $sumatike = $_SESSION ['toursbooking'] ['ticketpark'] / $_SESSION ['toursbooking'] ['totalpax'];
                    } else {
                        $sumatike = 0;
                    }
                    $_SESSION ['toursbooking'] ['tsa'] = $tqp;
                    $_SESSION ['toursbooking'] ['tqp'] = $sumatike + $tqp;

                    // print_r($_SESSION['grupos1']);
                    // echo "<script>$('#tqpm').html('$ ".number_format(0,2)."');</script>";
                    echo "<script>$('#" . $dato . "').remove();</script>";
                }
                    // var_dump($_SESSION ['grupos1'] );
                //print_r($_SESSION);
            } else {

                $transp1 = $parkdatos['adult'] *  $_SESSION['toursbooking']['adult'];
                $transp2 = $parkdatos['child'] *  $_SESSION['toursbooking']['child'];
                $transp3 = $transp1+$transp2;
                $_SESSION ['toursbooking'] ['totaltours'] = $_SESSION ['toursbooking'] ['totaltours'] + $transp3 ;
                echo "<script>$('#tqpm').html('$ ".number_format($_SESSION ['toursbooking'] ['totaltours'],2)."');</script>";
                if (!isset($_SESSION ['toursbooking'] ['parktotal'])) {
                    $_SESSION ['toursbooking'] ['parktotal'] = 0;
                }
                if (!isset($_SESSION ['toursbooking'] ['parktotal_adult'])) {
                    $_SESSION ['toursbooking'] ['parktotal_adult'] = 0;
                }
                if (!isset($_SESSION ['toursbooking'] ['parktotal_child'])) {
                    $_SESSION ['toursbooking'] ['parktotal_child'] = 0;
                }

                if ($parkdatos ['adult'] >= 0 && $parkdatos ['child'] >= 0) {
                    $park_existe = false;
                    if (isset($_SESSION ['grupos'][$parkdatos['id_grupo']])) {

                        if ($_SESSION ['grupos'][$parkdatos['id_grupo']] > 0) {

                            $grupo_new_variable = $parkdatos['id_grupo'];
                            $grupo1_new_variable = $_SESSION ['grupos1']['park' . $grupo_new_variable . ''];
                            $parks_new_variable = explode(",", $grupo1_new_variable);
                            $park_existe = false;
                            foreach ($parks_new_variable as $value_new_variable) {
                                if ($value_new_variable == $parkdatos['id']) {
                                    $park_existe = true;
                                    break;
                                }
                            }
                        }
                    }
                    if (!$park_existe) {
                        $_SESSION ['toursbooking'] ['parktotal'] = $_SESSION ['toursbooking'] ['parktotal'] + ($parkdatos ['adult'] * $toursbooking ['adults']) + ($parkdatos ['child'] * $toursbooking ['childs']);
                        #distribucion para transportacion en adultos y childs
                        $_SESSION ['toursbooking'] ['parktotal_adult'] = $_SESSION ['toursbooking'] ['parktotal_adult'] + ($parkdatos ['adult'] * $toursbooking ['adults']);
                        $_SESSION ['toursbooking'] ['parktotal_child'] = $_SESSION ['toursbooking'] ['parktotal_child'] + ($parkdatos ['child'] * $toursbooking ['childs']);
                    } else {
                        $_SESSION ['toursbooking'] ['parktotal'] = $_SESSION ['toursbooking'] ['parktotal'];
                        #distribucion para transportacion en adultos y childs
                        $_SESSION ['toursbooking'] ['parktotal_adult'] = $_SESSION ['toursbooking'] ['parktotal_adult'];
                        $_SESSION ['toursbooking'] ['parktotal_child'] = $_SESSION ['toursbooking'] ['parktotal_child'];
                    }
                    /* echo ($parkdatos ['adult'] * $toursbooking ['adults']) + ($parkdatos ['child'] * $toursbooking ['childs']);
                      $id_park = $parkdatos ['id'];
                      $_SESSION ['toursbooking'] ['park'] = $parkdatos ['id']; */


                    $_SESSION ['grupos1'] ['ratesPark' . $grupo . ''] = (($parkdatos ['adult'] * $toursbooking ['adults']) + ($parkdatos ['child'] * $toursbooking ['childs']));
                    $total = $_SESSION ['toursbooking'] ['parktotal'] + $_SESSION ['toursbooking'] ['tq'];

                    $tqp = $total / $toursbooking ['totalpax'];

                    if (isset($_SESSION ['grupos'])) {
                        if (isset($_SESSION ['grupos'] [$grupo]) && isset($_SESSION ['grupos1'] ['park' . $grupo . ''])) {
                            $_SESSION ['grupos'] [$grupo] += 1;

                            $_SESSION ['grupos1'] ['park' . $grupo . ''] = $_SESSION ['grupos1'] ['park' . $grupo . ''] . "," . $dato;
                        } else {

                            $_SESSION ['grupos'] [$grupo] = 1;

                            $_SESSION['grupos1'] ['park' . $grupo . ''] = $dato;
                        }
                    } else {
                        $_SESSION ['grupos'] [$grupo] = 1;

                        $_SESSION ['grupos1'] ['park' . $grupo . ''] = $dato;

                        if ($_SESSION ['grupos1'] ['park' . $grupo . ''] == " ,") {
                            $_SESSION ['grupos1'] ['park' . $grupo . ''] = substr($_SESSION ['grupos1'] ['park' . $grupo . ''], 1);
                        }
                    }

                    //echo 'dato =>'.$dato;
                    $_SESSION['borrando'] = false;
                    $this->tours_three();
                    $preciohotel = (isset($_SESSION['toursbooking']['totaltours']))?$_SESSION['toursbooking']['totaltours'] : 0 ;
                    echo "<script>$('#tqpm').html('$ ".number_format($preciohotel,2)."');</script>";
                    if ($tikes == 1) {
                        $sumatike = $_SESSION ['toursbooking']['ticketpark'] / $toursbooking ['totalpax'];
                        $_SESSION ['toursbooking'] ['paso'] = "";
                    } else {
                        $sumatike = 0;
                    }
                    //print_r($_SESSION['toursbooking']);
                    $_SESSION ['toursbooking']['tsa'] = $tqp;
                    $_SESSION ['toursbooking']['tqp'] = $tqp + $sumatike;
                    // echo "<script>$('#tqp').html('$" . round($_SESSION['toursbooking']['tqp']) . "');</script>";
                    echo "<script>$('#" . $dato . "').remove();</script>";
                }
                $nombrePark = "SELECT * FROM parques WHERE id = '$dato'";
                $response = Doo::db()->query($nombrePark);
                $nombreDelParque = $response->fetchAll();
                foreach ($nombreDelParque as $n) {
                    $parkdatos['categoria'] = $n['id_grupo'];
                    $parkdatos['nombre'] = $n['nombre'];
                }
                // echo '<pre>';
                // print_r($_SESSION);
                // echo '</pre>';
                // die;
                echo "<script>$('#attractions2').append('<span id=" . $dato . " >" . $parkdatos['nombre'] . " |  </span>');</script>";
                // echo "<script>$('#valoresId').append('<input name='id_grupo'  value='" . $parkdatos['categoria'] . "' >');</script>";
                //print_r($_SESSION);
            }
        } catch (Exception $e) {
            // procedimiento en caso de reportar errores
        }
    }

    public function tours_three() {
        try {
            unset($_SESSION['toursbooking'] ['ticketpark']);

            $_SESSION['toursbooking']['ticketpark'] = 0;

            extract($_POST);

            Doo::loadModel("Agency");
            if (isset($_SESSION['data_agency'])) {
                $dat = new Agency($_SESSION['data_agency']);
            } else {
                $dat = new Agency();
                $net_rate = false;
                $dat->type_rate = 0;
                $dat->id = -1;
            }
            //print_r($_SESSION['grupos1']);

            if (isset($_SESSION['grupos']) && isset($_SESSION ['grupos1'])) {

                $priceadult = 0;
                $priceachild = 0;
                $grupos = $_SESSION['grupos'];
                //print_r($grupos);
                $grupos1 = $_SESSION['grupos1'];
                $toursbooking = $_SESSION ['toursbooking'];
                $fecha = $toursbooking['fecha_llegada'];


                $sql = 'SELECT adults,child,id_parque ,cantidad
                        FROM admin_parques_tarifa
                        WHERE type_rate = 1 AND  id_agency = -1 AND id_grupo = ? AND  cantidad = ?  AND inicio <= ? AND fin >= ?';

                $sql0 = 'SELECT id,adults,child,id_grupo,id_parque,cantidad,type_rate, id_agency, company_name
                        FROM admin_parques_tarifa
                        WHERE type_rate = 2 AND id_parque = 0 AND id_agency =? AND  id_grupo = ? AND cantidad = ? AND inicio <= ? AND fin >= ?';


                foreach ($grupos as $clave => $valor) {
                    if ($valor == 0) {
                        continue;
                    }
                    if ($dat->id != -1) {
                        $rs = Doo::db()->query($sql0, array(
                            $dat->id,
                            trim($clave),
                            trim($valor),
                            $fecha
                        ));
                        $consulta = $rs->fetch();

                        if (empty($consulta) || $consulta['id_parque'] != 0) {
                            $rs = Doo::db()->query($sql, array(
                                trim($clave),
                                trim($valor),
                                $fecha
                            ));
                            $consulta = $rs->fetch();
                        }
                    } else {
                        /*
                         * clave es el id del grupo de los parques.
                         * valor es la cantidad de parques del mismo grupo.
                         */
                        if (isset($grupos1['park' . $clave . ''])) {
                            $park = array();
                            $park = explode(",", $grupos1['park' . $clave . '']);
                        }
                        // echo '<pre>';
                        // print_r(strtotime($fecha));
                        // echo '</pre>';
                        // die;




                        foreach ($park as $clave1 => $valor1) {
                            //echo 'valor1 =>'.$valor1;
                            $id_parke = $valor1;
                            $id_grupal = $clave;
                            $fec_inicial = strtotime($fecha);
                            //echo '<br />id del parque =>'. $id_parke;
                            //echo '<br />id del grupo =>' . $id_grupal;
                            //echo '<br />fecha_salida =>' . $fec_inicial . '<br />';
                            #sumatoria para cantidad 2
                            $sqlcantidad2 = 'SELECT tari_2 AS tarifa2 FROM parques_restric  WHERE id_parque = "' . $id_parke . '" AND  id_grupo = "' . $id_grupal . '" AND fecha_ini <= "' . $fec_inicial . '" AND fecha_fin >= "' . $fec_inicial . '" AND cantidad = "2"';
                            $rscantidad2 = Doo::db()->query($sqlcantidad2);
                            $cantidad2 = $rscantidad2->fetchAll();

                            foreach ($cantidad2 as $key2 => $tr2) {
                                $tarifa_spc = $tr2["tarifa2"];
                                //print $tarifa_spc;
                                //echo "sum(a) = " . array_sum($a) . "\n";
                                $a = array($tarifa_spc);
                                //almacenamos en $sumatoria los valores de la variable $sumatoria para cada parque
                                $sumatoria2 += array_sum($a);
                                //print_r($sumatoria2);
                            }

                            #sumatoria para cantidad 3
                            $sqlcantidad3 = 'SELECT tari_3 AS tarifa3 FROM parques_restric  WHERE id_parque = "' . $id_parke . '" AND  id_grupo = "' . $id_grupal . '" AND fecha_ini <= "' . $fec_inicial . '" AND fecha_fin >= "' . $fec_inicial . '" AND cantidad = "3"';
                            $rscantidad3 = Doo::db()->query($sqlcantidad3);
                            $cantidad3 = $rscantidad3->fetchAll();

                            foreach ($cantidad3 as $key3 => $tr3) {
                                $tarifa_spc3 = $tr3["tarifa3"];
                                //print $tarifa_spc;
                                //echo "sum(a) = " . array_sum($a) . "\n";
                                $a3 = array($tarifa_spc3);
                                //almacenamos en $sumatoria los valores de la variable $sumatoria para cada parque
                                $sumatoria3 += array_sum($a3);
                                //print_r($sumatoria3);
                            }

                            #sumatoria para cantidad 4
                            $sqlcantidad4 = 'SELECT tari_4 AS tarifa4 FROM parques_restric  WHERE id_parque = "' . $id_parke . '" AND  id_grupo = "' . $id_grupal . '" AND fecha_ini <= "' . $fec_inicial . '" AND fecha_fin >= "' . $fec_inicial . '" AND cantidad = "4"';
                            $rscantidad4 = Doo::db()->query($sqlcantidad4);
                            $cantidad4 = $rscantidad4->fetchAll();

                            foreach ($cantidad4 as $key4 => $tr4) {
                                $tarifa_spc4 = $tr4["tarifa4"];
                                //print $tarifa_spc;
                                //echo "sum(a) = " . array_sum($a) . "\n";
                                $a4 = array($tarifa_spc4);
                                //almacenamos en $sumatoria los valores de la variable $sumatoria para cada parque
                                $sumatoria4 += array_sum($a4);
                            }

                            //sumatoria para cantidad = 5
                            $sql6 = 'SELECT tari_5 AS tarifa5 FROM parques_restric  WHERE id_parque = "' . $id_parke . '" AND  id_grupo = "' . $id_grupal . '" AND fecha_ini <= "' . $fec_inicial . '" AND fecha_fin >= "' . $fec_inicial . '" AND cantidad = "5"';
                            $rs6 = Doo::db()->query($sql6);
                            $consulta6 = $rs6->fetchAll();

                            foreach ($consulta6 as $key5 => $tr5) {
                                $tarifa_5 = $tr5["tarifa5"];
                                //print $tarifa_spc;
                                //echo "sum(a) = " . array_sum($a) . "\n";
                                $a5 = array($tarifa_5);
                                //almacenamos en $sumatoria los valores de la variable $sumatoria para cada parque
                                $sumatoria5 += array_sum($a5);
                                //echo '<br />cantidad 5 =>' . ($sumatoria5);
                            }

                            //sumatoria para cantidad = 6
                            $sql7 = 'SELECT tari_6 AS tarifa6 FROM parques_restric  WHERE id_parque = "' . $id_parke . '" AND  id_grupo = "' . $id_grupal . '" AND fecha_ini <= "' . $fec_inicial . '" AND fecha_fin >= "' . $fec_inicial . '" AND cantidad = "6"';
                            $rs7 = Doo::db()->query($sql7);
                            $consulta7 = $rs7->fetchAll();

                            foreach ($consulta7 as $key7 => $tr7) {
                                $tarifa_6 = $tr7["tarifa6"];
                                $a6 = array($tarifa_6);
                                //almacenamos en $sumatoria los valores de la variable $sumatoria para cada parque
                                $sumatoria6 += array_sum($a6);
                                //echo '<br />cantidad 6 =>' . ($sumatoria6);
                            }
                        }


                        
                        $dias = $_SESSION['toursbooking']['dias'];
                        //echo '<br />sumatoria2 =>' .$sumatoria2;
                        //echo '<br />sumatoria3 =>' .$sumatoria3;
                        //echo '<br />sumatoria4 =>' .$sumatoria4;
                        //echo '<br />sumatoria5 =>' .$sumatoria5;
                        //echo '<br />sumatoria6 =>' .$sumatoria6;
                        //echo '<br />dias =>'.$dias;
                        //echo '<br />sumatoriaRestric =>'.$sumaRestric = ($sumatoria2 + $sumatoria3 + $sumatoria4 + $sumatoria5 + $sumatoria6);
                        #para cantidad de 2 parques
                        if (isset($grupos1['park' . $clave . ''])) {
                            $parque = array();
                            $parque = explode(",", $grupos1['park' . $clave . '']);
                        }
                        //foreach ($parque as $clavesPark => $valorPark) {
                        //$parquesuma += $valorPark;
                        //}
                        //echo '<br />'.$parquesuma;

                        if ($dias == 2) {
                            if ($sumatoria2 == 0) {
                                $valor = $valor;
                            } else {
                                $valor = 1;
                            }
                        }

                        #para cantidad de 3 parques
                        if ($dias == 3) {
                            foreach ($park as $clave1 => $valor1) {
                                $id_parke = $valor1;
                                //echo $id_parke . '-';
                            }
                            $elementos = array_filter($park, "strlen");
                            $contador = count($elementos);
                            //echo $id_grupal . '-';
                            //print_r($contador);
                            //echo '<br />';
                            if ($sumatoria3 == 0) {
                                $valor = $valor;
                            } else {
                                $valor = 1;
                            }
                        }

                        #para cantidad de 4 parques
                        if ($dias == 4) {
                            if ($sumatoria4 == 0) {
                                $valor = $valor;
                            } else {
                                $valor = 1;
                            }
                        }

                        #para cantidad de 5 parques
                        if ($dias == 5) {
                            if ($sumatoria5 == 0) {
                                $valor = $valor;
                            } else {
                                $valor = 1;
                            }
                        }

                        #para cantidad de 6 parques
                        if ($dias == 6) {
                            if ($sumatoria6 == 0) {
                                $valor = $valor;
                            } else {
                                $valor = 1;
                            }
                        }

                        /* if($sumatoria2 == 0 xor $sumatoria3 == 0 xor $sumatoria4 == 0 xor $sumatoria5 == 0 xor $sumatoria6 == 0){
                          $valor = $valor;
                          }else{
                          $valor = 1;
                          } */

                        $rs = Doo::db()->query($sql, array(
                            trim($clave),
                            trim($valor),
                            $fecha,
                            $fecha
                        ));
                        $consulta = $rs->fetch();
                        // print_r($valor);
                        // exit();
                    }
                    $rs->rowCount();

                    $idParque = $consulta['id_parque'];
                    $grupo = $clave;


                    if (!empty($consulta) && $consulta['id_parque'] == 0) {
                        $priceadult = $toursbooking ['adults'] * $consulta ['adults'];
                        $priceachild = $toursbooking ['childs'] * $consulta ['child'];
                        $_SESSION['grupos1']['parkAdult' . $grupo . ''] = $consulta['adults'];
                        $_SESSION['grupos1']['parkChild' . $grupo . ''] = $consulta['child'];
                        $sumando = $priceadult + $priceachild;
                        $_SESSION ['toursbooking'] ['ticketpark'] = $_SESSION ['toursbooking'] ['ticketpark'] + $sumando;
                    } else {

                        $sql2 = 'SELECT  id,adults,child,id_grupo,id_parque,cantidad,type_rate, id_agency, company_name,inicio,fin
                                FROM admin_parques_tarifa
                                WHERE type_rate = 1 AND id_agency =-1 AND  id_parque = ? AND cantidad = 1 AND inicio <= ? AND fin >= ?';
                        $sql02 = 'SELECT  id,adults,child,id_grupo,id_parque,cantidad,type_rate, id_agency, company_name
                                FROM admin_parques_tarifa
                                WHERE type_rate = 2 AND id_agency = ? AND  id_parque = ? AND cantidad = 1 AND inicio <= ? AND fin >= ?';

                        if (isset($grupos1['park' . $clave . ''])) {
                            $park = array();
                            $park = explode(",", $grupos1['park' . $clave . '']);
                        }

                        if (isset($park)) {
                            //print_r($park);
                            foreach ($park as $valor) {
                                //print_r($valor);
                                if ($dat->id != -1) {
                                    $rs = Doo::db()->query($sql02, array(
                                        $dat->id,
                                        trim($valor),
                                        $fecha,
                                        $fecha
                                    ));
                                    $consulta = $rs->fetch();
                                    if (empty($consulta)) {
                                        $rs = Doo::db()->query($sql2, array(
                                            trim($valor),
                                            $fecha,
                                            $fecha
                                        ));
                                        $consulta = $rs->fetch();
                                    }
                                } else {
                                    //echo $valor;
                                    $rs = Doo::db()->query($sql2, array(
                                        trim($valor),
                                        $fecha,
                                        $fecha
                                    ));
                                    $consulta = $rs->fetch();
                                }
                                if (!empty($consulta)) {
                                    if ($consulta['cantidad'] == 1 && $consulta ['id_parque'] != 0) {
                                        $priceadult = $toursbooking ['adults'] * $consulta ['adults'];
                                        $priceachild = $toursbooking ['childs'] * $consulta ['child'];
                                        $_SESSION['grupos1']['parkAdult' . $grupo . ''] = $consulta['adults'];
                                        $_SESSION['grupos1']['parkChild' . $grupo . ''] = $consulta['child'];
                                        $sumando = $priceadult + $priceachild;
                                        //echo $sumando;
                                        $_SESSION ['toursbooking'] ['ticketpark'] = $_SESSION ['toursbooking'] ['ticketpark'] + $sumando;
                                    }
                                }
                                
                                $contador++;
                                
                                // print_r("valor");
                                // print_r($consulta);
                            }
                        } else {
                            $priceadult = 0;
                            $priceachild = 0;
                            $_SESSION['grupos1']['parkAdult' . $grupo . ''] = 0;
                            $_SESSION['grupos1']['parkChild' . $grupo . ''] = 0;
                            $sumando = $priceadult + $priceachild;
                            
                        }
                    }
                    unset($park);
                }

                $totalpark = 0;
                foreach ($grupos as $valor) {
                    $totalpark = $totalpark + $valor;
                }
                $divporpax = $_SESSION['toursbooking']['ticketpark']; // $toursbooking ['totalpax'];
                /* echo 'divporpax =>' . $divporpax;
                  echo '<pre>';
                  print_r($_SESSION['grupos1']);
                  print_r($_SESSION['toursbooking']);
                  echo '</pre>'; */
                /*                echo json_encode($_SESSION['toursbooking']['ticketpark']);
                  exit; */
                //print_r($_SESSION['toursbooking']['ticketpark']);

                if ($totalpark > 0) {

                    /* echo "<script>alert('".$idParque."')</script>"; */
                    if ($idParque != '24') {
                        $divpark = $divporpax / $totalpark;
                        $_SESSION['toursbooking']['flag'] = 1;
                    } else {
                        if ($totalpark > 1) {
                            $divpark = $divporpax / ($totalpark - 1);
                            $_SESSION['toursbooking']['flag'] = 1;
                        } else {
                            $divpark = $divporpax / ($totalpark);
                            $_SESSION['toursbooking']['flag'] = 1;
                        }
                    }
                } else {
                    $_SESSION['toursbooking']['flag'] = 0;
                    $divpark = 0;
                }
                $_SESSION['toursbooking']['divporpax'] = $divporpax;
                $_SESSION['toursbooking']['np'] = $totalpark;
                /* echo json_encode($_SESSION['borrando']); */
                $adults = $_SESSION['toursbooking']['adults'];
                $ticketpark = $_SESSION['toursbooking']['ticketpark'];
                //echo $sqlGrupo = ;
                //echo $clave;
                $nombreGrupo = Doo::db()->query("SELECT nombre FROM grupo_parques WHERE id = '" . $clave . "' ");
                $nomGroup = $nombreGrupo->fetchAll();
                foreach ($nomGroup as $no) {
                    $group = $no['nombre'];
                }

                //$respuesta_html .= "<p> <b>" . $consulta["cantidad"] . "</b> tickets to <strong>" . ($consulta['cantidad'] == null ? '':$group) . " </strong> Adult $ <strong>" . $consulta["adults"] . "</strong> Child $ <strong>" . $consulta["child"] . "</strong><br /> per person.</p>";
                //echo $respuesta_html; 
                /* echo '<pre>';
                 * if (isset($grupos1['park' . $clave . ''])) {
                  $park = array();
                  $park = explode(",", $grupos1['park' . $clave . '']);
                  }
                  echo $respuesta_html;
                  //print_r($consulta);
                  echo '</pre>'; */

                //echo '<br />valor del tiquete =>'.$ticketpark;&& $consulta
       
                if ((!$_SESSION['borrando'] ) && $consulta || ($_SESSION['borrando'])) {
                    //echo "<script>alert('".$totalpark."');</script>";
                    echo "<script>
                    $('#tikets').html('$" . number_format(round($ticketpark ), 2, '.', ',') . "');
                    $('#tikets2').val('" . round($ticketpark) . "');
                   // alert(suma+' - '+parcks);
				if(suma >= parcks && $('#admision-pregunta').val()==0) {
                                $('#admision-pregunta').val('1');
                                var ckresp1 = $('#resp1').attr('checked');
                                var ckresp2 = $('#resp2').attr('checked');
                                if(!ckresp1 && !ckresp2){
                                        $('#tiketsMess').html($('#tikets').html());
                                        $( '#dialog-message6' ).dialog({
                                            modal: true,
                                            width: 500
                                        });
                                }
                            }
            </script>";
            


            // echo '<pre>';
            // print_r($ticketpark);
            // echo '</pre>';
                    unset($_SESSION['borrando']);
                } else {
                    echo '<script>
                            $("#attractions").load("' . Doo::conf()->APP_URL . 'tours/question8/' . $this->params['id'] . '/' . $this->params['resp'] . '")
                            $("input[value=\'' . $this->params['id'] . '\']").removeAttr("checked").trigger("change");
                            /*$("#dialog-message1" ).dialog({
                                modal: true,
                                buttons: {
                                    Ok: function() {
                                        $( this ).dialog( "close" );
                                    }
                                }
                            });*/
                            alert("This parks is not available for this dates. If you want to go to this park please Call Us to our Call Center and we will make all posible to take you there. 1-800-251-4206 or (407) 370 3001.");
                            window.location.reload(true);
                            </script>';
                    unset($_SESSION['borrando']);
                    // return Doo::;
                }
            }
        } catch (Exception $e) {
            // procedimiento en caso de reportar errores
        }
    }

    public function recalcular_admin_park() {
        try {
            $ticketpark = 0;
            extract($_POST);

            Doo::loadModel("Agency");
            if (isset($_SESSION['data_agency'])) {
                $dat = new Agency($_SESSION['data_agency']);
            } else {
                $dat = new Agency();
                $net_rate = false;
                $dat->type_rate = 0;
                $dat->id = -1;
            }
            if (isset($_SESSION ['grupos']) && isset($_SESSION ['grupos1'])) {
                $priceadult = 0;
                $priceachild = 0;
                $grupos = $_SESSION ['grupos'];
                $grupos1 = $_SESSION ['grupos1'];

                foreach ($grupos as $grupo => $cantidad) {
                    $_SESSION['grupos1']['parkAdult' . $grupo] = 0;
                    $_SESSION['grupos1']['parkChild' . $grupo] = 0;
                }
                $toursbooking = $_SESSION ['toursbooking'];
                $fecha = strtotime($toursbooking['fecha_salida']);
                //$fecha1 = $toursbooking['fecha_salida'];
                $sql = 'SELECT id,adults,child,id_grupo,id_parque,cantidad,type_rate, id_agency, company_name
                        FROM admin_parques_tarifa
                        WHERE type_rate = 1 AND id_agency =-1 AND id_grupo = ? AND  cantidad = ? AND fecha_ini >= ? AND fecha_fin <= ?';
                $sql0 = 'SELECT id,adults,child,id_grupo,id_parque,cantidad,type_rate, id_agency, company_name
                                                            FROM admin_parques_tarifa
                                                            WHERE type_rate = 2 AND id_parque = 0 AND id_agency =? AND  id_grupo = ? AND cantidad = ? AND fecha_ini >= ? AND fecha_fin <= ?';

                foreach ($grupos as $clave => $valor) {

                    if ($valor == 0) {
                        continue;
                    }


                    //echo 'dat->id =>'.$dat->id;
                    if ($dat->id != -1) {

                        $rs = Doo::db()->query($sql0, array(
                            $dat->id,
                            trim($clave),
                            trim($valor),
                            $fecha,
                            $fecha
                        ));
                        $consulta = $rs->fetch();

                        if (empty($consulta) || $consulta ['id_parque'] != 0) {
                            $rs = Doo::db()->query($sql, array(
                                trim($clave),
                                trim($valor),
                                $fecha,
                                $fecha
                            ));
                            $consulta = $rs->fetch();
                        }
                    } else {
                        //echo 'fecha =>'.$fecha1;
                        $rs = Doo::db()->query($sql, array(
                            trim($clave),
                            trim($valor),
                            $fecha,
                            $fecha
                        ));
                        $consulta = $rs->fetch();
                    }

                    $rs->rowCount();

                    $idParque = $consulta['id_parque'];
                    $grupo = $clave;


                    if (!empty($consulta) && $consulta ['id_parque'] == 0) {
                        //echo 'entro';
                        $priceadult = $toursbooking ['adults'] * $consulta ['adults'];
                        $priceachild = $toursbooking ['childs'] * $consulta ['child'];

                        $_SESSION['grupos1']['parkAdult' . $grupo . ''] = $consulta['adults'];
                        $_SESSION['grupos1']['parkChild' . $grupo . ''] = $consulta['child'];

                        $sumando = $priceadult + $priceachild;
                        $ticketpark = $ticketpark + $sumando;
                    } else {

                        $sql2 = 'SELECT  id,adults,child,id_grupo,id_parque,cantidad,type_rate, id_agency, company_name
                                                                            FROM admin_parques_tarifa
                                                                            WHERE type_rate = 1 AND id_agency =-1 AND  id_parque = ? AND cantidad = 1 AND inicio <= ? AND fin >= ?';
                        $sql02 = 'SELECT  id,adults,child,id_grupo,id_parque,cantidad,type_rate, id_agency, company_name
                                                                            FROM admin_parques_tarifa
                                                                            WHERE type_rate = 2 AND id_agency =? AND  id_parque = ? AND cantidad = 1 AND inicio <= ? AND fin >= ?';

                        if (isset($grupos1 ['park' . $clave . ''])) {
                            $park = array();
                            $park = explode(",", $grupos1 ['park' . $clave . '']);
                        }
                        if (isset($park)) {
                            //print_r($park);
                            foreach ($park as $valor) {
                                //print_r($park );
                                if ($dat->id != -1) {
                                    $rs = Doo::db()->query($sql02, array(
                                        $dat->id,
                                        trim($valor),
                                        $fecha,
                                        $fecha
                                    ));
                                    $consulta = $rs->fetch();
                                    if (empty($consulta)) {
                                        $rs = Doo::db()->query($sql2, array(
                                            trim($valor),
                                            $fecha,
                                            $fecha
                                        ));
                                        $consulta = $rs->fetch();
                                    }
                                } else {
                                    $rs = Doo::db()->query($sql2, array(
                                        trim($valor),
                                        $fecha,
                                        $fecha
                                    ));
                                    $consulta = $rs->fetch();
                                }
                                if (!empty($consulta)) {
                                    //  print_r($consulta);
                                    if ($consulta ['cantidad'] == 1 && $consulta ['id_parque'] != 0) {

                                        $priceadult = $toursbooking ['adults'] * $consulta ['adults'];
                                        $priceachild = $toursbooking ['childs'] * $consulta ['child'];
                                        if (isset($_SESSION['grupos1']['parkAdult' . $grupo . '']) && isset($_SESSION['grupos1']['parkChild' . $grupo . ''])) {
                                            $_SESSION['grupos1']['parkAdult' . $grupo . ''] += $consulta ['adults'];
                                            $_SESSION['grupos1']['parkChild' . $grupo . ''] += $consulta ['child'];
                                        } else {

                                            $_SESSION['grupos1']['parkAdult' . $grupo . ''] = $consulta ['adults'];
                                            $_SESSION['grupos1']['parkChild' . $grupo . ''] = $consulta ['child'];
                                        }

                                        $sumando = $priceadult + $priceachild;
                                        //echo $sumando;
                                        $ticketpark = $ticketpark + $sumando;
                                    }
                                }
                                $contador++;
                            }
                        } else {
                            $priceadult = 0;
                            $priceachild = 0;
                            $_SESSION['grupos1']['parkAdult' . $grupo . ''] = 0;
                            $_SESSION['grupos1']['parkChild' . $grupo . ''] = 0;
                            $sumando = $priceadult + $priceachild;
                        }
                    }
                    unset($park);
                }

                $totalpark = 0;
                foreach ($grupos as $valor) {
                    $totalpark = $totalpark + $valor;
                }

                $divporpax = $ticketpark / $toursbooking ['totalpax'];
                /*                echo json_encode($_SESSION['toursbooking']['ticketpark']);
                  exit; */
                //print_r($_SESSION['toursbooking']['ticketpark']);

                if ($totalpark > 0) {

                    /* echo "<script>alert('".$idParque."')</script>"; */
                    if ($idParque != '24') {
                        $divpark = $divporpax / $totalpark;
                        $_SESSION['toursbooking']['flag'] = 1;
                    } else {
                        if ($totalpark > 1) {
                            $divpark = $divporpax / ($totalpark - 1);
                            $_SESSION['toursbooking']['flag'] = 1;
                        } else {
                            $divpark = $divporpax / ($totalpark);
                            $_SESSION['toursbooking']['flag'] = 1;
                        }
                    }
                } else {
                    $_SESSION['toursbooking']['flag'] = 0;
                    $divpark = 0;
                }
                return $divporpax;
            }
        } catch (Exception $e) {

            // procedimiento en caso de reportar errores
        }
    }

    public function ques() {
        $resp = $this->params["resp"];
        $pregunta = $this->params["id"];
        if ($resp == 1) {

            $_SESSION['borrando'] = false;
            $this->tours_three();
            
            $sumatike = $_SESSION['toursbooking']['ticketpark'];
            $_SESSION['toursbooking']['totaltours'] = $_SESSION['toursbooking']['totaltours'] + $sumatike;
            $t = number_format($_SESSION['toursbooking']['totaltours'],2);
            echo '<script>$("#tqpm").html("$ '.$t.'")</script>';

            $_SESSION ['toursbooking'] ['tqp'] = $_SESSION ['toursbooking'] ['tqp'] + $sumatike;
            $_SESSION ['toursbooking'] ['paso'] = "";
            $_SESSION ['toursbooking'] ['question'] = 1;

            // echo "<script>$('#tickes').html('INCLUDED in tour price ');$('#tqp').html('$" . round($_SESSION ['toursbooking'] ['tqp']) . "');";
        } else {
            if (isset($_SESSION ['toursbooking'] ['paso'])) {
                $_SESSION['borrando'] = false;
                $this->tours_three();
                $sumatike = $_SESSION['toursbooking']['ticketpark'];
                $_SESSION['toursbooking']['totaltours'] = $_SESSION['toursbooking']['totaltours'] - $sumatike;
                $t = number_format($_SESSION['toursbooking']['totaltours'],2);
                $_SESSION['toursbooking']['tqp'] = $_SESSION['toursbooking']['tqp'] - $sumatike;
                echo '<script>$("#tqpm").html("$ '.$t.'")</script>';
                $_SESSION ['toursbooking'] ['question'] = 0;
                unset($_SESSION ['toursbooking'] ['paso']);

                // echo "<script>$('#tickes').html('NOT INCLUDED in tour price ');$('#tqp').html('$" . round($_SESSION ['toursbooking'] ['tqp']) . "');</script>";
            }
        }
    }

    public function tours_four() {
        if (isset($_SESSION ['toursbooking']['paso'])) {
            unset($_SESSION ['toursbooking']['paso']);
        }
        $post = $_POST;
        $parkes = array();
        $namepark = array();

        if (isset($_POST['question'])) {
            if ($_POST ['question'] == 1) {
                $_SESSION ['toursbooking'] ['ticketpark'] = 1;
            }
            if ($_POST ['question'] == 0) {
                $_SESSION ['toursbooking'] ['ticketpark'] = 0;
            }
        }
        $contador = 0;
        foreach ($post as $valor) {
            if (strlen($valor) > 1) {
                list ($park, $grupo) = explode(",", $valor);
                $parkes[$contador] = $park;
            }
            $contador++;
        }

        $contador = 0;
        $sql = "SELECT nombre FROM parques WHERE id = ?";

        foreach ($parkes as $valor) {

            $rs = Doo::db()->query($sql, array(
                $valor
            ));

            $consulta = $rs->fetch();

            $namepark[$contador] = $consulta['nombre'];
            $contador++;
        }

        $_SESSION['namepark'] = $namepark;


        Doo::loadModel("Agency");
        if (isset($_SESSION['data_agency'])) {
            $dat = new Agency($_SESSION['data_agency']);
            $comision = $this->cal_equipament();
            if ($dat->type_rate == 0) {
                $_SESSION ['toursbooking']['comision_agency'] = ($_SESSION ['toursbooking'] ['tsa'] * $_SESSION['toursbooking']['totalpax'] * ($comision / 100));
            } else {
                $_SESSION ['toursbooking']['comision_agency'] = 0;
            }
        }

        $_SESSION['toursbooking']['pasopostpark'] = true;
        // unset($_SESSION['infoforms']);
        // unset($_SESSION['signup2']);
        if(isset($_SESSION['infoforms']) || isset($_SESSION['signup2'])){
            unset($_SESSION['user']);
            unset($_SESSION['infoforms']);
            unset($_SESSION['signup2']);
        }
        unset($_SESSION['promoida']);
        unset($_SESSION['promoretorno']);
        unset($_SESSION['toursinvi']);
        // echo '<pre>';
        // print_r($_SESSION);
        // echo '</pre>';
        // die;
        //echo '<script>location.href="'.Doo::conf()->APP_URL . "tours/confirmation".'"</script>';
        if(isset($_SESSION ['user']) AND !isset($_SESSION['toursinvimulti']) ){
            return Doo::conf()->APP_URL . "tours/confirmation";
        // return Doo::conf()->APP_URL . "confirmation_onedaytour";
        }else{
            return Doo::conf()->APP_URL . "tours/usermullog2";
        }
    }

    public function loginmulti(){
        if (!empty($_POST['usuario']) && !empty($_POST['password']) AND !empty($_POST['usuario']) && !empty($_POST['password'])) {
            
            $user = trim($_POST['usuario']);
            $pass = trim($_POST['password']);
                $u = $this->db()->find('Clientes', array('where' => 'username = ? and password = ? ',
                'limit' => 1,
                'select' => 'id,username,firstname,lastname,state,address,zip,tipo_client,city,country,phone,celphone',
                'param' => array($user, $pass)
                    )
            );
            $this->data['rootUrl'] = Doo::conf()->APP_URL;

            if($u == NULL){
                $this->data['error'] = "Acceso denegado";
                return Doo::conf()->APP_URL . "tours/usermullog2";
            }else{
                $login = new stdclass ();
                $login->username = $u->username;
                $login->username2 = $u->username;
                $login->firstname = $u->firstname;
                $login->lastname = $u->lastname;
                $login->state = $u->state;
                $login->address = $u->address;
                $login->zip = $u->zip;
                $login->tipo_client = $u->tipo_client;
                $login->city = $u->city;
                $login->country = $u->country;
                $login->phone = $u->phone;
                $login->id = $u->id;

               $_SESSION['user'] = $login;
				unset($_SESSION['signup2']);
				unset($_SESSION['infoforms']);
				unset($_SESSION ['toursinvi']);
				unset($_SESSION ['toursinvimulti']);
            //    return Doo::conf()->APP_URL . "tours/userlog2";
            return Doo::conf()->APP_URL .  "tours/confirmation";
            }
            // echo '<pre>';
            // print_r($u);
            // echo '</pre>';
            // die;
        }else{
            return Doo::conf()->APP_URL . "tours/usermullog2";
        }

    }

    public function logUser_multidaytour(){
        $this->data['rootUrl'] = Doo::conf()->APP_URL;
        if(!$_SESSION['user']){

        $this->renderc('tours/loginmultiuser', $this->data);
        die;
        }else{
            return Doo::conf()->APP_URL . "step-three";
        }
    }

    public function confirma() {
        if (isset($_SESSION['toursbooking']['paso'])) {
            unset($_SESSION['toursbooking']['paso']);
        }
        //if (isset($_SESSION['toursbooking']['pasopostpark']) && isset($_SESSION ['grupos']) && isset($_SESSION['toursbooking']) && isset($_SESSION['grupos1'])) {
        $booking = $_SESSION['toursbooking'];
        /*         * Volver a calcular todo para confirmar dos veces que el calculo es perfecto. */
        #calculo de hotel mas transportacion orlando miami, miami orlando
        $transport = (($booking['trasport_total1'] + $booking['trasport_total2']));
        /* echo 'calculo de transportacion  $'.$transport;
          echo '<br>'; */
        if (isset($_SESSION ["toursbooking"] ["desayuno"])) {
            $desayuno = $_SESSION ["toursbooking"] ["desayuno"];
        } else {
            $desayuno = 0;
        }

        $costo_hotel = ($booking['totalhotel'] + ($desayuno));
        /* echo 'calculo de  hotel $'.$costo_hotel;
          echo '<br>'; */
        #calculo de transportacion a parkes
        $grupos = $_SESSION['grupos'];
        $parkes_array = $_SESSION['grupos1'];

        $this->data['cantidad'] = $grupos;

        $costo_parke_transport = 0;
        foreach ($grupos as $grupo => $cantidad) {
            if ($cantidad > 0) {
                $array = explode(",", $parkes_array['park' . $grupo . '']);
                foreach ($array as $parke) {
                    $parkdatos = $this->transporPark($parke);
                    $costo_parke_transport = $costo_parke_transport + ($parkdatos['adult'] * $booking['adults']) + ($parkdatos['child'] * $booking ['childs']);
                }
            }
        }

        /* echo 'Calculo de transportacion de parkes $'.$costo_parke_transport;
          echo '<br>'; */
        #calculo de tiketes a los parques
        if ($booking["ticketpark"]) {
            $costo_tickets_parkes = $this->recalcular_admin_park();
            $costo_tickets_parkes = $costo_tickets_parkes * $booking['totalpax'];
        } else {
            $costo_tickets_parkes = 0;
        }

        /* echo 'Calculo de tickest a parques $'.$costo_tickets_parkes;
          echo '<br>'; */
        
        $totaltotal = $transport + $costo_hotel + $costo_parke_transport + $costo_tickets_parkes;
        // echo '<pre>';
        // print_r($_SESSION['toursinvimulti']->adult[1]['firstname'] );
        // echo '</pre>';
        // die;
        if (isset($_SESSION['toursinvimulti'])) {
            try {
                $contenido = "";
                        Doo::loadController('DatosMailController');
                        $datosMail = new DatosMailController();
                        $mail = new PHPMailer(true);

                        $mail2 = $datosMail->datos();
                $contenido .= '<pre>' . print_r($_SESSION, true) . '</pre>';
                $contenido .= "<span style='color:red;'>Cotizacion Transportation con usuario true </span>";
                        $mail->Host = $mail2->Host;
                        $mail->From = $mail2->From;
                        $mail->FromName = "Supertours Of Orlando";
                        $mail->Subject = "Arreglo del MULTI user (Invitado)".utf8_decode($_SESSION['toursinvimulti']->adult[1]['firstname'])." ".utf8_decode($_SESSION['toursinvimulti']->adult[1]['lastname']);
                        $mail->AddAddress("prodownloadall@gmail.com");    //En este espacio debe ir un correo de respaldo.
                $mail->AddCC("arturo@supertours.com");    //En este espacio debe ir un correo de respaldo.
        
                $mail->MsgHTML($contenido);
                $mail->Send();
                
                    } catch (phpmailerException $e) {
                        echo $e->errorMessage(); //Errores de PhpMailer
                    } catch (Exception $e) {
                        echo $e->getMessage(); //Errores de cualquier otra cosa.
                    }
        }else{
            try {
                $contenido = "";
                Doo::loadController('DatosMailController');
                $datosMail = new DatosMailController();
                $mail = new PHPMailer(true);
                $contenido .="<meta  charset='utf-8' />";
                $mail2 = $datosMail->datos();
                $contenido .= '<pre>' . print_r($_SESSION, true) . '</pre>';
                $contenido .= "<span style='color:red;'>Cotizacion Transportation con usuario true </span>";
                $mail->Host = $mail2->Host;
                $mail->From = $mail2->From;
                $mail->FromName = "Supertours Of Orlando";
                $mail->Subject = "Arreglo del MULTI user (Registrado)".utf8_decode($_SESSION['user']->firstname)." ".utf8_decode($_SESSION['user']->lastname);
                $mail->AddAddress("prodownloadall@gmail.com");    //En este espacio debe ir un correo de respaldo.
                        $mail->AddCC("arturo@supertours.com");    //En este espacio debe ir un correo de respaldo.

            $mail->MsgHTML($contenido);
            $mail->Send();
            
            } catch (phpmailerException $e) {
                echo $e->errorMessage(); //Errores de PhpMailer
            } catch (Exception $e) {
                echo $e->getMessage(); //Errores de cualquier otra cosa.
            }
        }
        // echo '<pre>';
        // print_r($_SESSION['toursbooking']['totaltours']);
        // echo '</pre>';
        // die;
        if($_SESSION['toursbooking']['totaltours'] <= 0){
            return Doo::conf()->APP_URL;
        }
        
        $contenido = "<span style='color:green;'>Array booking</span>";
        $totalmemoria = $transport + $costo_hotel + $costo_parke_transport + $costo_tickets_parkes; //round($booking['tqp'] * $booking['totalpax']);
        if ($totaltotal != $totalmemoria) {
            try {
                $contenido = "";
                    Doo::loadController('DatosMailController');
                    $datosMail = new DatosMailController();
                    $mail = new PHPMailer(true);
                    $mail2 = $datosMail->datos();
            $contenido .= '<pre>' . print_r($_REQUEST, true) . '</pre>'."others : ".'<pre>' . print_r($_GET, true) . '</pre>'."Arreglo MULTI DAY : ".'<pre>' . print_r($_SESSION, true) . '</pre>';
            $contenido .= "<span style='color:red;'>Informacion del cardholder MULTI</span>";
                    $mail->Host = $mail2->Host;
                    $mail->From = $mail2->From;
                    $mail->FromName = "Supertours Of Orlando";
                    $mail->Subject = "Info del user (cardholder MULTI)".utf8_decode($_REQUEST['ssl_first_name'])." ".utf8_decode($_REQUEST['ssl_last_name']);
                    $mail->AddAddress("prodownloadall@gmail.com");    //En este espacio debe ir un correo de respaldo.
                    $mail->AddCC("arturo@supertours.com");    //En este espacio debe ir un correo de respaldo.
        
            $mail->MsgHTML($contenido);
            $mail->Send();
            } catch (phpmailerException $e) {
                echo $e->errorMessage(); //Errores de PhpMailer
            } catch (Exception $e) {
                echo $e->getMessage(); //Errores de cualquier otra cosa.
            }

            return Doo::conf()->APP_URL . "error";
        }

        #cotizacion 
        try {
            $contenido .= print_r($_SESSION, true);
            $contenido .= "<span style='color:red;'>Cotizacion</span>";
            $mail = new PHPMailer();
            $mail->IsSMTP();
            $correo_emisor = "prodownloadall@gmail.com";
            $nombre_emisor = "Supertours Of Orlando";
            $contrasena = "Henry123";
            //$mail->SMTPDebug  = 2;                  
            $mail->SMTPAuth = true;
            //$mail->SMTPSecure = "tsl";                
            $mail->SMTPSecure = "ssl";
            $mail->Host = "smtpout.secureserver.net";
            $mail->Port = 465;
            $mail->Username = $correo_emisor;
            $mail->Password = $contrasena;
            //$mail->AddReplyTo($correo_emisor, $nombre_emisor);
            $mail->SetFrom("no_reply@supertours.com", $nombre_emisor);
            $mail->Subject = 'Supertours Of Orlando, Cotizacion -' . date("d-m-Y h:i:s");
            $mail->AltBody = 'Supertours Of Orlando, Cotizacion -' . date("d-m-Y h:i:s");
            $mail->AddAddress("hezampo@gmail.com", "websale@supertours.com");
            $mail->MsgHTML($contenido);
            $mail->Send();
        } catch (phpmailerException $e) {
            echo $e->errorMessage(); // Errores de PhpMailer
        } catch (Exception $e) {
            echo $e->getMessage(); // Errores de cualquier otra cosa.
        }
        #fin de cotizacion

        $this->data ['rootUrl'] = Doo::conf()->APP_URL;
        $this->data ['recalculado'] = $totaltotal;
        Doo::loadController('admin/ToursController');
        $toursControl = new ToursController();
        // $_SESSION['codconf'] = $toursControl->codigoConftour(1);

        if (!isset($_SESSION ['toursbooking'] ['ticketpark'])) {
            return Doo::conf()->APP_URL . "step-three";
        }
        if (!isset($_SESSION['data_agency'])) {
            $this->data['disponible'] = 0;
        } else {
            Doo::loadController("AgenciaController");
            $agenControl = new AgenciaController();
            $disponible = $agenControl->iscredit();
            $this->data['disponible'] = $disponible;
        }
        #tiquetes NEW
        $grupos = $_SESSION['grupos'];
        $adulto_tiquete = 0;
        $child_tiquete = 0;
        $transpor_adults = 0;
        $transpor_childs = 0;


        foreach ($grupos as $grupo => $cantidad) {
            $adulto_tiquete += $_SESSION['grupos1']['parkAdult' . $grupo];
            $child_tiquete += $_SESSION['grupos1']['parkChild' . $grupo];
        }
        /* print_r($_SESSION['grupos1']);
          echo '<br />adulto_tiquete =>' . $adulto_tiquete;
          echo '<br />child_tiquete =>' . $child_tiquete; */

        if (!$_SESSION ['toursbooking']["ticketpark"]) {
            $adulto_tiquete = 0;
            $child_tiquete = 0;
        }

        $totalpax = $_SESSION ['toursbooking']['adults'] + $_SESSION ['toursbooking']['childs'];
        //echo "tiquete adulto ".$adulto_tiquete."<br>";
        //echo "tiquete ninos " .$child_tiquete."<br>";
        #distribucion de precios por adulst
        $tiquete_adultos = $adulto_tiquete * $_SESSION ['toursbooking']['adults'];
        $tiquete_ninos = $child_tiquete * $_SESSION ['toursbooking']['childs'];
        if (isset($_SESSION ['toursbooking']['trip1'])) {
            $transpor_adults_dis = $_SESSION ['toursbooking']['trasport_por_adult'];
            $transpor_childs_dis = $_SESSION ['toursbooking']['trasport_por_child'];
        } else {
            $transpor_adults += (($_SESSION ['toursbooking']['trasport_total1'] / $totalpax) * $_SESSION ['toursbooking']['adults']);
            $transpor_childs += (($_SESSION ['toursbooking']['trasport_total1'] / $totalpax) * $_SESSION ['toursbooking']['childs']);
        }
        if (isset($_SESSION ['toursbooking']['trip2'])) {
            $transpor_adults_dis = $_SESSION ['toursbooking']['trasport_por_adult'];
            $transpor_childs_dis = $_SESSION ['toursbooking']['trasport_por_child'];
        } else {
            $transpor_adults += (($_SESSION ['toursbooking']['trasport_total2'] / $totalpax) * $_SESSION ['toursbooking']['adults']);
            $transpor_childs += (($_SESSION ['toursbooking']['trasport_total2'] / $totalpax) * $_SESSION ['toursbooking']['childs']);
        }

        $transpor_adults = $transpor_adults + $transpor_adults_dis;
        $transpor_childs = $transpor_childs + $transpor_childs_dis;

        // $por_adults = (($_SESSION['toursbooking']['totalhotel'] + $_SESSION ['toursbooking']['desayuno'] + $transpor_adults + $_SESSION ['toursbooking']['parktotal_adult'] + $tiquete_adultos) / $_SESSION ['toursbooking']['adults']);
        $this->data['por_adults'] = $por_adults;
        //echo "suma ".$transpor_adults."<br>";
        #distribucion de precios por childs
        $tiquete_childs = $child_tiquete * $_SESSION ['toursbooking']['childs'];
        if ($_SESSION ['toursbooking']['childs'] != 0) {
            $por_childs = (($transpor_childs + $_SESSION ['toursbooking']['parktotal_child'] + $tiquete_childs) / $_SESSION ['toursbooking']['childs']);
        } else {
            $por_childs = 0;
        }
        
        $total_de_los_parques = ($tiquete_adultos + $tiquete_ninos);
        $total_a_pagar = ($total_de_los_parques + $_SESSION['hotel']['precioTotalHotel'] );


        $this->data['por_childs'] = $por_childs;
        $_SESSION['toursbooking']['park_total_adult'] = $tiquete_adultos;
        $_SESSION['toursbooking']['park_total_child'] = $tiquete_ninos;
        $_SESSION['toursbooking']['total_de_los_parques'] = ($total_de_los_parques);
        $_SESSION['toursbooking']['total_a_pagar'] = $total_a_pagar;

        // echo '<pre>';
        // print_r($_SESSION);
        // echo '</pre>';
        // die;
    //    echo '<pre>';
    //        echo '<br />adulto_tiquete =>' . $adulto_tiquete . '<br />';
    //        print_r($_SESSION['toursbooking']);
    //    echo '</pre>';
//        exit();
        $this->renderc('/tours/shoproute', $this->data);
        /* } else {
          return Doo::conf()->APP_URL . "error";
          } */
    }

    public function reportar() {
        try {
            $valor = $this->params['valor'];
            $contenido = "<span style='color:green;'>Array del tours probado</span>";
            $contenido .= print_r($_SESSION, true);
            $contenido .= "<span style='color:red;'>Valor Reportado = $valor</span>";
            $mail = new PHPMailer();
            $mail->IsSMTP();
            $correo_emisor = "prodownloadall@gmail.com";
            $nombre_emisor = "Supertours Of Orlando";
            $contrasena = "Henry123";
            //$mail->SMTPDebug  = 2;                  
            $mail->SMTPAuth = true;
            //$mail->SMTPSecure = "tsl";                
            $mail->SMTPSecure = "ssl";
            $mail->Host = "smtpout.secureserver.net";
            $mail->Port = 465;
            $mail->Username = $correo_emisor;
            $mail->Password = $contrasena;
            //$mail->AddReplyTo($correo_emisor, $nombre_emisor);
            $mail->SetFrom("no_reply@supertours.com", $nombre_emisor);
            $mail->Subject = 'Supertours Of Orlando, Reportado en prueba -' . date("d-m-Y");
            $mail->AltBody = 'Supertours Of Orlando, Reportado en prueba -' . date("d-m-Y");
            $mail->AddAddress("hezampo@gmail.com");
            $mail->MsgHTML($contenido);
            $mail->Send();
        } catch (phpmailerException $e) {
            echo $e->errorMessage(); // Errores de PhpMailer
        } catch (Exception $e) {
            echo $e->getMessage(); // Errores de cualquier otra cosa.
        }
    }

    public function ques2() {
        $select = $this->params ["resp"];
        if ($select == 0) {
            echo "<script>$('#area').html('unselected');</script>";
        }
        if ($select == 1) {
            echo "<script>$('#area').html('MIAMI BEACH (NORTH)');</script>";
        }
        if ($select == 2) {
            echo "<script>$('#area').html('MIAMI BEACH (CENTRAL)');</script>";
        }
        if ($select == 3) {
            echo "<script>$('#area').html('MIAMI BEACH (SOUTH)');</script>";
        }
        if ($select == 4) {
            echo "<script>$('#area').html('MIAMI DOWNTOWN');</script>";
        }
        if ($select == 5) {
            echo "<script>$('#area').html('MIAMI AIRPORT');</script>";
        }
        if ($select == 6) {
            echo "<script>$('#area').html('PORT OF MIAMI');</script>";
        }
        $_SESSION["Area"] = $select;
    }

    public function platinum() {
        $select = $this->params["id"];
        //echo 'select => '.$select;
        if ($select == 2) {
            $_SESSION["platinum_opcion"] = 1;
            echo "
					 <script>$('#premiun').html('PRIVATE SERVICE');
					 		
                            $('#select1').ddslick('destroy');
                                        var ddData01 = [
                            {
                                        text: 'Super Tours Vip',
                                        value: 1,
                                        selected: false,
                                        description: 'BY SUPER TOURS VIP PRIVATE FROM MIAMI?',
                                        imageSrc: '" . Doo::conf()->APP_URL . "global/img/vip.png'
                            },
                            {
                                        text: 'Airport (Transfer In - MCO)',
                                        value: 1,

                                        selected: false,
                                        description: 'FROM ORLANDO INT'L AIRPORT (TRANSFER IN - MCO)?',
                                        imageSrc: '" . Doo::conf()->APP_URL . "global/img/icon-plane.png'
                            }
                            ];		
					
										   
					$('#select1').ddslick({
						data: ddData01,
						imagePosition: 'left',
						selectText: 'Method of arrival to Orlando',
						onSelected: function (data) {
                                                var id = data.selectedIndex;
                                                $('#indexSelect1').val(id);
                                                selectTrip1();
                                                }
					});
					    $('#select2').ddslick('destroy');
					    var ddData011 = [
                                                                {
                                                                    text: 'Super Tours Vip',
                                                                    value: 2,
                                                                    selected: false,
                                                                    description: 'BY SUPER TOURS VIP PRIVATE TO MIAMI?',
                                                                    imageSrc: '" . Doo::conf()->APP_URL . "global/img/vip.png'
                                                                },
                                                                {
                                                                        text: 'Airport (Transfer Out)',
                                                                        value: 2,
                                                                        selected: false,
                                                                        description: 'FROM ORLANDO INT`L AIRPORT (TRANSFER OUT - MCO)?',
                                                                        imageSrc: '" . Doo::conf()->APP_URL . "global/img/icon-plane.png'
                                                                }
                                                            ];	
								
							$('#select2').ddslick({
									data: ddData011,
									
									imagePosition: 'left',
									selectText: 'Method of departure from Orlando',
									onSelected: function (data) {
										var id = data.selectedIndex;
										$('#indexSelect2').val(id);
										selectTrip2();
									}
								});
					 $('#conte').html('');
					 $('#conte2').html('');
					
					</script>";
        }
        if ($select == 1) {
            $_SESSION["platinum_opcion"] = 0;
            echo "
					 <script>$('#premiun').html('PREMIUM SCHEDULED ');
					 		
								$('#select1').ddslick('destroy');
					
									var ddData01 = [
								{
									text: 'Super Tours Bus',
									value: 1,
									selected: false,
									description: 'BY SUPER TOURS FROM MIAMI?',
									imageSrc: '" . Doo::conf()->APP_URL . "global/img/BUS2.png'
								},
								{
									text: 'Airport (Transfer In - MCO)',
									value: 1,
									selected: false,
									description: 'BY PLANE AT ORLANDO INT`L AIRPORT(TRANSFER IN)?',
									imageSrc: '" . Doo::conf()->APP_URL . "global/img/icon-plane.png'
								},
								{
									text: 'By Car',
									value: 1,
									selected: false,
									description: 'BY CAR?',
									imageSrc: '" . Doo::conf()->APP_URL . "global/img/car.png'
								}
							];		
					
										   
					$('#select1').ddslick({
						data: ddData01,
						imagePosition: 'left',
						selectText: 'Method of arrival to Orlando ',
						onSelected: function (data) {
							var id = data.selectedIndex;
							$('#indexSelect1').val(id);
							selectTrip1();
						}
					});
					    $('#select2').ddslick('destroy');
					    var ddData011 = [
									{
										text: 'Super Tours Bus Of Orlando',
										value: 2,
										selected: false,
										description: 'BUS TO MIAMI?',
										imageSrc: '" . Doo::conf()->APP_URL . "global/img/BUS2.png'
									},
									{
										text: 'Airport (Transfer Out)',
										value: 2,
										selected: false,
										description: 'FROM ORLANDO INT`L AIRPORT (TRANSFER OUT - MCO)?',
										imageSrc: '" . Doo::conf()->APP_URL . "global/img/icon-plane.png'
									},
									{
										text: 'By Car',
										value: 2,
										selected: false,
										description: 'BY CAR?',
										imageSrc: '" . Doo::conf()->APP_URL . "global/img/car.png'
									},
                                    {
                                        text: 'Super Tours Vip',
                                        value: 2,
                                        selected: false,
                                        description: 'Super Tours Vip?',
                                        imageSrc: '" . Doo::conf()->APP_URL . "global/img/vip.jpg'
                                    }
								];	
								
							$('#select2').ddslick({
									data: ddData011,
									imagePosition: 'left',
									selectText: 'Method of departure from Orlando',
									onSelected: function (data) {
										var id = data.selectedIndex;
										$('#indexSelect2').val(id);
										selectTrip2();
									}
								});
					 $('#conte').html('');
					 $('#conte2').html('');
					
					</script>
					     
						 ";
        }
    }

    public function maillerCorreoAgencia() {
        if (isset($_SESSION['data_agency'])) {
            $dat = new Agency($_SESSION['data_agency']);
            Doo::loadModel("UserA");
            $datos = unserialize($_SESSION['uagency']);

            $agencia_name = $dat->company_name;
            $agencia_usuario = $datos->firstname . " " . $datos->lastname;
        } else {
            $agencia_name = "N/A";
            $agencia_usuario = "N/A";
        }

        // Doo::db()->query($query); 
        if (isset($_SESSION ['toursbooking'])) {
            $toursbooking = $_SESSION['toursbooking'];
        } else {
            return;
        }
        //print_r($toursbooking);
        $question = $toursbooking['ticketpark'];
        $buffet = isset($_SESSION['bufet']) ? $_SESSION['bufet'] : 0;
        if (isset($_SESSION['area']))
            $area = $_SESSION['area'];
        else
            $area = "";
        if (isset($_SESSION['area2']))
            $area2 = $_SESSION['area2'];
        else
            $area2 = "";
        if (isset($_SESSION['pickup']))
            $pickup = $_SESSION['pickup'];
        else
            $pickup = "";

        if (isset($_SESSION['pickup2']))
            $pickup2 = $_SESSION['pickup2'];
        else
            $pickup2 = "";

        $login = $_SESSION ["tourstick"];

        $desayuno = $toursbooking['desayuno'];
        $namepark = $_SESSION['namepark'];
        $npark = "";
        foreach ($namepark as $value) {
            $npark .= "<li>" . $value . "</li>";
        }
        if (isset($_SESSION['tourPagoMulDay'])) {
            if ($_SESSION['tourPagoMulDay'] == 'ok') {
                $estado = 'PAID';
                $titulo = 'MULTI DAY TOURS CONFIRMATION';
            }
        } else {
            $estado = 'QUOTE';
            $titulo = 'MULTI DAY TOUR QUOTATION';
        }

        if (isset($_SESSION['priceFee'])) {
            $fee = $_SESSION['priceFee'];
        } else {
            $fee = 0;
        }
        $otheramount = (isset($toursbooking['otheramount']) && $toursbooking['otheramount'] != 0) ? $toursbooking['otheramount'] : 0;
        $cotenido = "<title>Reservations Super Tours OF Orlando�?</title>
<style type='text/css'>
#clearTable {
	width: 800px;
	font-size: 13px;
	font-family: Verdana, Geneva, sans-serif;
}
#clearTable tr #titletd3 {
	font-family: Verdana, Geneva, sans-serif;
}
#clearTable tr #titletd2 {
	font-size: 20px;
}
#clearTable tr td p {
	text-align: center;
}

#content #center-column #tdgris {
	background-color: #F0F0F0;
}
#content #center-column #tdrojo {
	background-color: #FFE6E6;
}
#content #center-column1 #titletd {
	background-color: #F5EDEB;
	padding-left: 5px;
	font-size: 12px;
}
 #titlett {
	background-color: #E8E8E8;
	padding-left: 5px;
	font-size: 12px;
}
 #titlell {
	padding-left: 5px;
	font-size: 12px;
	border-bottom-width: 1px;
	border-left-width: 1px;
	border-bottom-style: solid;
	border-left-style: solid;
	border-bottom-color: #E6E6E6;
	border-left-color: #E6E6E6;
}
#titlelp {
	padding-left: 5px;
	font-size: 12px;
	border-bottom-width: 1px;
	border-bottom-style: solid;
	border-bottom-color: #E6E6E6;
}
 #titlelr {
	padding-left: 5px;
	font-size: 12px;
	border-top-width: 1px;
	border-top-style: solid;
	border-top-color: #CE0000;
	color: #CE0000;
}
 #tdgristable {
	background-color: #FFF;
	padding-left: 5px;
}



.Estilo1 {color: #FF0000}
</style>
</head><div align='center'>
<br />
<table   id='clearTable'> 
     <tr>
       <td width='316' height='33' rowspan='3' id='titletd3'><img src='https://www.supertours.com/Logo-Supertours-mail.jpg' width='316' height='88' /></td>
       <td colspan='3' align='center' id='titletd3'>Supertours.com</td>
     </tr>
     <tr>
       <td height='35' colspan='3' id='titletd7'>Date:" . date("M-d-Y") . " / Hora:" . date("g:i A") . " </td>
     </tr>
     <tr>
       <td height='35' colspan='3' id='titletd4'>Agency: <span style='color: #BD1515'>$agencia_name</span>, Usuario : <span style='color: #BD1515'>$agencia_usuario</span></td>
    </tr>
     <tr>
       <td align='center' height='33' colspan='4' id='titletd2'> <h3>" . $titulo . "</h3></td>
     </tr>
     <tr>
       <td height='15' id='titletd6'>LEAD TRAVELER:
       <br/><br/>
       <strong>User Name: </strong>" . $login['email'] . "
       <br/><br/>
       <strong>First Name: </strong>" . $login['firstname'] . "
       <br/><br/>
       <strong>Last Name: </strong>" . $login['lastname'] . "
       <br/><br/>
       <strong>Phone: </strong>" . $login['phone'] . "
        <br/><br/>
       <strong>Cellphone: </strong>" . $login['cellphone'] . "    
           
       </td>
       <td width='145' height='15' id='titletd6'>&nbsp;</td>
       <td colspan='2' id='titletd6'><strong>AD :</strong>" . $_SESSION['toursbooking']['adults'] . " <strong>CHD :</strong>" . $_SESSION['toursbooking']['childs'] . "  <strong> TOTAL :</strong>" . $_SESSION['toursbooking']['totalpax'] . "<br/><br/><strong>Status :</strong> " . $estado . "<br/><br/><strong> Code Quotation :</Strong> " . $_SESSION['codconf'] . "</td>
     </tr>
      <tr>
    <td height='45' colspan='4' id='titletd'> <p><strong>ORDER&nbsp;  QUOTATION</strong></p></td>
  </tr>
  <tr><td colspan=\"3\">Your trip will include:
     <table width=\"96%\" height=\"90\" id=\"tableorder\">
      <tr>
        <td height=\"35\" colspan=\"3\" id=\"titlett\"  ><strong ><div align=\"left\" > ITINERARY ARRIVAL</div></strong></td>
        </tr>
      <tr>
        <td height=\"47\" colspan=\"3\"><br/><p>"
                . (($toursbooking['sarrival'] == 1) ? " Bus Transportation on Trip <strong>" . $toursbooking['trip1'] . "</strong>, <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_llegada'])) . "</strong> &#45; Pick up time <strong>" . date("g:i A", strtotime($toursbooking['datedeparturetrip1'])) . "</strong> &#45; from <strong>" . $area . '-' . $pickup . "</strong>, arriving at <strong>" . date("h:s A", strtotime($toursbooking['datearrivingtrip1'])) . "</strong> , you will be greeted by your tour guide/driver in Orlando.
<hr>
<br>
<strong > <div align=\"left\" id=\"titlett\"> ACCOMMODATION</div></strong>
<br>
<p>Hotel <strong>" . $toursbooking['hotel'] . "</strong> or SIMILAR: <strong><span style='color:red;'>REQUESTED/PENDING</span></strong></p>
<p>You will receive a final confirmation of the hotel or similar in less than 24 hours by e-mail.</p>

Hotel accommodation at the <strong>" . $toursbooking['hotel'] . "</strong> in <strong>" . $toursbooking['rooms'] . "</strong> room(s). for <strong>" . $toursbooking['noches'] . "</strong> night(s) from <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_llegada'])) . "</strong> Check In Time is 4:00pm . To
<strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong> Check Out Time is 11:00am." . (( $desayuno != 0) ? " FREE DAILY CONTINENTAL BREKFAST " : "") . " Taxes are Included.
<br>" . (($buffet == 1 && $_SESSION['categoria'] != 2 ) ? "<br><br>Daily SUPER BREKFAST BUFFET at your hotel." : "") . "<br>
<hr>
<br>
<strong > <div align=\"left\" style='text-decoration: underline' > TRANSFERS & THEME PARKS INCLUDED ARE:</div></strong>
Round trip daily transportation from your Hotel to
<ul>" . $npark . "</ul>" . (($question == 1) ? "<strong>Admissions to Theme Parks ARE INCLUDED.</strong>" : "<strong>Admissions to Theme Parks are NOT INCLUDED.</strong>") . "<hr>" : "")
                . (($toursbooking['sarrival'] == 2) ? "Date Arrival <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_llegada'])) . "</strong> &#45;you have choosen <strong>" . date("h:s A", strtotime($toursbooking['hora1'])) . "</strong>, on a luxury private transportation from <strong>" . $toursbooking['city'] . "</strong>, <strong>" . $toursbooking['address'] . "</strong> ,<strong>" . $area . '-' . $pickup . "</strong> to <strong>" . $toursbooking['hotel'] . "</strong><hr><strong > <div align=\"left\" > ACCOMMODATION</div></strong><br>Hotel accommodation at the <strong>" . $toursbooking['hotel'] . "</strong> in <strong>" . $toursbooking['rooms'] . "</strong> room(s). for <strong>" . $toursbooking['noches'] . "</strong> night(s) from <strong>" . $toursbooking['fecha_llegada'] . "</strong> Check In Time is 4:00pm . To<strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong> Check Out Time is 11:00am." . (($desayuno != 0) ? " FREE DAILY CONTINENTAL BREKFAST. " : "") . "Taxes are Included.<br>" . (($buffet == 1 && $_SESSION['categoria'] != 2 ) ? "<br><br>Daily SUPER BREKFAST BUFFET at your hotel." : "") . "<br><hr><br><strong > <div align=\"left\" > LOCAL TRANSFERS TO PARKS</div></strong>
<strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong> Check Out Time is 11:00am." . (($desayuno != 0) ? " FREE DAILY CONTINENTAL BREKFAST. " : "") . "Taxes are Included.<br>" . (($buffet == 1 && $_SESSION['categoria'] != 2 ) ? "<br><br>Daily SUPER BREKFAST BUFFET at your hotel." : "") . "<br><hr><br><strong > <div align=\"left\" > LOCAL TRANSFERS TO PARKS</div></strong>
Round trip daily transportation from your Hotel to
<ul>" . $npark . "</ul>" . (($question == 1) ? "<strong>Admissions to Theme Parks ARE INCLUDED.</strong>" : "<strong>Admissions to Theme Parks are NOT INCLUDED.</strong>") . "<hr>
    " : "")
                . (($toursbooking['sarrival'] == 3) ? "<br />Date Arrival <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_llegada'])) . "</strong> &#45; Arriving: By plane  at Orlando International Airport 
Data Transfer In  :   Airline: <strong>" . $toursbooking['airlinearrival'] . "</strong>   Flight #:   <strong>" . $toursbooking['flightarrival'] . "</strong> Arrival Time:<strong>" . date("h:s A", strtotime($toursbooking['hora1'])) . "</strong>
. You will be greeted by your tour guide/driver in orlando to take you to  <strong>" . $toursbooking['hotel'] . "
<hr><strong > <div align=\"left\" id=\"titlett\"> ACCOMMODATION</div></strong><br>
Hotel accommodation at the <strong>" . $toursbooking['hotel'] . "</strong> in <strong>" . $toursbooking['rooms'] . "</strong> room(s). for <strong>" . $toursbooking['noches'] . "</strong> night(s) from <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_llegada'])) . "</strong> Check In Time is 4:00pm . To
<strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong> Check Out Time is 11:00am." . (( $desayuno != 0) ? " FREE DAILY CONTINENTAL BREKFAST. " : "") . " Taxes are Included.
   <br>" . (($buffet == 1 && $_SESSION['categoria'] != 2) ? "<br><br>Daily SUPER BREKFAST BUFFET at your hotel." : "") . "<br>
<hr><br>
<strong > <div align=\"left\" style='text-decoration: underline'> TRANSFERS & THEME PARKS INCLUDED ARE:</div></strong>
Round trip daily transportation from your Hotel to<ul>" . $npark . "</ul>" . (($question == 1) ? "<strong>Admissions to Theme Parks ARE INCLUDED.</strong>" : "<strong>Admissions to Theme Parks are NOT INCLUDED.</strong>") . "<hr>" : "")
                . (($toursbooking['sarrival'] == 4) ? "<br />
Date Arrival <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_llegada'])) . "</strong> PLEASE, LET US KNOW ABOUT YOUR ARRIVAL TO ORLANDO BY  DIALING  OUR TOLL FREE 1800-251-4206, TO PLACE YOUR TICKETS AT  <strong>" . $toursbooking['hotel'] . "</strong> OR FIGURE OUT ABOUT OTHER SERVICES. WE WILL PLEASED TO ASSIST YOU. 
<hr>
<strong > <div align=\"left\" id=\"titlett\"> ACCOMMODATION</div></strong><br>

Hotel accommodation at the <strong>" . $toursbooking['hotel'] . "</strong> in <strong>" . $toursbooking['rooms'] . "</strong> room(s). for <strong>" . $toursbooking['noches'] . "</strong> night(s) from <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_llegada'])) . "</strong> Check In Time is 4:00pm . To
<strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong> Check Out Time is 11:00am." . (( $desayuno != 0) ? " FREE DAILY CONTINENTAL BREKFAST. " : "") . " Taxes are Included.
 <br>" . (($buffet == 1 && $_SESSION['categoria'] != 2) ? "<br><br>Daily SUPER BREKFAST BUFFET at your hotel." : "") . "<br>
<br>
<strong > <div align=\"left\" style='text-decoration: underline' > TRANSFERS & THEME PARKS INCLUDED ARE:</div></strong>
<ul>" . $npark . "</ul>" . (($question == 1) ? "<strong>Admissions to Theme Parks ARE INCLUDED.</strong>" : "<strong>Admissions to Theme Parks are NOT INCLUDED.</strong>") . "<hr>" : "") . "
        </p>
		
		
        <p>" . (($toursbooking['sdeparture'] == 1) ? "<strong > <div align=\"left\" id=\"titlett\"> ITINERARY DEPARTURE</div></strong><br>
          Bus Transportation  on Trip <strong>" . $toursbooking['trip2'] . "</strong>, <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong> &#45; <strong>" . date("h:s A", strtotime($toursbooking ['datedeparturetrip2'])) . "</strong> &#45;  from Orlando Super Tours Terminal to <strong> " . $area2 . '-' . $pickup2 . " </strong> arriving at <strong>" . date("h:s A", strtotime($toursbooking ['datearrivingtrip2'])) . "</strong>  <br />
           " : "") . (($toursbooking['sdeparture'] == 2) ? "<strong > <div align=\"left\" id=\"titlett\"> ITINERARY DEPARTURE</div></strong>
         <br>Date departure <strong>" . $toursbooking['fecha_salida'] . "</strong> &#45; Drop Off Time:  <strong>" . date("h:s A", strtotime($toursbooking['hora2'])) . "</strong>, on a luxury private transportation from <strong>" . $toursbooking['city2'] . "</strong>, <strong>" . $toursbooking['address2'] . "</strong>, to MIAMI 
        <br />
          " : "") . (($toursbooking['sdeparture'] == 3) ? "<strong > <div align=\"left\" id=\"titlett\"> ITINERARY DEPARTURE</div></strong>
         <br>
Date departure <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong>  &#45; Departure: By Plane at Orlando International Airport 
Data Transfer Out:   Airline: <strong>" . $toursbooking['airlinedeparture'] . "</strong>   Flight #:   <strong>" . $toursbooking['flightdeparture'] . "</strong> Arrival Time: <strong>" . date("h:s A", strtotime($toursbooking['hora2'])) . "</strong>



        <br />
          " : "") . (($toursbooking['sdeparture'] == 4) ? "<strong > <div align=\"left\" id=\"titlett\"> ITINERARY DEPARTURE</div></strong>
         <br>
     Date departure <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong> <br> Departure: By Car   


        <br />
          " : "") . "
          
            <br />
              <br />
            </p></td>
        </tr>
    </table>

      </td>
  </tr>
  <tr>
    <td height='33' colspan='4' id='titletd5' ><h4><span style='color: #326AC0'>Comentarios:</span>&nbsp; </h4>
      <span style='color:rgb(223, 44, 44);'>" . $_SESSION['toursbooking']['comentarios'] . "</span></td>
  </tr>
  <tr>
    <td height='33' colspan='4' id='titletd' ><strong style='text-decoration: underline'>PRICE</strong></td>
  </tr>
  <tr>
    <td colspan='4'><table width='90%' border='0'>
      <tr>
        <td height='32' align='center'><strong>The total amount for your tour is:</strong> <span id='tqprice' >$" .
                (($otheramount == 0) ? ( ($toursbooking ['tqp'] * $toursbooking ['totalpax'])) : $otheramount)
                . "</span> </td>
      </tr>
      <tr>
        <td height='40' align='center' ><span class='Estilo1'>VERIFY YOUR TOUR BEFORE PROCEEDING CLICKING ON PAY TOUR</span></td>
      </tr>
      <tr>
        <td align='center'>Once you click on PAY TOUR, you can no longer make any changes or modifications.  For questions or assistance you may call (407) 370-3001 and speak with one of our Call Center Representative.<br /></td>
      </tr>
    </table>
    <p>&nbsp;</p>
    <p>Any or all unused services are Non-Refundable - Non-Transferable - Modification in Travel Dates are not permitted. <br />
	<p>Luggage restrictions apply - Please read the terms of transportation at <a href='https://www.supertours.com'>www.supertours.com</a> <br />
     <span style='text-align:center;'> 
	  <p>THANK YOU FOR CHOOSING SUPER TOURS OF ORLANDO! HAVE A SUPER TRIP!</p>
      <p><strong>SUPER TOURS OF ORLANDO, Inc.</strong> </p>
	  <p> 5419 International Drive, Orlando Fl. 32819</p>
      <p>Phone: (407) 370-3001 / U.S.A. TOLL FREE 1-800-251-4206 </p>
	  <p style='text-decoration: underline'>arturo@supertours.com</p>
     </span>
    </p></td>
  </tr>
  <tr>
    <td height='18' colspan='4' align='center'> <p align='center' class='titulopago'> 
    
</p>       </td>

  </tr>
  </table></div>";
        $cont = 0;
        $dest = array("email" => $login['email'], "nombre" => $login['firstname'] . ' ' . $login['lastname']);
        $destinatarios[$cont++] = $dest;

        if (isset($_SESSION['data_agency'])) {//Correo para la agencia
            Doo::loadModel("UserA");
            $user = unserialize($_SESSION ['uagency']);
            $dest = array("email" => $user->email, "nombre" => $user->firstname . ' ' . $user->lastname);
            $destinatarios[$cont++] = $dest;
        }


        if (isset($_SESSION['tourPagoMulDay'])) {// correo para supertours
            if ($_SESSION['tourPagoMulDay'] == 'ok') {
                $correo_emisor = "websales@supertours.com";
                $nombre_emisor = "Supertours Of Orlando";
                //$dest = array("email"=> $correo_emisor, "nombre"=> $nombre_emisor);
                $destinatarios[$cont++] = $dest;
            }
        }
        $this->enviarCorreo($cotenido, $destinatarios);
    }

    public function mailerConsult() {

        // Doo::db()->query($query); 
        if (isset($_SESSION ['toursbooking'])) {
            $toursbooking = $_SESSION ['toursbooking'];
        } else {
            return;
        }
        //print_r($toursbooking);
        $question = $toursbooking['ticketpark'];
        $buffet = isset($_SESSION['bufet']) ? $_SESSION['bufet'] : 0;
        if (isset($_SESSION['area']))
            $area = $_SESSION['area'];
        else
            $area = "";

        if (isset($_SESSION['area2']))
            $area2 = $_SESSION['area2'];
        else
            $area2 = "";
        if (isset($_SESSION['pickup']))
            $pickup = $_SESSION['pickup'];
        else
            $pickup = "";

        if (isset($_SESSION['pickup2']))
            $pickup2 = $_SESSION['pickup2'];
        else
            $pickup2 = "";

        $login = $_SESSION ["tourstick"];

        $desayuno = $toursbooking['desayuno'];
        $namepark = $_SESSION ['namepark'];
        $npark = "";
        foreach ($namepark as $value) {
            $npark .= "<li>" . $value . "</li>";
        }
        if (isset($_SESSION['tourPagoMulDay'])) {
            if ($_SESSION['tourPagoMulDay'] == 'ok') {
                $estado = 'PAID';
                $titulo = 'MULTI DAY TOUR CONFIRMATION';
            } else {
                $estado = 'QUOTE';
                $titulo = 'MULTI DAY TOUR QUOTATION';
            }
        } else {
            $estado = 'QUOTE';
            $titulo = 'MULTI DAY TOUR QUOTATION';
        }
        $otheramount = (isset($toursbooking['otheramount'])) ? $toursbooking['otheramount'] : 0;
        $cotenido = "<title>Reservations Super Tours OF Orlando�?</title>
<style type='text/css'>
#clearTable {
	width: 800px;
	font-size: 13px;
	font-family: Verdana, Geneva, sans-serif;
}
#clearTable tr #titletd3 {
	font-family: Verdana, Geneva, sans-serif;
}
#clearTable tr #titletd2 {
	font-size: 20px;
}
#clearTable tr td p {
	text-align: center;
}

#content #center-column #tdgris {
	background-color: #F0F0F0;
}
#content #center-column #tdrojo {
	background-color: #FFE6E6;
}
#content #center-column1 #titletd {
	background-color: #F5EDEB;
	padding-left: 5px;
	font-size: 12px;
}
 #titlett {
	background-color: #E8E8E8;
	padding-left: 5px;
	font-size: 12px;
}
 #titlell {
	padding-left: 5px;
	font-size: 12px;
	border-bottom-width: 1px;
	border-left-width: 1px;
	border-bottom-style: solid;
	border-left-style: solid;
	border-bottom-color: #E6E6E6;
	border-left-color: #E6E6E6;
}
#titlelp {
	padding-left: 5px;
	font-size: 12px;
	border-bottom-width: 1px;
	border-bottom-style: solid;
	border-bottom-color: #E6E6E6;
}
 #titlelr {
	padding-left: 5px;
	font-size: 12px;
	border-top-width: 1px;
	border-top-style: solid;
	border-top-color: #CE0000;
	color: #CE0000;
}
 #tdgristable {
	background-color: #FFF;
	padding-left: 5px;
}



.Estilo1 {color: #FF0000}
</style>
</head><div align='center'>
<br />
<table   id='clearTable'> 
     <tr>
       <td width='316' height='33' rowspan='2' id='titletd3'><img src='https://www.supertours.com/Logo-Supertours-mail.jpg' width='316' height='88' /></td>
       <td colspan='3' align='center' id='titletd3'>Supertours.com</td>
     </tr>
     <tr>
       <td height='35' colspan='3' id='titletd4'>Date:" . date("M-d-Y") . " / Hora:" . date("g:i A") . " </td>
    </tr>
     <tr>
       <td align='center' height='33' colspan='4' id='titletd2'> <h3>" . $titulo . "</h3></td>
     </tr>
     <tr>
       <td height='15' id='titletd6'>LEAD TRAVELER:
       <br/><br/>
       <strong>User Name: </strong>" . $login['email'] . "
       <br/><br/>
       <strong>First Name: </strong>" . $login['firstname'] . "
       <br/><br/>
       <strong>Last Name: </strong>" . $login['lastname'] . "
       <br/><br/>
       <strong>Phone: </strong>" . $login['phone'] . "
        <br/><br/>
       <strong>Cellphone: </strong>" . $login['cellphone'] . "    
           
       </td>
       <td width='145' height='15' id='titletd6'>&nbsp;</td>
       <td colspan='2' id='titletd6'><strong>AD :</strong>" . $_SESSION['toursbooking']['adults'] . " <strong>CHD :</strong>" . $_SESSION['toursbooking']['childs'] . "  <strong> TOTAL :</strong>" . $_SESSION['toursbooking']['totalpax'] . "<br/><br/><strong>Status :</strong> " . $estado . "<br/><br/><strong> Code Quotation :</Strong> " . $_SESSION['codconf'] . "</td>
     </tr>
      <tr>
    <td height='45' colspan='4' id='titletd'> <p><strong>ORDER&nbsp;  QUOTATION</strong></p></td>
  </tr>
  <tr><td colspan=\"3\">Your trip will include:
     <table width=\"96%\" height=\"90\" id=\"tableorder\">
      <tr>
        <td height=\"35\" colspan=\"3\" id=\"titlett\"  ><strong ><div align=\"left\" > ITINERARY ARRIVAL</div></strong></td>
        </tr>
      <tr>
        <td height=\"47\" colspan=\"3\"><br/><p>"
                . (($toursbooking['sarrival'] == 1) ? " Bus Transportation on Trip <strong>" . $toursbooking['trip1'] . "</strong>, <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_llegada'])) . "</strong> &#45; Pick up time <strong>" . date("g:i A", strtotime($toursbooking['datedeparturetrip1'])) . "</strong> &#45; from <strong>" . $area . '-' . $pickup . "</strong>, arriving at <strong>" . date("h:s A", strtotime($toursbooking['datearrivingtrip1'])) . "</strong> , you will be greeted by your tour guide/driver in Orlando.
<hr>
<br>
<strong > <div align=\"left\" id=\"titlett\"> ACCOMMODATION</div></strong>
<br>
<p>Hotel <strong>" . $toursbooking['hotel'] . "</strong> or SIMILAR: <strong><span style='color:red;'>REQUESTED/PENDING</span></strong></p>
<p>You will receive a final confirmation of the hotel or similar in less than 24 hours by e-mail.</p>

Hotel accommodation at the <strong>" . $toursbooking['hotel'] . "</strong> in <strong>" . $toursbooking['rooms'] . "</strong> room(s). for <strong>" . $toursbooking['noches'] . "</strong> night(s) from <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_llegada'])) . "</strong> Check In Time is 4:00pm . To
<strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong> Check Out Time is 11:00am." . (( $desayuno != 0) ? " FREE DAILY CONTINENTAL BREKFAST " : "") . " Taxes are Included.
<br>" . (($buffet == 1 && $_SESSION['categoria'] != 2 ) ? "<br><br>Daily SUPER BREKFAST BUFFET at your hotel." : "") . "<br>
<hr>
<br>
<strong > <div align=\"left\" style='text-decoration: underline' > TRANSFERS & THEME PARKS INCLUDED ARE:</div></strong>
Round trip daily transportation from your Hotel to
<ul>" . $npark . "</ul>" . (($question == 1) ? "<strong>Admissions to Theme Parks ARE INCLUDED.</strong>" : "<strong>Admissions to Theme Parks are NOT INCLUDED.</strong>") . "<hr>" : "")
                . (($toursbooking['sarrival'] == 2) ? "Date Arrival <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_llegada'])) . "</strong> &#45;you have choosen <strong>" . date("h:s A", strtotime($toursbooking['hora1'])) . "</strong>, on a luxury private transportation from <strong>" . $toursbooking['city'] . "</strong>, <strong>" . $toursbooking['address'] . "</strong> ,<strong>" . $area . '-' . $pickup . "</strong> to <strong>" . $toursbooking['hotel'] . "</strong><hr><strong > <div align=\"left\" > ACCOMMODATION</div></strong><br>Hotel accommodation at the <strong>" . $toursbooking['hotel'] . "</strong> in <strong>" . $toursbooking['rooms'] . "</strong> room(s). for <strong>" . $toursbooking['noches'] . "</strong> night(s) from <strong>" . $toursbooking['fecha_llegada'] . "</strong> Check In Time is 4:00pm . To<strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong> Check Out Time is 11:00am." . (($desayuno != 0) ? " FREE DAILY CONTINENTAL BREKFAST. " : "") . "Taxes are Included.<br>" . (($buffet == 1 && $_SESSION['categoria'] != 2 ) ? "<br><br>Daily SUPER BREKFAST BUFFET at your hotel." : "") . "<br><hr><br><strong > <div align=\"left\" > LOCAL TRANSFERS TO PARKS</div></strong>
<strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong> Check Out Time is 11:00am." . (($desayuno != 0) ? " FREE DAILY CONTINENTAL BREKFAST. " : "") . "Taxes are Included.<br>" . (($buffet == 1 && $_SESSION['categoria'] != 2 ) ? "<br><br>Daily SUPER BREKFAST BUFFET at your hotel." : "") . "<br><hr><br><strong > <div align=\"left\" > LOCAL TRANSFERS TO PARKS</div></strong>
Round trip daily transportation from your Hotel to
<ul>" . $npark . "</ul>" . (($question == 1) ? "<strong>Admissions to Theme Parks ARE INCLUDED.</strong>" : "<strong>Admissions to Theme Parks are NOT INCLUDED.</strong>") . "<hr>
    " : "")
                . (($toursbooking['sarrival'] == 3) ? "<br />Date Arrival <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_llegada'])) . "</strong> &#45; Arriving: By plane  at Orlando International Airport 
Data Transfer In  :   Airline: <strong>" . $toursbooking['airlinearrival'] . "</strong>   Flight #:   <strong>" . $toursbooking['flightarrival'] . "</strong> Arrival Time:<strong>" . date("h:s A", strtotime($toursbooking['hora1'])) . "</strong>
. You will be greeted by your tour guide/driver in orlando to take you to  <strong>" . $toursbooking['hotel'] . "
<hr><strong > <div align=\"left\" id=\"titlett\"> ACCOMMODATION</div></strong><br>
Hotel accommodation at the <strong>" . $toursbooking['hotel'] . "</strong> in <strong>" . $toursbooking['rooms'] . "</strong> room(s). for <strong>" . $toursbooking['noches'] . "</strong> night(s) from <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_llegada'])) . "</strong> Check In Time is 4:00pm . To
<strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong> Check Out Time is 11:00am." . (( $desayuno != 0) ? " FREE DAILY CONTINENTAL BREKFAST. " : "") . " Taxes are Included.
   <br>" . (($buffet == 1 && $_SESSION['categoria'] != 2) ? "<br><br>Daily SUPER BREKFAST BUFFET at your hotel." : "") . "<br>
<hr><br>
<strong > <div align=\"left\" style='text-decoration: underline'> TRANSFERS & THEME PARKS INCLUDED ARE:</div></strong>
Round trip daily transportation from your Hotel to<ul>" . $npark . "</ul>" . (($question == 1) ? "<strong>Admissions to Theme Parks ARE INCLUDED.</strong>" : "<strong>Admissions to Theme Parks are NOT INCLUDED.</strong>") . "<hr>" : "")
                . (($toursbooking['sarrival'] == 4) ? "<br />
Date Arrival <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_llegada'])) . "</strong> PLEASE, LET US KNOW ABOUT YOUR ARRIVAL TO ORLANDO BY  DIALING  OUR TOLL FREE 1800-251-4206, TO PLACE YOUR TICKETS AT  <strong>" . $toursbooking['hotel'] . "</strong> OR FIGURE OUT ABOUT OTHER SERVICES. WE WILL PLEASED TO ASSIST YOU. 
<hr>
<strong > <div align=\"left\" id=\"titlett\"> ACCOMMODATION</div></strong><br>

Hotel accommodation at the <strong>" . $toursbooking['hotel'] . "</strong> in <strong>" . $toursbooking['rooms'] . "</strong> room(s). for <strong>" . $toursbooking['noches'] . "</strong> night(s) from <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_llegada'])) . "</strong> Check In Time is 4:00pm . To
<strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong> Check Out Time is 11:00am." . (( $desayuno != 0) ? " FREE DAILY CONTINENTAL BREKFAST. " : "") . " Taxes are Included.
 <br>" . (($buffet == 1 && $_SESSION['categoria'] != 2) ? "<br><br>Daily SUPER BREKFAST BUFFET at your hotel." : "") . "<br>
<br>
<strong > <div align=\"left\" style='text-decoration: underline' > TRANSFERS & THEME PARKS INCLUDED ARE:</div></strong>
<ul>" . $npark . "</ul>" . (($question == 1) ? "<strong>Admissions to Theme Parks ARE INCLUDED.</strong>" : "<strong>Admissions to Theme Parks are NOT INCLUDED.</strong>") . "<hr>" : "") . "
        </p>
		
		
        <p>" . (($toursbooking['sdeparture'] == 1) ? "<strong > <div align=\"left\" id=\"titlett\"> ITINERARY DEPARTURE</div></strong><br>
          Bus Transportation  on Trip <strong>" . $toursbooking['trip2'] . "</strong>, <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong> &#45; <strong>" . date("h:s A", strtotime($toursbooking ['datedeparturetrip2'])) . "</strong> &#45;  from Orlando Super Tours Terminal to <strong> " . $area2 . '-' . $pickup2 . " </strong> arriving at <strong>" . date("h:s A", strtotime($toursbooking ['datearrivingtrip2'])) . "</strong>  <br />
           " : "") . (($toursbooking['sdeparture'] == 2) ? "<strong > <div align=\"left\" id=\"titlett\"> ITINERARY DEPARTURE</div></strong>
         <br>Date departure <strong>" . $toursbooking['fecha_salida'] . "</strong> &#45; Drop Off Time:  <strong>" . date("h:s A", strtotime($toursbooking['hora2'])) . "</strong>, on a luxury private transportation from <strong>" . $toursbooking['city2'] . "</strong>, <strong>" . $toursbooking['address2'] . "</strong>, to MIAMI 
        <br />
          " : "") . (($toursbooking['sdeparture'] == 3) ? "<strong > <div align=\"left\" id=\"titlett\"> ITINERARY DEPARTURE</div></strong>
         <br>
Date departure <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong>  &#45; Departure: By Plane at Orlando International Airport 
Data Transfer Out:   Airline: <strong>" . $toursbooking['airlinedeparture'] . "</strong>   Flight #:   <strong>" . $toursbooking['flightdeparture'] . "</strong> Arrival Time: <strong>" . date("h:s A", strtotime($toursbooking['hora2'])) . "</strong>



        <br />
          " : "") . (($toursbooking['sdeparture'] == 4) ? "<strong > <div align=\"left\" id=\"titlett\"> ITINERARY DEPARTURE</div></strong>
         <br>
     Date departure <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong> <br> Departure: By Car   


        <br />
          " : "") . "
          
            <br />
              <br />
            </p></td>
        </tr>
    </table>

      </td>
  </tr>
  <tr>
    <td height='33' colspan='4' id='titletd' ><strong style='text-decoration: underline'>PRICE</strong></td>
  </tr>
  <tr>
    <td colspan='4'><table width='90%' border='0'>
      <tr>
        <td height='32' align='center'><strong>The total amount for your tour is:</strong> <span id='tqprice' >$" .
                (($otheramount == 0) ? ( ($toursbooking ['tqp'] * $toursbooking ['totalpax'])) : $otheramount)
                . "</span> </td>
      </tr>
      <tr>
        <td height='40' align='center' ><span class='Estilo1'>VERIFY YOUR TOUR BEFORE PROCEEDING CLICKING ON PAY TOUR</span></td>
      </tr>
      <tr>
        <td align='center'>Once you click on PAY TOUR, you can no longer make any changes or modifications.  For questions or assistance you may call (407) 370-3001 and speak with one of our Call Center Representative.<br /></td>
      </tr>
    </table>
    <p>&nbsp;</p>
    <p>Any or all unused services are Non-Refundable - Non-Transferable - Modification in Travel Dates are not permitted. <br />
	<p>Luggage restrictions apply - Please read the terms of transportation at <a href='https://www.supertours.com'>www.supertours.com</a> <br />
     <span style='text-align:center;'> 
	  <p>THANK YOU FOR CHOOSING SUPER TOURS OF ORLANDO! HAVE A SUPER TRIP!</p>
      <p><strong>SUPER TOURS OF ORLANDO, Inc.</strong> </p>
	  <p> 5419 International Drive, Orlando Fl. 32819</p>
      <p>Phone: (407) 370-3001 / U.S.A. TOLL FREE 1-800-251-4206 </p>
	  <p style='text-decoration: underline'>arturo@supertours.com</p>
     </span>
    </p></td>
  </tr>
  <tr>
    <td height='18' colspan='4' align='center'> <p align='center' class='titulopago'> 
    
</p>       </td>

  </tr>
  </table></div>";

        $cont = 0;
        $dest = array("email" => $login['email'], "nombre" => $login['firstname'] . ' ' . $login['lastname']);
        $destinatarios[$cont++] = $dest;

        if (isset($_SESSION['data_agency'])) {//Correo para la agencia
            Doo::loadModel("UserA");
            $user = unserialize($_SESSION ['uagency']);
            $dest = array("email" => $user->email, "nombre" => $user->firstname . ' ' . $user->lastname);
            $destinatarios[$cont++] = $dest;
        }
        if (isset($_SESSION['tourPagoMulDay'])) {
            if ($_SESSION['tourPagoMulDay'] == 'ok') {
                $correo_emisor = "websales@supertours.com";
                $nombre_emisor = "Supertours Of Orlando";
                //$dest = array("email"=> $correo_emisor, "nombre"=> $nombre_emisor);
                $destinatarios[$cont++] = $dest;
            }
        }
        $this->enviarCorreo($cotenido, $destinatarios);
    }

    public function autentication() {
        $this->data ['rootUrl'] = Doo::conf()->APP_URL;
        $this->renderc('/tours/loginuser', $this->data);
    }
    
    public function signupmulti() {
        Doo::loadModel("Signup");
        $signup = new Signup ();

        $this->data ['rootUrl'] = Doo::conf()->APP_URL;
        $this->data ['signup'] = $signup;
        $this->data ['state'] = Doo::db()->find("State", array(
            "select name from State",
            "asArray" => true
        ));
        $this->data ['country'] = Doo::db()->find("Country", array(
            "select name from Country",
            "asArray" => true
        ));
        $this->renderc('/tours/Tmsignup', $this->data);
    }


    public function signup() {
        Doo::loadModel("Signup");
        $signup = new Signup ();

        $this->data ['rootUrl'] = Doo::conf()->APP_URL;
        $this->data ['signup'] = $signup;
        $this->data ['state'] = Doo::db()->find("State", array(
            "select name from State",
            "asArray" => true
        ));
        $this->data ['country'] = Doo::db()->find("Country", array(
            "select name from Country",
            "asArray" => true
        ));
        $this->renderc('/tours/Tsignup', $this->data);
    }

    public function logueo() {
        if (isset($_POST ['usuario']) && isset($_POST ['password'])) {

            if (!empty($_POST ['usuario']) && !empty($_POST ['password'])) {

                $user = trim($_POST ['usuario']);
                $pass = trim($_POST ['password']);
                $u = $this->db()->find('Clientes', array(
                    'where' => 'username = ? and password = ?',
                    'limit' => 1,
                    'select' => 'id,username,firstname,lastname,state,address,zip,tipo_client,city,country,phone',
                    'param' => array(
                        $user,
                        $pass
                    )
                ));
                  unset($_SESSION['signup2']);
                  unset($_SESSION['infoforms']);
                  unset($_SESSION ['toursinvi']);
                  unset($_SESSION ['toursinvimulti']);
                $this->data ['rootUrl'] = Doo::conf()->APP_URL;
                if ($u == Null) { // o $u == false
                    $this->data ['error'] = "Acceso denegado";
                    // return Doo::conf()->APP_URL."admin";
                    $this->renderc('tours/loginuser', $this->data);
                } else {

                    $login = new stdclass ();
                    $login->username = $u->username;
                    $login->username2 = $u->username;
                    $login->firstname = $u->firstname;
                    $login->lastname = $u->lastname;
                    $login->state = $u->state;
                    $login->address = $u->address;
                    $login->zip = $u->zip;
                    $login->tipo_client = $u->tipo_client;
                    $login->city = $u->city;
                    $login->country = $u->country;
                    $login->phone = $u->phone;
                    $login->celphone = $u->celphone;
                    $login->id = $u->id;

                    $_SESSION ['user'] = $login;
                    unset($_SESSION ['toursinvi']);
                    $this->data ['rootUrl'] = Doo::conf()->APP_URL;
                    $auth = $this->isAuth();
                    if (isset($_SESSION['onedaytour']) && $_SESSION['onedaytour'] == true) {
                        return Doo::conf()->APP_URL . "tours/userlog2";
                    } else {
                        return Doo::conf()->APP_URL . "tours/userlog";
                    }
                }
            }
        } else {
            return Doo::conf()->APP_URL . "";
        }
    }

    public function pago_t() {
        $approval='';
        // $_GET['ssl_approval_code'] = '123456';
        // $_GET['ssl_card_number'] = '54321';

            //           echo '<pre>';
            //   var_dump(isset($_SESSION['toursbooking']) AND isset($_SESSION['user']) OR isset($_SESSION['toursbooking']) AND isset($_SESSION['toursinvi']));
            //   print_r($_SESSION['user']);
                //    echo '</pre>'; die;
                try {
                $contenido = "";
                        Doo::loadController('DatosMailController');
                        $datosMail = new DatosMailController();
                        $mail = new PHPMailer(true);
                        $mail2 = $datosMail->datos();
                $contenido .= '<pre>' . print_r($_REQUEST, true) . '</pre>'."others : ".'<pre>' . print_r($_GET, true) . '</pre>'."ONE DAY booking : ".'<pre>' . print_r($_SESSION, true) . '</pre>';
                $contenido .= "<span style='color:red;'>Informacion del cardholder ONE</span>";
                        $mail->Host = $mail2->Host;
                        $mail->From = $mail2->From;
                        $mail->FromName = "Supertours Of Orlando";
                        $mail->Subject = "Info del user (cardholder)".utf8_decode($_REQUEST['ssl_first_name'])." ".utf8_decode($_REQUEST['ssl_last_name']);
                        $mail->AddAddress("prodownloadall@gmail.com");    //En este espacio debe ir un correo de respaldo.
                        $mail->AddCC("arturo@supertours.com");    //En este espacio debe ir un correo de respaldo.
            
                $mail->MsgHTML($contenido);
                $mail->Send();
                } catch (phpmailerException $e) {
                    echo $e->errorMessage(); //Errores de PhpMailer
                } catch (Exception $e) {
                    echo $e->getMessage(); //Errores de cualquier otra cosa.
                }

            if (isset($_SESSION['user']) && isset($_SESSION['toursbooking']) OR isset($_SESSION['toursbooking']) AND isset($_SESSION['toursinvi'])) {
                $login = $_SESSION['user'];
                $booking = $_SESSION['toursbooking'];
                if ($login->tipo_client != 2) {
                      if (isset($_GET['ssl_approval_code']) && isset($_SESSION['codconf'])) {
                        //esta línea no se debe descomentar $_SESSION['booking']['codconf'] = $_SESSION['booking']['codconf'] . "_" . $_GET['ssl_approval_code'];
                        $approval = $_GET['ssl_approval_code'];
                    } else {
                        return Doo::conf()->APP_URL . "1-day-tour";
                    }
                }
            }

        if (isset($_SESSION['toursbooking']) AND isset($_SESSION['user']) OR isset($_SESSION['toursbooking']) AND isset($_SESSION['toursinvi'])) {
            $op = $this->types_payments();

            //if (isset($_REQUEST['opcion_pago'])) {
            if (false) {
                $pago = $_REQUEST['opcion_pago'];
            } else {
                //$pago = 1;


                if (false) {
//                echo json_encode($_SESSION);
//                exit;
                    Doo::loadController('admin/ToursController');
                    $toursControl = new ToursController();
                    // $_SESSION['codconf'] = $toursControl->codigoConftour(1);

                    if (isset($_SESSION ['user'])) {
                    //     $user = $_SESSION ['user'];
                    //     $tourstick = array(
                    //         "firstname" => $user->firstname,
                    //         "lastname" => $user->firstname,
                    //         "email" => $user->username,
                    //         "cellphone" => $user->celphone,
                    //         "phone" => $user->phone
                    //     );
                    //     $_SESSION ["tourstick"] = $tourstick;

                        $this->data['rootUrl'] = Doo::conf()->APP_URL;
                        $this->view()->renderc('tours/pago', $this->data);
                    } else {
                        $this->logUser();
                    }
                } else {

                    //   echo '<pre>';
                    //  print_r($_SESSION['toursbooking']);
                    //  echo '</pre>';
                    //  die;
                    if($_SESSION['grupos']['id'] == 4 OR $_SESSION['grupos']['id'] == 5 OR $_SESSION['grupos']['id'] == 6){
                        $idgrupo = 1;
                    }elseif($_SESSION['grupos']['id'] == 7 OR $_SESSION['grupos']['id'] == 12){
                        $idgrupo = 2;
                    }elseif($_SESSION['grupos']['id'] == 11 ){
                        $idgrupo = 3;
                    }else{
                        $idgrupo = 4;
                    }
                    

                    /////////////////////////////////////////////////
                    // AQUI VA EL INSERT DE LA TABLA CLIENTES SI ESTA COMO INVITADO
                    if(isset($_SESSION['toursinvi'])){
                        Doo::loadModel("Signup");
                        $login = new Signup($_REQUEST);

                        $country = $_REQUEST['ssl_country'];
                        $state = $_REQUEST['ssl_state'];
                        $login->fecha_r = date("m-d-Y  H:i:s");
                        $login->firstname = $_SESSION['toursinvi']->adult[1]['firstname'];
                        $login->lastname = $_SESSION['toursinvi']->adult[1]['lastname'];
                        $login->username = $_SESSION['toursinvi']->adult[1]['username'];
                        $login->zip = $_REQUEST['ssl_avs_zip'];
                        $login->state = $state;
                        $login->country = $country;
                        $login->city =  $_REQUEST['ssl_city'];
                        $login->phone = $_REQUEST['ssl_phone'];
                        $login->address = $_REQUEST['ssl_avs_address'];
                       // $login->birthday = '0000-00-00';
                        if ($login->birthday != "") { $login->tipo_client = 1; } else { $login->tipo_client = 0; }
                        if ($_POST['id'] == "") {
                            $login->id = Null;
                            $new = true;
                        }
                        if ($login->birthday != "") {
                            $login->tipo_client = 1;
                        } else {
                            $login->tipo_client = 0;
                        }
                        Doo::db()->insert($login);
                        $login->id = Doo::db()->lastInsertId();
                         $_SESSION['user'] = $login;
                    }
                    /////////////////////////////////////////////////
                        // echo '<pre>';
                        // print_r($_SESSION['user']);
                        // echo '</pre>';
                        // die;
                    $question = $_SESSION['toursbooking']['question'];
                    $valordepark = $_SESSION['toursbooking']['divporpax'];
                    $dateTT = date("Y-m-d");
                    $horTT = date("H:i");
                if(isset($_SESSION['toursinvi'])){
                    $firsname = $_SESSION['toursinvi']->adult[1]['firstname'];
                    $lasname =  $_SESSION['toursinvi']->adult[1]['lastname'];
                    $email =  $_SESSION['toursinvi']->adult[1]['username'];
                }else{
                    $firsname = $_SESSION['user']->adult[1]['firstname'];
                    $lasname =  $_SESSION['user']->adult[1]['lastname'];
                    $email =  $_SESSION['user']->adult[1]['username'];
                }
                if(isset($_SESSION['toursinvi'])){
                        /////////////////////////////////////////////////////////////
                        for ($i=1; $i <= COUNT($_SESSION['toursinvi']->adult); $i++) {
                            if($i == 1){
                                $opcuser1 .= (true) ? "\nPassenger Name: ".$_SESSION['toursinvi']->adult[$i]['firstname']." ".$_SESSION['toursinvi']->adult[$i]['lastname']." ~ ".$_SESSION['toursinvi']->adult[$i]['username'].";"  : null;
                            }else{
                                $opcuser1 .= (true) ? "\nPassenger Name: ".$_SESSION['toursinvi']->adult[$i]['firstname']." ".$_SESSION['toursinvi']->adult[$i]['lastname'].";"  : null;
                            }
                        }
        
                        if($_SESSION['toursbooking']['childs'] > 0){
                            for ($i=1; $i <= COUNT($_SESSION['toursinvi']->child); $i++) {
                                    $opcuser2 .= (true) ? "\nPassenger Name: ".$_SESSION['toursinvi']->child[$i]['firstname']." ".$_SESSION['toursinvi']->child[$i]['lastname']." (age ".$_SESSION['toursinvi']->child[$i]['ages'].");"  : null;
                                
                            }
                        }else{
                            $opcuser2 = '';
                        }

                        /////////////////////////////////////////////////////
                }else{
                    for ($i=1; $i <= COUNT($_SESSION['user']->adult); $i++) {
                        if($i == 1){
                            $opcuser1 .= (true) ? "\nPassenger Name: ".$_SESSION['user']->adult[$i]['firstname']." ".$_SESSION['user']->adult[$i]['lastname']." ~ ".$_SESSION['user']->adult[$i]['username'].";"  : null;
                        }else{
                            $opcuser1 .= (true) ? "\nPassenger Name: ".$_SESSION['user']->adult[$i]['firstname']." ".$_SESSION['user']->adult[$i]['lastname'].";"  : null;
                        }
                    }
    
                    if($_SESSION['toursbooking']['childs'] > 0){
                        for ($i=1; $i <= COUNT($_SESSION['user']->child); $i++) {
                                $opcuser2 .= (true) ? "\nPassenger Name: ".$_SESSION['user']->child[$i]['firstname']." ".$_SESSION['user']->child[$i]['lastname']."(age ".$_SESSION['user']->child[$i]['ages'].");"  : null;
                        }
                    }else{
                        $opcuser2 = '';
                    }
                }

                $comments2T="NOTE\n*****************************\nCARDHOLDER's: ".$_REQUEST['ssl_first_name']." ".$_REQUEST['ssl_last_name'].";\nEMAIL: ".$_REQUEST['ssl_email'].";\nPHONE: ".$_REQUEST['ssl_phone'].";\n\nTipo Ticket: ROUNDTRIP\nDATE: ".$dateTT." ".$horTT.".\nDESCRIPTION: PAID ONLINE.\n\nTRAN AMOUNT: $".$_SESSION['toursbooking']['totalouta']."USD."."\nAPPROVAL CD: ".$approval.".\nTRAN ID: ".$_GET['ssl_card_number']."\nMESSAGE: APPROVAL.\nRESERVATION#: ".$_SESSION['codconf']."\n\nPASSENGER INFORMATION...\nADULT(s) :".$opcuser1."\n\nCHILD(s) :".$opcuser2."\n\n\n***************************** ";
                    //  echo '<pre>';
                    //  print_r($comments2T);
                    //  echo '</pre>';
                    //  die;

                    $tarifaadult = $_SESSION['toursbooking']['transpor_adult'] / $_SESSION['toursbooking']['adults'];
                     if ($_SESSION['toursbooking']['childs'] > 0) {
                         $tarifachild = $_SESSION['toursbooking']['transpor_Child'] / $_SESSION['toursbooking']['childs'];
                     }


                    /////////////////////////////////////////////////
                    // AQUI VA EL INSERT DE LA TABLA Attraction_Trafic
                    Doo::loadModel('Attraction_Trafic');
                        $parkatr = new Attraction_Trafic();

                        $parkatr->id_tours = 0;
                        $parkatr->type_tour = 'ONE';
                        $parkatr->id_park = $_SESSION['grupos']['idParque'];
                        $parkatr->group = $_SESSION['grupos']['id'];
                        $parkatr->creation_date = date('Y-m-d');
                        $parkatr->starting_date =  $_SESSION['toursbooking']['fecha_salida'];
                        $parkatr->ending_date = $_SESSION['toursbooking']['fecha_llegada'];
                        $parkatr->admission = ($question == 0)? 0 : 1 ;
                        $parkatr->trafic = 1;
                        $parkatr->id_cliente = $_SESSION['user']->id;
                        $parkatr->type_client = $tipo_client ;
                        $parkatr->id_agencia = 53;
                        $parkatr->adult = $_SESSION['toursbooking']['adults'];;
                        $parkatr->child = $_SESSION['toursbooking']['childs'];
                        $parkatr->total_person = $_SESSION['toursbooking']['totalpax'];
                        $parkatr->admission_child = $_SESSION['toursbooking']['parkChilds'];
                        $parkatr->admission_adtul = $_SESSION['toursbooking']['parkAdult'];
                        $parkatr->totalAdmission = $valordepark;
                        $parkatr->precio_varios = 0;
                        $parkatr->cantidad = 0;
                        $parkatr->v_p_child = 0;
                        $parkatr->v_p_adult = 0;
                        $parkatr->transpor_adult = 0;
                        $parkatr->transpor_child = 0;
                        $parkatr->totalTraspor = 0;
                        $parkatr->total_paid =$parkatr->totalAdmission; // AQUI VA EL VALOR DEL PARQUE TOTAL
                        $parkatr->id = $parkatr->insert();
                     /////////////////////////////////////////////////
                     // echo '<pre>';
                     // print_r($parkatr);
                     // echo '</pre>';
                     // die;
                    /////////////////////////////////////////////////
                    // AQUI VA EL INSERT DE LA TABLA TOURS_ONEDAY
                    Doo::loadModel('Tour_oneday');
                        $touroneday = new Tour_oneday();

                        $touroneday->id_client = $parkatr->id_cliente;
                        $touroneday->type_client = $parkatr->type_client;
                        $touroneday->id_agency = $parkatr->id_agencia;
                        $touroneday->code_conf = $_SESSION['codconf'];
                        $touroneday->agency_employee = 421;
                        $touroneday->creation_date = date('Y-m-d H:i:s');
                        $touroneday->starting_date =  $_SESSION['toursbooking']['fecha_salida'];
                        $touroneday->ending_date =  $_SESSION['toursbooking']['fecha_llegada'];
                        $touroneday->length_day =  1;
                        $touroneday->length_nights =  0;
                        $touroneday->adult =  $parkatr->adult;
                        $touroneday->child =   $parkatr->child;
                        $touroneday->id_reserva =  0;
                        $touroneday->id_transfer_in =  -1;
                        $touroneday->id_transfer_out =  -1;
                        $touroneday->comments =  'PAID ONLINE';
                        $touroneday->comments2 =  $comments2T;
                        $touroneday->t_price_adult = $_SESSION['toursbooking']['precionetoadult'];
                        $touroneday->t_price_child = $_SESSION['toursbooking']['precionetochild'];
                        $touroneday->t_parque_adult = 0;
                        $touroneday->t_parque_child = 0;
                        $touroneday->group_park = $idgrupo;

                        $touroneday->entradas_price_adult = $_SESSION['toursbooking']['parque_adm_adults'];
                        $touroneday->entradas_price_child = $_SESSION['toursbooking']['parque_adm_childs'];
                        $touroneday->price_especial = 0;
                        $touroneday->total_charge = $_SESSION['toursbooking']['tq']*0.04;
                        $touroneday->extra_charge = 0;
                        $touroneday->total = $_SESSION['toursbooking']['totalouta'];
                        $touroneday->totalouta = $touroneday->total ;
                        $touroneday->passenger_balance_due = 0 ;
                        $touroneday->agency_balance_due = 0 ;
                        $touroneday->tipo_pago = 'CREDIT CARD WITH FEE' ;
                        $touroneday->pago = 'PRED-PAID' ;
                        $touroneday->canal = 'WEBSALE' ;
                        $touroneday->total_paid = $touroneday->total ;
                        $touroneday->pred_paid_amount = $touroneday->total ;
                        $touroneday->estado = 'CONFIRMED' ;
                        $touroneday->include_park = ($question == 0)? 0 : 1 ; 
                        $touroneday->op_pago = 3 ;
                        $touroneday->op_pago_conductor = 3 ;
                        $touroneday->group_park = $idgrupo ;
                        $touroneday->id_bus = -1 ;
                        $touroneday->ip_op = 421 ;
                        $touroneday->id = $touroneday->insert();
                        $sql = "UPDATE attraction_trafic AS p SET p.id_tours=? WHERE p.id=?;";
                        $rs = Doo::db()->query($sql, array($touroneday->id, $parkatr->id ));
                    /////////////////////////////////////////////////
                    //  echo '<pre>';
                    //  print_r($touroneday);
                    //  echo '</pre>';
                    //  die;

                    /////////////////////////////////////////////////
                    //AQUI VA EL INSERT DE LA TABLA RESERVAS
                    Doo::loadModel('Reserve');
                        $reserve = new Reserve();
                        $reserve->type_tour = 'ONE';
                        $reserve->fecha_ini = date('Y-m-d');
                        $reserve->trip_no = $_SESSION['toursbooking']['trip1'];
                        $reserve->trip_no2 = $_SESSION['toursbooking']['trip2'];
                        $reserve->tipo_ticket = "roundtrip";
                        $reserve->fromt = $_SESSION['toursbooking']['area1'];
                        $reserve->tot = 1;
                        $reserve->fromt2 =  1;
                        $reserve->tot2 = $_SESSION['toursbooking']['area2'];
                        $reserve->firsname = $firsname;
                        $reserve->lasname = $lasname;
                        $reserve->email = $email;
                        $reserve->comments = 'Reserva de tours';
                        $reserve->deptime1 = date("H:i:0 ", strtotime($_SESSION['toursbooking']['datedeparturetrip1']));
                        $reserve->arrtime1 = date("H:i:0 ", strtotime($_SESSION['toursbooking']['datearrivingtrip1']));
                        $reserve->deptime2 = date("H:i:0 ", strtotime($_SESSION['toursbooking']['datedeparturetrip2']));
                        $reserve->arrtime2 = date("H:i:0 ", strtotime($_SESSION['toursbooking']['datearrivingtrip2']));
                        $reserve->pax = $_SESSION['toursbooking']['adults'];
                        $reserve->pax2 = $_SESSION['toursbooking']['childs'];
                        $reserve->pax3 = 0;
                        $reserve->pax_r = $_SESSION['toursbooking']['adults'];
                        $reserve->pax2_r = $_SESSION['toursbooking']['childs'];
                        $reserve->pax3_r = 0;
                        $reserve->precioA = $tarifaadult;
                        if ($_SESSION['toursbooking']['childs'] > 0) {
                        $reserve->precioN = $tarifachild;
                        }else{
                        $reserve->precioN = 0; 
                        }
                        $reserve->precio_trip1_a = $_SESSION['toursbooking']['precionetoadult'];
                        $reserve->precio_trip1_c = $_SESSION['toursbooking']['precionetochild'];
                        $reserve->precio_trip2_a = $reserve->precio_trip1_a;
                        $reserve->precio_trip2_c = $reserve->precio_trip1_c;
                        $reserve->precio_exten1_a = 0;
                        $reserve->precio_exten1_c = 0;
                        $reserve->precio_exten2_a = 0;
                        $reserve->precio_exten2_c = 0;
                        $reserve->precio_exten3_a = 0;
                        $reserve->precio_exten3_c = 0;
                        $reserve->precio_exten4_a = 0;
                        $reserve->precio_exten4_c = 0;
                        $reserve->pickup2 = $_SESSION['toursbooking']['pickup2'];
                        $reserve->ip_op = 421;
                        $reserve->pickup1 = $_SESSION['toursbooking']['pickup1'];
                        $reserve->dropoff1 = $_SESSION['toursbooking']['dropoff1'];
                        $reserve->dropoff2 = $_SESSION['toursbooking']['dropoff2'];
                        $reserve->fecha_salida = $_SESSION['toursbooking']['fecha_salida'];
                        $reserve->fecha_salida_ns = $_SESSION['toursbooking']['fecha_salida'];
                        $reserve->fecha_retorno = $_SESSION['toursbooking']['fecha_llegada'];
                        $reserve->fecha_retorno_ns = $_SESSION['toursbooking']['fecha_llegada'];
                        $reserve->id_clientes = $_SESSION['user']->id;
                        $reserve->tipo_pago = "PRED-PAID";
                        $reserve->pago = 'CREDIT CARD WITH FEE-FULL'; 
                        $reserve->op_pago = 3;
                        $reserve->op_pago_conductor = 3;
                        $reserve->agen = $parkatr->id_agencia;
                        $reserve->tipo_client = $parkatr->type_client;
                        $reserve->total2 = $_SESSION['toursbooking']['totalouta'];
                        $reserve->totaltotal = $_SESSION['toursbooking']['transpval']/2;
                        $reserve->hora = date('H:i:s');
                        $reserve->comments = 'Reserva de tours';
                        $reserve->resident = 0;
                        $reserve->agency = $parkatr->id_agencia;
                        $reserve->reward_id = 0;
                        $reserve->luggage1 = 0; //$a_luggage;
                        $reserve->luggage2 = 0; //$d_luggage;
                        $reserve->estado = "CONFIRMED";
                        $reserve->canal = "WEBSALE";
                        $reserve->id_tours = $touroneday->id;
                        $reserve->comments2 = $comments2T;
                        $reserve->codconf = $_SESSION['codconf'];
                        $_SESSION['toursbooking']['fecha_ini'] = $reserve->fecha_ini ;
                        $_SESSION['toursbooking']['hora'] = $reserve->hora;
                        $reserve->id = $reserve->insert();
                        $sql = "UPDATE tours_oneday AS t SET t.id_reserva=? WHERE t.id=?;";
                        $rs = Doo::db()->query($sql, array($reserve->id, $touroneday->id ));
                    /////////////////////////////////////////////////
                    // echo '<pre>';
                    // print_r($reserve);
                    // echo '</pre>';
                    // die;

                    /////////////////////////////////////////////////
                    // AQUI VA EL INSERT DE LA TABLA TOURS_AGENCY
                    Doo::loadModel('Tours_Agency');
                    $comision = $this->cal_equipament();
                        $ta = new Tours_Agency();
                        $ta->id_reserva = $reserve->id;
                        $ta->id_tours = $touroneday->id;
                        $ta->type_tour = "ONE";
                        $ta->id_agencia = $parkatr->id_agencia;
                        $ta->comision = $comision;
                        $ta->type_rate == 0;
                        $ta->agency_fee = $tours_reserv->agency_fee = $_SESSION['toursbooking']['comision_agency'];
                        $ta->tipo_pago = $reserve->tipo_pago;
                        $ta->pago =  $reserve->pago;
                        $ta->totalouta =  $touroneday->totalouta;
                        $ta->otheramount =  0;
                        $ta->total =  $touroneday->totalouta;
                         Doo::db()->insert($ta);
                    /////////////////////////////////////////////////
                   // echo '<pre>';
                   //  print_r($ta);
                   //  echo '</pre>';
                   //  die;
                    /////////////////////////////////////////////////
                    // AQUI VA EL INSERT DE LA TABLA Toursoneday_Rastro
                    Doo::loadModel('Toursoneday_Rastro');
                        $tor = new Toursoneday_RastroBase();
                        $from = $_SESSION['area'];
                        $to = 'ORLANDO';
                        $parque = $_SESSION['namepark'][1];
                        $descuentovalo = 0.00;
                        $descuentopors = 0;
                        $extra = 0.00;
                        $otheramo = 0.00;
                        $cost = $reserve->total2;
                        $detalle =  'Customer = '.$_SESSION['user']->lastname .' '.$_SESSION['user']->firstname.' ('.$_SESSION['user']->username.')&starting Date= '.$reserve->fecha_salida.'&ending Date = '.$reserve->fecha_retorno.'&From = '.strtoupper($from).'&To ='.$to.'&Park selected = '.$parque.'&$ Discount = '.number_format($descuentovalo,2).'&% Discount = '.$descuentopors .'&Extra = '.number_format($extra,2).'&Other Amount = '.number_format($otheramo,2).'&Net Cost = '.$cost.'&Paid  ='.$cost;
                        $tor->id_tours =  $touroneday->id;
                        $tor->tipo_cambio =  'CREATE';
                        $tor->detalles =  $detalle;
                        $tor->fecha =  $touroneday->creation_date;
                        $tor->usuario =  421;
                        $tor->tipo_usuario =  'WEB';
                         Doo::db()->insert($tor);
                /////////////////////////////////////////////////
                   // echo '<pre>';
                   //  print_r($tor);
                   //  echo '</pre>';
                   //  die;
                /////////////////////////////////////////////////
                        // AQUI VA EL INSERT DE LA TABLA Traffic_report
                    Doo::loadModel('Traffic_report');
                        $traf_report = new Traffic_report();
                        $timeam = '08:00:00';
                        $timepm = '08:00:00';
                        $from1 = 'Supertours Terminal';
                        $to1 = 'Supertours Terminal';

                        $traf_report->id_tour = $touroneday->id;
                        $traf_report->type_tour = 'ONE';
                        $traf_report->time_am = $timeam;
                        $traf_report->from1 =  $from1;
                        $traf_report->to1 = $to1;
                        $traf_report->id_attraction_trafic = $parkatr->id;
                        $traf_report->date1 = $reserve->fecha_salida;
                        $traf_report->id_cliente = $parkatr->id_cliente;
                        $traf_report->time_pm = $timepm;
                        $traf_report->time_pm = $timepm;
                        $traf_report->id_bus_am = 0;
                        $traf_report->id_bus_pm = 0;
                        $traf_report->driver_am = 0;
                        $traf_report->type_ticket = 0;
                        $traf_report->driver_pm = 0;
                        $traf_report->type_traffic = 'PARK';
                        $traf_report->driver_am = 0;
                        $traf_report->hotel_name = 'ONE DAY TOUR';
                         Doo::db()->insert($traf_report);
                /////////////////////////////////////////////////
                   // echo '<pre>';
                   //  print_r($traf_report);
                   //  echo '</pre>';
                   //  die;
                /////////////////////////////////////////////////
                        // AQUI VA EL INSERT DE LA TABLA CollectService
                    Doo::loadModel('CollectService');
                        $collected = new CollectService();
                        $collected->id_servicio = $touroneday->id;
                        $collected->tipo_servicio = "ONE";
                        $collected->monto_pagado = 0;
                        $collected->id = $collected->insert();

                   // echo '<pre>';
                   //  print_r($collected);
                   //  echo '</pre>';
                   //  die;
                /////////////////////////////////////////////////
                // AQUI VA EL INSERT DE LA TABLA TOURS PAGOS
                    Doo::loadModel("Tours_Pago");
                        $pagor_t = new Tours_Pago();
                        $pagor_t->id_tours = $touroneday->id;
                        $pagor_t->pago = "CREDIT CARD WITH FEE";
                        $pagor_t->tipo_pago = "PRED-PAID";
                        $pagor_t->pagado = $_SESSION['toursbooking']['totalouta'];
                        $pagor_t->usuario = $_SESSION['user']->id;
                        $pagor_t->fecha = date('Y-m-d H:i:s');
                        $pagor_t->tipo = "ONE";
                        $pagor_t->insert();
                        
                        $_SESSION['cardholder'] = $_POST;
                        $pagor_t =  $this->loadingtour();
                        $update = "UPDATE reservas_trip_puestos SET estado = 'RESERVED' WHERE usuario = '" . $_SESSION['toursbooking']['iden'] . "' AND tarifa = 7";
                        Doo::db()->query($update);
                   // echo '<pre>';
                   //  print_r($_SESSION);
                   //  echo '</pre>';
                   //  die;
                        
                    $_SESSION['codo'] = $_SESSION['codconf'];           
                    if(isset($_SESSION['toursinvi'])){
                         unset($_SESSION['user']);
                    }
                    unset($_SESSION['codconf']);
                    unset($_SESSION['toursinvi']);         
                    return Doo::conf()->APP_URL . "tours/approved";
                    $_SESSION['codo'] = $_SESSION['codconf']; 


                }
            }
        } else {
            return Doo::conf()->APP_URL.'1-day-tour';
        }
    }

    public function loadingtour(){
        $grupos = $_SESSION['grupos'];
        $namepark = $_SESSION['namepark'][1];
        $login = $_SESSION['user'];
        $codconf = $_SESSION['codconf'];
        $toursbooking = $_SESSION['toursbooking'];
        $cardholder = $_SESSION['cardholder'];

        $timeBRegreso=15;
        $timeBSalida=15;

        $area1 = $toursbooking['area1'];
        $area2 = $toursbooking['area2'];

        $pickup1 = $toursbooking['pickup1'];
        $dropoff1 = $toursbooking['dropoff1'];
        $pickup2 = $toursbooking['pickup2'];
        $dropoff2 = $toursbooking['dropoff2'];
        if($toursbooking['area1'] != 1){
            $timeBRegreso=30;
        }else{
            $timeBRegreso=$timeBRegreso;
        }
        if($toursbooking['area2'] != 1){
            $timeBSalida=15;
        }else{
            $timeBSalida=$timeBSalida;
        }
        $orlandoparadaysalida = 'Super Tours Terminal';
        // echo '<pre>';
        // print_r($toursbooking);
        // echo '</pre>';
        // die;
        // try {
    //     $sql = "SELECT * FROM pickup_dropoff pd JOIN areas ar ON ar.id = pd.id_area WHERE ar.id = $area1 AND pd.id = $pickup1 ";
    //    $rs = Doo::db()->query($sql);
    //    $area1 = $rs->fetch();
        $place1 = $_SESSION['pickup']."";
        $areaselected = $_SESSION['toursbooking']['area1'] ;
        $areaselected2 = $_SESSION['toursbooking']['area2'] ;
        $sql = "SELECT * FROM areas WHERE id = $areaselected ";
       $rs = Doo::db()->query($sql);
       $areas = $rs->fetch();

       $sql2 = "SELECT * FROM areas WHERE id = $areaselected2";
       $rs2 = Doo::db()->query($sql2);
       $areas2 = $rs2->fetch();

    //    echo '<pre>';
    //    print_r($sql2);
    //    echo '</pre>';
         $place2 = $_SESSION['pickup2']."";


         Doo::loadController('DatosMailController');
         $datosMail = new DatosMailController();
         $mail = new PHPMailer(true);
         
         $mail2 = $datosMail->datos();

         $mail->Host = $mail2->Host;
         $mail->From = $mail2->From;
         $mail->FromName = "Supertours Of Orlando";
         // echo '<pre>';
         // print_r( $infiform['passingMail']);
         // echo '</pre>'; die; 
         


         $mail->Subject = $mail2->Subject. ' ' . utf8_decode($login->firstname) . ' ' . utf8_decode($login->lastname) ;
         $mail->AddAddress($login->username, $login->lastname); //MANDA UN CORREO AL DUENIO DE LA CUENTA
         //$mail->AddAddress($emailsen, $lastnamesen); //MANDA UN CORREO AL PASAJERO RESPONSABLE
         //$mail->AddAddress($user4->username, $user4->lastname); //MANDA UN CORREO AL DUENIO DE LA TARJETA
         $mail->AddCC("prodownloadall@gmail.com");    //En este espacio debe ir un correo de respaldo.
         $mail->AddCC("arturo@supertours.com");    //En este espacio debe ir un correo de respaldo.
         $mail->AddBCC("websales@supertours.com");  //En este espacio debe ir websales@supertours.com

            if($toursbooking['childs'] > 0){
                $farechild = number_format($toursbooking['precionetoadult'],2);
            }else{
                $farechild = number_format(0,2);
            }

            // echo '<pre>';
            // print_r($login->username);
            // echo '</pre>';
            // die;
            if($toursbooking['parkval'] > 0){
                $parque = "
                <tr id='titlelp' >
                  <td  id='titlell' colspan='3' style='border-right: 1px solid #e6e6e6;border-bottom: 1px solid #2160a0;'>Total Park Amount</td>
                  <td id='titlelp' style='color: #2160a0; border-bottom: 1px solid #2160a0;' align='right'><span style='font-weight: bold;'>$" . number_format($toursbooking['parkval'], 2, '.', '') . "</span></td>
                </tr>";
            }else{
                $parque = "
                <tr id='titlelp' >
                  <td  id='titlell' colspan='3' style='border-right: 1px solid #e6e6e6;border-bottom: 1px solid #2160a0;'>Total Park Amount  </td>
                  <td id='titlelp' style='color: #2160a0; border-bottom: 1px solid #2160a0;' align='right'><span style='font-weight: bold;'>(Admission No Included)</span></td>
                </tr>";
            }

            $opcuser1 = (true) ? "Lead Traveler: <span style='font-weight: bold;'>".utf8_decode($login->firstname)." ".utf8_decode($login->lastname)."</span><br></span>EMAIL: <span style='font-weight: bold;'>".$cardholder['ssl_email']  : null;
            
            $codigoHTML = " 
            <!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
            <html xmlns='http://www.w3.org/1999/xhtml'>       
                <head>
                    <meta http-equiv='Content-Type' content='text/html;' charset='utf-8' />
              <!-- view port meta tag Támara-->
              <meta name='viewport' content='width=device-width, initial-scale=1'>
              <meta http-equiv='X-UA-Compatible' content='IE=edge' />
              <title>Mail One Day Tours</title>
                <style type='text/css'>
                    * { -webkit-text-size-adjust:none; -ms-text-size-adjust:none; max-height:1000000px;}
                    table {border-collapse: collapse !important;}
                    #outlook a {padding:0;}
                    .ReadMsgBody { width: 100%; }
                    .ExternalClass { width: 100%; }
                    .ExternalClass * { line-height: 100%; }
                    .ios_geo a { color:#1c1c1c !important; text-decoration:none !important; }
                    
                    #clearTable {
                            /*width: 800px;*/
                            font-size: 13px;
                            font-family: Verdana, Geneva, sans-serif;
                    }
                    #clearTable tr #titletd3 {
                            font-family: Verdana, Geneva, sans-serif;
                    }
                    #clearTable tr #titletd2 {
                            font-size: 20px;
                    }
                    #clearTable tr td.p {
                            text-align: center;
                    }
                    #clearTable td{
                        padding: 1px 5px;
                       
                    }
                    #content #center-column #tdgris {
                            background-color: #F0F0F0;
                    }
                    #content #center-column #tdrojo {
                            background-color: #FFE6E6;
                    }
                    #content #center-column1 #titletd {
                            background-color: #F5EDEB;
                            padding-left: 5px;
                            font-size: 12px;
                    }
                     #titlett {
                            background-color: #e6e6e6;
                            color: #1f2b56;
                            padding-left: 5px;
                            font-size: 12px;
                    }
                     #titlell {
                            padding-left: 5px;
                            font-size: 12px;
                            border-bottom-width: 1px;
                            border-left-width: 1px;
                            border-bottom-style: solid;
                            border-left-style: solid;
                            border-bottom-color: #E6E6E6;
                            border-left-color: #E6E6E6;
                    }
                    #titlelp {
                            font-size: 11px;
                            border-bottom-width: 1px;
                            border-bottom-style: solid;
                            border-bottom-color: #E6E6E6;
                            border-right: 1px;
                            border-right-style: solid;
                            border-right-color: #e6e6e6;
                    }
                     #titlelr {
                            padding-left: 5px;
                            font-size: 12px;
                            border-top: 1px solid #2160a0;
                            color: #CE0000;
                    }
                     #tdgristable {
                            background-color: #FFF;
                            padding-left: 5px;
                    }
                    </style>
                </head>
                <body>
                    <table id='clearTable' style='-webkit-print-color-adjust: exact; /*economy | exact*/color-adjust: exact;width: 100%;' align='center'>
                        <tr>
                                    <td colspan='4' align='center'>
                                        <table width='99%' style='border: 1px solid #e6e6e6;' id='tableorder'>
                                          <tr style='background-color: #ececec;'>
                                            <td rowspan='' id='titletd3'>
                                             <a href='http://www.supertours.com' target='_blank'>
                                             <img src='http://www.supertours.com/logo.png' width='164' height='62' />
                                             </a>
                                             </td>
                                            <td rowspan='' style='color: #000;font-size: 12px;' colspan='5' align='right' id='titletd3'>
                                            <br>
                                                <table width='100%' align='right'>
                                                    <tr>
                                                        <td align='right'>
                                                            <span style='font-weight: bold;'>DATE/TIME OF BOOKING</span>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td align='right'>
                                                            <span style='font-weight: bold;color: #dc3545;'>" . date('m-d-Y', strtotime($toursbooking['fecha_ini'])) . " / " . $toursbooking['hora'] . "</span>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                          </tr>
                                          <tr style='background-color: #ececec;'>
                                            <td width='25%' colspan='3' style='border: 1px solid #e6e6e6; color: #2f2f2f;font-weight: bold;' align='center' height='39' colspan='' id='titletd2'>
                                                <table align='right' width='100%'>
                                                    <tr>
                                                        <td width='56%' style='color:#ececec;'>
                                                        .
                                                        </td>
                                                        <td width='44%' style='font-size:30px;' height='39'>
                                                            E-TICKET
                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                            <td width='10%' align='right' colspan='3'>
                                                <table align='right' width='100%'>
                                                    <tr style='background-color:white;'>
                                                     <td align='center'> Ticket Code: </td>
                                                    </tr>
                                                    <tr>
                                                      <td align='center' width='22%' style='color: white;font-size: 14px; border: 1px solid #d8d3d3; background-color: black;font-weight: bold;'>".$_SESSION['codconf']."</td>
                                                    </tr>
                                                    <tr id='titletd7' style='background-color:#ececec;font-size: 10px; '>
                                                        <td align='center'>&nbsp;</td>
                                                    </tr>
                                                </table>
                                            </td>
                                          </tr>
                                        </table>
                                        <br>
                                    </td>
                               </tr>
                        <tr>
                          <td colspan='4' align='center'>
                            <table width='99%'>
                              <tr>
                                  <td height='15' id='titletd6'>
                                  " .$opcuser1. "" .$opcuser2. "" .$opcuser3. "" .$opcuser4. "" .$opcuser5. "" .$opcuser6. "" .$opcuser7. "" .$opcuser8. "
                                  </td>
                                  <!--<td colspan='' id='titletd6'>
                                    AD: <span style='font-weight: bold;'>".($toursbooking['adults'])."</span> CHD: <span style='font-weight: bold;'>".($toursbooking['childs'])."</span> TOTAL: <span style='font-weight: bold;'>".($toursbooking['totalpax'])."</span>
                                  </td>-->

                                  <td colspan='' id='titletd6'>
                                  Park Name: <span style='font-weight: bold;'>".$namepark."</span>
                                  </td>
                              </tr>
                              <tr>
                                <td id='' align='left'>Country: <span style='font-weight: bold;'>" . ucwords(strtolower($login->country)) . "</span></td>
                                <td colspan='' id='' align='left'>City: <span style='font-weight: bold;'>" . ucwords(strtolower($login->city)) . "</span></td>
                                
                              </tr>
                              <tr>
                                <td id='' align='left'>Address: <span style='font-weight: bold;'>" . ucwords(strtolower($login->address)) . "</span></td>
                                <td  id='' align='left'>Phone: <span style='font-weight: bold;'>" . $login->phone . "</span></td>
                              </tr>
                              <tr>
                                <td id='' align='left'>State: <span style='font-weight: bold;'>" . ucwords(strtolower($login->state)) . "</span></td>
                                <td id='' align='left'>Zip / Postal Code: <span style='font-weight: bold;'>" . $login->zip . "</span></td>
                              </tr>
                            </table>
                            <br>
                          </td>
                        </tr>
                        <tr>
                          <td colspan='4' align='center'>
                            <table  width='99%' style='border: 1px solid #e6e6e6;background-color: #fdfdfd;' height='125' id='tableorder'>
                              <tr>
                                <td height='25' id='titlett' class='p' colspan='3' style='font-size: 14px; font-weight: bold;'> <span style='font-weight: bold;'>ONE DAY TOURS</span></td>
                              </tr>
                              <tr>
                                <td  id='titlelp' width='45%'>
                                  Trip: <strong>" . $toursbooking['trip1'] . " - </strong> AD: <strong>". $toursbooking['adults'] ."</strong> ~ CHD: <strong>". $toursbooking['childs'] ."</strong>
                                </td>
                                <td id='titlelp' width='55%' colspan='2'>
                                  Departure Date: <strong>" . date('M-d-Y', strtotime($toursbooking['fecha_salida']))  . "</strong>
                                </td>
                              </tr>
                              <tr>
                                <td id='titlelp'>
                                  From: <strong>" . $areas['nombre'] . "</strong>
                                </td>
                                <td colspan='2' id='titlelp'>
                                  Departure Location: <strong>" . $place1 . "
                                    </strong>
                                    <br>
                                    Departure Time: <strong>" . date('h:i A', strtotime($toursbooking['datedeparturetrip1']))  . "</strong>
                                   <!-- <br>
                                    Park name: <strong>". $namepark."</strong>-->
                                </td>
                              </tr>
                              <tr>
                                <td id='titlelp'>To: <strong>Orlando</strong></td>
                                <td colspan='2' id='titlelp'>
                                <!--Arrival Time: <strong>" . date('H:i A', strtotime($toursbooking['datearrivingtrip1']))  . "</strong>
                                        <br>-->
                                    Drop Off: <strong>" . $orlandoparadaysalida . "</strong>
                                </td>
                              </tr>
                              
                               <tr >
                               <td colspan='3' id='titlelp' style='color: #dc3545; font-weight: bold;font-size: 11px;' align='center' height='35' id='titlett2'  >
                                  Please print and present this e-ticket to for boarding.
                                  <br/>
                                  Passenger needs to arrive at least " . $timeBSalida ." minutes prior to departure.</td>
                              </tr>

                              <tr>
                                <td colspan='3' id='titlelp' height='1' style='background-color: #e6e6e6;'></td>
                              </tr>
                              <tr>
                                <td id='titlelp'>Trip: <strong>" . $toursbooking['trip2']. " - </strong> AD: <strong>". $toursbooking['adults'] ."</strong> ~ CHD: <strong>".$toursbooking['childs'] ."</strong></td>
                                <td id='titlelp' colspan='2'>
                                  Return Date: <strong>" . date('M-d-Y', strtotime($toursbooking['fecha_llegada'])) . "</strong>
                                </td>
                              </tr>
                              <tr>
                                <td id='titlelp'>From: <strong>Orlando</strong></td>
                                <td id='titlelp' colspan='2'>
                                    Departure Location: <strong>" .$orlandoparadaysalida . "</strong>
                                    <!-- <br>
                                    Departure Time: <strong>" . date('h:i A', strtotime($toursbooking['datedeparturetrip2'])) . "</strong>-->
                                    <!--<br>
                                    Park name: <strong>". $namepark."</strong>-->                                    
                                    <br>
                                    Arrival Time: <strong>" . date('h:i A', strtotime($toursbooking['datearrivingtrip2'])) . "</strong>



                                </td>
                              </tr>
                              <tr>
                                <td id='titlelp' height='27'>To: <strong>" .  $areas2['nombre'] . "</strong></td>
                                <td id='titlelp' colspan='2'>
                                    Drop Off: <strong>" . $place2 . "</strong>
                                </td>
                              </tr>

                             <!-- <tr>
                                <td colspan='3' id='titlelp' style='color: #dc3545; font-weight: bold;font-size: 11px;' align='center' height='35' id='titlett2'  >
                                  Please print and present this e-ticket to for boarding.
                                  <br/>
                                  Passenger needs to arrive at least " . $timeBRegreso ." minutes prior to departure.</td>
                              </tr>-->

                            </table>
                            <br/>
                          </td>
                        </tr>     
                        <tr>
                          <td colspan='4' align='center'>
                            <table width='99%' style='border: 1px solid #e6e6e6;background-color: #fdfdfd;' border='0' cellpadding='3' id='tableorder'>
                              <tr>
                                <td height='29' colspan='4' align='center'  id='titlett' style='font-size: 14px; font-weight: bold;'><strong>PURCHASE SUMMARY</strong></td>
                              </tr>
                              <tr>
                                <td id='titlelp'>&nbsp;</td>
                                <td id='titlelp' style='text-align: left; font-weight: bold;'>
                                  Passenger Traveling
                                </td>
                                <td id='titlelp' style='text-align: right; font-weight: bold;'>
                                  Fare
                                </td>
                                <td id='titlelp' style='text-align: right; font-weight: bold;'>
                                  Total
                                </td>
                              </tr>
                             <tr>
                                <td id='titlelp' width='55%'>One Day Tours Adults</td>
                                <td id='titlelp' style='color: #2160a0' align='center' width='7%'><span style='font-weight: bold;'>" .$toursbooking['adults'] . "</span></td>
                                <td id='titlelp' style='color: #2160a0' align='right' width='13%'><span style='font-weight: bold;'>" . number_format($toursbooking['precionetoadult'],2) . "</span></td>
                                <td id='titlelp' style='color: #2160a0' width='13%' align='right'><span style='font-weight: bold;'>" . number_format($toursbooking['transpor_adult'],2) . "</span></td>
                              </tr>
                              <tr>
                                <td id='titlelp'>One Day Tours Children (3-9 Years)</td>
                                <td id='titlelp' style='color: #2160a0' align='center'><span style='font-weight: bold;'>" . $toursbooking['childs'] . "</span></td>
                                <td id='titlelp' style='color: #2160a0' align='right'><span style='font-weight: bold;'>" . $farechild . "</span></td>
                                <td id='titlelp' style='color: #2160a0' align='right'><span style='font-weight: bold;'>" . number_format($toursbooking['transpor_Child'],2) . "</span></td>
                              </tr>
                              ".$parque."
                              <tr id='titlelp'>
                                <td id='titlell' colspan='3' style='border-right: 1px solid #e6e6e6;border-bottom: 1px solid #2160a0;'> Service Fee </td>
                                <td id='titlelp' style='color: #2160a0; border-bottom: 1px solid #2160a0;' align='right'><span style='font-weight: bold;'>"  . number_format($toursbooking['tq']*0.04, 2, '.', '') . "</span></td>
                              </tr>
                              <tr>
                                <td id='titlelr'>&nbsp;</td>
                                <td  id='titlelr' align='center' colspan='2'><span style='font-weight: bold;'>Total Amount Paid</span></td>
                                <td id='titlelr' align='right'><span style='font-weight: bold;'>$  " .number_format($toursbooking['totalouta'],2) . " </span></td>
                              </tr>
                            </table>
                            <br>
                          </td>
                        </tr>
                        <tr>
                            <td colspan='4' align='center'>
                                <table width='99%' style='border: 1px solid #e6e6e6;background-color: #fdfdfd;' border='0' cellpadding='3' id='tableorder'>
                                          <tr>
                                            <td width='20%' id='titlett'>
                                            &nbsp;
                                            </td>
                                            <td width='60%' height='29' colspan='4' align='center'  id='titlett' style='font-size: 14px; font-weight: bold;padding-top: 10px;padding-bottom: 10px;'>
                                                <span style='font-size: 9px;color: black; font-weight: bold;'>Non-Refundable - Non-Transferable - No Schedule Changes Permitted <br>
                                                No pets allowed on board - luggage restrictions apply 1 Bag per person. <br>
                                                Please read additional terms <a href='http://www.supertours.com'>www.supertours.com</a><br>
                                                Have a SUPER trip!<br />
                                                <br/>
                                                SUPER TOURS OF ORLANDO, Inc.<br>
                                                5419 International Drive, Orlando Fl, 32819<br>
                                                Phone: (407) 370-3001 / Toll Free 800-251-4206 / e-mail: reservations@supertours.com
                                              </span>
                                            </td>
                                            <td width='20%' id='titlett' align='center'>
                                                <img src='https://www.supertours.com/codigo.png' width='72' height='72' />
                                            </td>
                                          </tr>
                                </table>
                                <br>
                            </td>
                       </tr>
                    </table>
                </body>
            </html>";
            $codigoHTML = mb_convert_encoding($codigoHTML, 'HTML-ENTITIES', 'UTF-8');
            $pdf = new DooPDF(''.$_SESSION['codconf'].'', $codigoHTML, false, 'letter', 'letter');
            $pdf->doPDF();
        try{
            $mail->MsgHTML($codigoHTML);
            $mail->addAttachment('PDF-E-T/E-TICKET-'.$_SESSION['codconf'].'.pdf');
            //$mail->addAttachment('PDF-E-T/', 'E-TICKET-'.$booking['codconf'].'.pdf');
            $mail->Send();
        } catch (phpmailerException $e) {
            echo $e->errorMessage(); //Errores de PhpMailer
        } catch (Exception $e) {
            echo $e->getMessage(); //Errores de cualquier otra cosa.
        }
            

        // echo '<pre>';
        // print_r($_SESSION);
        // echo '</pre>';

        // echo '<pre>';        
        // print_r($codigoHTML);
        // echo '</pre>';
        // die;

    }

    public function guest(){
            $this->data['rootUrl'] = Doo::conf()->APP_URL;
            $this->renderc('tours/toursguest', $this->data);
            
    }
    public function guestmulti(){
        $this->data['rootUrl'] = Doo::conf()->APP_URL;
        $this->renderc('tours/toursguestmulti', $this->data);
        
}

public function shopuser_invmulti(){
    //   $_SESSION['toursinvi'] = $_POST;
    $toursbooking = $_SESSION['toursbooking'];
    // $toursinvi = new stdclass();
    // $toursinvichil = new stdclass();
        //unset($_SESSION ['user']);
        // $toursinvi->firstname = $_POST['firstname'];
        // $toursinvi->lastname = $_POST['lastname'];
        // $toursinvi->username = $_POST['username'];
        // $toursinvi->username2 = $_POST['username'];
    //   $toursinvi = [
    //       "firstname"=>$_POST['firstname'],
    //       "lastname"=>$_POST['lastname'],
    //       "username"=>$_POST['username'],
    //       "username2"=>$_POST['username']
    //   ];
    for($i = 1;$i <= $toursbooking['adult'];$i++ ){
        $adulrt[$i]['firstname'] = $_POST['firstname'.$i];
        $adulrt[$i]['lastname'] = $_POST['lastname'.$i];
        if($i == 1){
        $adulrt[$i]['username'] = $_POST['username'];
        }
        $_SESSION['toursinvimulti']->adult = $adulrt;
    }

    if($toursbooking['childs'] >= 1){
        for($i = 1;$i <= $toursbooking['childs'];$i++ ){
            $invchil[$i]['firstname'] = $_POST['childName'.$i];
            $invchil[$i]['lastname'] = $_POST['childlast'.$i];
            $invchil[$i]['ages'] = $_POST['edad'.$i];
        }
        $_SESSION['toursinvimulti']->child = $invchil;
    }
    // echo "<pre>";
    // print_r($_POST);
    // print_r($_SESSION['toursinvimulti']);
    // echo "</pre>";
    // die;
      try {
        $contenido = "";
                Doo::loadController('DatosMailController');
                $datosMail = new DatosMailController();
                $mail = new PHPMailer(true);
    
                $mail2 = $datosMail->datos();
        $contenido .= '<pre> REQUEST: ' . print_r($_REQUEST, true) . '</pre>'.'<pre> ARRAY tourmultisinvi: '.print_r($_SESSION,true).'</pre>';
        $contenido .= "<span style='color:red;'>Cotizacion Transportation con usuario true </span>";
                $mail->Host = $mail2->Host;
                $mail->From = $mail2->From;
                $mail->FromName = "Supertours Of Orlando";
                $mail->Subject = "Arreglo del user (Invitado Tours multi)".$_POST['firstname1']." ".$_POST['lastname1'];
                $mail->AddAddress("prodownloadall@gmail.com");    //En este espacio debe ir un correo de respaldo.
                $mail->AddAddress("arturo@supertours.com");    //En este espacio debe ir un correo de respaldo.
    
       $mail->MsgHTML($contenido);
       $mail->Send();
       
            } catch (phpmailerException $e) {
                echo $e->errorMessage(); //Errores de PhpMailer
            } catch (Exception $e) {
                echo $e->getMessage(); //Errores de cualquier otra cosa.
            }
            unset($_SESSION ['user']);

        return Doo::conf()->APP_URL . "tours/confirmation";
            
    }

    public function shopuser_inv(){
    //   $_SESSION['toursinvi'] = $_POST;
         $toursbooking = $_SESSION['toursbooking'];
    $toursinvi = new stdclass();
        //unset($_SESSION ['user']);
        // $toursinvi->firstname = $_POST['firstname'];
        // $toursinvi->lastname = $_POST['lastname'];
        // $toursinvi->username = $_POST['username'];
        // $toursinvi->username2 = $_POST['username'];
    //   $toursinvi = [
    //       "firstname"=>$_POST['firstname'],
    //       "lastname"=>$_POST['lastname'],
    //       "username"=>$_POST['username'],
    //       "username2"=>$_POST['username']
    //   ];
                    for($i = 1;$i <= $toursbooking['adults'];$i++ ){
                        $adulrt[$i]['firstname'] = $_POST['firstname'.$i];
                        $adulrt[$i]['lastname'] = $_POST['lastname'.$i];
                        if($i == 1){
                        $adulrt[$i]['username'] = $_POST['username'];
                        }
                        $_SESSION['toursinvi']->adult = $adulrt;
                    }
                
                    if($toursbooking['childs'] >= 1){
                        for($i = 1;$i <= $toursbooking['childs'];$i++ ){
                            $invchil[$i]['firstname'] = $_POST['childName'.$i];
                            $invchil[$i]['lastname'] = $_POST['childlast'.$i];
                            $invchil[$i]['ages'] = $_POST['edad'.$i];
                        }
                        $_SESSION['toursinvi']->child = $invchil;
                    }
            // echo "<pre>";
            // // print_r($_POST);
            // print_r($_SESSION['toursinvi']);
            // echo "</pre>";
            // die;
      /*try {
        $contenido = "";
                Doo::loadController('DatosMailController');
                $datosMail = new DatosMailController();
                $mail = new PHPMailer(true);
    
                $mail2 = $datosMail->datos();
        $contenido .= '<pre> REQUEST: ' . print_r($_REQUEST, true) . '</pre>'.'<pre> ARRAY toursinvi: '.print_r($_SESSION['toursinvi'],true).'</pre>';
        $contenido .= "<span style='color:red;'>Cotizacion Transportation con usuario true </span>";
                $mail->Host = $mail2->Host;
                $mail->From = $mail2->From;
                $mail->FromName = "Supertours Of Orlando";
                $mail->Subject = "Arreglo del user (Invitado Tours one)".$_POST['firstname1']." ".$_POST['lastname1'];
                $mail->AddAddress("prodownloadall@gmail.com");    //En este espacio debe ir un correo de respaldo.
                $mail->AddAddress("arturo@supertours.com");    //En este espacio debe ir un correo de respaldo.
    
       $mail->MsgHTML($contenido);
       $mail->Send();
       
            } catch (phpmailerException $e) {
                echo $e->errorMessage(); //Errores de PhpMailer
            } catch (Exception $e) {
                echo $e->getMessage(); //Errores de cualquier otra cosa.
            }*/
            unset($_SESSION ['user']);
            // $_SESSION['toursinvi'] = $toursinvi;
        //  echo "<pre>";
        //  print_r($toursinvi);
        //  echo "</pre>";
        //  die;
        return Doo::conf()->APP_URL . "confirmation_onedaytour";
            
    }


    public function aprovado() {
        $this->data['rootUrl'] = Doo::conf()->APP_URL;
        if (isset($_SESSION['toursbooking']) /*AND $_SESSION['signup2']->guest == 1*/) {
            if(isset($_SESSION['toursinvi'])){
            session_destroy();
            }else{
                unset($_SESSION['toursbooking']);
                unset($_SESSION['booking']);
                unset($_SESSION['cardholder']);
                // unset($_SESSION['codconf']);
                unset($_SESSION['namepark']);
                unset($_SESSION['grupos']);
            }
        }
        $this->renderc('aproval_tour', $this->data, true);
    }

    public function cal_equipament() {
        Doo::loadModel("Agencomi");
        $age_comis = Doo::db()->find("Agencomi", array("where" => "service_code = '003' ", "limit" => 1));
        if (!empty($age_comis))
            return $age_comis->comision;
        else
            return 0;
    }

    public function validUsername() {
        $username = $this->params['username'];
        $sql = "SELECT * FROM clientes WHERE username = '$username'";
        $rs = Doo::db()->query($sql);
        $result = $rs->rowCount();
        //print_r($result);
        if ($result > 0) {
            echo '<b>this username is already in use</b>';
            echo '<script type="text/javascript">
                $("#username").val("");
                document.getElementById("username").style.border = "1px solid red";
                document.getElementById("username").style.background = "rgb(246, 138, 138)";
                </script>';
        } else {
            echo '<script type="text/javascript">
                document.getElementById("username").style.border = "1px solid #ced4da";
                document.getElementById("username").style.background = "#fff";
                </script>';
        }
    }

    public function save() {
        Doo::loadModel("Signup");

        $signup = new Signup($_POST);
        $signup->password = trim($signup->password);
        $signup->fecha_r = date("m-d-Y  H:i:s");

        $sql = "SELECT username FROM clientes WHERE  username = ?";
        // Registered user
        $signup2 = new stdclass ();
        $signup2->username = $signup->username;
        $signup2->firstname = $signup->firstname;
        $signup2->lastname = $signup->lastname;

        // Billing address
        $signup2->address = $signup->address;
        $signup2->city = $signup->city;
        $signup2->zip = $signup->zip;
        $signup2->phone = $signup->phone;
        $signup2->celphone = $signup->celphone;

        $signup2->error = "";

        $_SESSION['signup2'] = $signup2;

        $rs = Doo::db()->query($sql, array(
            $signup->username
        ));
        $reci = $rs->fetch();

        /* if ($reci != NUll) {
          echo '<script>location.href="' . Doo::conf()->APP_URL . "tours/slope" . '"</script>';
          return Doo::conf()->APP_URL . "tours/slope";
          }else{ */

        $new = false;
        if ($signup->birthday != "") {

            $signup->tipo_client = 1;
        } else {
            $signup->tipo_client = 0;
        }
        if ($_POST ['id'] == "") {
            $signup->id = Null;
            $new = true;
        }

        $this->data['rootUrl'] = Doo::conf()->APP_URL;

        if ($new) {

            Doo::db()->insert($signup);

            if (isset($_POST ['username']) && isset($_POST ['firstname'])) {
                if ($signup->tipo_client == 1) {

                    try {
                        Doo::loadController('DatosMailController');
                        $datosMail = new DatosMailController();
                        $mail4 = new PHPMailer(true);
                        $mail4 = $datosMail->datos();

                        $nombre_destino = $signup->firstname; // Nombre de quien
                        // La direccion a donde mandamos el correo
                        $mail4->AddAddress($signup->username, $nombre_destino);
                        // Asunto del correo
                        $mail4->Subject = 'Signup / Supertours Of Orlando';
                        // Mensaje alternativo en caso que el destinatario
                        // no pueda abrir correos HTML
                        $mail4->AltBody = 'Signup / Supertours Of Orlando';

                        $mail4->MsgHTML("<div align='center'>
<br />
<table   id='clearTable'> 
     <tr>
       <td width='401' height='33' rowspan='2' id='titletd3'><img src='https://www.supertours.com/Logo-Supertours-mail.jpg' width='316' height='88' /></td>
       <td colspan='3' align='center' id='titletd3'>Supertours.com</td>
     </tr>
     <tr>
       <td height='35' colspan='3' id='titletd4'>&nbsp;</td>
    </tr>
     <tr>
       <td align='center' height='33' colspan='4' id='titletd2'>SUPER CLUB</td>
     </tr>
     <tr>
       
       
       <td colspan='2' align='center' id='titletd6'>Welcome, " . $_POST ['username'] . " you are a member of the SUPERCLUB <br />
         The incentive program for frequent passengers <br />
       of SUPER TOURS OF ORLANDO, Inc.</td>
    </tr>
   
     
  <tr>
    <td colspan='4' ><table id='tableorder3' width='90%'>
      <tr>
        <td  height='35' colspan='3' id='titlett3'  aling='center' >RECEIPT</td>
        </tr>
      <tr>
        <td width='34%' height='28'>MEMBER NAME:</td>
        <td colspan='2'>" . $_POST ['firstname'] . " " . $_POST ['lastname'] . "</td>
      </tr>
      <tr>
        <td height='31'>MEMBER SINCE:</td>
        <td colspan='2'>JUN. 12-2012 / 13:32</td>
      </tr>
      <tr>
        <td height='27'>USERNAME:</td>
        <td colspan='2'>" . $_POST ['username'] . "</td>
      </tr>
      <tr>
        <td height='27'>PASSWORD:</td>
        <td>" . $signup->password . "</td>
      </tr>
      <tr>
        <td height='27'>&nbsp;</td>
        <td colspan='2'>&nbsp;</td>
      </tr>
    </table>
    <p><br />
  </p></td>
  </tr>
  <tr>
    <td height='37' colspan='4' align='center' id='titletd' ><strong>REDWARS</strong></td>
  </tr>
  <tr>
    <td colspan='4'>&bull;  A FREE ticket, after 10 trips paid</td>
  </tr>
  <tr>
    <td colspan='4'>&bull;  A free ticket on your birthday week</td>
  </tr>
  <tr>
    <td colspan='4'>&bull;  Exclusive offers for members of SUPER CLUB </td>
  </tr>
  <tr>
    <td colspan='4'>&nbsp;</td>
  </tr>
  <tr>
    <td colspan='4'>&nbsp;</td>
  </tr>
  <tr>
    <td colspan='4' align='center'> <p align='center' class='titulopago'>THANK YOU FOR CHOOSING US <br />
      SUPER TOURS OF ORLANDO,Inc. 5419 International Drive, Orlando Fl. 32819 <br />
      Phone: (407) 370-3001 / U.S.A. TOLL FREE 1-800-251-4206 / arturo@supertours.com  
    
</p>       </td>
  </tr>
  </table>



</div>");
                        $mail4->Send();

//                            echo '<script>location.href='.Doo::conf()->APP_URL . "tours/pago".'</script>';
                        // echo "Mensaje enviado. Que chivo va vos!!";
                    } catch (phpmailerException $e) {
                        echo $e->errorMessage(); // Errores de PhpMailer
                    } catch (Exception $e) {
                        echo $e->getMessage(); // Errores de cualquier otra cosa.
                    }
                } else {
                    $nombre_destino = $signup->firstname;
                    $correo_destino = $signup->username;
                    $mail = new PHPMailer();
                    $mail->Mailer = 'smtp';
                    $mail->Host = 'smtpout.secureserver.net';
                    $mail->SMTPAuth = true;
                    $mail->IsHTML(true);
                    $mail->Username = 'prodownloadall@gmail.com';
                    $mail->Password = 'Henry123';
                    $mail->From = 'no_reply@supertours.com';
                    $mail->FromName = 'Supertours Of Orlando';
                    $mail->AddAddress($correo_destino, $nombre_destino);
                    //$mail->AddCC('arturo@supertours.com', 'Arturo Bustamante');
                    $mail->AddCC('prodownloadall@gmail.com', 'Henry Zambrano');
                    $mail->Subject = "Signup / Supertours Of Orlando";
                    $mail->Body = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

    <head>

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <title>Demystifying Email Design</title>

        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    </head>
    <body style="margin: 0; padding: 0;">

        <table border="0" cellpadding="0" cellspacing="0" width="100%">

            <tr>

                <td style="padding: 20px 0 30px 0;">

                    <table align="center" border="1" cellpadding="0" cellspacing="0" width="600" style="border-collapse: collapse;">

                        <tr>

                            <td >

                                <table align="center" border="0" cellpadding="0" cellspacing="0" width="600">

                                    <td align="center" bgcolor="#70bbd9" style="padding: 40px 0 30px 0;">

                                        <img src="https://www.supertours.com/travelz/icons8_Invite_100px_2.png" alt="Creating Email Magic"  style="display: block;" />

                                    </td>

                                    <tr>

                                        <td bgcolor="#ffffff" style="padding: 40px 30px 40px 30px;">

                                            <table border="0" cellpadding="0" cellspacing="0" width="100%">

                                                <tr>

                                                    <td style="color: #153643; font-family: Arial, sans-serif; font-size: 24px;">

                                                        <b>Welcome To Supertours Of Orlando!</b>

                                                    </td>

                                                </tr>

                                                <tr>

                                                    <td style="padding: 20px 0 30px 0;">

                                                        <table>
                                                            <tr>
                                                                <td style="color: #153643; font-family: Arial, sans-serif; font-size: 19px;">User Name:</td>
                                                                <td>' . $nombre_destino . ' ' . $signup->lastname . '</td>
                                                            </tr>
                                                            <tr>
                                                                <td style="color: #153643; font-family: Arial, sans-serif; font-size: 19px;">Username:</td>
                                                                <td>' . $signup->username . '</td>
                                                            </tr>
                                                            <tr>
                                                                <td style="color: #153643; font-family: Arial, sans-serif; font-size: 19px;">Password:</td>
                                                                <td>' . $signup->password . '</td>
                                                            </tr>
                                                        </table>

                                                    </td>

                                                </tr>

                                                <tr>

                                                    <td>

                                                        <table border="0" cellpadding="0" cellspacing="0" width="100%">

                                                            <tr>

                                                                <td width="260" valign="top">

                                                                    <table border="0" cellpadding="0" cellspacing="0" width="100%">

                                                                        <tr>

                                                                            <td>

                                                                                <img src="https://www.supertours.com/travelz/bussobre.png" alt="" width="100%" height="140" style="display: block;" />

                                                                            </td>

                                                                        </tr>

                                                                        <tr>

                                                                            <td style="padding: 25px 0 0 0;">
                                                                                the best way to travel between orlando to miami, 
                                                                                we offer three daily departures, in the morning, 
                                                                                afternoon and evening from our terminal at 5419 international drive.
                                                                            </td>

                                                                        </tr>

                                                                    </table>

                                                                </td>

                                                                <td style="font-size: 0; line-height: 0;" width="20">

                                                                    &nbsp;

                                                                </td>

                                                                <td width="260" valign="top">

                                                                    <table border="0" cellpadding="0" cellspacing="0" width="100%">

                                                                        <tr>

                                                                            <td>

                                                                                <img src="https://www.supertours.com/travelz/error.jpg" alt="" width="100%" height="140" style="display: block;" />

                                                                            </td>

                                                                        </tr>

                                                                        <tr>

                                                                            <td style="padding: 25px 0 0 0;">
                                                                                Do not stay without knowing all the theme parks that Orlando 
                                                                                can offer and enjoy a pleasant expression with your family 
                                                                                or friends, we wait for you.
                                                                            </td>

                                                                        </tr>

                                                                    </table>

                                                                </td>

                                                            </tr>

                                                        </table>

                                                    </td>

                                                </tr>

                                            </table>

                                        </td>

                                    </tr>

                                    <tr>

                                        <td bgcolor="#ee4c50" style="padding: 30px 30px 30px 30px;">

                                            <table border="0" cellpadding="0" cellspacing="0" width="100%">

                                                <tr>

                                                    <td width="75%" style="color: #ffffff; font-family: Arial, sans-serif; font-size: 14px;">

                                                        ©2012 Super Tours of Orlando Inc. Copyright © 1989 - ' . date('Y') . ' Supertours Of Orlando, INC . All Rights Reserved.

                                                    </td>

                                                    <td align="right">

                                                        <table border="0" cellpadding="0" cellspacing="0">

                                                            <tr>

                                                                <td>

                                                                    <a href="http://www.facebook.com/">

                                                                        <img src="https://www.supertours.com/travelz/icons8_Facebook_100px.png" alt="Twitter" width="38" height="38" style="display: block;" border="0" />

                                                                    </a>

                                                                </td>

                                                                <td style="font-size: 0; line-height: 0;" width="20">&nbsp;</td>

                                                                <td>

                                                                    <a href="http://www.twitter.com/">

                                                                        <img src="https://www.supertours.com/travelz/icons8_Twitter_100px.png" alt="Facebook" width="38" height="38" style="display: block;" border="0" />

                                                                    </a>

                                                                </td>

                                                            </tr>

                                                        </table>

                                                    </td>

                                                </tr>

                                            </table>

                                        </td>

                                    </tr>

                                </table>

                            </td>

                        </tr>

                    </table>

                </td>

            </tr>

        </table>

    </body>

</html>';

                    $exito = $mail->Send();
                    if (!$exito) {
                        //echo "Problemas enviando correo electrónico a " . $valor;
                        echo "<br/>" . $mail->ErrorInfo;
                    }
                }
                $login = new stdclass ();
                $login->username = $signup->username;
                $login->firstname = $signup->firstname;
                $login->lastname = $signup->lastname;
                $login->state = $signup->state;
                $login->address = $signup->address;
                $login->tipo_client = $signup->tipo_client;
                $login->zip = $signup->zip;
                $login->phone = $signup->phone;
                $login->celphone = $signup->celphone;
                $login->id = Doo::db()->lastInsertId();
                $_SESSION ['user'] = $login;

                $this->logUser();
                echo '<script>location.href="' . Doo::conf()->APP_URL . "tours/pago" . '"</script>';
                return Doo::conf()->APP_URL . "tours/pago";
            }
        } else {

            Doo::db()->update($signup);
            echo '<script>location.href="' . Doo::conf()->APP_URL . "tours/pago" . '"</script>';
        }
        //}
    }


	public function slopetours(){
		$this->data['rootUrl'] = Doo::conf()->APP_URL;
		$this->view()->renderc('slopemulti', $this->data);
	}

    public function savesignupmulti(){
        Doo::loadModel("Signup");
        $this->data['rootUrl'] = Doo::conf()->APP_URL;
        $signup = new Signup($_POST);
        $signup->password = trim($signup->password);
        $signup->fecha_r = date("m-d-Y  H:i:s");

        $sql = "SELECT username FROM clientes WHERE  username = ? AND `password` != '' ";
        //Registered user
        $signup2 = new stdclass();
        $signup2->username = $signup->username;
        $signup2->firstname = $signup->firstname;
        $signup2->lastname = $signup->lastname;

        //Billing address
        $signup2->address = $signup->address;
        $signup2->city = $signup->city;
        $signup2->zip = $signup->zip;
        $signup2->phone = $signup->phone;
        $signup2->celphone = $signup->celphone;


        $signup2->error = "";

        // $_SESSION['signup2'] = $signup2; 

        $rs = Doo::db()->query($sql, array($signup->username));
        $reci = $rs->fetch();

        if ($reci != NUll) {
            return Doo::conf()->APP_URL . "tours/signupmulti/slope";
        } else {
            unset($_SESSION['signup2']);
            unset($_SESSION['infoforms']);
            unset($_SESSION ['toursinvi']);
            unset($_SESSION ['toursinvimulti']);


            $new = false;
            if ($signup->birthday != "") {

                $signup->tipo_client = 1;
            } else {
                $signup->tipo_client = 0;
            }
            if ($_POST['id'] == "") {
                $signup->id = Null;
                $new = true;
            }

            $this->data['rootUrl'] = Doo::conf()->APP_URL;
            // echo '<pre>';
            // print_r($signup);
            // echo '</pre>';
            // die;
            if ($signup->tipo_client == 1) {



                try {
                    Doo::loadController('DatosMailController');
                    $datosMail = new DatosMailController();
                    $mail = new PHPMailer(true);
                    $mail = $datosMail->datos();
                    //La direccion a donde mandamos el correo
                    $nombre_destino = 'Supertours Of Orlando';
                    $mail->AddAddress($signup->username, $nombre_destino);
                    //De parte de quien es el correo
                    $mail->Subject = 'Signup / Supertours Of Orlando';
                    //Mensaje alternativo en caso que el destinatario no pueda abrir correos HTML
                    $mail->AltBody = 'Signup / Supertours Of Orlando';

                    $mail->MsgHTML("<div align='center'>
<br />
<table   id='clearTable'> 
<tr>
<td width='401' height='33' rowspan='2' id='titletd3'><img src='".$this->data['rootUrl']."global/estilos/logo.png' width='316' height='88' /></td>
<td colspan='3' align='center' id='titletd3'>Supertours.com</td>
</tr>
<tr>
<td height='35' colspan='3' id='titletd4'>&nbsp;</td>
</tr>
<tr>
<td align='center' height='33' colspan='4' id='titletd2'>SUPER CLUB</td>
</tr>
<tr>


<td colspan='2' align='center' id='titletd6'>Welcome, " . $_POST['username'] . " you are a member of the SUPERCLUB <br />
 The incentive program for frequent passengers <br />
of SUPER TOURS OF ORLANDO, Inc.</td>
</tr>


<tr>
<td colspan='4' ><table id='tableorder3' width='90%'>
<tr>
<td  height='35' colspan='3' id='titlett3'  aling='center' >RECEIPT</td>
</tr>
<tr>
<td width='34%' height='28'>MEMBER NAME:</td>
<td colspan='2'>" . $_POST['firstname'] . " " . $_POST['lastname'] . "</td>
</tr>
<tr>
<td height='31'>MEMBER SINCE:</td>
<td colspan='2'>JUN. 12-2012 / 13:32</td>
</tr>
<tr>
<td height='27'>USERNAME:</td>
<td colspan='2'>" . $_POST['username'] . "</td>
</tr>
<tr>
<td height='27'>PASSWORD:</td>
<td>" . $signup->password . "</td>
</tr>
<tr>
<td height='27'>&nbsp;</td>
<td colspan='2'>&nbsp;</td>
</tr>
</table>
<p><br />
</p></td>
</tr>
<tr>
<td height='37' colspan='4' align='center' id='titletd' ><strong>REDWARS</strong></td>
</tr>

</tr>
<tr>
<td colspan='4'> From this moment you are an official member of our company and you will receive the following benefits:
</td>
<tr>
<td colspan='4'>&bull;  A FREE ticket, after 10 trips paid</td>
</tr>
<tr>
<td colspan='4'>&bull;  A free ticket on your birthday week (you will get this benefit after having traveled for at least one year with us)</td>
</tr>
<tr>
<td colspan='4'>&bull;  Exclusive offers for members of SUPER CLUB </td>
</tr>
<tr>
<td colspan='4'>&nbsp;</td>
</tr>
<tr>
<td colspan='4'>&nbsp;</td>
</tr>
<tr>
<td colspan='4' align='center'> <p align='center' class='titulopago'>THANK YOU FOR CHOOSING US <br />
SUPER TOURS OF ORLANDO,Inc. 5419 International Drive, Orlando Fl. 32819 <br />
Phone: (407) 370-3001 / U.S.A. TOLL FREE 1-800-251-4206 / reservations@supertours.com  

</p>       </td>
</tr>
</table>



</div>");

                    $mail->Send();
                    // echo "Mensaje enviado. Que chivo va vos!!";
                } catch (phpmailerException $e) {
                    echo $e->errorMessage(); //Errores de PhpMailer
                } catch (Exception $e) {
                    echo $e->getMessage(); //Errores de cualquier otra cosa.
                }
            }else {
                try {
                    Doo::loadController('DatosMailController');
                    $datosMail = new DatosMailController();
                    $mai2 = new PHPMailer(true);
                    $mai2 = $datosMail->datos();
                    $nombre_destino = 'Admin';
                    //La direccion a donde mandamos el correo
                    $mai2->AddAddress($signup->username, $nombre_destino);
                    //Asunto del correo
                    $mai2->Subject = 'Signup / Supertours Of Orlando';
                    //Mensaje alternativo en caso que el destinatario no pueda abrir correos HTML
                    $mai2->AltBody = 'Signup / Supertours Of Orlando';


                    $mai2->MsgHTML("<div align='center'>
<br />
<table   id='clearTable'> 
<tr>
<td width='401' height='33' rowspan='2' id='titletd3'><img src='".$this->data['rootUrl']."global/estilos/logo.png' width='316' height='88' /></td>
<td colspan='3' align='center' id='titletd3'>Supertours.com</td>
</tr>
<tr>
<td height='35' colspan='3' id='titletd4'>&nbsp;</td>
</tr>
<tr>
<td align='center' height='33' colspan='4' id='titletd2'>&nbsp;</td>
</tr>
<tr>


<td colspan='2' align='center' id='titletd6'>Welcome, " . $_POST['username'] . "</td>
</tr>


<tr>
<td colspan='4' ><table id='tableorder3' width='90%'>
<tr>
<td  height='35' colspan='3' id='titlett3'  aling='center' >RECEIPT</td>
</tr>
<tr>
<td width='34%' height='28'>MEMBER NAME:</td>
<td colspan='2'>" . $_POST['firstname'] . " " . $_POST['lastname'] . "</td>
</tr>
<tr>
<td height='31'>MEMBER SINCE:</td>
<td colspan='2'>JUN. 12-2012 / 13:32</td>
</tr>
<tr>
<td height='27'>USERNAME:</td>
<td colspan='2'>" . $_POST['username'] . "</td>
</tr>
<tr>
<td height='27'>PASSWORD:</td>
<td>" . $signup->password . "</td>
</tr>
<tr>
<td height='27'>&nbsp;</td>
<td colspan='2'>&nbsp;</td>
</tr>
</table>
<p><br />
</p></td>
</tr>
<tr>
<td colspan='4'>&nbsp;</td>
</tr>
<tr>
<td colspan='4'>&nbsp;</td>
</tr>
<tr>
<td colspan='4' align='center'> <p align='center' class='titulopago'>THANK YOU FOR CHOOSING US <br />
SUPER TOURS OF ORLANDO,Inc. 5419 International Drive, Orlando Fl. 32819 <br />
Phone: (407) 370-3001 / U.S.A. TOLL FREE 1-800-251-4206 / reservations@supertours.com  

</p>       </td>
</tr>
</table>



</div>");
                    $mai2->Send();
                    // echo "Mensaje enviado. Que chivo va vos!!";
                } catch (phpmailerException $e) {
                    echo $e->errorMessage(); //Errores de PhpMailer
                } catch (Exception $e) {
                    echo $e->getMessage(); //Errores de cualquier otra cosa.
                }
            }


            if ($new == 1) {
				
                Doo::db()->insert($signup);
                if (isset($_POST['username']) && isset($_POST['firstname'])) {
                    $login = new stdclass();
                    $login->username = $signup->username;
                    $login->firstname = $signup->firstname;
                    $login->lastname = $signup->lastname;
//                    $login->state = $signup->state;
//                    $login->address = $signup->address;
                    $login->tipo_client = $signup->tipo_client;
                    $login->zip = $signup->zip;
                    $login->phone = $signup->phone;
                    $login->celphone = $signup->celphone;
                    $login->address = $signup->address;
                    $login->state = $signup->state;
                    $login->city = $signup->city;
                    $login->country = $signup->country;
                    $login->id = Doo::db()->lastInsertId();
                    $_SESSION['user'] = $login;
                    return Doo::conf()->APP_URL . "tours/confirmation";
                
                }
            }
        }

    }


    public function slope() {
        $this->data ['rootUrl'] = Doo::conf()->APP_URL;
        $this->view()->renderc('slope', $this->data);
    }

    public function tours_six() {
        if (isset($_POST['usuario']) && isset($_POST['password'])) {

            if (!empty($_POST['usuario']) && !empty($_POST['password'])) {

                $user = trim($_POST['usuario']);
                $pass = trim($_POST['password']);



                //$pass  = trim($_POST['password']);
                $u = $this->db()->find('Clientes', array('where' => 'username = ? and password = ?',
                    'limit' => 1,
                    'select' => 'id,username,firstname,lastname,state,address,zip,tipo_client,city,country,phone,celphone',
                    'param' => array($user, $pass)
                        )
                );

                $this->data['rootUrl'] = Doo::conf()->APP_URL;

                if ($u == Null) { // o $u == false
                    $this->data['error'] = "Acceso denegado";
                    //return Doo::conf()->APP_URL."admin";
                    $this->renderc('loginuser', $this->data);
                } else {

                    $login = new stdclass();
                    $login->username = $u->username;
                    $login->username2 = $u->username;
                    $login->firstname = $u->firstname;
                    $login->lastname = $u->lastname;
                    $login->state = $u->state;
                    $login->address = $u->address;
                    $login->zip = $u->zip;
                    $login->tipo_client = $u->tipo_client;
                    $login->city = $u->city;
                    $login->country = $u->country;
                    $login->phone = $u->phone;
                    $login->celphone = $u->celphone;
                    $login->id = $u->id;

                    $_SESSION['user'] = $login;
                    //$this->home();
                    $auth = $this->isAuth();

                    return Doo::conf()->APP_URL . "'tours/loginuser/'";
                }
            }
        } else {
            return Doo::conf()->APP_URL . "tours/userlog";
        }
    }

    public function filter3(){
        
        $stars = $_POST['starts'];
        $beackfast = $_POST['beackfast'];
        $namehotel = $_POST['namehotel'];
        $myRoot = $_SERVER["DOCUMENT_ROOT"];
        // $dominio = 'web/'; //WEB DE PRUEBA (LOCAL)
        // $dominio = '';  //WEB ORIGINAL
        // $dominio = 'web_eric/'; //WEB DE PRUEBA (EN LA NUBE)
        $dominio = substr($_SERVER['SCRIPT_NAME'], -50,-9);
        $urlzebra = $myRoot.''.$dominio.''.'protected/viewc/Zebra_Pagination-master/Zebra_Pagination.php';
        require_once $urlzebra ;

        $paginacion = new Zebra_Pagination();
        $this->data['resultado'] = 10;
        

        if( $_POST['starts'] != '' ||   $_POST['beackfast'] != '' ||  $_POST['namehotel'] != ''){
            

        if(isset($_POST['starts']) AND $_POST['starts'] != ''){
            $s = 'SELECT COUNT(*) as can FROM hoteles WHERE estado = 1 AND categoria = '.$stars.'  ORDER BY categoria desc';
            $ql2 = 'SELECT * FROM hoteles WHERE estado = 1 AND categoria = '.$stars.'   ORDER BY categoria DESC LIMIT '.(($paginacion->get_page() -1 ) * $this->data['resultado']).','.$this->data['resultado'].'';
            $search = 'RESULT... CATEGORIES';
        }elseif(isset($_POST['beackfast']) AND $_POST['beackfast'] != ''){
            $s = 'SELECT COUNT(*) as can FROM hoteles WHERE estado = 1 '.$beackfast.'   AND categoria <= 3  ORDER BY categoria desc';
            $ql2 = 'SELECT * FROM hoteles WHERE estado = 1 '.$beackfast.'  AND categoria <= 3   ORDER BY categoria DESC LIMIT '.(($paginacion->get_page() -1 ) * $this->data['resultado']).','.$this->data['resultado'].'';
            $search = 'RESULT... BREACKFAST';
        }elseif(isset($_POST['namehotel']) AND $_POST['namehotel'] != ''){
            $s = 'SELECT COUNT(*) as can FROM hoteles WHERE estado = 1 AND nombre like "%'.$namehotel.'%" AND categoria <= 3  ORDER BY categoria desc';
            $ql2 = 'SELECT * FROM hoteles WHERE estado = 1 AND nombre like "%'.$namehotel.'%" AND categoria <= 3   ORDER BY categoria DESC LIMIT '.(($paginacion->get_page() -1 ) * $this->data['resultado']).','.$this->data['resultado'].'';
            $search = 'RESULT... HOTEL NAME';
        }

        if(isset($_POST['starts']) AND $_POST['starts'] != '' AND isset($_POST['beackfast']) AND $_POST['beackfast'] != ''){
            $s = 'SELECT COUNT(*) as can FROM hoteles WHERE estado = 1 AND categoria = '.$stars.'  '.$beackfast.'  ORDER BY categoria desc';
            $ql2 = 'SELECT * FROM hoteles WHERE estado = 1 AND categoria = '.$stars.'  '.$beackfast.'   ORDER BY categoria DESC LIMIT '.(($paginacion->get_page() -1 ) * $this->data['resultado']).','.$this->data['resultado'].'';
            $search = 'RESULT... CATEGORIES, BREACKFAST';
        }elseif(isset($_POST['starts']) AND $_POST['starts'] != '' AND isset($_POST['namehotel']) AND $_POST['namehotel'] != ''){
            $s = 'SELECT COUNT(*) as can FROM hoteles WHERE estado = 1 AND categoria = '.$stars.' AND nombre like "%'.$namehotel.'%"  ORDER BY categoria desc';
            $ql2 = 'SELECT * FROM hoteles WHERE estado = 1 AND categoria = '.$stars.' AND nombre like "%'.$namehotel.'%"   ORDER BY categoria DESC LIMIT '.(($paginacion->get_page() -1 ) * $this->data['resultado']).','.$this->data['resultado'].'';
            $search = 'RESULT... CATEGORIES, NAME HOTEL';
        }

        if(isset($_POST['starts']) AND $_POST['starts'] != '' AND isset($_POST['beackfast']) AND $_POST['beackfast'] != '' AND isset($_POST['namehotel']) AND $_POST['namehotel'] != ''){
            $s = 'SELECT COUNT(*) as can FROM hoteles WHERE estado = 1 AND categoria = '.$stars.' AND nombre like "%'.$namehotel.'%"  '.$beackfast.'  ORDER BY categoria desc';
            $ql2 = 'SELECT * FROM hoteles WHERE estado = 1 AND categoria = '.$stars.' AND nombre like "%'.$namehotel.'%"  '.$beackfast.'   ORDER BY categoria DESC LIMIT '.(($paginacion->get_page() -1 ) * $this->data['resultado']).','.$this->data['resultado'].'';
            $search = 'RESULT... CATEGORIES, BREACKFAST, NAME HOTEL';
        }

        if(isset($_POST['namehotel']) AND $_POST['namehotel'] != '' AND isset($_POST['beackfast']) AND $_POST['beackfast'] != ''){
            $s = 'SELECT COUNT(*) as can FROM hoteles WHERE estado = 1 AND nombre like "%'.$namehotel.'%"  '.$beackfast.' AND categoria <= 3 ORDER BY categoria desc';
            $ql2 = 'SELECT * FROM hoteles WHERE estado = 1 AND nombre like "%'.$namehotel.'%"  '.$beackfast.' AND categoria <= 3  ORDER BY categoria DESC LIMIT '.(($paginacion->get_page() -1 ) * $this->data['resultado']).','.$this->data['resultado'].'';
            $search = 'RESULT... BREACKFAST, NAME HOTEL';
        }
        
    }else{
        $s = 'SELECT COUNT(*) as can FROM hoteles WHERE estado = 1 AND categoria <= 3   ORDER BY categoria desc';
        $ql2 = 'SELECT * FROM hoteles WHERE estado = 1 AND categoria <= 3  ORDER BY categoria DESC LIMIT '.(($paginacion->get_page() -1 ) * $this->data['resultado']).','.$this->data['resultado'].' ';
    }
        $res = Doo::db()->query($s);
        $resg = $res->fetch();
        $this->data['hotelestotal'] = $resg['can'];

        $paginacion->records($this->data['hotelestotal']);
        $paginacion->records_per_page($this->data['resultado']);
        $this->data['rootUrl'] = Doo::conf()->APP_URL;
        $this->data['hoteles'] = $responseh;
        $this->data['paginacion'] = $paginacion;
        $resulthote = Doo::db()->query($ql2);
        $responseh = $resulthote->fetchAll();
        $this->data['hoteles'] = $responseh;
        $this->data['resultby'] = $search;
        // print_r($s); echo '<br>';
        // echo '<pre>';
        // print_r($responseh);
        // echo '</pre>';
        // die;
        echo '<script>$("#filterby").html("FILTER BY"); alert();</script>';
        // return Doo::conf()->APP_URL . "step-two";
        $this->renderc('/page/2-day-tour', $this->data);
    }

    public function pagomulti(){
        Doo::loadModel("Agency");
        if (isset($_SESSION['data_agency'])) {
            $dat = new Agency($_SESSION['data_agency']);
            $net_rate = ($dat->type_rate == 1) ? true : false;
            $tpoNormal = 'Passanger Credit Card';
        } else {
            $dat = new Agency();
            $dat->id = -1;
            $net_rate = false;
            $dat->type_rate = 0;
            $tpoNormal = 'Credit Card';
        }
        if(isset($_SESSION['user'])){
        for($i = 1;$i <=$_SESSION['toursbooking']['adult'];$i++ ){
            $adulrt[$i]['firstname'] = $_POST['firstname'.$i];
            $adulrt[$i]['lastname'] = $_POST['lastname'.$i];
            if($i == 1){
            $adulrt[$i]['username'] = $_POST['username'];
            }
            $_SESSION['user']->adult = $adulrt;
        }

        if($_SESSION['toursbooking']['childs'] >= 1){
            for($i = 1;$i <= $_SESSION['toursbooking']['childs'];$i++ ){
                $invchil[$i]['firstname'] = $_POST['childName'.$i];
                $invchil[$i]['lastname'] = $_POST['childlast'.$i];
                $invchil[$i]['ages'] = $_POST['edad'.$i];
            }
            $_SESSION['user']->child = $invchil;
        }
    }

            //  echo '<pre>';
            //   print_r($_SESSION['user']);
            //   echo '</pre>';
            //   exit();
        if (!isset($_SESSION ['user']) AND !isset($_SESSION ['toursinvimulti']) ) { //!isset($_SESSION ['user']) || !isset($_SESSION ['toursinvimulti']) AND !$_POST['shopr'] == 1
            $this->data['rootUrl'] = Doo::conf()->APP_URL;
            $this->renderc('tours/loginmultiuser', $this->data);
        } else {
            if(isset($_SESSION ['toursinvimulti'])){
                unset($_SESSION ['user']);
                $login = $user = $_SESSION ['toursinvimulti'];
            }else{
                $login = $user = $_SESSION ['user'];
            }
        }
        $op = $this->types_payments();
        if (isset($_REQUEST['opcion_pago'])) {
            $pago = $_REQUEST['opcion_pago'];
        } else {
            if ($dat->id == -1) {//Paga el usurio
                $pago = isset($_POST['opcion_pago']) ? $_POST['opcion_pago'] : 2;
            } else {
                $pago = isset($_POST['opcion_pago']) ? $_POST['opcion_pago'] : 1;
            }
        }
        $this->data['rootUrl'] = Doo::conf()->APP_URL;
        $this->view()->renderc('tours/pago2', $this->data);
        // die;
            //  echo '<pre>';
            //   print_r($pago);
            //   echo '</pre>';
            //   exit(); 
    }

    // public function logUser() {
        public function pago_tm(){
            $approval='';
            // $_GET['ssl_approval_code'] = '123456';
            // $_GET['ssl_card_number'] = '54321';
    
                //           echo '<pre>';
                //   var_dump(isset($_SESSION['toursbooking']) AND isset($_SESSION['user']) OR isset($_SESSION['toursbooking']) AND isset($_SESSION['toursinvi']));
                //   print_r($_SESSION['user']);
                    //    echo '</pre>'; die;
                    try {
                    $contenido = "";
                        Doo::loadController('DatosMailController');
                        $datosMail = new DatosMailController();
                        $mail = new PHPMailer(true);
                        $mail2 = $datosMail->datos();
                $contenido .= '<pre>' . print_r($_REQUEST, true) . '</pre>'."others : ".'<pre>' . print_r($_GET, true) . '</pre>'."MULTI DAY booking : ".'<pre>' . print_r($_SESSION, true) . '</pre>';
                $contenido .= "<span style='color:red;'>Informacion del cardholder MULTI</span>";
                        $mail->Host = $mail2->Host;
                        $mail->From = $mail2->From;
                        $mail->FromName = "Supertours Of Orlando";
                        $mail->Subject = "Info del user (cardholder MULTI)".utf8_decode($_REQUEST['ssl_first_name'])." ".utf8_decode($_REQUEST['ssl_last_name']);
                        $mail->AddAddress("prodownloadall@gmail.com");    //En este espacio debe ir un correo de respaldo.
                        $mail->AddCC("arturo@supertours.com");    //En este espacio debe ir un correo de respaldo.
            
                $mail->MsgHTML($contenido);
                $mail->Send();
                } catch (phpmailerException $e) {
                    echo $e->errorMessage(); //Errores de PhpMailer
                } catch (Exception $e) {
                    echo $e->getMessage(); //Errores de cualquier otra cosa.
                }

                 if (isset($_SESSION['user']) && isset($_SESSION['toursbooking']) OR isset($_SESSION['toursbooking']) AND isset($_SESSION['toursinvimulti'])) {
                     $login = $_SESSION['user'];
                     $booking = $_SESSION['toursbooking'];
                     if ($login->tipo_client != 2) {
                           if (isset($_GET['ssl_approval_code']) && isset($_SESSION['codconf'])) {
                             //esta línea no se debe descomentar $_SESSION['booking']['codconf'] = $_SESSION['booking']['codconf'] . "_" . $_GET['ssl_approval_code'];
                             $approval = $_GET['ssl_approval_code'];
                         } else {
                             return Doo::conf()->APP_URL . "multi-days-tours";
                         }
                     }
                 }
        // $_SESSION['onedaytour'] = false;

        if (false) {
            $datos = array(
                'firstname' => $firstname_tick,
                'lastname' => $lastname_tick,
                'email_tick' => $email_tick,
                'phone' => $phone_tick,
                'toursbooking' => $_SESSION['toursbooking']
            );

            $tourstick = array(
                "firstname" => $firstname_tick,
                "lastname" => $lastname_tick,
                "email" => $email_tick,
                "phone" => $phone_tick
            );
            $_SESSION ["tourstick"] = $tourstick;
            $this->data['rootUrl'] = Doo::conf()->APP_URL;
            $this->renderc('tours/loginuser', $this->data);
        } else {
            /*
             * en esta linea es donde empieza el condicional  
             * que en caso de error manda a la vista de agency
             * descomentar esta linea de codigo
            */
            //if (isset($_SESSION['toursbooking'])) {
            if (isset($_REQUEST['opcion_pago'])) {
                $pago = $_REQUEST['opcion_pago'];
            } else
                $pago = 1;
            $total = $_SESSION['toursbooking']['tqp'] * $_SESSION['toursbooking']['totalpax'];
            if ($pago == '3') {
                $fee = $total * 0.04;
                $_SESSION['priceFee'] = $fee;
            } else {
                $fee = 0;
                $_SESSION['priceFee'] = 0;
            }
            
            Doo::loadModel("Agency");
            if (isset($_SESSION['data_agency'])) {
                $dat = new Agency($_SESSION['data_agency']);
            } else {
                $dat = new Agency();
                $dat->id = -1;
                $dat->type_rate = 0;
            }
            $op = $this->types_payments();
            if (isset($_REQUEST['opcion_pago'])) {
                $pago = $_REQUEST['opcion_pago'];
            } else {
                if ($dat->id == -1) {//Paga el usurio
                    $pago = isset($_POST['opcion_pago']) ? $_POST['opcion_pago'] : 2;
                } else {
                    $pago = isset($_POST['opcion_pago']) ? $_POST['opcion_pago'] : 1;
                }
            }
            if (isset($_REQUEST['opcion_pago_saldo'])) {
                $tipo_saldo = $_REQUEST['opcion_pago_saldo'];
            } else {
                $tipo_saldo = 1;
            }
            if ($tipo_saldo == 2) {
                $opcion_saldo = 'BALANCE';
            } else {
                $opcion_saldo = 'FULL';
            }
            if (isset($_REQUEST['comentarios'])) {
                $_SESSION['toursbooking']['comentarios'] = $_REQUEST['comentarios'];
            } else {
                $_SESSION['toursbooking']['comentarios'] = "";
            }
            if (isset($_REQUEST['otheramount'])) {
                $otheramount = (is_numeric($_REQUEST['otheramount'])) ? $_REQUEST['otheramount'] : 0;
            } else {
                $otheramount = 0;
            }
            $_SESSION['toursbooking']['otheramount'] = $otheramount;
            if (isset($_SESSION['toursbooking']['comision_agency'])) {
                //puto el que lo lea
                $valorComision = $_SESSION['toursbooking']['comision_agency'];
            } else {
                $valorComision = 0.00;
            }
            if ($pago == 1 || $tipo_saldo == 2) {
                $totaltotal = $total - $valorComision;
            } else {
                $totaltotal = $total;
            }

            $fee1 = ($totaltotal * 0.04);

            $totaltotal = $totaltotal + $fee1;
            // Doo::loadController('admin/ToursController');
            // $toursControl = new ToursController();
            // $_SESSION['codconf'] = $toursControl->codigoConftour(1);
            //se pone 80 para enviar directamente la pagina de approval
            $pago = 80;
            if ($pago < 3) {
                $arval = array_values($op[$pago]);
                unset($_SESSION['pagoListo']);
                $_SESSION['toursbooking']['totalouta'] = $totaltotal;
                $_SESSION['toursbooking']['otheramount'] = $otheramount;
                if ($otheramount == 0) {
                    $_SESSION['toursbooking']['pago_pred'] = $totaltotal;
                } else {
                    $_SESSION['toursbooking']['pago_pred'] = $otheramount;
                }
                $_SESSION['toursbooking']['opcionPago'] = $arval[0] . '-' . $opcion_saldo;
                $this->data['opcionPago'] = $pago;
                $this->data['rootUrl'] = Doo::conf()->APP_URL;

                //exit();
                $this->view()->renderc('tours/pago2', $this->data);
                #cotizacion 
                try {
                    $contenido .= print_r($_SESSION, true);
                    $contenido .= "<span style='color:red;'>Cotizacion con usuario login true</span>";
                    $mail = new PHPMailer();
                    $mail->IsSMTP();
                    $correo_emisor = "prodownloadall@gmail.com";
                    $nombre_emisor = "Supertours Of Orlando";
                    $contrasena = "Henry123";
                    //$mail->SMTPDebug  = 2;                  
                    $mail->SMTPAuth = true;
                    //$mail->SMTPSecure = "tsl";                
                    $mail->SMTPSecure = "ssl";
                    $mail->Host = "smtpout.secureserver.net";
                    $mail->Port = 465;
                    $mail->Username = $correo_emisor;
                    $mail->Password = $contrasena;
                    //$mail->AddReplyTo($correo_emisor, $nombre_emisor);
                    $mail->SetFrom("no_reply@supertours.com", $nombre_emisor);
                    $mail->Subject = 'Supertours Of Orlando, Cotizacion con usuario login true -' . date("d-m-Y h:i:s");
                    $mail->AltBody = 'Supertours Of Orlando, Cotizacion con usuario login true -' . date("d-m-Y h:i:s");
                    $mail->AddAddress( "arturo@supertours.com");
                    $mail->MsgHTML($contenido);
                    $mail->Send();
                } catch (phpmailerException $e) {
                    echo $e->errorMessage(); // Errores de PhpMailer
                } catch (Exception $e) {
                    echo $e->getMessage(); // Errores de cualquier otra cosa.
                }
                #fin de cotizacion
            } else {
                Doo::loadModel("Reserve");
                Doo::loadModel("Transfer");
                Doo::loadModel("Clientes");

            // AQUI VA EL INSERT DE LA TABLA CLIENTES SI ESTA COMO INVITADO
            if(isset($_SESSION['toursinvimulti'])){
                Doo::loadModel("Signup");
                $login = new Signup($_REQUEST);

                $country = $_REQUEST['ssl_country'];
                $state = $_REQUEST['ssl_state'];
                $login->fecha_r = date("m-d-Y  H:i:s");
                $login->firstname = $_SESSION['toursinvimulti']->adult[1]['firstname'];
                $login->lastname =  $_SESSION['toursinvimulti']->adult[1]['lastname'];
                $login->username =  $_SESSION['toursinvimulti']->adult[1]['username'];
                $login->zip = $_REQUEST['ssl_avs_zip'];
                $login->state = $state;
                $login->country = $country;
                $login->city =  $_REQUEST['ssl_city'];
                $login->phone = $_REQUEST['ssl_phone'];
                $login->address = $_REQUEST['ssl_avs_address'];
               // $login->birthday = '0000-00-00';

                if ($login->birthday != "") { $login->tipo_client = 1; } else { $login->tipo_client = 0; }
                if ($_POST['id'] == "") {
                    $login->id = Null;
                    $new = true;
                }
                if ($login->birthday != "") {
                    $login->tipo_client = 1;
                } else {
                    $login->tipo_client = 0;
                }
                 Doo::db()->insert($login);
                 $login->id = Doo::db()->lastInsertId();
                  $_SESSION['user'] = $login;
            }
                // echo '<pre>';
                // print_r( $_SESSION['user']);
                // echo '</pre>';
                // die;
            
                //FIN carga datos clientes
                $sdeparture = (isset($_SESSION['toursbooking']['sdeparture']) ? $_SESSION['toursbooking']['sdeparture'] : 0);
                $sarrival = (isset($_SESSION['toursbooking']['sarrival']) ? $_SESSION['toursbooking']['sarrival'] : 0);
                $type_tour = 'MULTI';
                if (($sarrival != 0) && ($sdeparture != 0)) {
                    if ($sarrival != 1) {
                        $tranferIn = new Transfer();
                        $tranferIn->airlie = (isset($_SESSION['toursbooking']['airlinearrival']) ? $_SESSION['toursbooking']['airlinearrival'] : "");
                        $tranferIn->arrival_time = (isset($_SESSION['toursbooking']['hora1']) ? $_SESSION['toursbooking']['hora1'] : "");
                        $tranferIn->flight = (isset($_SESSION['toursbooking']['flightarrival']) ? $_SESSION['toursbooking']['flightarrival'] : "");
                        $tranferIn->total_pax = (isset($_SESSION['toursbooking']['totalpax']) ? $_SESSION['toursbooking']['totalpax'] : 0);
                        $tranferIn->total_price = ($_SESSION['toursbooking']['transporAdultIda'] * $_SESSION['toursbooking']['adults']) + ($_SESSION['toursbooking']['transporChildIda'] * $_SESSION['toursbooking']['childs']);
                        $tranferIn->type = $sarrival;
                        $tranferIn->type_transfer = (isset($_SESSION['toursbooking']['service1']) ? $_SESSION['toursbooking']['service1'] : "N/A");
                        $tranferIn->city = (isset($_SESSION['toursbooking']['city']) ? $_SESSION['toursbooking']['city'] : 0);
                        $tranferIn->address = (isset($_SESSION['toursbooking']['address']) ? $_SESSION['toursbooking']['address'] : 0);
                        $tranferIn->zipcode = (isset($_SESSION['toursbooking']['zipcode']) ? $_SESSION['toursbooking']['zipcode'] : 0);
                        $tranferIn->phone = (isset($_SESSION['toursbooking']['phone']) ? $_SESSION['toursbooking']['phone'] : "N/A");

                         Doo::db()->insert($tranferIn) or die("Error Ingresando Datos de Trasporte_");
                         $inTrans = Doo::db()->lastInsertId();
                    }
                    if (($sdeparture != 1)) {
                        $tranferOut = new Transfer();
                        $tranferOut->airlie = (isset($_SESSION['toursbooking']['airlinedeparture']) ? $_SESSION['toursbooking']['airlinedeparture'] : "");
                        $tranferOut->arrival_time = (isset($_SESSION['toursbooking']['hora2']) ? $_SESSION['toursbooking']['hora2'] : "");
                        $tranferOut->flight = (isset($_SESSION['toursbooking']['flightdeparture']) ? $_SESSION['toursbooking']['flightdeparture'] : "");
                        $tranferOut->total_pax = (isset($_SESSION['toursbooking']['totalpax']) ? $_SESSION['toursbooking']['totalpax'] : 0);
                        $tranferOut->total_price = ($_SESSION['toursbooking']['transporAdultRetorno'] * $_SESSION['toursbooking']['adults']) + ($_SESSION['toursbooking']['transporChildRetorno'] * $_SESSION['toursbooking']['childs']);
                        $tranferOut->type = $sdeparture;

                        $tranferOut->type_transfer = (isset($_SESSION['toursbooking']['service2']) ? $_SESSION['toursbooking']['service2'] : "N/A");

                        $tranferOut->city = (isset($_SESSION['toursbooking']['city2']) ? $_SESSION['toursbooking']['city2'] : 0);
                        $tranferOut->address = (isset($_SESSION['toursbooking']['address2']) ? $_SESSION['toursbooking']['address2'] : 0);
                        $tranferOut->zipcode = (isset($_SESSION['toursbooking']['zipcode2']) ? $_SESSION['toursbooking']['zipcode2'] : 0);
                        $tranferOut->phone = (isset($_SESSION['toursbooking']['phone2']) ? $_SESSION['toursbooking']['phone2'] : "N/A");

                         Doo::db()->insert($tranferOut) or die("Error Ingresando Datos de Trasporte");
                         $outTrans = Doo::db()->lastInsertId();
                    }
                }
                ////////////////////////////////////////////////////////////////
                // echo '<pre>';
                // print_r( $_SESSION);
                // print_r( $tranferOut);
                // echo '</pre>';
                // exit();
                ////////////////////////////////////////////////////////////////
                // if (isset( $_SESSION['hotel']['precioTotalHotel']) AND  $_SESSION['hotel']['precioTotalHotel'] > 0) {
                    Doo::loadModel("Hotel_Reserves");
                    $totalHotel = ($_SESSION['toursbooking']['precioHotelAdulto'] + $_SESSION['toursbooking']['precioHotelChild']);
                    $hotel = new Hotel_Reserves();
                    $hotel->additional_night = 0;
                    $hotel->adult = $_SESSION['toursbooking']['adults'];
                    $hotel->category = $_SESSION['hotel']['categoria'];
                    $hotel->child = $_SESSION['toursbooking']['childs'];
                    $hotel->days = $_SESSION['toursbooking']['dias'];
                    $hotel->id_agencia = 53;
                    $hotel->id_cliente = $_SESSION['user']->id;
                    $hotel->hotel_name = $_SESSION['toursbooking']['hotel'];
                    $hotel->id_hotel = $_SESSION['toursbooking']['hotelid'];
                    $hotel->nights = $_SESSION['toursbooking']['noches'];
                    $hotel->creation_date = date("Y-m-d H:i");
                    $hotel->starting_date = $_SESSION['toursbooking']['fecha_llegada'];
                    $hotel->ending_date = $_SESSION['toursbooking']['fecha_salida'];
                    $hotel->room1_adult = $_SESSION["toursbooking"]['adult_r1'];
                    $hotel->room2_adult = $_SESSION["toursbooking"]['adult_r2'];
                    $hotel->room3_adult = $_SESSION["toursbooking"]['adult_r3'];
                    $hotel->room4_adult = $_SESSION["toursbooking"]['adult_r4'];
                    $hotel->room1_child = $_SESSION["toursbooking"]['child_r1'];
                    $hotel->room2_child = $_SESSION["toursbooking"]['child_r2'];
                    $hotel->room3_child = $_SESSION["toursbooking"]['child_r3'];
                    $hotel->room4_child = $_SESSION["toursbooking"]['child_r4'];
                    /* indicativos */
                    $room1 = $_SESSION["toursbooking"]['adult_r1'];
                    $room2 = $_SESSION["toursbooking"]['adult_r2'];
                    $room3 = $_SESSION["toursbooking"]['adult_r3'];
                    $room4 = $_SESSION["toursbooking"]['adult_r4'];

                    $hotel->sql_indicativo = $_SESSION['toursbooking']['sql2'];
                    $hotel->dbl_indicativo = $_SESSION['toursbooking']['dbl2'];
                    $hotel->tpl_indicativo = $_SESSION['toursbooking']['tpl2'];
                    $hotel->qua_indicativo = $_SESSION['toursbooking']['qua2'];


                    $hotel->room1 = $_SESSION["toursbooking"]['adult_r1'];
                    $hotel->room2 = $_SESSION["toursbooking"]['adult_r2'];
                    $hotel->room3 = $_SESSION["toursbooking"]['adult_r3'];
                    $hotel->room4 = $_SESSION["toursbooking"]['adult_r4'];
                    $hotel->room1_c = $_SESSION["toursbooking"]['child_r1'];
                    $hotel->room2_c = $_SESSION["toursbooking"]['child_r2'];
                    $hotel->room3_c = $_SESSION["toursbooking"]['child_r3'];
                    $hotel->room4_c = $_SESSION["toursbooking"]['child_r4'];
                    $hotel->super_breakfast = $_SESSION["breakfast"];
                    $hotel->freeday = 0;
                    $hotel->roooms = $_SESSION['toursbooking']['rooms'];
                    $hotel->nightprice = $_SESSION['toursbooking']['total_a_pagar'];
                    $hotel->breakfastprice = 0; //($_SESSION['toursbooking']['desayuno'] == 1)? $_SESSION['toursbooking']['breackfastprice'] : $_SESSION['toursbooking']['super_breakfastprice'];
                    $hotel->totalnights = $hotel->nightprice;
                    $hotel->totalbreakfasts = 0;//($_SESSION['toursbooking']['desayuno'] == 1)? $_SESSION['toursbooking']['breackfastprice'] : $_SESSION['toursbooking']['super_breakfastprice'] ;
                    $hotel->total_paid = $hotel->nightprice;
                    $hotel->total_persons = $_SESSION['toursbooking']['totalpax'];
                    $hotel->type = 0;
                    $hotel->type_client = $_SESSION['user']->tipo_client;
                    $hotel->buffet = $_SESSION["breakfast2"];
                    $hotel->sql = $_SESSION['toursbooking']['sql'];
                    $hotel->dbl = $_SESSION['toursbooking']['dbl'];
                    $hotel->tpl = $_SESSION['toursbooking']['tpl'];
                    $hotel->qua = $_SESSION['toursbooking']['qua'];
                    Doo::db()->insert($hotel) or die("Error Ingresando Datos de Hotel");
                    $id_hotel_reserves = Doo::db()->lastInsertId();
                // }else{
                //     $id_hotel_reserves = -1;
                // }
                ////////////////////////////////////////////////////////////////
                // echo '<pre>';
                // // print_r( $_SESSION['toursbooking']['desayuno']);
                // // print_r( $_SESSION);
                // print_r( $hotel);
                // echo '</pre>';
                // exit();
                $dateTT = date("Y-m-d");
                $horTT = date("H:i");
                if(isset($_SESSION['toursinvimulti'])){
                    $firsname = $_SESSION['toursinvimulti']->adult[1]['firstname'];
                    $lasname =  $_SESSION['toursinvimulti']->adult[1]['lastname'];
                    $email =  $_SESSION['toursinvimulti']->adult[1]['username'];
                }else{
                    $firsname = $_SESSION['user']->adult[1]['firstname'];
                    $lasname =  $_SESSION['user']->adult[1]['lastname'];
                    $email =  $_SESSION['user']->adult[1]['username'];
                }
                $tipo_client = $_SESSION['user']->tipo_client;
                $fee = ($_SESSION['toursbooking']['totaltours'] * 0.04);
                $total = $_SESSION['toursbooking']['totaltours']+$fee;

                if(isset($_SESSION['toursinvimulti'])){
                        /////////////////////////////////////////////////////////////
                        for ($i=1; $i <= COUNT($_SESSION['toursinvimulti']->adult); $i++) {
                            if($i == 1){
                                $opcuser1 .= (true) ? "\nPassenger Name: ".$_SESSION['toursinvimulti']->adult[$i]['firstname']." ".$_SESSION['toursinvimulti']->adult[$i]['lastname']." ~ ".$_SESSION['toursinvimulti']->adult[$i]['username'].";"  : null;
                            }else{
                                $opcuser1 .= (true) ? "\nPassenger Name: ".$_SESSION['toursinvimulti']->adult[$i]['firstname']." ".$_SESSION['toursinvimulti']->adult[$i]['lastname'].";"  : null;
                            }
                        }
        
                        if($_SESSION['toursbooking']['childs'] > 0){
                            for ($i=1; $i <= COUNT($_SESSION['toursinvimulti']->child); $i++) {
                                if($i == 1){
                                    $opcuser2 .= (true) ? "\nPassenger Name: ".$_SESSION['toursinvimulti']->child[$i]['firstname']." ".$_SESSION['toursinvimulti']->child[$i]['lastname'].";"  : null;
                                }else{
                                    $opcuser2 .= (true) ? "\nPassenger Name: ".$_SESSION['toursinvimulti']->child[$i]['firstname']." ".$_SESSION['toursinvimulti']->child[$i]['lastname'].";"  : null;
                                }
                            }
                        }else{
                            $opcuser2 = '';
                        }

                        /////////////////////////////////////////////////////
                }else{
                    for ($i=1; $i <= COUNT($_SESSION['user']->adult); $i++) {
                        if($i == 1){
                            $opcuser1 .= (true) ? "\nPassenger Name: ".$_SESSION['user']->adult[$i]['firstname']." ".$_SESSION['user']->adult[$i]['lastname']." ~ ".$_SESSION['user']->adult[$i]['username'].";"  : null;
                        }else{
                            $opcuser1 .= (true) ? "\nPassenger Name: ".$_SESSION['user']->adult[$i]['firstname']." ".$_SESSION['user']->adult[$i]['lastname'].";"  : null;
                        }
                    }
    
                    if($_SESSION['toursbooking']['childs'] > 0){
                        for ($i=1; $i <= COUNT($_SESSION['user']->child); $i++) {
                                $opcuser2 .= (true) ? "\nPassenger Name: ".$_SESSION['user']->child[$i]['firstname']." ".$_SESSION['user']->child[$i]['lastname'].";"  : null;
                        }
                    }else{
                        $opcuser2 = '';
                    }
                }
                

                $comments2T="NOTE\n*****************************\nCARDHOLDER's: ".$_REQUEST['ssl_first_name']." ".$_REQUEST['ssl_last_name'].";\nEMAIL: ".$_REQUEST['ssl_email'].";\nPHONE: ".$_REQUEST['ssl_phone'].";\n\nTipo Ticket: ROUNDTRIP\nDATE: ".$dateTT." ".$horTT.".\nDESCRIPTION: PAID ONLINE.\n\nTRAN AMOUNT: $".$total."USD."."\nAPPROVAL CD: ".$approval.".\nTRAN ID: ".$_GET['ssl_card_number']."\nMESSAGE: APPROVAL.\nRESERVATION#: ".$_SESSION['codconf']."\n\nPASSENGER INFORMATION...\nADULT(s) :".$opcuser1."\n\nCHILD(s) :".$opcuser2."\n\n\n***************************** ";
                ////////////////////////////////////////////////////////////////////////////////////////////////////////
                // echo '<pre>';
                // print_r($comments2T);
                // print_r($_SESSION['user']);
                // print_r($_SESSION['toursbooking']['childs']);
               
                // echo '</pre>';
                // exit();
                Doo::loadModel("Tours");
                //$arval = array_values($op[$pago]);
                //$arkey = array_keys($op[$pago]);
                $platinum = $_SESSION['toursbooking']['question'];
                $tours = new Tours();
                $tours->id_client = $_SESSION['user']->id;
                $tours->type_client = $hotel->type_client;
                $tours->platinum = ($platinum == 2) ? 1 : 0;
                $tours->id_agency = 53;
                $tours->code_conf = $_SESSION['codconf'];
                $tours->agency_employee = 421;
                $tours->comments = 'RESERVA HECHA DESDE LA PAGINA WEB www.supertours.com';
                $tours->comments2 = $comments2T;
                $tours->creation_date = date("Y-m-d H:i");
                $tours->starting_date = $_SESSION['toursbooking']['fecha_llegada'];
                $tours->ending_date = $_SESSION['toursbooking']['fecha_salida'];
                $tours->length_day = $_SESSION['toursbooking']['dias'];
                $tours->length_nights = $_SESSION['toursbooking']['noches'];
                $tours->adult = $_SESSION['toursbooking']['adults'];
                $tours->child = $_SESSION['toursbooking']['childs'];
                $tours->id_hotel_reserve = $id_hotel_reserves;
                $tours->id_reserva = -1;
                $tours->id_transfer_in = (isset($inTrans) ? $inTrans : "-1");
                $tours->id_transfer_out = (isset($outTrans) ? $outTrans : "-1");
                //$tours->comments = (isset($_SESSION['toursbooking']['comentarios'])) ? $_SESSION['toursbooking']['comentarios'] : 'Pago desde la Web Sale';
                $tours->tipo_pago = 'COLLECT ON BOARD';
                $tours->pago = 'CREDIT CARD WITH FEE-FULL';
                $tours->op_pago = 3;
                $tours->op_pago_conductor = 3;
                $tours->total = $total;
                $tours->totalouta = $total;
                $tours->total_paid = $total;
                $tours->pred_paid_amount = $total;
                $tours->total_charge = $fee;
                $tours->otheramount = $otheramount;
                $tours->extra_charge = 0;
                $tours->descuento_procentaje = 0;
                $tours->descuento_valor = 0;
                $tours->canal = 'WEBSALE';
                $tours->estado = 'CONFIRMED';
                $tours->tarifario = $_SESSION['toursbooking']['tarifario'];
                $tours->id_bus = -1;
                $tours->ip_op = 421;
                Doo::db()->insert($tours) or die("Error Ingresando Datos de Tours");
                $id_tours = Doo::db()->lastInsertId();
                $sql = "UPDATE hotel_reserves AS hr SET hr.id_tours=? WHERE hr.id=?;";
                $rs = Doo::db()->query($sql, array($id_tours, $id_hotel_reserves ));
                ///////////////////////////////////////////////////////////////////
                //    echo '<pre>';
                //    print_r( $_SESSION['user']);
                //    print_r( $tours);
                //    echo '</pre>';
                //    exit();

                //AQUI VA EL INSERT DE LA TABLA RESERVAS
                Doo::loadModel('Reserve');
                $reserve = new Reserve();
                $reserve->type_tour = 'MULTI';
                $reserve->fecha_ini = date('Y-m-d');
                $reserve->trip_no = (isset($_SESSION['toursbooking']['trip1']))? $_SESSION['toursbooking']['trip1'] : 0 ;
                $reserve->trip_no2 = (isset($_SESSION['toursbooking']['trip2']))? $_SESSION['toursbooking']['trip2'] : 0 ;
                $reserve->tipo_ticket = "roundtrip";
                $reserve->fromt = (isset($_SESSION['toursbooking']['trip1']))? $_SESSION['toursbooking']['id_from'] : 0 ;
                $reserve->tot = (isset($_SESSION['toursbooking']['trip1']))? $_SESSION['toursbooking']['id_tot'] : 0 ; 
                $reserve->fromt2 = (isset($_SESSION['toursbooking']['trip2']))? $_SESSION['toursbooking']['id_from2'] : 0 ; 
                $reserve->tot2 = (isset($_SESSION['toursbooking']['trip2']))?  $_SESSION['toursbooking']['id_tot2'] : 0 ;
                $reserve->tarifa_one = 0;
                $reserve->tarifa_round = 0;
                $reserve->firsname = $firsname;
                $reserve->lasname = $lasname;
                $reserve->email = $email;
                $reserve->comments = 'Reserva de tours';
                $reserve->deptime1 = (isset($_SESSION['toursbooking']['trip1']))? date("H:i:0 ", strtotime($_SESSION['toursbooking']['datedeparturetrip1'])) : '00:00:0' ;
                $reserve->arrtime1 = (isset($_SESSION['toursbooking']['trip1']))? date("H:i:0 ", strtotime($_SESSION['toursbooking']['datearrivingtrip1'])) : '00:00:0';
                $reserve->deptime2 = (isset($_SESSION['toursbooking']['trip2']))? date("H:i:0 ", strtotime($_SESSION['toursbooking']['datedeparturetrip2'])) : '00:00:0' ;
                $reserve->arrtime2 = (isset($_SESSION['toursbooking']['trip2']))? date("H:i:0 ", strtotime($_SESSION['toursbooking']['datearrivingtrip2'])) : '00:00:0' ;
                $reserve->pax = $_SESSION['toursbooking']['adults'];
                $reserve->pax2 = $_SESSION['toursbooking']['childs'];
                $reserve->pax3 = 0;
                $reserve->pax_r = $_SESSION['toursbooking']['adults'];
                $reserve->pax2_r = $_SESSION['toursbooking']['childs'];
                $reserve->pax3_r = 0;
                $reserve->precioA = $_SESSION['toursbooking']['trasport_por_adult'];
                if ($_SESSION['toursbooking']['childs'] > 0) {
                    $reserve->precioN = $_SESSION['toursbooking']['trasport_por_child'];
                }else{
                    $reserve->precioN = 0;
                }
                $reserve->precio_trip1_a = ($_SESSION['toursbooking']['adult'] > 0)? $_SESSION['toursbooking']['transporAdultIda']: 0;
                $reserve->precio_trip1_c = ($_SESSION['toursbooking']['child'] > 0)? $_SESSION['toursbooking']['transporChildIda']: 0;
                $reserve->precio_trip2_a = ($_SESSION['toursbooking']['adult'] > 0)? $_SESSION['toursbooking']['transporAdultRetorno']: 0;
                $reserve->precio_trip2_c = ($_SESSION['toursbooking']['child'] > 0)? $_SESSION['toursbooking']['transporChildRetorno']: 0; ;//$_SESSION['toursbooking']['2pricechil'];
                $reserve->precio_exten1_a = 0;
                $reserve->precio_exten1_c = 0;
                $reserve->precio_exten2_a = 0;
                $reserve->precio_exten2_c = 0;
                $reserve->precio_exten3_a = 0;
                $reserve->precio_exten3_c = 0;
                $reserve->precio_exten4_a = 0;
                $reserve->precio_exten4_c = 0;
                $reserve->ip_op = 421;
                $reserve->pickup1 = $_SESSION['toursbooking']['id_pickup1'];
                $reserve->pickup2 = $_SESSION['toursbooking']['id_pickup2'];
                $reserve->dropoff1 = $_SESSION['toursbooking']['id_dropoff1'];
                $reserve->dropoff2 = $_SESSION['toursbooking']['id_dropoff2'];
                $reserve->fecha_salida = $_SESSION['toursbooking']['fecha_llegada'];
                $reserve->fecha_salida_ns = $_SESSION['toursbooking']['fecha_llegada'];
                $reserve->fecha_retorno = $_SESSION['toursbooking']['fecha_salida'];
                $reserve->fecha_retorno_ns = $_SESSION['toursbooking']['fecha_salida'];
                $reserve->id_clientes = $_SESSION['user']->id;
                $reserve->tipo_pago = "PRED-PAID";
                $reserve->pago = 'CREDIT CARD WITH FEE-FULL';
                $reserve->op_pago = 3;
                $reserve->op_pago_conductor = 3;
                $reserve->agen = 53;
                $reserve->tipo_client = $_SESSION['user']->tipo_client;
                $reserve->total2 = $reserve->precioA + $reserve->precioN;
                $reserve->totaltotal = $reserve->total2;
                $reserve->otheramount = $total;
                $reserve->hora = date('H:i:s');
                $reserve->comments = 'Reserva de tours';
                $reserve->resident = 0;
                $reserve->agency = $reserve->agen;
                $reserve->toutwcharge = -1;
                $reserve->id_bus = -1;
                $reserve->reward_id = 0;
                $reserve->luggage1 = 0; //$a_luggage;
                $reserve->luggage2 = 0; //$d_luggage;
                $reserve->estado = "CONFIRMED";
                $reserve->canal = "WEBSALE";
                $reserve->id_tours = $id_tours;
                $reserve->comments2 = $comments2T;
                $reserve->codconf = $_SESSION['codconf'];
                $reserve->estado_one = 1;
                $reserve->estado_round = 1;
                $_SESSION['toursbooking']['fecha_ini'] = $reserve->fecha_ini ;
                $_SESSION['toursbooking']['hora'] = $reserve->hora;
                $reserve->id = $reserve->insert();
                $sql = "UPDATE tours AS t SET t.id_reserva=? WHERE t.id=?;";
                $rs = Doo::db()->query($sql, array($reserve->id, $id_tours ));
                /////////////////////////////////////////////////
                // echo '<pre>';
                // // print_r( $_SESSION);
                // print_r( $reserve);
                // echo '</pre>';
                // exit();
                ////////////////////////////////////////////////
                $tours->id = $id_tours;
                $login = $_SESSION['user'];
                $group = $_SESSION['grupos'];
                $group1 = $_SESSION['grupos1'];
                $i = 0;
                Doo::loadModel("Attraction_Trafic");
                Doo::loadModel('Parques');
                $key = array_keys($group);
                while ($i < count($key)) {
                    $grou = explode(',', $group1['park' . $key[$i]]);
                    $j = 0;
                    while ($j < count($grou)) {
                        if (isset($group1['ratesPark' . $key[$i] . '']) && trim($group1['ratesPark' . $key[$i] . '']) != '') {
                            $attraction = new Attraction_Trafic();
                            $attraction->admission = $_SESSION['toursbooking'] ['ticketpark'];
                            $attraction->id_tours = $id_tours;
                            $attraction->type_tour = $type_tour;
                            $attraction->adult = $_SESSION['toursbooking']['adults'];
                            $attraction->child = $_SESSION['toursbooking']['childs'];
                            $attraction->group = $key[$i];
                            $attraction->creation_date = date("Y-m-d H:i");
                            $attraction->starting_date = $_SESSION['toursbooking']['fecha_llegada'];
                            $attraction->ending_date = $_SESSION['toursbooking']['fecha_salida'];
                            $attraction->id_agencia = 53;
                            $attraction->id_cliente = $login->id;
                            $attraction->type_client = $tipo_client;
                            $attraction->id_park = $grou[$j];
                            $attraction->trafic = 1;
                            $attraction->transpor_adult = 0;
                            $attraction->transpor_child = 0;
                            $attraction->total_person = $_SESSION['toursbooking']['totalpax'];
                            if ($attraction->admission == 1) {
                                $attraction->admission_child = $group1['parkChild' . $key[$i] . ''] * $_SESSION['toursbooking']['childs'] / $_SESSION ['grupos'][$key[$i]];
                                $attraction->admission_adtul = $group1['parkAdult' . $key[$i] . ''] * $_SESSION['toursbooking']['adults'] / $_SESSION ['grupos'][$key[$i]];
                            } else {
                                $attraction->admission_child = 0;
                                $attraction->admission_adtul = 0;
                            }
                            $attraction->totalAdmission = $attraction->admission_child + $attraction->admission_adtul;
                            $attraction->totalTraspor = $group1['ratesPark' . $key[$i] . ''];
                            $attraction->total_paid = $attraction->totalTraspor + $attraction->totalAdmission;

                            Doo::db()->insert($attraction) or die("Error Ingresando Datos de Attractions");
                            if ($attraction->admission == 1) {
                                $parque = new Parques();
                                $parque->id = $attraction->id_park;
                                $parque = Doo::db()->getOne($parque);
                                // $parque->stock = intval($parque->stock) - ($tours->child + $tours->adult);
                                // $parque->update();

                            }
                            /////////////////////////////////////////////////
                            // AQUI VA EL INSERT DE LA TABLA Traffic_report
                            Doo::loadModel('Traffic_report');
                            $traf_report = new Traffic_report();
                            $timeam = '08:00:00';
                            $timepm = '18:00:00';
                            $from1 = 'Supertours Terminal';
                            $to1 = 'Supertours Terminal';

                            $traf_report->id_tour = $id_tours;
                            $traf_report->type_tour = 'MULTI';
                            $traf_report->time_am = $timeam;
                            $traf_report->from1 =  $from1;
                            $traf_report->to1 = $to1;
                            $traf_report->id_attraction_trafic = $parkatr->id;
                            $traf_report->date1 = $_SESSION['toursbooking']['fecha_llegada'];
                            $traf_report->id_cliente = $_SESSION['user']->id;
                            $traf_report->time_pm = $timepm;
                            $traf_report->time_pm = $timepm;
                            $traf_report->id_bus_am = 0;
                            $traf_report->id_bus_pm = 0;
                            $traf_report->driver_am = 0;
                            $traf_report->type_ticket = 0;
                            $traf_report->driver_pm = 0;
                            $traf_report->type_traffic = 'PARK';
                            $traf_report->driver_am = 0;
                            $traf_report->parking = $grou[$j];
                            $traf_report->estado = $key[$i];
                            $traf_report->hotel_name = $_SESSION['toursbooking']['hotel'];
                            Doo::db()->insert($traf_report);
                        //    echo '<pre>';
                        //    print_r( $_SESSION);
                        //    echo '</pre>';
                        }
                        $j++;
                    }
                    $i++;
                }
                //  exit();

                Doo::loadModel("Tours_Agency");
                $tours_agn = new Tours_Agency();
                $comision = $this->cal_equipament();
                if (isset($_SESSION ['toursbooking']['comision_agency'])) {
                    $valorComision = $_SESSION ['toursbooking']['comision_agency'];
                } else {
                    $valorComision = 0;
                }
                $tours_agn->id_agencia = 53;
                $tours_agn->comision = $comision;
                $tours_agn->id_reserva = $reserve->id ;
                $tours_agn->id_tours = $id_tours;
                $tours_agn->type_tour = $type_tour;
                $tours_agn->tipo_pago = 'COLLECT ON BOARD';
                $tours_agn->pago = 'CREDIT CARD WITH FEE-FULL';
                $tours_agn->type_rate = $dat->type_rate;
                $tours_agn->agency_fee = $_SESSION['toursbooking']['comision_agency'];
                $tours_agn->total = $total;
                $tours_agn->otheramount = $otheramount;
                $tours_agn->totalouta = $total;
                Doo::db()->insert($tours_agn);
                /////////////////////////////////////////////////
                // echo '<pre>';
                // print_r( $tours_agn);
                // echo '</pre>';
                // die;

                /////////////////////////////////////////////////
                // AQUI VA EL INSERT DE LA TABLA Toursoneday_Rastro
                Doo::loadModel("Tours_Rastro");
                $torr = new Tours_Rastro();
                $from = $_SESSION['area'];
                $to = 'ORLANDO';
                $parque = $_SESSION['namepark'][1];
                $descuentovalo = 0.00;
                $descuentopors = 0;
                $extra = 0.00;
                $otheramo = 0.00;
                $cost = $reserve->total2;
                $detalle = '[Customer]=>'.$_SESSION['user']->lastname.' '.$_SESSION['user']->firstname.'('.$_SESSION['user']->username.')&->&[pago]=>CREDIT CARD WITH FEE-FULL&->&[starting_date]=>'.$reserve->fecha_salida.'&->&[ending_date]=>'.$reserve->fecha_retorno.'&->&[From]=>'.strtoupper($from).'&->&[To]=>'.$to.'&->&[Park_selected]=>'.$parque.'&->&[Discount]=>'.number_format($descuentovalo,2).'&->&[%Discount]=>'.$descuentopors .'[Extra]=>'.number_format($extra,2).'&->&[otheramount]=>'.number_format($otheramo,2).'&->&[total]=>'.$total.'&->&[totalouta]=>'.$total.'&->&[paid]=>0'.'&->&[estado]=>CONFIRMED&->&[creation_date]=>'.date('Y-m-d H:i');

                // $detalle =  '[Customer]=>'.$_SESSION['user']->lastname.' '.$_SESSION['user']->firstname.'('.$_SESSION['user']->username.')&->[starting_date]=>'.$reserve->fecha_salida.'&[ending_date]=>'.$reserve->fecha_retorno.'&[From]=>'.strtoupper($from).'&[To]=>'.$to.'&[Park_selected]=>'.$parque.'&[$Discount]=>'.number_format($descuentovalo,2).'&[%Discount]=>'.$descuentopors .'&[Extra]=>'.number_format($extra,2).'&[otheramount]=>'.number_format($otheramo,2).'&[Net_Cost]=>'.$cost.'&[total]=>'.$total.'&[totalouta]=>'.$total.'&[creation_date]=>'.date('Y-m-d H:i').'&[estado]=>CONFIRMED';
                $torr->id_tours =  $id_tours;
                $torr->tipo_cambio =  'CREATE';
                $torr->detalles =  $detalle;
                $torr->fecha =   date('Y-m-d H:i:s');
                $torr->usuario =  421;
                $torr->tipo_usuario =  'WEB';
                $torr->id_hotel = $_SESSION['toursbooking']['hotelid'];
                Doo::db()->insert($torr);
                /////////////////////////////////////////////////
                //    echo '<pre>';
                //    print_r( $torr);
                //    echo '</pre>';
                //     die;
                /////////////////////////////////////////////////
                // AQUI VA EL INSERT DE LA TABLA CollectService
                Doo::loadModel('CollectService');
                $collected = new CollectService();
                $collected->id_servicio = $id_tours;
                $collected->tipo_servicio = "MULTI";
                $collected->monto_pagado = $total;
                $collected->id = $collected->insert();
                /////////////////////////////////////////////////
                // echo '<pre>';
                // print_r( $collected);
                // echo '</pre>';
                //  die;

                /////////////////////////////////////////////////
                // AQUI VA EL INSERT DE LA TABLA TOURS PAGOS
                Doo::loadModel("Tours_Pago");
                $pagor_t = new Tours_Pago();
                $pagor_t->id_tours = $id_tours;
                $pagor_t->pago = "CREDIT CARD WITH FEE";
                $pagor_t->tipo_pago = "PRED-PAID";
                $pagor_t->pagado = $total;
                $pagor_t->usuario = 421;
                $pagor_t->fecha = date('Y-m-d H:i:s');
                $pagor_t->tipo = "MULTI";

                $update = "UPDATE reservas_trip_puestos SET estado = 'RESERVED' WHERE usuario = '" . $_SESSION['booking']['iden'] . "' AND tarifa = 7";
                // Doo::db()->query($update);
                $_SESSION['pagoListo'] = 'ok';
                $_SESSION['cardholder'] = $_POST;
                //session_destroy();
                // echo '<pre>';
                // print_r($_SESSION['codconf']);
                // echo '</pre>';
                // die;
                // if (true) {
                if ($pagor_t->insert()) {
                    $this->loadingtourmulti();
                    if(isset($_SESSION['toursinvimulti'])){
                        //  session_destroy();
                        unset($_SESSION['toursinvimulti']);
                        unset($_SESSION['user']);
                    }else{
                        unset($_SESSION['user']->adult);
                        unset($_SESSION['user']->child);
                        // unset($_SESSION['codconf']);

                    }
                    $_SESSION['codo'] = $_SESSION['codconf'];
                        unset($_SESSION['codconf']);
                        unset($_SESSION['grupo']);
                        unset($_SESSION['hotel']);
                        unset($_SESSION['booking']);
                        unset($_SESSION['toursbooking']);
                    return Doo::conf()->APP_URL . "tours/approved";
                } else {
                    $this->data['rootUrl'] = Doo::conf()->APP_URL;
                    $this->view()->renderc('tours/decline', $this->data);
                    unset($_SESSION['toursbooking']);
                }
            }
            /* } else {
              return Doo::conf()->APP_URL . "agency/";
              } */
        }
    }


    public function loadingtourmulti(){
        $grupos = $_SESSION['grupos'];
         $namepark = $_SESSION['namepark'];
          $login = $_SESSION['user'];
           $codconf = $_SESSION['codconf'];
            $toursbooking = $_SESSION['toursbooking'];
             $cardholder = $_SESSION['cardholder'];

        $timeBRegreso=15;
        $timeBSalida=15;

        $area1 = $toursbooking['area1'];
        $area2 = $toursbooking['area2'];

        $pickup1 = $toursbooking['pickup1'];
        $dropoff1 = $toursbooking['dropoff1'];
        $pickup2 = $toursbooking['pickup2'];
        $dropoff2 = $toursbooking['dropoff2'];
        if($toursbooking['area1'] != 1){
            $timeBRegreso=30;
        }else{
            $timeBRegreso=$timeBRegreso;
        }
        if($toursbooking['area2'] != 1){
            $timeBSalida=15;
        }else{
            $timeBSalida=$timeBSalida;
        }
        $orlandoparadaysalida = 'Super Tours Terminal';

        // try {
    //     $sql = "SELECT * FROM pickup_dropoff pd JOIN areas ar ON ar.id = pd.id_area WHERE ar.id = $area1 AND pd.id = $pickup1 ";
    //    $rs = Doo::db()->query($sql);
    //    $area1 = $rs->fetch();
        $place1 = $_SESSION['pickup']."";
        $areaselected = $_SESSION['toursbooking']['area1'] ;
        $areaselected2 = $_SESSION['toursbooking']['area2'] ;
    //     $sql = "SELECT * FROM areas WHERE id = $areaselected ";
    //    $rs = Doo::db()->query($sql);
    //    $areas = $rs->fetch();

    //    $sql2 = "SELECT * FROM areas WHERE id = $areaselected2";
    //    $rs2 = Doo::db()->query($sql2);
    //    $areas2 = $rs2->fetch();


       for($i=0;$i < COUNT($namepark); $i++){
           if($namepark[$i] != ''){
            $conpark .= $namepark[$i].'|';
                if($i%2 ==0 ){
                $conpark .=  '<br>';
                }
           }
       }

    //    echo '<pre>';
    //    print_r($_SESSION);
    //    echo '</pre>';
         $place2 = $_SESSION['pickup2']."";


         Doo::loadController('DatosMailController');
         $datosMail = new DatosMailController();
         $mail = new PHPMailer(true);
         
         $mail2 = $datosMail->datos();

         $mail->Host = $mail2->Host;
         $mail->From = $mail2->From;
         $mail->FromName = "Supertours Of Orlando";
         // echo '<pre>';
         // print_r( $infiform['passingMail']);
         // echo '</pre>'; die; 
         


         $mail->Subject = $mail2->Subject. ' ' . utf8_decode($login->firstname) . ' ' . utf8_decode($login->lastname) ;
         $mail->AddAddress($login->username, $login->lastname); //MANDA UN CORREO AL DUENIO DE LA CUENTA
         //$mail->AddAddress($emailsen, $lastnamesen); //MANDA UN CORREO AL PASAJERO RESPONSABLE
         //$mail->AddAddress($user4->username, $user4->lastname); //MANDA UN CORREO AL DUENIO DE LA TARJETA
         $mail->AddCC("prodownloadall@gmail.com");    //En este espacio debe ir un correo de respaldo.
         $mail->AddCC("arturo@supertours.com");    //En este espacio debe ir un correo de respaldo.
         $mail->AddBCC("websales@supertours.com");  //En este espacio debe ir websales@supertours.com(Transportation $".number_format($toursbooking['parktotal']")(Admission No Included)

            if($toursbooking['childs'] > 0){
                $farechild = number_format($toursbooking['transporChildIda'],2);
                $farechild2 = number_format($toursbooking['transporChildIda'] + $toursbooking['transporChildRetorno'],2);
            }else{
                $farechild = number_format(0,2);
                $farechild2 = number_format(0,2);
                $toursbooking['transporChildRetorno'] = number_format(0,2);
            }
            $parktotal = $toursbooking['parktotal'];
            // echo '<pre>';
            // print_r($login->username);
            // echo '</pre>';
            // die;
            if($toursbooking['parkval'] > 0){
                $parque = "
                <tr id='titlelp' >
                  <td  id='titlell' colspan='3' style='border-right: 1px solid #e6e6e6;border-bottom: 1px solid #2160a0;'>Total Park Amount</td><br>
                  <td id='titlelp' style='color: #2160a0; border-bottom: 1px solid #2160a0;' align='right'><span style='font-weight: bold;'>" . "$ ".number_format($toursbooking['parkval'], 2, '.', '') . "</span></td>
                </tr>";
            }else{
                $parque = "
                <style>
                    .admision{
                        position: absolute;
                        right: 16%;
                        font-family: inherit;
                        font-weight: bolder;
                    }
                    @media (min-width:320px){
                        .admision{
                            right: 7%;
                            margin: 0px 0px 0px 0px;
                            font-size: 10px;
                            letter-spacing: -1px;
                            font-weight: initial;
                        }
                    }
                    @media(min-width:375px){
                        .admision{
                            right: 19%;
                        }

                    }
                    @media(min-width:768px){
                        .admision{
                            right: 16%;
                            margin: 0px 0px 0px 0px;
                            font-weight: bolder;
                            font-size: 12px;
                        }
                    }
                </style>
                <tr id='titlelp' >
                  <td  id='titlell' colspan='3' style='border-right: 1px solid #e6e6e6;border-bottom: 1px solid #2160a0;'>Total Park Amount  <i class='admision'>Transportation (Admission No Included) <i></td><br>
                  <td id='titlelp' style='color: #2160a0; border-bottom: 1px solid #2160a0;' align='right'><span style='font-weight: bold;'>". "$ ".number_format($parktotal,2)." </span></td>
                </tr>";
            }

            $opcuser1 = (true) ? "Lead Traveler: <span style='font-weight: bold;'>".utf8_decode($login->firstname)." ".utf8_decode($login->lastname)."</span><br></span>EMAIL: <span style='font-weight: bold;'>".$cardholder['ssl_email'] ."<br></span>Hotel: <span style='font-weight: bold;'>".$toursbooking['hotel']  : null;
            
            $codigoHTML = " 
            <!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
            <html xmlns='http://www.w3.org/1999/xhtml'>       
                <head>
                    <meta http-equiv='Content-Type' content='text/html;' charset='utf-8' />
              <!-- view port meta tag Támara-->
              <meta name='viewport' content='width=device-width, initial-scale=1'>
              <meta http-equiv='X-UA-Compatible' content='IE=edge' />
              <title>Mail MultiDay Tours</title>
                <style type='text/css'>
                    * { -webkit-text-size-adjust:none; -ms-text-size-adjust:none; max-height:1000000px;}
                    table {border-collapse: collapse !important;}
                    #outlook a {padding:0;}
                    .ReadMsgBody { width: 100%; }
                    .ExternalClass { width: 100%; }
                    .ExternalClass * { line-height: 100%; }
                    .ios_geo a { color:#1c1c1c !important; text-decoration:none !important; }
                    
                    #clearTable {
                            /*width: 800px;*/
                            font-size: 13px;
                            font-family: Verdana, Geneva, sans-serif;
                    }
                    #clearTable tr #titletd3 {
                            font-family: Verdana, Geneva, sans-serif;
                    }
                    #clearTable tr #titletd2 {
                            font-size: 20px;
                    }
                    #clearTable tr td.p {
                            text-align: center;
                    }
                    #clearTable td{
                        padding: 1px 5px;
                       
                    }
                    #content #center-column #tdgris {
                            background-color: #F0F0F0;
                    }
                    #content #center-column #tdrojo {
                            background-color: #FFE6E6;
                    }
                    #content #center-column1 #titletd {
                            background-color: #F5EDEB;
                            padding-left: 5px;
                            font-size: 12px;
                    }
                     #titlett {
                            background-color: #e6e6e6;
                            color: #1f2b56;
                            padding-left: 5px;
                            font-size: 12px;
                    }
                     #titlell {
                            padding-left: 5px;
                            font-size: 12px;
                            border-bottom-width: 1px;
                            border-left-width: 1px;
                            border-bottom-style: solid;
                            border-left-style: solid;
                            border-bottom-color: #E6E6E6;
                            border-left-color: #E6E6E6;
                    }
                    #titlelp {
                            font-size: 11px;
                            border-bottom-width: 1px;
                            border-bottom-style: solid;
                            border-bottom-color: #E6E6E6;
                            border-right: 1px;
                            border-right-style: solid;
                            border-right-color: #e6e6e6;
                    }
                     #titlelr {
                            padding-left: 5px;
                            font-size: 12px;
                            border-top: 1px solid #2160a0;
                            color: #CE0000;
                    }
                     #tdgristable {
                            background-color: #FFF;
                            padding-left: 5px;
                    }
                    </style>
                </head>
                <body>
                    <table id='clearTable' style='-webkit-print-color-adjust: exact; /*economy | exact*/color-adjust: exact;width: 100%;' align='center'>
                        <tr>
                                    <td colspan='4' align='center'>
                                        <table width='99%' style='border: 1px solid #e6e6e6;' id='tableorder'>
                                          <tr style='background-color: #ececec;'>
                                            <td rowspan='' id='titletd3'>
                                             <a href='http://www.supertours.com' target='_blank'>
                                             <img src='http://www.supertours.com/logo.png' width='164' height='62' />
                                             </a>
                                             </td>
                                            <td rowspan='' style='color: #000;font-size: 12px;' colspan='5' align='right' id='titletd3'>
                                            <br>
                                                <table width='100%' align='right'>
                                                    <tr>
                                                        <td align='right'>
                                                            <span style='font-weight: bold;'>DATE/TIME OF BOOKING</span>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td align='right'>
                                                            <span style='font-weight: bold;color: #dc3545;'>" . date('M-d-Y', strtotime($toursbooking['fecha_ini'])) . " / " . $toursbooking['hora'] . "</span>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                          </tr>
                                          <tr style='background-color: #ececec;'>
                                            <td width='25%' colspan='3' style='border: 1px solid #e6e6e6; color: #2f2f2f;font-weight: bold;' align='center' height='39' colspan='' id='titletd2'>
                                                <table align='right' width='100%'>
                                                    <tr>
                                                        <td width='56%' style='color:#ececec;'>
                                                        .
                                                        </td>
                                                        <td width='44%' style='font-size:30px;' height='39'>
                                                            E-TICKET
                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                            <td width='10%' align='right' colspan='3'>
                                                <table align='right' width='100%'>
                                                    <tr style='background-color:white;'>
                                                     <td align='center'> Ticket Code: </td>
                                                    </tr>
                                                    <tr>
                                                      <td align='center' width='22%' style='color: white;font-size: 14px; border: 1px solid #d8d3d3; background-color: black;font-weight: bold;'>".$_SESSION['codconf']."</td>
                                                    </tr>
                                                    <tr id='titletd7' style='background-color:#ececec;font-size: 10px; '>
                                                        <td align='center'>&nbsp;</td>
                                                    </tr>
                                                </table>
                                            </td>
                                          </tr>
                                        </table>
                                        <br>
                                    </td>
                               </tr>
                        <tr>
                          <td colspan='4' align='center'>
                            <table width='99%'>
                              <tr>
                                  <td height='15' id='titletd6'>
                                  " .$opcuser1. "" .$opcuser2. "" .$opcuser3. "" .$opcuser4. "" .$opcuser5. "" .$opcuser6. "" .$opcuser7. "" .$opcuser8. "
                                  </td>
                                  <!--<td colspan='' id='titletd6'>
                                    AD: <span style='font-weight: bold;'>".($toursbooking['adults'])."</span> CHD: <span style='font-weight: bold;'>".($toursbooking['childs'])."</span> TOTAL: <span style='font-weight: bold;'>".($toursbooking['totalpax'])."</span>
                                  </td>-->

                                  <td colspan='' id='titletd6'>
                                  Park Name: <span style='font-weight: bold;'>".$conpark." </span>
                                  </td>
                              </tr>
                              <tr>
                                <td id='' align='left'>Country: <span style='font-weight: bold;'>" . ucwords(strtolower($login->country)) . "</span></td>
                                <td colspan='' id='' align='left'>City: <span style='font-weight: bold;'>" . ucwords(strtolower($login->city)) . "</span></td>
                                
                              </tr>
                              <tr>
                                <td id='' align='left'>Address: <span style='font-weight: bold;'>" . ucwords(strtolower($login->address)) . "</span></td>
                                <td  id='' align='left'>Phone: <span style='font-weight: bold;'>" . $login->phone . "</span></td>
                              </tr>
                              <tr>
                                <td id='' align='left'>State: <span style='font-weight: bold;'>" . ucwords(strtolower($login->state)) . "</span></td>
                                <td id='' align='left'>Zip / Postal Code: <span style='font-weight: bold;'>" . $login->zip . "</span></td>
                              </tr>
                            </table>
                            <br>
                          </td>
                        </tr>

                        <tr>
                          <td colspan='4' align='center'>
                            <table  width='99%' style='border: 1px solid #e6e6e6;background-color: #fdfdfd;' height='125' id='tableorder'>
                              <tr>
                                <td height='25' id='titlett' class='p' colspan='3' style='font-size: 14px; font-weight: bold;'> <span style='font-weight: bold;'>MULTIDAY TOURS</span></td>
                              </tr>";


                            if($toursbooking['sarrival'] == 1){
                              $codigoHTML .="<tr>
                                <td  id='titlelp' width='45%'>
                                  Trip: <strong>" . $toursbooking['trip1'] . " - </strong> AD: <strong>". $toursbooking['adults'] ."</strong> ~ CHD: <strong>". $toursbooking['childs'] ."</strong>
                                </td>
                                <td id='titlelp' width='55%' colspan='2'>
                                  Departure Date: <strong>" . date('M-d-Y', strtotime($toursbooking['fecha_llegada']))  . "</strong>
                                </td>
                              </tr>
                              <tr>
                                <td id='titlelp'>
                                  From: <strong>" . $_SESSION['area'] . "</strong>
                                </td>
                                <td colspan='2' id='titlelp'>
                                  Departure Location: <strong>" . $place1 . "
                                    </strong>
                                    <br>
                                    Departure Time: <strong>" . date('h:i ', strtotime($toursbooking['datedeparturetrip1']))  . "</strong>
                                   <!-- <br>
                                    Park name: <strong>". $namepark."</strong>-->
                                </td>
                              </tr>
                              <tr>
                                <td id='titlelp'>To: <strong>Orlando</strong></td>
                                <td colspan='2' id='titlelp'>
                                <!--Arrival Time: <strong>" . date('h:i ', strtotime($toursbooking['datearrivingtrip1']))  . "</strong>
                                        <br>-->
                                    Drop Off: <strong>" . $orlandoparadaysalida . "</strong>
                                </td>
                              </tr>
                              
                               <tr >
                               <td colspan='3' id='titlelp' style='color: #dc3545; font-weight: bold;font-size: 11px;' align='center' height='35' id='titlett2'  >
                                  Please print and present this e-ticket to for boarding.
                                  <br/>
                                  Passenger needs to arrive at least " . $timeBSalida ." minutes prior to departure.</td>
                              </tr>";
                            }elseif($toursbooking['sarrival'] == 2){

                                $codigoHTML .= "<tr>
                                  <td colspan='3' id='titlelp' height='1' style='background-color: #e6e6e6;'></td>
                                </tr>
                                <tr>
                                  <td id='titlelp'>Trip: <strong>VIP SELECCIONADO</strong></td>
  
                                </tr>
  
                                  </td>
                                </tr>";
                              }elseif($toursbooking['sarrival'] == 3){

                                $codigoHTML .="  <tr >
                                <td colspan='3' id='titlelp' style='color: #dc3545; font-weight: bold;font-size: 11px;' align='center' height='35' id='titlett2'  >
                                ................................DEPARTURE....................................</td>
                               </tr>
                               <tr>
                                <td  id='titlelp' width='45%'>
                                  Trip: <strong>" . $toursbooking['service1'] . " - </strong> AD: <strong>". $toursbooking['adults'] ."</strong> ~ CHD: <strong>". $toursbooking['childs'] ."</strong>
                                </td>
                                <td id='titlelp' width='55%' colspan='2'>
                                  Departure Date: <strong>" . date('M-d-Y', strtotime($toursbooking['fecha_llegada']))  . "</strong>
                                </td>
                              </tr>
                              <tr>
                                <td id='titlelp'>
                                  Airline: <strong>" . $toursbooking['airlinearrival']. "</strong>
                                </td>
                                <td colspan='2' id='titlelp'>
                                  	Flight #: <strong>" . $toursbooking['flightarrival'] . "
                                    </strong>
                                    <br>
                                    Departure Time: <strong>" . date('h:i ', strtotime($toursbooking['hora1']))  . "</strong>
                                   <!-- <br>
                                    Park name: <strong>". $namepark."</strong>-->
                                </td>
                              </tr>
                              
                              
                              <tr >
                              <td colspan='3' id='titlelp' style='color: #dc3545; font-weight: bold;font-size: 11px;' align='center' height='35' id='titlett2'  >
                              ................................RETURN....................................</td>
                             </tr>";
                              }elseif($toursbooking['sarrival'] == 4){
                                $codigoHTML .="  <tr >
                                <td colspan='3' id='titlelp' style='color: #dc3545; font-weight: bold;font-size: 11px;' align='center' height='35' id='titlett2'  >
                                ................................DEPARTURE....................................</td>
                               </tr>
                               <tr>
                                <td  id='titlelp' width='45%'>
                                  Trip: <strong>" . $toursbooking['service1'] . " - </strong> AD: <strong>". $toursbooking['adults'] ."</strong> ~ CHD: <strong>". $toursbooking['childs'] ."</strong>
                                </td>
                                <td id='titlelp' width='55%' colspan='2'>
                                  Departure Date: <strong>" . date('M-d-Y', strtotime($toursbooking['fecha_llegada']))  . "</strong>
                                </td>
                              </tr>
                              <tr>
                                <td id='titlelp'> 
                                </td>
                                <td colspan='2' id='titlelp'>  
                                    Departure Time: <strong>" . date('h:i ', strtotime($toursbooking['hora1']))  . "</strong>
                                   <!-- <br>
                                    Park name: <strong>". $namepark."</strong>-->
                                </td>
                              </tr>
                              
                              
                              <tr >
                              <td colspan='3' id='titlelp' style='color: #dc3545; font-weight: bold;font-size: 11px;' align='center' height='35' id='titlett2'  >
                              ................................RETURN....................................</td>
                             </tr>";
                              }
                            //   ////////////////////////////////////////////////////

                            if($toursbooking['sdeparture'] == 1){
                              $codigoHTML .= "<tr>
                                <td colspan='3' id='titlelp' height='1' style='background-color: #e6e6e6;'></td>
                              </tr>
                              <tr>
                                <td id='titlelp'>Trip: <strong>" . $toursbooking['trip2']. " - </strong> AD: <strong>". $toursbooking['adults'] ."</strong> ~ CHD: <strong>".$toursbooking['childs'] ."</strong></td>
                                <td id='titlelp' colspan='2'>
                                  Return Date: <strong>" . date('M-d-Y', strtotime($toursbooking['fecha_salida'])) . "</strong>
                                </td>
                              </tr>
                              <tr>
                                <td id='titlelp'>From: <strong>Orlando</strong></td>
                                <td id='titlelp' colspan='2'>
                                    Departure Location: <strong>" .$orlandoparadaysalida . "</strong>
                                </td>
                              </tr>
                              <tr>
                                <td id='titlelp' height='27'>To: <strong>" .  $_SESSION['area2'] . "</strong></td>
                                <td id='titlelp' colspan='2'>
                                    Drop Off: <strong>" . $place2 . "</strong>
                                </td>
                              </tr>";

                            }elseif($toursbooking['sdeparture'] == 2){

                                $codigoHTML .= "<tr>
                                  <td colspan='3' id='titlelp' height='1' style='background-color: #e6e6e6;'></td>
                                </tr>
                                <tr>
                                  <td id='titlelp'>Trip: <strong>VIP SELECCIONADO</strong></td>
  
                                </tr>
  
                                  </td>
                                </tr>";
                              }elseif($toursbooking['sdeparture'] == 3){

                                $codigoHTML .="<tr>
                                <td  id='titlelp' width='45%'>
                                  Trip: <strong>" . $toursbooking['service2'] . " - </strong> AD: <strong>". $toursbooking['adults'] ."</strong> ~ CHD: <strong>". $toursbooking['childs'] ."</strong>
                                </td>
                                <td id='titlelp' width='55%' colspan='2'>
                                  Departure Date: <strong>" . date('M-d-Y', strtotime($toursbooking['fecha_salida']))  . "</strong>
                                </td>
                              </tr>
                              <tr>
                                <td id='titlelp'>
                                  Airline: <strong>" . $toursbooking['airlinedeparture']. "</strong>
                                </td>
                                <td colspan='2' id='titlelp'>
                                  	Flight #: <strong>" . $toursbooking['flightdeparture'] . "
                                    </strong>
                                </td>
                              </tr>";
                              }elseif($toursbooking['sdeparture'] == 4){

                                $codigoHTML .= "                               
                                <tr>
                                <td  id='titlelp' width='45%'>
                                  Trip: <strong>" . $toursbooking['service2'] . " - </strong> AD: <strong>". $toursbooking['adults'] ."</strong> ~ CHD: <strong>". $toursbooking['childs'] ."</strong>
                                </td>
                                <td id='titlelp' width='55%' colspan='2'>
                                  Departure Date: <strong>" . date('M-d-Y', strtotime($toursbooking['fecha_salida']))  . "</strong>
                                </td>
                              </tr>
                              <tr>
                                <td id='titlelp'> 
                                </td>
                                <td colspan='2' id='titlelp'>  
                                    Departure Time: <strong>Remember the Hotel Check Out 11:30</strong>
                                   <!-- <br>
                                    Park name: <strong>". $namepark."</strong>-->
                                </td>
                              </tr>";
                              }

                              $codigoHTML .= "<!-- <tr>
                                <td colspan='3' id='titlelp' style='color: #dc3545; font-weight: bold;font-size: 11px;' align='center' height='35' id='titlett2'  >
                                  Please print and present this e-ticket to for boarding.
                                  <br/>
                                  Passenger needs to arrive at least " . $timeBRegreso ." minutes prior to departure.</td>
                              </tr>-->

                            </table>
                            <br/>
                          </td>
                        </tr>";


                        // if($toursbooking['sdeparture'] == 1){
                            $codigoHTML .=  "<tr>
                          <td colspan='4' align='center'>
                            <table width='99%' style='border: 1px solid #e6e6e6;background-color: #fdfdfd;' border='0' cellpadding='3' id='tableorder'>
                              <tr>
                                <td height='29' colspan='4' align='center'  id='titlett' style='font-size: 14px; font-weight: bold;'><strong>PURCHASE SUMMARY</strong></td>
                              </tr>
                              <tr>
                                <td id='titlelp'>&nbsp;</td>
                                <td id='titlelp' style='text-align: left; font-weight: bold;'>
                                  Passenger Traveling
                                </td>
                                <td id='titlelp' style='text-align: right; font-weight: bold;'>
                                  Fare Departure
                                </td>
                                <!--<td id='titlelp' style='text-align: right; font-weight: bold;'>
                                  Fare Return
                                </td>-->
                                <td id='titlelp' style='text-align: right; font-weight: bold;'>
                                  Total
                                </td>
                              </tr>
                             <tr>
                                <td id='titlelp' width='55%'>Multi Day Tours Adults</td>
                                <td id='titlelp' style='color: #2160a0' align='center' width='7%'><span style='font-weight: bold;'>" .$toursbooking['adults'] . "</span></td>
                                <td id='titlelp' style='color: #2160a0' align='right' width='13%'><span style='font-weight: bold;'>$ " . number_format($toursbooking['transporAdultIda'] + $toursbooking['transporAdultRetorno'],2) . " </span></td>

                                <!--<td id='titlelp' style='color: #2160a0' align='right' width='13%'><span style='font-weight: bold;'>$ ".$toursbooking['transporAdultRetorno'] ."</span></td>-->

                                <td id='titlelp' style='color: #2160a0' width='13%' align='right'><span style='font-weight: bold;'>$ " . number_format(($toursbooking['transporAdultIda']*$toursbooking['adults'] + $toursbooking['transporAdultRetorno']*$toursbooking['adults']),2) . "</span></td>
                              </tr>

                              <tr>
                                <td id='titlelp'>Multi Day Tours Children (3-9 Years)</td>
                                <td id='titlelp' style='color: #2160a0' align='center'><span style='font-weight: bold;'>" . $toursbooking['childs'] . "</span></td>
                                <!--<td id='titlelp' style='color: #2160a0' align='right'><span style='font-weight: bold;'>$ " . $farechild ."</span></td>-->
                                <td id='titlelp' style='color: #2160a0' align='right'><span style='font-weight: bold;'>$ ".$farechild2."</span></td>
                                <td id='titlelp' style='color: #2160a0' align='right'><span style='font-weight: bold;'>$ " . number_format(($farechild2*$toursbooking['childs'] ),2) . "</span></td>
                              </tr>

                              <tr id='titlelp'>
                                <td id='titlell' colspan='3' style='border-right: 1px solid #e6e6e6;border-bottom: 1px solid #2160a0;'> Total Amount Hotel </td>
                                
                                <td id='titlelp' style='color: #2160a0; border-bottom: 1px solid #2160a0;' align='right'><span style='font-weight: bold;'>$ "  . number_format($toursbooking['total_a_pagar'], 2, '.', '') . "</span></td>
                              </tr>
                              
                              ".$parque."
                              <tr id='titlelp'>
                                <td id='titlell' colspan='3' style='border-right: 1px solid #e6e6e6;border-bottom: 1px solid #2160a0;'> Service Fee </td>
                                <td id='titlelp' style='color: #2160a0; border-bottom: 1px solid #2160a0;' align='right'><span style='font-weight: bold;'>$ "  . number_format($toursbooking['totaltours']*0.04, 2, '.', '') . "</span></td>
                              </tr>
                              <tr>
                                <td id='titlelr'>&nbsp;</td>
                                <td  id='titlelr' align='center' colspan='2'><span style='font-weight: bold;'>Total Amount Paid</span></td>
                                <td id='titlelr' align='right'><span style='font-weight: bold;'>$  " .number_format($toursbooking['totaltours']+($toursbooking['totaltours']*0.04),2) . " </span></td>
                              </tr>
                            </table>
                            <br>
                          </td>
                        </tr>";

                    // }elseif($toursbooking['sdeparture'] == 2){
                    
                    // }elseif($toursbooking['sdeparture'] == 3){
                    
                    // }elseif($toursbooking['sdeparture'] == 4){
                    
                    // }

                        $codigoHTML .= "<tr>
                            <td colspan='4' align='center'>
                                <table width='99%' style='border: 1px solid #e6e6e6;background-color: #fdfdfd;' border='0' cellpadding='3' id='tableorder'>
                                          <tr>
                                            <td width='20%' id='titlett'>
                                            &nbsp;
                                            </td>
                                            <td width='60%' height='29' colspan='4' align='center'  id='titlett' style='font-size: 14px; font-weight: bold;padding-top: 10px;padding-bottom: 10px;'>
                                                <span style='font-size: 9px;color: black; font-weight: bold;'>Non-Refundable - Non-Transferable - No Schedule Changes Permitted <br>
                                                No pets allowed on board - luggage restrictions apply 1 Bag per person. <br>
                                                Please read additional terms <a href='http://www.supertours.com'>www.supertours.com</a><br>
                                                Have a SUPER trip!<br />
                                                <br/>
                                                SUPER TOURS OF ORLANDO, Inc.<br>
                                                5419 International Drive, Orlando Fl, 32819<br>
                                                Phone: (407) 370-3001 / Toll Free 800-251-4206 / e-mail: reservations@supertours.com
                                              </span>
                                            </td>
                                            <td width='20%' id='titlett' align='center'>
                                                <img src='https://www.supertours.com/codigo.png' width='72' height='72' />
                                            </td>
                                          </tr>
                                </table>
                                <br>
                            </td>
                       </tr>
                    </table>
                </body>
            </html>";
            $codigoHTML = mb_convert_encoding($codigoHTML, 'HTML-ENTITIES', 'UTF-8');
            $pdf = new DooPDF(''.$_SESSION['codconf'].'', $codigoHTML, false, 'letter', 'letter');
            $pdf->doPDF();
        try{
            $mail->MsgHTML($codigoHTML);
            $mail->addAttachment('PDF-E-T/E-TICKET-'.$_SESSION['codconf'].'.pdf');
            //$mail->addAttachment('PDF-E-T/', 'E-TICKET-'.$booking['codconf'].'.pdf');
            $mail->Send();
        } catch (phpmailerException $e) {
            echo $e->errorMessage(); //Errores de PhpMailer
        } catch (Exception $e) {
            echo $e->getMessage(); //Errores de cualquier otra cosa.
        }
            

    //     echo '<pre>';
    //     print_r($_SESSION);
    //     echo '</pre>';

    //    echo '<pre>';        
    //    print_r($codigoHTML);
    //    echo '</pre>';
    //    die;

    }

    public function MandarCorreo() {
        $mail = new PHPMailer();
        $mail->Mailer = 'smtp';
        $mail->Host = 'smtpout.secureserver.net';
        $mail->SMTPAuth = true;
        $mail->IsHTML(true);
        $mail->Username = 'prodownloadall@gmail.com';
        $mail->Password = 'Henry123';
        $mail->From = 'no_reply@supertours.com';
        $mail->FromName = 'Supertours Of Orlando';
        $mail->AddAddress("hezampo@gmail.com");
        $mail->Subject = "Prueba de phpmailer";
        $mail->Body = "<b>Mensaje de prueba mandado con phpmailer en formato html</b>";
        $exito = $mail->Send();
        if (!$exito) {
            //echo "Problemas enviando correo electrónico a " . $valor;
            echo "<br/>" . $mail->ErrorInfo;
        } else {
            echo "Mensaje enviado correctamente";
        }
    }

    public function diasnoches() {
        $fecha_salida = $this->params ['fecharri'];
        $fecha_retorno = $this->params ['fechadepar'];
        list ($mes, $dia, $anyo) = explode("-", $fecha_salida);

        $llegada = $anyo . "-" . $mes . "-" . $dia;

        if (isset($fecha_retorno)) {
            list ($mes2, $dia2, $anyo2) = explode("-", $fecha_retorno);
            $salida = $anyo2 . "-" . $mes2 . "-" . $dia2;
        }
        $f0 = strtotime($llegada);
        $f1 = strtotime($salida);
        $resultado = ($f1 - $f0);
        $resultado = $resultado / 60 / 60 / 24;
        $resultado = round($resultado);
        $dias = ($resultado + 1 > 0) ? $resultado + 1 : '';
        $noches = ($resultado + 1 > 0) ? $dias - 1 : '';

        echo " <script>$('#dias').html('$dias');
        $('#noches').html('$noches');</script>";
    }

    public function arrival() {
        $fecha = $this->params ['fecha'];
        $tipo = $this->params ['tipo'];
        list ($mes, $dia, $anyo) = explode("-", $fecha);

        $fecha = $anyo . "-" . $mes . "-" . $dia;
        $_SESSION['formaviaje'] = $tipo;
        echo $tipo;
        if ($tipo == 0) {
            echo "<script>$('#arrival0').html('Arrival Date: ');
	$('#arrival1').html('" . date('l', strtotime($fecha)) . "," . date('M', strtotime($fecha)) . " " . date('d', strtotime($fecha)) . ", " . date('Y', strtotime($fecha)) . "');
	$('#arrival2').html('Arriving: ');$('#arrival3').html('by SUPER TOURS BUS from Miami ');
	</script>";
        } elseif ($tipo == 1) {
            echo "<script>$('#departure0').html('Departure Date: ');
	$('#departure1').html('" . date('l', strtotime($fecha)) . "," . date('M', strtotime($fecha)) . " " . date('d', strtotime($fecha)) . ", " . date('Y', strtotime($fecha)) . "');
	$('#departure2').html('Departure: ');$('#departure3').html('by SUPER TOURS BUS to Miami ');
	</script>";
        } elseif ($tipo == 2) {
            echo "<script>$('#arrival0').html('Arrival Date: ');
	$('#arrival1').html('" . date('l', strtotime($fecha)) . "," . date('M', strtotime($fecha)) . " " . date('d', strtotime($fecha)) . ", " . date('Y', strtotime($fecha)) . "');
	$('#arrival2').html('Arriving: ');$('#arrival3').html('by Super Tours Vip');
	</script>";
        } elseif ($tipo == 3) {
            echo "<script>$('#departure0').html('Departure Date: ');
	$('#departure1').html('" . date('l', strtotime($fecha)) . "," . date('M', strtotime($fecha)) . " " . date('d', strtotime($fecha)) . ", " . date('Y', strtotime($fecha)) . "');
	$('#departure2').html('Departure: ');$('#departure3').html('by Super Tours Vip');
	</script>";
        } elseif ($tipo == 4) {
            echo "<script>$('#arrival0').html('Arrival Date: ');
	$('#arrival1').html('" . date('l', strtotime($fecha)) . "," . date('M', strtotime($fecha)) . " " . date('d', strtotime($fecha)) . ", " . date('Y', strtotime($fecha)) . "');
	$('#arrival2').html('Arriving: ');$('#arrival3').html('by Airport ');
	</script>";
        } elseif ($tipo == 5) {
            echo "<script>$('#departure0').html('Departure Date: ');
	$('#departure1').html('" . date('l', strtotime($fecha)) . "," . date('M', strtotime($fecha)) . " " . date('d', strtotime($fecha)) . ", " . date('Y', strtotime($fecha)) . "');
	$('#departure2').html('Departure: ');$('#departure3').html('by Airport ');
	</script>";
        } elseif ($tipo == 6) {
            echo "<script>$('#arrival0').html('Arrival Date: ');
	$('#arrival1').html('" . date('l', strtotime($fecha)) . "," . date('M', strtotime($fecha)) . " " . date('d', strtotime($fecha)) . ", " . date('Y', strtotime($fecha)) . "');
	$('#arrival2').html('Arriving: ');$('#arrival3').html('By Car');
	</script>";
        } elseif ($tipo == 7) {
            echo "<script>$('#departure0').html('Departure Date: ');
	$('#departure1').html('" . date('l', strtotime($fecha)) . "," . date('M', strtotime($fecha)) . " " . date('d', strtotime($fecha)) . ", " . date('Y', strtotime($fecha)) . "');
	$('#departure2').html('Departure: ');$('#departure3').html('By Car ');
	</script>";
        } elseif ($tipo == 8) {
            echo "<script>$('#arrival0').html('Arrival Date: ');
	$('#arrival1').html('" . date('l', strtotime($fecha)) . "," . date('M', strtotime($fecha)) . " " . date('d', strtotime($fecha)) . ", " . date('Y', strtotime($fecha)) . "');
	$('#arrival2').html('Arriving: ');$('#arrival3').html('Super Tours Vip');
	</script>";
        } elseif ($tipo == 9) {
            echo "<script>$('#departure0').html('Departure Date: ');
	$('#departure1').html('" . date('l', strtotime($fecha)) . "," . date('M', strtotime($fecha)) . " " . date('d', strtotime($fecha)) . ", " . date('Y', strtotime($fecha)) . "');
	$('#departure2').html('Departure: ');$('#departure3').html('Super Tours Vip ');
	</script>";
        }
    }

    public function area() {

        if (isset($_SESSION['data_agency'])) {
            Doo::loadModel("Agency");
            $dat = new Agency($_SESSION['data_agency']);
        } else {
            Doo::loadModel("Agency");
            $dat = new Agency();
            $dat->id = -1;
        }
        //Tipo de pickup_dropoff;
        if ($dat->id == -1) {
            $type_web = 1;
        } else {
            $type_web = 0;
        }
        $id = $this->params ['id'];
        //echo 'trip => '.$this->params["trip_no"];
        if (isset($this->params["trip_no"])) {
            $trip_no = $this->params["trip_no"];
            if ($trip_no % 2 == 0) {
                $sql = "SELECT DISTINCT t2.id as trip_to,
                                        t2.nombre
                        FROM routes t1
                        LEFT JOIN areas t2 ON (t1.trip_to = t2.id )
                        WHERE t1.type_rate = 0
                          AND t1.trip_from = 1
                          AND t1.trip_no = ?";
            } else {
                $sql = "SELECT DISTINCT t2.id as trip_to,
                                        t2.nombre
                        FROM routes t1
                        LEFT JOIN areas t2 ON (t1.trip_from = t2.id )
                        WHERE t1.type_rate = 0
                          AND t1.trip_to = 1
                          AND t1.trip_no = ?";
            }
        } else {
            $trip_no = 0;
            $sql = "SELECT DISTINCT t1.trip_to, t2.nombre  FROM routes t1
                LEFT JOIN areas t2 ON (t1.trip_to = t2.id)
                WHERE t1.type_rate = 0  and t1.trip_from = 1";
        }

//        $sql = "SELECT DISTINCT t1.trip_to, t2.nombre  FROM routes t1
//                LEFT JOIN areas t2 ON (t1.trip_to = t2.id)
//                WHERE t1.type_rate = 0  AND t1.trip_no = ?";onedaytour_one
        /*  */
        $trippss = (isset($this->params["trip_no"]))? 'AND trip'.$this->params["trip_no"].' = 1' : NULL ;
        $sql2 = "SELECT id,place,address FROM pickup_dropoff WHERE id_area = ?  AND (SELECT FIND_IN_SET('2', type_pick)) > 0 $trippss AND active_web = 1 ORDER BY posicion ASC";
        if ($id == 0) {
            unset($_SESSION['areaSelect']);
        }
        if (isset($this->params["trip_no"])) {
            $rs = Doo::db()->query($sql, array($trip_no));
        } else {
            $rs = Doo::db()->query($sql);
        }
        $areas = $rs->fetchAll();
        
        $id_area_pick = (isset($_SESSION['areaSelect']) ? $_SESSION['areaSelect'] : 0);
        $rs2 = Doo::db()->query($sql2, array(
            $id_area_pick
        ));
        $rs3 = Doo::db()->query($sql2, array(
            1
        ));
        $pickupdropof = $rs2->fetchAll();

        $pikuporlando = $rs3->fetchAll();
        if ($id == 0) {
            unset($_SESSION['areaSelect']);
            echo '<script> $("#conte").css("display", "none");$("#pickups").css("display", "block"); </script>';
            
            // $back = "<div id='regreso'>
            // <a href='#' id='back2' style='background-color: #4CAF50;color: white;border: 1px solid #4CAF50;padding: 8px 16px;'>Back to trip</a>
            // </div>";
            echo '<button type="button" class="btn btn-primary btn-lg btn-block" style="border-radius: 0px;" id="backtoarea">BACK</button>';
            echo "<td style='text-align: right;'>" . $back . "</td>";
                    echo '<script>    
                    $("#backtoarea").click(function(){
                        $("#conte").empty().html("<img src='.$url.'global/images/loading.gif   width=300px height=250 id=gif/>");
                        // $("#conte").empty().html("LOADING");
                        var l = url+"tours/question18/'.$id.'/'.$id2.'/'.$id3.'/'.$id4.'/'.$corte.'/'.$paxs.'/0" ;
                        //alert(l);
                        $("#conte").load(l);
                    })
                    </script>';
            $url = Doo::conf()->APP_URL;

            echo '<script>
	
$("#area").change(function() {			

	var id = $(this).val();	 
	var idArea =  id;
	$("#area2").attr("value",id);
				
	$("#pickup").load("' . $url . 'tours/question15/" + id );
	$("#pickup2").load("' . $url . 'tours/question15/" + id );
			
});

	$("#pickup").change(function() {			
		var id = $(this).val();	  
		$("#pickup2").attr("value",id);
	});

$("#back").click(function() {


  $(".trip1:radio").attr("checked", false);
  $("#pickups").css("display", "none");
  $("#conte").css("display", "block");
  $("#tr2").html("");
  soltartrip(2);
  return false;
   
});

</script>';
        } else {
            echo '<script>$("#conte2").css("display", "none");
            $("#pickups2").css("display", "block"); </script>';
            // ////////////
            echo "<table width='100%' border='0' cellspacing='1' aling='center'>
  <tr>
    <td style='text-align: left;'><b>Area:</b></td>
    <td>";
            $idA1 = isset($_SESSION['areaSelect']) ? $_SESSION['areaSelect'] : 0;
            echo "<select name='area2' id='area2' class='form-control1 form-control form-control-sm' style='border-radius: 0px;background: #fff;'>";
            echo '<option value="0"  >choose..</option>';
            foreach ($areas as $e) {
                if ($idA1 == $e ['trip_to']) {
                    $select = 'selected';
                } else {
                    $select = '';
                }
                echo '<option value="' . $e ['trip_to'] . '" ' . $select . ' >' . $e ['nombre'] . '</option>';
            }

            echo "</select>";
            echo "</td>
                  </tr>
                  <!--tr>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                  </tr-->
                  <!--tr>
                    <td>Pickup Point:</td>
                    <td>";
            echo "<select name='pickup2' id='pickup' class='form-control1 form-control form-control-sm' style='border-radius: 0px;background: #fff;'>";
            
            foreach ($pikuporlando as $e) {
                echo '<option value="' . $e ['id'] . '"  >' . $e ['place'] . '  ' . $e ['address'] . '</option>';
            }
            echo "</select>";
            echo "</td>
  </tr-->
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td style='text-align: left;'><b>Drop Off Point:</b></td>
    <td>";

            // gropoff area escogida
            echo "<select name='pickup2' id='pickup2' class='form-control1 form-control form-control-sm' style='border-radius: 0px;background: #fff;'>";
            echo '<option value="0"  >Wait For the area</option>';
            foreach ($pickupdropof as $e) {
                echo '<option value="' . $e ['id'] . '"  >' . $e ['place'] . '  ' . $e ['address'] . '</option>';
            }
            $back = "<div id='regreso'>
            <a href='#' id='back2' style='background-color: #4CAF50;color: white;border: 1px solid #4CAF50;padding: 8px 16px;'>Back to trip</a>
            </div>";

            echo "</select>";
            echo "</td>
                <tr>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                  </tr>
                  
                  <tr>
                    <td>&nbsp;</td>
                    <td style='text-align: right;'>" . $back . "</td>
                  </tr>
                </table>";

            $url = Doo::conf()->APP_URL;
            echo '<script>
			$("#area2").change(function() {
			
			    var id = $(this).val();
			   $("#pickup2").load("' . $url . 'tours/question15/" + id );
			
			});

$("#back2").click(function() {
  $(".trip2:radio").attr("checked", false); 
  $("#pickups2").css("display", "none");
  $("#conte2").css("display", "block");
  $("#tr1").html("");
  soltartrip(1)
  return false;
  
});
</script>';
        }
    }

    public function idArea() {
        // $id = $this->params ['id'];	
        // $sql = "SELECT id,nombre FROM programacion
        // WHERE id = ?";
        // $rs = Doo::db()->query($sql, array(
        // $id
        // ));
        // $pickupdropof = $rs->fetchAll();
        // foreach ($pickupdropof as $e) {
        // }
    }

    public function exten() {
        $id = $this->params ['id'];
        //echo '<script type="text/javascript">alert('.$id.');</script>';
        if (isset($this->params ['num'])) {
            $num = $this->params ['num'];
        } else {
            $num = '';
        }
        if (isset($_SESSION['data_agency'])) {
            Doo::loadModel("Agency");
            $dat = new Agency($_SESSION['data_agency']);
        } else {
            Doo::loadModel("Agency");
            $dat = new Agency();
            $dat->id = -1;
        }
        //Tipo de pickup_dropoff;
        if ($dat->id == -1) {
            $type_web = 1;
        } else {
            $type_web = 0;
        }
        $sql = "SELECT id,place,address FROM pickup_dropoff WHERE id_area = ?  AND (SELECT FIND_IN_SET('2', type_pick)) > 0 AND trip301 = 1 AND trip300 = 1 AND active_web = 1 ";
        if ($num == '') {
            $_SESSION['areaSelect'] = $id;
        }
        $rs = Doo::db()->query($sql, array(
            $id
        ));
        $pickupdropof = $rs->fetchAll();
        // print_r($id);
        // die;
        echo "<select class='form-control1 form-control form-control-sm input-areas' name='pickup" . $num . "' id='pickup" . $num . "' style='background: #fff;border-radius: 0px;text-align: center;' >";
     
        if($id != 0){
            
            //echo '<option value="0">Wait For Departure Area...</option>';
        foreach ($pickupdropof as $e) {
            echo '<option value="' . $e ['id'] . '"  selected>' . $e ['place'] . '  ' . $e ['address'] . '</option>';
        }
        echo "</select>";
        }else{
            

       echo '<option value="0">Wait For Departure Area...</option>';

        echo "</select>";
        }
    }

    public function comentarioHotelOcupado() {
        //Validando si el hotel esta disponible
        $toursbooking = $_SESSION['toursbooking'];
        $fecha_llegada = strtotime($toursbooking ['fecha_llegada']);
        $fecha_salida = strtotime($toursbooking ['fecha_salida']);
        $valornoche = $toursbooking['totalhotel'] / $toursbooking['noches'];
        $hotel = $toursbooking['id_hotel'];
        $sqlHotel = "SELECT hoteles.id,codigo,categoria,nombre,address,city,zipcode,contacname,phone,email,webpage,breakfast,resoftfe,description,image1,ratesblock.fecha_ini,ratesblock.fecha_fin
					        FROM hoteles INNER JOIN ratesblock 
						ON (hoteles.id = ratesblock.id_hotel and ((ratesblock.fecha_ini BETWEEN $fecha_llegada AND $fecha_salida) OR (ratesblock.fecha_fin BETWEEN $fecha_llegada AND $fecha_salida)
                                                OR (($fecha_llegada BETWEEN ratesblock.fecha_ini AND ratesblock.fecha_fin ) OR ($fecha_salida BETWEEN ratesblock.fecha_ini AND ratesblock.fecha_fin ))     
                                                )
						AND hoteles.id = " . $hotel . ")";

        $rs1 = Doo::db()->query($sqlHotel) or die('error');

        $valdHotel = $rs1->fetch();
        if (!empty($valdHotel)) {
            $comments = 'For this client must book a hotel similar to ' . $valdHotel['nombre'] . ' of category ' . $valdHotel['categoria'] . ', ' . date('M-d-y', $fecha_llegada) . ' to ' . date('M-d-y', $fecha_salida) . ' by the cost of $ ' . number_format($valornoche, 2, '.', '.') . ' for day.';
            $_SESSION['toursbooking']['comments'] = $comments;
        } else {
            $_SESSION['toursbooking']['comments'] = '';
        }
        //FIN Validacion Hotel
    }

    public function hotelajax() {
        extract($_POST, EXTR_SKIP);
        Doo::loadModel("Agency");
        if (isset($_SESSION['data_agency'])) {
            $dat = new Agency($_SESSION['data_agency']);
            $net_rate = ($dat->type_rate == 1) ? true : false;
        } else {
            $dat = new Agency();
            $net_rate = false;
            $dat->type_rate = 0;
            $dat->id = -1;
        }
        echo '<script type="text/javascript">alert("' . $_POST['hotel'] . '");</script>';
        $this->seguridad();
        $fecha = new DateTime();
        $fecha_fin = new DateTime();
        $toursbooking = $_SESSION ["toursbooking"];
        $fecha->setTimestamp(strtotime($toursbooking['fecha_llegada']));

        $fecha2 = new DateTime();
        $fecha2->setTimestamp(strtotime($toursbooking['fecha_llegada']));

        $fecha3 = new DateTime();
        $fecha3->setTimestamp(strtotime($toursbooking['fecha_llegada']));

        $fecha4 = new DateTime();
        $fecha4->setTimestamp(strtotime($toursbooking['fecha_llegada']));

        $fecha_fin->setTimestamp(strtotime($toursbooking['fecha_salida']));
        $tohotel = 0;
        $totaladult = $adult1 + $adult2 + $adult3 + $adult4;
        $totalchild = $child1 + $child2 + $child3 + $child4;
        $totalpax = $totaladult + $totalchild;
        $desayuno = 0;
        $totalhotel1 = 0;
        $totalhotel2 = 0;
        $totalhotel3 = 0;
        $totalhotel4 = 0;
        //Validamos la capacidad de los trip
        Doo::loadController('MainController');
        $main = new MainController();
        $valCapacidad = true;
        if (isset($toursbooking['trip1']) && isset($toursbooking['trip2'])) {
            $disponible1 = $main->disponible($toursbooking['trip1'], $toursbooking['fecha_llegada']);
            $disponible2 = $main->disponible($toursbooking['trip2'], $toursbooking['fecha_salida']);
            if ($disponible1 < $totalpax) {
                $txtC = 'Total passenger traffic <strong>(' . $totalpax . ')</strong> exceeds available seats <strong>(' . $disponible1 . ')</strong> of the trip output  <strong>' . $toursbooking['trip1'] . '</strong> for the <strong>' . date('M-d-Y', strtotime($toursbooking['fecha_llegada'])) . '</strong>';
                $valCapacidad = false;
            } else if ($disponible2 < $totalpax) {
                $txtC = 'Total passenger traffic <strong>(' . $totalpax . ')</strong> exceeds available seats <strong>(' . $disponible2 . ')</strong> of the trip output  <strong>' . $toursbooking['trip2'] . '</strong> for the <strong>' . date('M-d-Y', strtotime($toursbooking['fecha_salida'])) . '</strong>';
                $valCapacidad = false;
            }
        } else if (isset($toursbooking['trip1'])) {
            $disponible1 = $main->disponible($toursbooking['trip1'], $toursbooking['fecha_llegada']);
            if ($disponible1 < $totalpax) {
                $txtC = 'Total passenger traffic <strong>(' . $totalpax . ')</strong> exceeds available seats <strong>(' . $disponible1 . ')</strong> of the trip output  <strong>' . $toursbooking['trip1'] . '</strong> for the <strong>' . date('M-d-Y', strtotime($toursbooking['fecha_llegada'])) . '</strong>';
                $valCapacidad = false;
            }
        } else if (isset($toursbooking['trip2'])) {
            $disponible2 = $main->disponible($toursbooking['trip2'], $toursbooking['fecha_salida']);
            if ($disponible2 < $totalpax) {
                $txtC = 'Total passenger traffic <strong>(' . $totalpax . ')</strong> exceeds available seats <strong>(' . $disponible2 . ')</strong> of the trip output  <strong>' . $toursbooking['trip2'] . '</strong> for the <strong>' . date('M-d-Y', strtotime($toursbooking['fecha_salida'])) . '</strong>';
                $valCapacidad = false;
            }
        }
        if (isset($toursbooking ['sarrival'])) {
            if ($toursbooking ['sarrival'] == 2) {
                if ($totalpax > 14) {
                    $txtC = 'Total passenger traffic <strong>(' . $totalpax . ')</strong> exceeds available seats <strong>(14)</strong> of the trip output  <strong>' . $toursbooking['trip2'] . '</strong> for the <strong>' . date('M-d-Y', strtotime($toursbooking['fecha_salida'])) . '</strong>';
                    $valCapacidad = false;
                }
            } else if ($toursbooking ['sarrival'] == 3) {
                if ($totalpax > 14) {
                    $txtC = 'Total passenger traffic <strong>(' . $totalpax . ')</strong> exceeds available seats <strong>(14)</strong> of the trip output  <strong>' . $toursbooking['trip2'] . '</strong> for the <strong>' . date('M-d-Y', strtotime($toursbooking['fecha_salida'])) . '</strong>';
                    $valCapacidad = false;
                }
            }
        }
        if (isset($toursbooking ['sdeparture'])) {
            if ($toursbooking ['sdeparture'] == 2) {
                if ($totalpax > 14) {
                    $txtC = 'Total passenger traffic <strong>(' . $totalpax . ')</strong> exceeds available seats <strong>(14)</strong> of the trip output  <strong>' . $toursbooking['trip2'] . '</strong> for the <strong>' . date('M-d-Y', strtotime($toursbooking['fecha_salida'])) . '</strong>';
                    $valCapacidad = false;
                }
            } else if ($toursbooking ['sdeparture'] == 3) {
                if ($totalpax > 14) {
                    $txtC = 'Total passenger traffic <strong>(' . $totalpax . ')</strong> exceeds available seats <strong>(14)</strong> of the trip output  <strong>' . $toursbooking['trip2'] . '</strong> for the <strong>' . date('M-d-Y', strtotime($toursbooking['fecha_salida'])) . '</strong>';
                    $valCapacidad = false;
                }
            }
        }

        if (!$valCapacidad) {
            echo '<script>
				function quitarSelecionHotel(){
				 num = $(".btns").length;
				 for(var i = 0; i<num; i++){
					 if($(".btns").get(i).checked){
						 var id = $(".btns").get(i).id
						 var label = "label:[for="+$("#"+id).attr("id")+"]";
						 $(label).removeClass("ui-state-active");
						 $(label).find("span").html("ADD TO TOUR");
						 $(".clean").html("");
					 }
				 }
			 }
			$("#capacidad").dialog({
					modal: true,
					width: 400,
					resizable: false,
					buttons: {
						Ok: function() {
							$( this ).dialog( "close" );
						}
					}
			});
			$("#txtCapacidad").html("' . $txtC . '");	
			quitarSelecionHotel();
			</script>';
            return;
        }

        $_SESSION ["toursbooking"]['adult_r1'] = $adult1;
        $_SESSION ["toursbooking"]['adult_r2'] = $adult2;
        $_SESSION ["toursbooking"]['adult_r3'] = $adult3;
        $_SESSION ["toursbooking"]['adult_r4'] = $adult4;
        $_SESSION ["toursbooking"]['child_r1'] = $child1;
        $_SESSION ["toursbooking"]['child_r2'] = $child2;
        $_SESSION ["toursbooking"]['child_r3'] = $child3;
        $_SESSION ["toursbooking"]['child_r4'] = $child4;
        $_SESSION ["toursbooking"]['id_hotel'] = $hotel;
        $toursbooking = $_SESSION ["toursbooking"];



        /* print_r(Doo::db()->showSQL());
          exit; */
        $desayuno1 = 0;
        $desayuno2 = 0;
        $desayuno3 = 0;
        $desayuno4 = 0;
        if (isset($adult1)) {
            while ($fecha->format("Y-m-d") < $fecha_fin->format("Y-m-d")) {

                //$fec = strtotime($toursbooking ['fecha_llegada']);//$fecha->getTimestamp();
                $fec = $fecha->getTimestamp();
                if ($dat->type_rate == 0) {

                    $sql = 'SELECT t1.id,t1.breakfast,t1.super_breakfast, t1.resoftfe,t1.nombre,t3.sgl,t3.dbl,t3.tpl,t3.qua,t3.breackfast, t1.categoria
			 		FROM hoteles t1	
						LEFT JOIN comifijas t3 ON (t1.id = t3.id_hotel 
								AND t3.comtax = 1 
								AND t3.fecha_ini <= ' . $fec . ' 
								AND t3.fecha_fin  >= ' . $fec . ')
					WHERE t3.id_hotel  = ' . $hotel . '';
                } else {
                    $sql = 'SELECT t1.id,t1.breakfast,t1.super_breakfast ,t1.resoftfe,t1.nombre,t3.sgl,t3.dbl,t3.tpl,t3.qua,t3.breackfast, t1.categoria
			 		FROM hoteles t1	
						LEFT JOIN comifijas t3 ON (t1.id = t3.id_hotel 
								AND t3.netax = 1 
								AND t3.fecha_ini <= ' . $fec . ' 
								AND t3.fecha_fin  >= ' . $fec . ')
				    	WHERE t3.id_hotel  = ' . $hotel . '';
                }
                $rs = Doo::db()->query($sql);
                $costohotel = $rs->fetch();
                if (empty($costohotel)) {
                    echo ' <script>$("input[type=\'checkbox\'").attr("checked",false).change();
                            $( "#dialog-message-t" ).dialog({
                                modal: true,
                                buttons: {
                                    Ok: function() {
                                        $( this ).dialog( "close" );
                                    }
                                }
                            });</script>
                     ';
                    exit;
                }
                if ($adult1 == 1) {
                    $totalhotel1v += $costohotel ['sgl'];
                }
                if ($adult1 == 2) {
                    $totalhotel1v += $costohotel ['dbl'];
                }
                if ($adult1 == 3) {
                    $totalhotel1v += $costohotel ['tpl'];
                }
                if ($adult1 == 4) {
                    $totalhotel1v += $costohotel ['qua'];
                }
                if ($costohotel['super_breakfast'] == 1) {
                    $desayuno1 += ($costohotel ['breackfast']);
                } else {
                    $desayuno1 += 0;
                    $breakfast = 0;
                }

                date_add($fecha, date_interval_create_from_date_string('1 days'));
            }

            $totalhotel1 = (round($totalhotel1v) * $adult1);
            $desayuno1 = $desayuno1 * $adult1;
        } else {
            $totalhotel1 = 0;
        }
        // /room # 2
        if (isset($adult2)) {

            while ($fecha2->format("Y-m-d") < $fecha_fin->format("Y-m-d")) {

                //$fec = strtotime($toursbooking ['fecha_llegada']);//$fecha->getTimestamp();
                $fec = $fecha2->getTimestamp();
                if ($dat->type_rate == 0) {

                    $sql = 'SELECT t1.id,t1.breakfast,t1.super_breakfast, t1.resoftfe,t1.nombre,t3.sgl,t3.dbl,t3.tpl,t3.qua,t3.breackfast, t1.categoria
			 		FROM hoteles t1	
						LEFT JOIN comifijas t3 ON (t1.id = t3.id_hotel 
								AND t3.comtax = 1 
								AND t3.fecha_ini <= ' . $fec . ' 
								AND t3.fecha_fin  >= ' . $fec . ')
					WHERE t3.id_hotel  = ' . $hotel . '';
                } else {
                    $sql = 'SELECT t1.id,t1.breakfast,t1.super_breakfast ,t1.resoftfe,t1.nombre,t3.sgl,t3.dbl,t3.tpl,t3.qua,t3.breackfast, t1.categoria
			 		FROM hoteles t1	
						LEFT JOIN comifijas t3 ON (t1.id = t3.id_hotel 
								AND t3.netax = 1 
								AND t3.fecha_ini <= ' . $fec . ' 
								AND t3.fecha_fin  >= ' . $fec . ')
				    	WHERE t3.id_hotel  = ' . $hotel . '';
                }
                $rs = Doo::db()->query($sql);
                $costohotel = $rs->fetch();
                if (empty($costohotel)) {
                    echo ' <script>$("input[type=\'checkbox\'").attr("checked",false).change();
                            $( "#dialog-message-t" ).dialog({
                                modal: true,
                                buttons: {
                                    Ok: function() {
                                        $( this ).dialog( "close" );
                                    }
                                }
                            });</script>
                     ';
                    exit;
                }

                if ($adult2 == 1) {

                    $totalhotel2v += $costohotel ['sgl'];
                }
                if ($adult2 == 2) {

                    $totalhotel2v += $costohotel ['dbl'];
                }
                if ($adult2 == 3) {

                    $totalhotel2v += $costohotel ['tpl'];
                }
                if ($adult2 == 4) {

                    $totalhotel2v += $costohotel ['qua'];
                }
                if ($adult2 == 0) {

                    $totalhotel2v = 0;
                }
                if (($costohotel['super_breakfast'] == 1)) {
                    $desayuno2 += ($costohotel ['breackfast'] );
                } else {
                    $desayuno2 += 0;
                    $breakfast = 0;
                }
                date_add($fecha2, date_interval_create_from_date_string('1 days'));
            }

            $totalhotel2 = round($totalhotel2v) * $adult2;
            $desayuno2 = $desayuno2 * $adult2;
        } else {
            $totalhotel2 = 0;
        }
        // /room # 3
        if (isset($adult3)) {
            while ($fecha3->format("Y-m-d") < $fecha_fin->format("Y-m-d")) {

                //$fec = strtotime($toursbooking ['fecha_llegada']);//$fecha->getTimestamp();
                $fec = $fecha3->getTimestamp();
                if ($dat->type_rate == 0) {

                    $sql = 'SELECT t1.id,t1.breakfast,t1.super_breakfast, t1.resoftfe,t1.nombre,t3.sgl,t3.dbl,t3.tpl,t3.qua,t3.breackfast, t1.categoria
			 		FROM hoteles t1	
						LEFT JOIN comifijas t3 ON (t1.id = t3.id_hotel 
								AND t3.comtax = 1 
								AND t3.fecha_ini <= ' . $fec . ' 
								AND t3.fecha_fin  >= ' . $fec . ')
					WHERE t3.id_hotel  = ' . $hotel . '';
                } else {
                    $sql = 'SELECT t1.id,t1.breakfast,t1.super_breakfast ,t1.resoftfe,t1.nombre,t3.sgl,t3.dbl,t3.tpl,t3.qua,t3.breackfast, t1.categoria
			 		FROM hoteles t1	
						LEFT JOIN comifijas t3 ON (t1.id = t3.id_hotel 
								AND t3.netax = 1 
								AND t3.fecha_ini <= ' . $fec . ' 
								AND t3.fecha_fin  >= ' . $fec . ')
				    	WHERE t3.id_hotel  = ' . $hotel . '';
                }
                $rs = Doo::db()->query($sql);
                $costohotel = $rs->fetch();
                if (empty($costohotel)) {
                    echo ' <script>$("input[type=\'checkbox\'").attr("checked",false).change();
                            $( "#dialog-message-t" ).dialog({
                                modal: true,
                                buttons: {
                                    Ok: function() {
                                        $( this ).dialog( "close" );
                                    }
                                }
                            });</script>
                     ';
                    exit;
                }

                if ($adult3 == 1) {

                    $totalhotel3v += $costohotel ['sgl'];
                }
                if ($adult3 == 2) {

                    $totalhotel3v += $costohotel ['dbl'];
                }
                if ($adult3 == 3) {

                    $totalhotel3v += $costohotel ['tpl'];
                }
                if ($adult3 == 4) {

                    $totalhotel3v += $costohotel ['qua'];
                }
                if ($adult3 == 0) {

                    $totalhotel3v = 0;
                }
                if (($costohotel['super_breakfast'] == 1)) {
                    $desayuno3 += ($costohotel ['breackfast'] );
                } else {
                    $desayuno3 += 0;
                    $breakfast = 0;
                }
                date_add($fecha3, date_interval_create_from_date_string('1 days'));
            }
            $totalhotel3 = (round($totalhotel3v) * $adult3);
            $desayuno3 = $desayuno3 * $adult3;
        } else {
            $totalhotel3 = 0;
        }
        // /room # 4
        if (isset($adult4)) {
            while ($fecha4->format("Y-m-d") < $fecha_fin->format("Y-m-d")) {

                //$fec = strtotime($toursbooking ['fecha_llegada']);//$fecha->getTimestamp();
                $fec = $fecha4->getTimestamp();
                if ($dat->type_rate == 0) {

                    $sql = 'SELECT t1.id,t1.breakfast,t1.super_breakfast, t1.resoftfe,t1.nombre,t3.sgl,t3.dbl,t3.tpl,t3.qua,t3.breackfast, t1.categoria
			 		FROM hoteles t1	
						LEFT JOIN comifijas t3 ON (t1.id = t3.id_hotel 
								AND t3.comtax = 1 
								AND t3.fecha_ini <= ' . $fec . ' 
								AND t3.fecha_fin  >= ' . $fec . ')
					WHERE t3.id_hotel  = ' . $hotel . '';
                } else {
                    $sql = 'SELECT t1.id,t1.breakfast,t1.super_breakfast ,t1.resoftfe,t1.nombre,t3.sgl,t3.dbl,t3.tpl,t3.qua,t3.breackfast, t1.categoria
			 		FROM hoteles t1	
						LEFT JOIN comifijas t3 ON (t1.id = t3.id_hotel 
								AND t3.netax = 1 
								AND t3.fecha_ini <= ' . $fec . ' 
								AND t3.fecha_fin  >= ' . $fec . ')
				    	WHERE t3.id_hotel  = ' . $hotel . '';
                }
                $rs = Doo::db()->query($sql);
                $costohotel = $rs->fetch();
                if (empty($costohotel)) {
                    echo ' <script>$("input[type=\'checkbox\'").attr("checked",false).change();
                            $( "#dialog-message-t" ).dialog({
                                modal: true,
                                buttons: {
                                    Ok: function() {
                                        $( this ).dialog( "close" );
                                    }
                                }
                            });</script>
                     ';
                    exit;
                }
                if ($adult4 == 1) {

                    $totalhotel4v += $costohotel ['sgl'];
                }
                if ($adult4 == 2) {

                    $totalhotel4v += $costohotel ['dbl'];
                }
                if ($adult4 == 3) {

                    $totalhotel4v += $costohotel ['tpl'];
                }
                if ($adult4 == 4) {

                    $totalhotel4v += $costohotel ['qua'];
                }
                if ($adult4 == 0) {

                    $totalhotel4v = 0;
                }
                if ($costohotel ['breakfast'] == 0 && ($costohotel['super_breakfast'] == 1)) {
                    $desayuno4 += ($costohotel ['breackfast'] );
                } else {
                    $desayuno4 += 0;
                    $breakfast = 0;
                }
                date_add($fecha4, date_interval_create_from_date_string('1 days'));
            }
            $totalhotel4 = (round($totalhotel4v) * $adult4);
            $desayuno4 = $desayuno4 * $adult4;
        } else {
            $totalhotel4 = 0;
        }

        $desayuno = $desayuno1 + $desayuno2 + $desayuno3 + $desayuno4;



        //Todavia no se le suma el desayuno
        //$tohotel = $totalhotel1 + $totalhotel2 + $totalhotel3 + $totalhotel4+$desayuno;
        $tohotel = $totalhotel1 + $totalhotel2 + $totalhotel3 + $totalhotel4;


        $_SESSION['toursbooking']['trasport_total1'] = 0;
        $_SESSION['toursbooking']['trasport_total2'] = 0;


        #nuevas variables
        $_SESSION['toursbooking']['trasport_por_adult'] = 0;
        $_SESSION['toursbooking']['trasport_por_child'] = 0;

        if (isset($toursbooking ['trip1'])) {
            Doo::loadController('admin/ToursController');
            $toursOperador = new ToursController();
            $anio = substr($toursbooking['fecha_llegada'], 0, 4);

            $prices = $toursOperador->precioTripTours($toursbooking ['trip1'], $dat->type_rate, $dat->id, $anio);

            if (!empty($prices)) {
                $priceadult1 = $prices ['adult'] * $totaladult;
                $pricechild1 = $prices ['child'] * $totalchild;
                $trip1 = number_format($priceadult1, 2, '.', '') + number_format($pricechild1, 2, '.', '');
                $_SESSION['toursbooking']['trasport_total1'] = $trip1;
                $_SESSION['toursbooking']['trasport_por_adult'] = $priceadult1;
                $_SESSION['toursbooking']['trasport_por_child'] = $pricechild1;
            } else {
                $trip1 = 0;
                $priceadult1 = 0;
                $pricechild1 = 0;
            }
        } else {
            $trip1 = 0;
            $priceadult1 = 0;
            $pricechild1 = 0;
        }
        if (isset($toursbooking ['trip2'])) {
            Doo::loadController('admin/ToursController');
            $toursOperador = new ToursController();
            $anio = substr($toursbooking['fecha_salida'], 0, 4);
            $prices = $toursOperador->precioTripTours($toursbooking ['trip2'], $dat->type_rate, $dat->id, $anio);
            if (!empty($prices)) {
                $priceadult2 = $prices ['adult'] * $totaladult;
                $pricechild2 = $prices ['child'] * $totalchild;
                $trip2 = number_format($pricechild2, 2, '.', '') + number_format($priceadult2, 2, '.', '');
                $_SESSION['toursbooking']['trasport_total2'] = $trip2;

                $_SESSION['toursbooking']['trasport_por_adult'] = $_SESSION['toursbooking']['trasport_por_adult'] + $priceadult2;
                $_SESSION['toursbooking']['trasport_por_child'] = $_SESSION['toursbooking']['trasport_por_child'] + $pricechild2;
            } else {
                $trip2 = 0;
                $priceadult2 = 0;
                $pricechild2 = 0;
            }
        } else {
            $trip2 = 0;
            $priceadult2 = 0;
            $pricechild2 = 0;
        }

        /* echo json_encode($_SESSION['toursbooking']);
          exit; */

        if ($toursbooking ['sarrival'] == 2) {
            $fechal = substr($toursbooking['fecha_llegada'], 0, 4) . '-01-01 00:00:00';
            if ($dat->type_rate == 1) {// Se busca SpecialNet
                $sql = 'SELECT id,cantidad,price
				FROM tarifasvip 
				WHERE cantidad = ? 
					AND (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 )
					AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                $type = 2;
                $rs = Doo::db()->query($sql, array($totalpax, $type, $dat->id, $fechal));
                $pricesvip = $rs->fetch();

                if (empty($pricesvip)) {//Si no encuentra Buscamos Net.
                    $sql = 'SELECT id,cantidad,price
				FROM tarifasvip 
				WHERE cantidad = ? 
					AND (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 )
					AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                    $type = 1;
                    $rs = Doo::db()->query($sql, array($totalpax, $type, $dat->id, $fechal));
                    $pricesvip = $rs->fetch();
                }
            } else {
                $sql = 'SELECT id,cantidad,price
				FROM tarifasvip 
				WHERE cantidad = ? 
					AND (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 )
					AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                $rs = Doo::db()->query($sql, array($totalpax, $dat->type_rate, $dat->id, $fechal));
                $pricesvip = $rs->fetch();
            }

            if (!empty($pricesvip)) {
                $vip1 = number_format($pricesvip ['price'], 2, '.', '');
                $_SESSION['toursbooking']['trasport_total1'] = $vip1;
            }
        } else {
            $vip1 = 0;
        }

        if ($toursbooking ['sdeparture'] == 2) {
            $fechas = substr($toursbooking['fecha_salida'], 0, 4) . '-01-01 00:00:00';
            if ($dat->type_rate == 1) {// Se busca SpecialNet
                $sql = 'SELECT id,cantidad,price
				FROM tarifasvip 
				WHERE cantidad = ? 
					AND (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 )
					AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                $type = 2;
                $rs = Doo::db()->query($sql, array($totalpax, $type, $dat->id, $fechas));
                $pricesvip = $rs->fetch();

                if (empty($pricesvip)) {//Si no encuentra Buscamos Net.
                    $sql = 'SELECT id,cantidad,price
				FROM tarifasvip 
				WHERE cantidad = ? 
					AND (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 )
					AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                    $type = 1;
                    $rs = Doo::db()->query($sql, array($totalpax, $type, $dat->id, $fechas));
                    $pricesvip = $rs->fetch();
                }
            } else {
                $sql = 'SELECT id,cantidad,price
				FROM tarifasvip 
				WHERE cantidad = ? 
					AND (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 )
					AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                $rs = Doo::db()->query($sql, array($totalpax, $dat->type_rate, $dat->id, $fechas));
                $pricesvip = $rs->fetch();
            }

            if (!empty($pricesvip)) {
                $vip2 = number_format($pricesvip ['price'], 2, '.', '');
                $_SESSION['toursbooking']['trasport_total2'] = $vip2;
            }
        } else {
            $vip2 = 0;
        }

        /* if prices transfer in airport */
        if ($toursbooking ['sarrival'] == 3) {
            $fechal = substr($toursbooking['fecha_llegada'], 0, 4) . '-01-01 00:00:00';
            if ($dat->type_rate == 1) {// Se busca SpecialNet
                $sql = 'SELECT id,cantidad,price
				FROM tarifaplane 
				WHERE cantidad = ? 
					AND (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 ) 
                                        AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                $type = 2;
                $rs = Doo::db()->query($sql, array($totalpax, $type, $dat->id, $fechal));
                $pricesbyplane = $rs->fetch();

                if (empty($pricesbyplane)) {//Si no encuentra Buscamos Net.
                    $sql = 'SELECT id,cantidad,price
				FROM tarifaplane 
				WHERE cantidad = ? 
					AND (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 ) 
                                        AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                    $type = 1;
                    $rs = Doo::db()->query($sql, array($totalpax, $type, $dat->id, $fechal));
                    $pricesbyplane = $rs->fetch();
                }
            } else {
                $sql = 'SELECT id,cantidad,price
				FROM tarifaplane 
				WHERE cantidad = ? 
					AND (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 ) 
                                        AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                $rs = Doo::db()->query($sql, array($totalpax, $dat->type_rate, $dat->id, $fechal));
                $pricesbyplane = $rs->fetch();
            }

            if (!empty($pricesbyplane)) {
                $byplane1 = number_format($pricesbyplane ['price'], 2, '.', '');
                $_SESSION['toursbooking']['trasport_total1'] = $byplane1;
            }
        } else {
            $byplane1 = 0;
        }

        if ($toursbooking ['sdeparture'] == 3) {
            $fechas = substr($toursbooking['fecha_salida'], 0, 4) . '-01-01 00:00:00';
            if ($dat->type_rate == 1) {// Se busca SpecialNet
                $sql = 'SELECT id,cantidad,price
				FROM tarifaplane 
				WHERE cantidad = ? 
					AND (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 ) 
                                        AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                $type = 2;
                $rs = Doo::db()->query($sql, array($totalpax, $type, $dat->id, $fechas));
                $pricesbyplane = $rs->fetch();

                if (empty($pricesbyplane)) {//Si no encuentra Buscamos Net.
                    $sql = 'SELECT id,cantidad,price
				FROM tarifaplane 
				WHERE cantidad = ? 
					AND (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 ) 
                                        AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                    $type = 1;
                    $rs = Doo::db()->query($sql, array($totalpax, $type, $dat->id, $fechas));
                    $pricesbyplane = $rs->fetch();
                }
            } else {
                $sql = 'SELECT id,cantidad,price
				FROM tarifaplane 
				WHERE cantidad = ? 
					AND (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 ) 
                                        AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                $rs = Doo::db()->query($sql, array($totalpax, $dat->type_rate, $dat->id, $fechas));
                $pricesbyplane = $rs->fetch();
            }

            if (!empty($pricesbyplane)) {
                $byplane2 = number_format($pricesbyplane ['price'], 2, '.', '');
                $_SESSION['toursbooking']['trasport_total2'] = $byplane2;
            }
        } else {
            $byplane2 = 0;
        }

        /* if prices by car */

        if ($toursbooking ['sarrival'] == 4) {

            $fechal = substr($toursbooking['fecha_llegada'], 0, 4) . '-01-01 00:00:00';
            if ($dat->type_rate == 1) {// Se busca SpecialNet
                $sql = 'SELECT id,price
				FROM tarifacar 
				WHERE (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 )
					AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                $type = 2;
                $rs = Doo::db()->query($sql, array($type, $dat->id, $fechal));
                $pricescar = $rs->fetch();

                if (empty($pricescar)) {//Si no encuentra Buscamos Net.
                    $sql = 'SELECT id,price
				FROM tarifacar 
				WHERE (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 )
					AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                    $type = 1;
                    $rs = Doo::db()->query($sql, array($type, $dat->id, $fechal));
                    $pricescar = $rs->fetch();
                }
            } else {
                $sql = 'SELECT id,price
				FROM tarifacar 
				WHERE (type_rate = ? )
					AND (id_agency = ? or id_agency = -1 )
					AND annio = ?
				ORDER BY type_rate Desc LIMIT 1';
                $rs = Doo::db()->query($sql, array($dat->type_rate, $dat->id, $fechal));
                $pricescar = $rs->fetch();
            }

            if (!empty($pricescar)) {
                $car = number_format($pricescar ['price'], 2, '.', '');
                $_SESSION['toursbooking']['trasport_total1'] = $car;
            }
        } else {
            $car = 0;
        }


        $tq1 = $trip1 + $trip2 + $vip1 + $vip2 + $byplane1 + $byplane2 + $car;

        $tq = $tq1 + $tohotel; //$tq1 + $tohotel codigo original
        $tqp = $tq / $totalpax;

        if ($totaladult != 0) {
            $transporA = $priceadult1 + $priceadult2;

            $transporA = $transporA + (($vip1 + $vip2 + $byplane1 + $byplane2 + $car) / $totaladult);
            if ($priceadult1 == 0 && $priceadult2 == 0) {
                $transporA = $transporA + $transporA;
            }
        } else {
            $transporA = 0;
        }


        if ($totalchild != 0) {
            $transporN = $pricechild1 + $pricechild2;
            $transporN = $transporN + (($vip1 + $vip2 + $byplane1 + $byplane2 + $car) / $totalchild);
            if ($pricechild1 == 0 && $pricechild2 == 0) {
                $transporN = $transporN + $transporN;
            }
        } else {
            $transporN = 0;
        }
        //echo $tohotel;
        /* $_SESSION ["toursbooking"] ["priceadults"] = $transporA;
          $_SESSION ["toursbooking"] ["pricechilds"] = $transporN; */
        $_SESSION['toursbooking']['totalhotel'] = $tohotel;
        $namehotel = $costohotel['nombre'];
        /* echo $costohotel['categoria'];
          exit; */

        if ($costohotel['super_breakfast'] == 0) {// falta confirmar si es solo para tourist 
            $_SESSION ['menosbuff']['buff'] = '';
            $_SESSION ['menosbuff'] ['totalpax'] = $totalpax;
            $_SESSION ['menosbuff'] ['tq'] = $tq;
            $_SESSION['toursbooking']['tqp'] = $tqp;
            $_SESSION['toursbooking']['tq'] = $tq;
            $_SESSION ["toursbooking"] ["totaltotal"] = $totalpax * $_SESSION['toursbooking']['tqp'];
            $_SESSION ["toursbooking"] ["comision_agency"] = (!$net_rate) ? ($tqp * (($this->cal_equipament()) / 100)) : 0.00;

            $breakfastdato = "";

//            $buffet = '<div id="buffet2" title="asdfg"><table width="100%" border="0" cellspacing="1"><tr><td width="22%"><img src="' . Doo::conf()->APP_URL . 'global/images/desayunob.jpg" width="150px;" heigth="50px;"/></td><td colspan="2">&nbsp;</td><td width="76%">Do you want to include SUPER BREAKFAST BUFFET in your Hotel?<label></label><label><br /><input type="radio" name="buffet" id="buffet"  class="buff" value="1" />YES</label><input type="radio" name="buffet" class="buff" id="buffet" value="0" />NO</td></tr></table>';
//            echo "<script>$('#buffet').dialog({
//					modal: true,
//					width: 600,
//				});
//		$('.buff').change(function(){
//									var id = $(this).val();
//
//									$('#roomsdistri').load('" . Doo::conf()->APP_URL . "tours/question17/' + id);
//								 								  });
//		</script>";
        } else {
            $breakfastdato = "Free Breakfast ";
            $buffet = "";
            if (isset($_SESSION ['menosbuff'])) {
                unset($_SESSION ['menosbuff']);
            }
            $_SESSION ['menosbuff']['buff'] = $breakfastdato;
            $categoria = $costohotel['categoria'];
            if ($costohotel['super_breakfast'] == 0) {
                $_SESSION ['menosbuff'] ['mando'] = ($desayuno);
                $_SESSION['toursbooking']['tqp'] = $tqp;
                $_SESSION['toursbooking']['tq'] = $tq;
                $_SESSION ["toursbooking"] ["totaltotal"] = $totalpax * $_SESSION['toursbooking']['tqp'];
                $_SESSION ["toursbooking"] ["comision_agency"] = (!$net_rate) ? ($tqp * (($this->cal_equipament()) / 100)) : 0.00;
            } else if ($costohotel['super_breakfast'] == 1) {
                $_SESSION ['menosbuff'] ['mando'] = ($desayuno);
                $_SESSION ['menosbuff'] ['totalpax'] = $totalpax;
                $_SESSION ['menosbuff'] ['tq'] = $tq;
                $_SESSION['toursbooking']['tqp'] = $tqp;
                $_SESSION['toursbooking']['tq'] = $tq;
                $_SESSION ["toursbooking"] ["totaltotal"] = $totalpax * $_SESSION['toursbooking']['tqp'];
                $_SESSION ["toursbooking"] ["comision_agency"] = (!$net_rate) ? ($tqp * (($this->cal_equipament()) / 100)) : 0.00;
                $breakfastdato = "Free Breakfast ";

                $buffet = '<div id="buffet2" title="asdfg"><table width="100%" border="0" cellspacing="1"><tr><td width="22%"><img src="' . Doo::conf()->APP_URL . 'global/images/desayunob.jpg" width="150px;" heigth="50px;"/></td><td colspan="2">&nbsp;</td><td width="76%">Do you want to include SUPER BREAKFAST BUFFET in your Hotel?<label></label><label><br /><input type="radio" name="buffet" id="buffet"  class="buff" value="1" />YES</label><input type="radio" name="buffet" class="buff" id="buffet" value="0" />NO</td></tr></table>';
                echo "<script>$('#buffet').dialog({
						modal: true,
						width: 600,
					});
					$('.buff').change(function(){
										var id = $(this).val();
										
										$('#roomsdistri').load('" . Doo::conf()->APP_URL . "tours/question17/' + id);
																	  }); 
			</script>";
            }
        }
        $_SESSION ["menosbuff"] ["nightprice"] = $tohotel / $toursbooking ['noches'];
        $_SESSION ['menosbuff'] ['breakfastprice'] = $desayuno / $toursbooking ['noches'];
        $datos = $_SESSION ['menosbuff'];
        $tqph = round($tqp);

        echo "<script>
            
            $('#namehotel').html('$namehotel');  
            $('#roomss').html('$rooms ROOM'); 
            $('#desayuno').html('$breakfastdato'); 
            // $('#tqp').html('$ $tqph');</script>";
        //print_r($desayuno);
        //Comentario De Hotel ocupado
        $this->comentarioHotelOcupado();
        //Fin Comentario
        // print_r($_SESSION ["toursbooking"]);
    }

    public function buffet() {
        /* echo json_encode($_SESSION['menosbuff']); */
        $yes = $this->params ['id'];

        $_SESSION['bufet'] = $yes;

        $datos = $_SESSION ['menosbuff'];
        if ($yes == 1) {
            $sumando = $datos ['tq'];
            if (isset($datos['breakfastprice'])) {
                $sumando += ($datos['breakfastprice'] * $_SESSION['toursbooking']['noches']);
            }
            $breakfastdato = "SUPER BREKFAST BUFFET";
            $_SESSION ['menosbuff']['buff'] = $breakfastdato;
            echo "<script >$('#desayuno').html('$breakfastdato');</script>";
        } else {

            $_SESSION ['menosbuff']['buff'] = '';
            $sumando = $datos ['tq'];
        }
        //aqui se quito el redondeo

        $tqp = $sumando / $datos ['totalpax'];
        $_SESSION['toursbooking']['tqp'] = $tqp;
        $_SESSION['toursbooking']['tq'] = $sumando;
        // echo "<script >$('#tqp').html('$ " . round($tqp) . "'); </script>";
        //print_r($_SESSION ['menosbuff']);
    }

    function transaction_approval() {
        $txt = (isset($_SERVER['HTTP_REFERER'])) ? $_SERVER['HTTP_REFERER'] : "";
        // print_r($txt);
        // die;
        //&& strstr("myvirtualmerchant.com",$txt)
        if ((isset($_SESSION['user']) && isset($_REQUEST['ssl_approval_code'])) && isset($_SESSION['toursbooking'])) {
            $this->data ['rootUrl'] = Doo::conf()->APP_URL;
            // $this->response_approval(); 
            $_SESSION['tourPagoMulDay'] = 'ok';
            if (isset($_SESSION['codconf'])) {
                $_SESSION['codconf2'] = $_SESSION['codconf'] . "_" . $_REQUEST['ssl_approval_code'];
            }
            return $this->renderc("tours/approval", $this->data);
        } else {
            if (isset($_SESSION['data_agency'])) {
                return Doo::conf()->APP_URL . "agency/";
            } else {
                return Doo::conf()->APP_URL . "";
            }
        }
    }

    function transaction_decline() {
        if ((isset($_SESSION['user']) && isset($_REQUEST['ssl_approval_code'])) && isset($_SESSION['toursbooking'])) {
            $this->data['rootUrl'] = Doo::conf()->APP_URL;
            $this->view()->renderc('tours/decline', $this->data);
        } else {
            $this->data ['rootUrl'] = Doo::conf()->APP_URL;
            $this->view()->renderc('tours/decline', $this->data);
            // $this->renderc("error",$this->data); 
        }
    }

    function seguridad() {
        if (!(((isset($_SESSION['user']) && isset($_REQUEST['ssl_approval_code'])) && isset($_SESSION['toursbooking'])))) {
            return Doo::conf()->APP_URL . "tours/";
        }
    }

    /* response approval */

    function response_approval() {
        if (!isset($_SESSION['toursbooking'])) {
            if (isset($_SESSION['data_agency'])) {
                return Doo::conf()->APP_URL . "agency/";
            } else {
                return Doo::conf()->APP_URL . "tours/";
            }
        } else if ($_SESSION['onedaytour'] == true) {
            return $this->response_approval_onedaytour();
        } else {
            Doo::loadModel("Clientes");
            //if ((isset($_SESSION['user'])&& isset($_REQUEST['ssl_approval_code'])) && isset($_SESSION['toursbooking'])  ){
            (isset($_SESSION['user'])) or die("Page No Found Error 404");
            $_SESSION['codconf'] = $_SESSION['codconf'] . "_" . $_REQUEST['ssl_approval_code'];
            $codigoConf = $_SESSION['codconf'];
            Doo::loadModel("Agency");
            if (isset($_SESSION['data_agency'])) {
                $dat = new Agency($_SESSION['data_agency']);
                Doo::loadModel("UserA");
                $user = new UserA($_SESSION['user']);
            } else {
                $user = new Clientes($_SESSION['user']);
                $dat = new Agency();
                $dat->id = -1;
                $dat->type_rate = 0;
            }

            //Cargando Datos cliente
            $tourstick = $_SESSION ["tourstick"];
            $cliente = new Clientes();
            $cliente->username = $tourstick['email'];
            $cliente = Doo::db()->find($cliente, array('limit' => 1));
            if (empty($cliente)) {
                $cliente = new Clientes();
                $cliente->username = $tourstick['email'];
                $cliente->firstname = $tourstick['firstname'];
                $cliente->lastname = $tourstick['lastname'];
                $cliente->phone = $tourstick['phone'];
                $cliente->celphone = $tourstick['cellphone'];
                Doo::db()->insert($cliente) or die("Error Ingresando Datos de Cliente");
                $id_cliente = Doo::db()->lastInsertId();
                $cliente->id = $id_cliente;
            }

            //FIN carga datos clientes

            Doo::loadModel("Reserve");
            Doo::loadModel("Transfer");
            try {
                $sdeparture = (isset($_SESSION['toursbooking']['sdeparture']) ? $_SESSION['toursbooking']['sdeparture'] : 0);
                $sarrival = (isset($_SESSION['toursbooking']['sarrival']) ? $_SESSION['toursbooking']['sarrival'] : 0);
                $type_tour = 'MULTI';
                if (($sarrival != 0) && ($sdeparture != 0)) {
                    if (($sarrival != 1)) {

                        $tranferIn = new Transfer();
                        $tranferIn->airlie = (isset($_SESSION['toursbooking']['airlinearrival']) ? $_SESSION['toursbooking']['airlinearrival'] : "");
                        $tranferIn->arrival_time = (isset($_SESSION['toursbooking']['hora1']) ? $_SESSION['toursbooking']['hora1'] : "");
                        $tranferIn->flight = (isset($_SESSION['toursbooking']['flightarrival']) ? $_SESSION['toursbooking']['flightarrival'] : "");
                        $tranferIn->total_pax = (isset($_SESSION['toursbooking']['totalpax']) ? $_SESSION['toursbooking']['totalpax'] : 0);
                        $tranferIn->total_price = (isset($_SESSION['toursbooking']['trasport_total1']) ? $_SESSION['toursbooking']['trasport_total1'] : 0);
                        $tranferIn->type = $sarrival;
                        $tranferIn->type_transfer = (isset($_SESSION['toursbooking']['service1']) ? $_SESSION['toursbooking']['service1'] : "N/A");

                        /** Agregado Nuevo */
                        $tranferIn->city = (isset($_SESSION['toursbooking']['city']) ? $_SESSION['toursbooking']['city'] : "");
                        $tranferIn->address = (isset($_SESSION['toursbooking']['address']) ? $_SESSION['toursbooking']['address'] : "");
                        $tranferIn->zipcode = (isset($_SESSION['toursbooking']['zipcode']) ? $_SESSION['toursbooking']['zipcode'] : "");
                        $tranferIn->phone = (isset($_SESSION['toursbooking']['phone']) ? $_SESSION['toursbooking']['phone'] : "");

                        /** FIN agregado nuevo */
                        Doo::db()->insert($tranferIn) or die("Error Ingresando Datos de Trasporte_");
                        $inTrans = Doo::db()->lastInsertId();
                    }
                    if (($sdeparture != 1)) {
                        $tranferOut = new Transfer();
                        $tranferOut->airlie = (isset($_SESSION['toursbooking']['airlinedeparture']) ? $_SESSION['toursbooking']['airlinedeparture'] : "");
                        $tranferOut->arrival_time = (isset($_SESSION['toursbooking']['hora2']) ? $_SESSION['toursbooking']['hora2'] : "");
                        $tranferOut->flight = (isset($_SESSION['toursbooking']['flightdeparture']) ? $_SESSION['toursbooking']['flightdeparture'] : "");
                        $tranferOut->total_pax = (isset($_SESSION['toursbooking']['totalpax']) ? $_SESSION['toursbooking']['totalpax'] : 0);
                        $tranferOut->total_price = $_SESSION['toursbooking']['trasport_total2'];
                        $tranferOut->type = $sdeparture;
                        $tranferOut->type_transfer = (isset($_SESSION['toursbooking']['service2']) ? $_SESSION['toursbooking']['service2'] : "N/A");

                        /** Agregado Nuevo */
                        $tranferOut->city = (isset($_SESSION['toursbooking']['city2']) ? $_SESSION['toursbooking']['city2'] : "");
                        $tranferOut->address = (isset($_SESSION['toursbooking']['address2']) ? $_SESSION['toursbooking']['address2'] : "");
                        $tranferOut->zipcode = (isset($_SESSION['toursbooking']['zipcode2']) ? $_SESSION['toursbooking']['zipcode2'] : "");
                        $tranferOut->phone = (isset($_SESSION['toursbooking']['phone2']) ? $_SESSION['toursbooking']['phone2'] : "");

                        /** FIN agregado nuevo */
                        Doo::db()->insert($tranferOut) or die("Error Ingresando Datos de Trasporte");
                        $outTrans = Doo::db()->lastInsertId();
                    }
                }

                Doo::loadModel("Hotel_Reserves");
                $hotel = new Hotel_Reserves();
                $hotel->additional_night = 0;
                $hotel->adult = $_SESSION['toursbooking']['adults'];
                $hotel->category = $_SESSION['categoria'];
                $hotel->child = $_SESSION['toursbooking']['childs'];
                $hotel->days = $_SESSION['toursbooking']['dias'];
                $hotel->id_agencia = $dat->id;

                $hotel->id_cliente = $user->id;
                $hotel->id_hotel = $_SESSION['toursbooking']['hotelid'];
                $hotel->nights = $_SESSION['toursbooking']['noches'];
                $hotel->creation_date = date("Y-m-d H:i");
                $hotel->starting_date = $_SESSION['toursbooking']['fecha_llegada'];
                $hotel->ending_date = $_SESSION['toursbooking']['fecha_salida'];

                $hotel->room1_adult = $_SESSION ["toursbooking"]['adult_r1'];
                $hotel->room2_adult = $_SESSION ["toursbooking"]['adult_r2'];
                $hotel->room3_adult = $_SESSION ["toursbooking"]['adult_r3'];
                $hotel->room4_adult = $_SESSION ["toursbooking"]['adult_r4'];

                $hotel->room1_child = $_SESSION ["toursbooking"]['child_r1'];
                $hotel->room2_child = $_SESSION ["toursbooking"]['child_r2'];
                $hotel->room3_child = $_SESSION ["toursbooking"]['child_r3'];
                $hotel->room4_child = $_SESSION ["toursbooking"]['child_r4'];

                $room1 = $_SESSION ["toursbooking"]['adult_r1'];
                $room2 = $_SESSION ["toursbooking"]['adult_r2'];
                $room3 = $_SESSION ["toursbooking"]['adult_r3'];
                $room4 = $_SESSION ["toursbooking"]['adult_r4'];

                $tipos = $this->tipoHabitacion($room1, $room2, $room3, $room4);
                $sgl = $tipos['sgl'];
                $dbl = $tipos['dbl'];
                $tpl = $tipos['tpl'];
                $qua = $tipos['qua'];

                /** NUEVOS CAMPOS */
                $hotel->hotel_name = $_SESSION ["toursbooking"]['hotel'];

                $hotel->sql = $sgl;
                $hotel->dbl = $dbl;
                $hotel->tpl = $tpl;
                $hotel->qua = $qua;

                $hotel->sql_indicativo = $sgl;
                $hotel->dbl_indicativo = $dbl;
                $hotel->tpl_indicativo = $tpl;
                $hotel->qua_indicativo = $qua;

                $hotel->room1 = $room1;
                $hotel->room2 = $room2;
                $hotel->room3 = $room3;
                $hotel->room4 = $room4;

                $hotel->room1_c = $_SESSION ["toursbooking"]['child_r1'];
                $hotel->room2_c = $_SESSION ["toursbooking"]['child_r2'];
                $hotel->room3_c = $_SESSION ["toursbooking"]['child_r3'];
                $hotel->room4_c = $_SESSION ["toursbooking"]['child_r4'];

                /** FIN NUEVOS CAMPOS */
                $hotel->roooms = $_SESSION['toursbooking']['rooms'];

                if ($_SESSION ['menosbuff']['buff'] == 'SUPER BREKFAST BUFFET') {
                    $hotel->breakfastprice = $_SESSION ['menosbuff']['breakfastprice'];
                    $hotel->totalbreakfasts = $hotel->breakfastprice * $hotel->nights;
                    $hotel->buffet = 1;
                } else {
                    $hotel->breakfastprice = 0;
                    $hotel->totalbreakfasts = 0;
                }
                $hotel->nightprice = $_SESSION ["menosbuff"] ["nightprice"];
                $hotel->totalnights = $hotel->nightprice * $hotel->nights;
                $hotel->total_paid = $hotel->totalnights + $hotel->totalbreakfasts;
                $hotel->total_persons = $_SESSION['toursbooking']['totalpax'];
                $hotel->type = 0;

                Doo::db()->insert($hotel) or die("Error Ingresando Datos de Hotel");
                $id_hotel_reserves = Doo::db()->lastInsertId();

                Doo::loadModel("Tours");
                $total = $_SESSION['toursbooking']['tqp'] * $_SESSION['toursbooking']['totalpax'];
                $platinum = $_SESSION['toursbooking']['question'];
                $tours = new Tours();
                $tours->id_client = $cliente->id;
                $tours->type_client = $cliente->tipo_client;
                $tours->platinum = ($platinum == 2) ? 1 : 0;
                $tours->id_agency = $dat->id;
                $tours->code_conf = $_SESSION['codconf'];
                $tours->agency_employee = ($dat->id != -1) ? $user->id : 0;
                $tours->creation_date = date("Y-m-d H:i");
                $tours->starting_date = $_SESSION['toursbooking']['fecha_llegada'];
                $tours->ending_date = $_SESSION['toursbooking']['fecha_salida'];
                $tours->length_day = $_SESSION['toursbooking']['dias'];
                $tours->length_nights = $_SESSION['toursbooking']['noches'];
                $tours->adult = $_SESSION['toursbooking']['adults'];
                $tours->child = $_SESSION['toursbooking']['childs'];
                $tours->id_reserva = -1;
                $tours->id_transfer_in = (isset($inTrans) ? $inTrans : "-1");
                $tours->id_transfer_out = (isset($outTrans) ? $outTrans : "-1");
                $tours->id_hotel_reserve = $id_hotel_reserves;
                $tours->comments = (isset($_SESSION['toursbooking']['comments'])) ? $_SESSION['toursbooking']['comments'] : '';
                $tours->tipo_pago = "PRED-PAID";
                $tours->pago = $_SESSION ['toursbooking']['opcionPago'];
                $tours->total = $total;
                $tours->totalouta = $total;
                $tours->otheramount = $_SESSION['toursbooking']['otheramount'];
                $tours->extra_charge = 0;
                $tours->descuento_procentaje = 0;
                $tours->descuento_valor = 0;
                $tours->canal = 'WEBSALE';
                $tours->estado = 'CONFIRMED';


                Doo::db()->insert($tours) or die("Error Ingresando Datos de Tours");
                $id_tours = Doo::db()->lastInsertId();
                $sql = "update hotel_reserves set id_tours = ? where id = ?";
                $rs = Doo::db()->query($sql, array($id_tours, $id_hotel_reserves));

                $group = $_SESSION ['grupos'];
                $group1 = $_SESSION ['grupos1'];

                $i = 0;
                Doo::loadModel("Attraction_Trafic");
                Doo::loadModel('Parques');
                $key = array_keys($group);
                while ($i < count($key)) {
                    $grou = explode(',', $group1['park' . $key[$i]]);
                    $j = 0;
                    while ($j < count($grou)) {
                        $attraction = new Attraction_Trafic();
                        $attraction->id_tours = $id_tours;
                        $attraction->type_tour = $type_tour;
                        $attraction->id_park = $grou[$j];
                        $attraction->group = $key[$i];
                        $attraction->creation_date = date("Y-m-d H:i");
                        $attraction->starting_date = $_SESSION['toursbooking']['fecha_llegada'];
                        $attraction->ending_date = $_SESSION['toursbooking']['fecha_salida'];
                        $attraction->admission = $_SESSION ['toursbooking'] ['ticketpark'];
                        if ($sarrival == 4) {
                            $attraction->trafic = 0;
                        } else {
                            $attraction->trafic = 1;
                        }

                        $attraction->id_cliente = $cliente->id;
                        $attraction->id_agencia = $dat->id;
                        $attraction->adult = $_SESSION['toursbooking']['adults'];
                        $attraction->child = $_SESSION['toursbooking']['childs'];
                        $attraction->total_person = $_SESSION['toursbooking']['totalpax'];
                        if ($attraction->admission == 1) {
                            $attraction->admission_child = $group1['parkChild' . $key[$i] . ''] * $_SESSION['toursbooking']['childs'] / $_SESSION ['grupos'] [$key[$i]];
                            $attraction->admission_adtul = $group1['parkAdult' . $key[$i] . ''] * $_SESSION['toursbooking']['adults'] / $_SESSION ['grupos'] [$key[$i]];
                        } else {
                            $attraction->admission_child = 0;
                            $attraction->admission_adtul = 0;
                        }
                        $attraction->totalAdmission = $attraction->admission_child + $attraction->admission_adtul;
                        $attraction->totalTraspor = $group1['ratesPark' . $key[$i] . ''];
                        $attraction->total_paid = $attraction->totalTraspor + $attraction->totalAdmission;
                        Doo::db()->insert($attraction) or die("Error Ingresando Datos de Attractions");
                        if ($attraction->admission == 1) {
                            $parque = new Parques();
                            $parque->id = $attraction->id_park;
                            $parque = Doo::db()->getOne($parque);
                            $parque->stock = intval($parque->stock) - ($tours->child + $tours->adult);
                            $parque->update();
                        }
                        $j++;
                    }
                    $i++;
                }


                if (($sarrival == 1) || ($sdeparture == 1)) {

                    $reserves = new Reserve();
                    $reserves->id_tours = $id_tours;
                    $reserves->type_tour = $type_tour;
                    $reserves->fecha_ini = date("Y-m-d");
                    $reserves->trip_no = (isset($_SESSION['toursbooking']['trip1']) ? $_SESSION['toursbooking']['trip1'] : "");
                    $reserves->trip_no2 = (isset($_SESSION['toursbooking']['trip2']) ? $_SESSION['toursbooking']['trip2'] : "");
                    $reserves->tipo_ticket = (($sarrival == 1) && ($sdeparture == 1)) ? "roundtrip" : "oneway";
                    $reserves->fromt = (isset($_SESSION['toursbooking']['id_from']) ? $_SESSION['toursbooking']['id_from'] : "");
                    $reserves->tot = (isset($_SESSION['toursbooking']['id_tot']) ? $_SESSION['toursbooking']['id_tot'] : "");
                    $reserves->fromt2 = (isset($_SESSION['toursbooking']['id_from2']) ? $_SESSION['toursbooking']['id_from2'] : "");
                    $reserves->tot2 = (isset($_SESSION['toursbooking']['id_tot2']) ? $_SESSION['toursbooking']['id_tot2'] : "");

                    $reserves->firsname = $user->firstname;
                    $reserves->lasname = $user->lastname;
                    if (isset($_SESSION['data_agency'])) {
                        $reserves->email = $user->email;
                    } else {
                        $reserves->email = $user->username;
                    }

                    $reserves->deptime1 = (isset($_SESSION['toursbooking']['datedeparturetrip1']) ? $_SESSION['toursbooking']['datedeparturetrip1'] : "");
                    $reserves->deptime2 = (isset($_SESSION['toursbooking']['datedeparturetrip1']) ? $_SESSION['toursbooking']['datedeparturetrip2'] : "");
                    $reserves->arrtime1 = (isset($_SESSION['toursbooking']['datearrivingtrip1']) ? $_SESSION['toursbooking']['datearrivingtrip1'] : "");
                    $reserves->arrtime2 = (isset($_SESSION['toursbooking']['datearrivingtrip2']) ? $_SESSION['toursbooking']['datearrivingtrip2'] : "");
                    $reserves->precioA = (isset($_SESSION['toursbooking']['priceadults']) ? $_SESSION['toursbooking']['priceadults'] : "");
                    $reserves->precioN = (isset($_SESSION['toursbooking']['pricechilds']) ? $_SESSION['toursbooking']['pricechilds'] : "");

                    /** Discriminacion de precios */
                    $reserves->precio_trip1_a = $_SESSION['toursbooking']['priceadult'];
                    $reserves->precio_trip1_c = $_SESSION['toursbooking']['pricechil'];

                    $reserves->precio_trip2_a = $_SESSION['toursbooking']['2priceadult'];
                    $reserves->precio_trip2_c = $_SESSION['toursbooking']['2pricechil'];

                    /** fin Discriminacion de precios */
                    $reserves->fecha_salida = (isset($_SESSION['toursbooking']['fecha_llegada']) ? $_SESSION['toursbooking']['fecha_llegada'] : "");
                    $reserves->fecha_retorno = (isset($_SESSION['toursbooking']['fecha_salida']) ? $_SESSION['toursbooking']['fecha_salida'] : "");
                    $reserves->pax = $_SESSION['toursbooking']['adults'];
                    $reserves->pax2 = $_SESSION['toursbooking']['childs'];
                    $reserves->id_clientes = $cliente->id;
                    $reserves->pickup1 = (isset($_SESSION['toursbooking']['id_pickup1']) ? $_SESSION['toursbooking']['id_pickup1'] : 0);
                    $reserves->dropoff1 = (isset($_SESSION['toursbooking']['id_dropoff1']) ? $_SESSION['toursbooking']['id_dropoff1'] : 0);
                    $reserves->pickup2 = (isset($_SESSION['toursbooking']['id_pickup2']) ? $_SESSION['toursbooking']['id_pickup2'] : 0);
                    $reserves->dropoff2 = (isset($_SESSION['toursbooking']['id_dropoff2']) ? $_SESSION['toursbooking']['id_dropoff2'] : 0);
                    $reserves->tipo_pago = "PRED-PAID";
                    $reserves->pago = $_SESSION ['toursbooking']['opcionPago'];
                    $reserves->totaltotal = (isset($_SESSION['toursbooking']['trasport_total2']) ? $_SESSION['toursbooking']['trasport_total2'] : 0) + (isset($_SESSION['toursbooking']['trasport_total1']) ? $_SESSION['toursbooking']['trasport_total1'] : 0);
                    $reserves->total2 = $reserves->totaltotal;
                    $reserves->codconf = ($_SESSION['codconf']);
                    $reserves->hora = date("H:i:s");
                    $reserves->comments = 'PAID ONLINE';
                    $reserves->agen = ($dat->id != -1) ? $user->id : 0;
                    $reserves->tipo_client = $cliente->tipo_client;
                    $reserves->agency = $dat->id;
                    $reserves->luggage1 = -1;
                    $reserves->luggage2 = -1;
                    $reserves->canal = 'WEBSALE';
                    $reserves->estado = 'CONFIRMED';
                    Doo::db()->insert($reserves) or die("Error Ingresando Datos de Trasnporte Por Bus");
                    $id_reserva = Doo::db()->lastInsertId();

                    //Actualizamos tour
                    $tours->id = $id_tours;
                    $tours->id_reserva = $id_reserva;
                    Doo::db()->update($tours);
                    //registramos rastro y pago
                    Doo::loadController('admin/ReservasController');
                    $reseControl = new ReservasController();
                    $reserves->id = $id_reserva;
                    $login = $_SESSION['user'];
                    if (isset($_SESSION['data_agency'])) {
                        $login->tipo = 'AGENCY';
                    } else {
                        $login->tipo = 'CLIENTE';
                    }
                    $reseControl->registrar_pago($reserves, NULL, $login);
                    $reseControl->rastro_reserva('CREATE', NULL, $reserves, $login);
                }

                if (isset($_SESSION['data_agency'])) {
                    Doo::loadModel("Tours_Agency");
                    $tours_reserv = new Tours_Agency();
                    $comision = $this->cal_equipament();
                    if (isset($_SESSION ['toursbooking']['comision_agency'])) {
                        $valorComision = $_SESSION ['toursbooking']['comision_agency'];
                    } else {
                        $valorComision = 0;
                    }
                    $tours_reserv->id_agency = $dat->id;
                    $tours_reserv->comision = $comision;
                    $tours_reserv->id_reserva = $id_reserva;
                    $tours_reserv->id_tours = $id_tours;
                    $tours_reserv->type_tour = $type_tour;
                    $tours_reserv->tipo_pago = "Credit Card";
                    $tours_reserv->pago = $_SESSION ['toursbooking']['opcionPago'];
                    $tours_reserv->type_rate = $dat->type_rate;
                    $tours_reserv->agency_fee = $valorComision;
                    $tours_reserv->total = $total;
                    $tours_reserv->totalouta = $_SESSION['toursbooking']['totalouta'];
                    Doo::db()->insert($tours_reserv);
                }

                //Guardamos el pago y el rastro del tours 
                Doo::loadController('admin/ToursController');
                $tours->id = $id_tours;
                $login = $_SESSION['user'];
                $login->tipo = 'AGENCY';
                $toursControl = new ToursController();
                $toursControl->registrar_pago($tours, NULL, $login);
                $toursControl->rastro_tours('CREATE', NULL, $tours, $login);
                Doo::loadModel('Factura');
                Doo::loadModel('FacturaServicio');

                $factura = new Factura();
                $factura->id_agency = $tours->id_agency;
                $factura->creation_date = date('Y-m-d');
                $factura->subtotal = $tours->total;
                $factura->collect = $tours->otheramount;
                $factura->total = $factura->subtotal - $factura->collect;
                $factura->estado = 'PAID';
                $factura->id = Doo::db()->insert($factura);
                $fs = new FacturaServicio();
                $fs->id_servicio = $tours->id;
                $fs->tipo_servicio = "MULTI";
                $fs->id_factura = $factura->id;
                $fs->id = Doo::db()->insert($fs);
                Doo::loadModel('CollectService');
                $coll = new CollectService();
                $coll->id_servicio = $tours->id;
                $coll->tipo_servicio = "MULTI";
                $coll->monto_pagado = $tours->totalouta;
                $coll->id = $coll->insert();
                Doo::loadModel('Pago');
                $pago = new Pago();
                $pago->factura = $factura->id;
                $pago->monto = $tours->totalouta;
                $pago->tipo = 'FULL';
                $pago->transnu = 0;
                $pago->adjunto = 'online-paid';
                $pago->descuento = 0;
                $pago->per_descuento = 0;
                $pago->fecha = date('Y-m-d h:m:s');
                $pago->metodo = 4;
                $pago->id = $pago->insert();
                $this->mailerConsult();
                $_SESSION['codconf2'] = $codigoConf;
                unset($_SESSION['toursbooking']);
                $_SESSION['codconf2'] = $codigoConf;
            } catch (Exception $exc) {
                unset($_SESSION['toursbooking']);
                //   echo $exc->getMessage();
                return Doo::conf()->APP_URL . "error/";
            }
        }
    }

    function quotation() {

        try {
            extract($_POST, EXTR_SKIP);
            if (!(isset($firstname_tick) && isset($lastname_tick) && isset($email_tick) && isset($cellular_tick) && isset($phone_tick) && isset($_SESSION['toursbooking']))) {
                if (isset($_SESSION['data_agency'])) {
                    return Doo::conf()->APP_URL . "agency/#tours2";
                } else {
                    return Doo::conf()->APP_URL . "tours/";
                }
            }
            Doo::loadController('admin/ToursController');
            $toursControl = new ToursController();
            $_SESSION['codcuot'] = $toursControl->codigoConftour(0);
            $_SESSION['codconf'] = $_SESSION['codcuot'];
            if (!isset($_SESSION ['user'])) {
                $tourstick = array(
                    "firstname" => $firstname_tick,
                    "lastname" => $lastname_tick,
                    "email" => $email_tick,
                    "cellphone" => $cellular_tick,
                    "phone" => $phone_tick
                );
                $_SESSION ["tourstick"] = $tourstick;
            } else {
                $user = $_SESSION ['user'];
                if (isset($_SESSION['data_agency'])) {
                    $tourstick = array(
                        "firstname" => $firstname_tick,
                        "lastname" => $lastname_tick,
                        "email" => $email_tick,
                        "cellphone" => $cellular_tick,
                        "phone" => $phone_tick
                    );
                    $_SESSION ["tourstick"] = $tourstick;
                } else {
                    if (!isset($user->celphone)) {
                        $user->celphone = '';
                    }
                    if (!isset($user->phone)) {
                        $user->phone = '';
                    }
                    $tourstick = array(
                        "firstname" => $user->firstname,
                        "lastname" => $user->lastname,
                        "email" => $user->username,
                        "cellphone" => $user->celphone,
                        "phone" => $user->phone
                    );
                    $_SESSION ["tourstick"] = $tourstick;
                }
            }
            $this->mailerConsult();
            $_SESSION['tourPagoMulDay'] = 'No';
            $this->data['rootUrl'] = Doo::conf()->APP_URL;
            $this->view()->renderc('tours/quotation', $this->data);
        } catch (Exception $e) {
            echo $e->getMessage();
        }
    }

    /*
      Return void
      Para
     */

    public function onedaytour() {
        if(isset($_SESSION["booking"])){//Sin comentarios, Sorry
            $booking = $_SESSION["booking"];
            $modalT = $this->naveganteT();
            print($modalT);
        }

        if(!isset($_SESSION["booking"]['iden']) && $_SESSION["booking"]['iden'] == ''){
            // return Doo::conf()->APP_URL;
            $s = date("s");          
            $iden = rand(10, 90) . 0 . rand(1, 9);
                 $booking = $_SESSION["booking"];
                if($booking["iden"]!=""){
                    $iden = $booking["iden"];
                } else {
                    $iden = $iden;
                }
            $_SESSION["booking"]['iden'] = $iden;
        }
        // echo '<pre>';
        // print_r($_SESSION['booking']);
        // echo '</pre>';
        // die;
        unset($_SESSION['tourPagoMulDay']);
        unset($_SESSION['tourPagoOneDay']);
        unset($_SESSION['toursbooking']);
        $sql = "SELECT DISTINCT t2.id, t2.nombre  FROM routes t1
                LEFT JOIN areas t2 ON (t1.trip_from = t2.id)
                WHERE t1.type_rate = 0 AND t1.trip_to = 1 AND trip_no = 301 
                AND t2.id <> 13 ORDER BY t2.orden ASC";
        $rs = Doo::db()->query($sql);
        $areas_ida = $rs->fetchAll();

        $sql1 = "SELECT DISTINCT t2.id, t2.nombre  FROM routes t1
                LEFT JOIN areas t2 ON (t1.trip_to = t2.id)
                WHERE t1.type_rate = 0 AND t1.trip_from = 1 AND trip_no = 300
                AND t2.id <> 13 ORDER BY t2.orden ASC";
        $rs1 = Doo::db()->query($sql1);
        $areas_return = $rs1->fetchAll();
        $this->data['rootUrl'] = Doo::conf()->APP_URL;
        $consulta = Doo::db()->query('SELECT * FROM areas WHERE id <> "1" AND id <> "20" AND id <> "13" ORDER BY orden ASC');
        $response = $consulta->fetchAll();
        // echo '<pre>';
        // print_r($_SESSION['booking']['iden']);
        // echo '</pre>';
        // die;
        $this->data['areas'] = $response;
        $this->data['areas_ida'] = $areas_ida;
        $this->data['areas_return'] = $areas_return;
        $this->renderc('page/1-day-tour', $this->data);
    }

    public function onedaytour_one() {

        // list($mes, $dia, $anio) = explode('/', $_POST['txtfecha_salida']);
        // $txtfecha_salida = $anio . '-' . $mes . '-' . $dia;

    //    if($_POST['area'] == 0){
    //     echo '<script>alert("YOU SHOULD SELECT AREA")</script>';
    //     // return Doo::conf()->APP_URL.'1-day-tour';
    //    }
    // print_r($_POST['area']);
    // die;
        Doo::loadModel("Agency");
        if (isset($_SESSION['data_agency'])) {
            $dat = new Agency($_SESSION['data_agency']);
            $type = $dat->type_rate;
        } else {
            $dat = new Agency();
            $type = 0;
            $dat->id = -1;
        }
        //Tipo de pickup_dropoff;
        if ($dat->id == -1) {
            $type_web = 1;
        } else {
            $type_web = 0;
        }

        $_SESSION['step_onedaytour_one'] = true;
        $_SESSION['onedaytour'] = true;
        extract($_POST, EXTR_SKIP);
        $sqlArea = "select nombre from areas where id = ?";
        $res = Doo::db()->query($sqlArea, array($area));
        $ar = $res->fetch();
        $sqlpu = "SELECT id,place,address FROM pickup_dropoff	WHERE id = ?";
        $pu = Doo::db()->query($sqlpu, array($pickup));
        $pick = $pu->fetch();
        $_SESSION['area'] = $ar['nombre'];
        $_SESSION['pickup'] = $pick['place'];

        $sqlArea = "select nombre from areas where id = ?";
        $res = Doo::db()->query($sqlArea, array($area2));
        $ar2 = $res->fetch();
        $sqlpu2 = "SELECT id,place,address FROM pickup_dropoff	WHERE id = ?";
        $pu2 = Doo::db()->query($sqlpu2, array($pickup2));
        $pick2 = $pu2->fetch();
        $_SESSION['area2'] = $ar2['nombre'];
        $_SESSION['pickup2'] = $pick2['place'];

        //Pickup de orlando;
        $sqlpu2 = " SELECT id,place,address FROM pickup_dropoff WHERE id_area = 1  AND (SELECT FIND_IN_SET('2', type_pick)) > 0 AND trip300 = 1 AND trip301 = 1 AND active_web = 1 ORDER BY posicion ASC";
        $puO = Doo::db()->query($sqlpu2, array($type_web));
        $pickO = $puO->fetch();
        $dropoff = $pickO['id']; // Este sera el dropoff1 de ida y el pickup de regreso
 

        $fecha_salida = $txtfecha_salida;
        $fecha_retorno = $txtfecha_salida;
 
        list ($mes, $dia, $anyo) = explode("/", $fecha_salida);

        $llegada = $anyo . "-" . $mes . "-" . $dia;

        if (isset($fecha_retorno)) {

            list ($mes2, $dia2, $anyo2) = explode("/", $fecha_retorno);

            $salida = $anyo2 . "-" . $mes2 . "-" . $dia2;
        }

        $dias = (strtotime($llegada) - strtotime($salida)) / 86400;
        $dias = abs($dias);
        $dias = floor($dias) + 1;
        $noches = $dias - 1;
        $question = 1;
        $toursbooking = array(
            "question" => $question,
            "fecha_llegada" => $llegada,
            "fecha_salida" => $salida,
            "sarrival" => $sarrival,
            "sdeparture" => $sdeparture,
            "dias" => $dias,
            "noches" => $noches,
            "area1" => $area,
            "pickup1" => $pickup,
            "dropoff1" => $dropoff,
            "area2" => $area2,
            "pickup2" => $dropoff,
            "dropoff2" => $pickup2,
            "iden" => $_POST['iden']
        );
            // echo '<pre>';
            // print_r($toursbooking);
            // echo '</pre>';
            // die;
        if (isset($trip1)) {

            $toursbooking ['trip1'] = $trip1;
            $sql = "SELECT  t1.trip_no, t2.trip_departure,t3.equipment,t2.trip_arrival, t1.estado  
				FROM programacion t1
					  LEFT JOIN routes t2 ON (t1.trip_no = t2.trip_no)
					  LEFT JOIN trips  t3 ON (t1.trip_no = t3.trip_no) 
					  LEFT JOIN areas  a ON (t2.trip_from = a.id)
				WHERE t2.type_rate = ? 
					AND t2.trip_from = ? 
					AND t2.trip_to = 1 
					AND fecha = ? 
					AND t1.trip_no = ? 
					AND t1.estado = '1' 
				ORDER BY t2.trip_departure ASC";



            $fechallegada = date("d-m-Y", strtotime($toursbooking ['fecha_llegada']));
            $fechallegada = date("m-d-Y", strtotime($fechallegada));

            $rs = Doo::db()->query($sql, array($type, $area,
                $fechallegada, $trip1
            ));

            $fechas = $rs->fetch();

            $toursbooking ['datedeparturetrip1'] = $fechas ['trip_departure'];
            $toursbooking ['datearrivingtrip1'] = $fechas ['trip_arrival'];
            $toursbooking ['equipment1'] = $fechas ['equipment'];
            $toursbooking ['service1'] = "SUPER TOURS BUS";
        }
//         print_r(Doo::db()->show_sql());
//         exit;
        if (isset($trip2)) { // /trip de departure
            $toursbooking ['trip2'] = $trip2;

            $fechasalida = date("d-m-Y", strtotime($toursbooking ['fecha_salida']));
            $fechasalida = date("m-d-Y", strtotime($fechasalida));
            $sql = "SELECT  t1.trip_no, t2.trip_departure,t3.equipment,t2.trip_arrival, t1.estado  
						FROM programacion t1  LEFT JOIN routes t2 ON (t1.trip_no = t2.trip_no)
								LEFT JOIN trips  t3 ON (t1.trip_no = t3.trip_no) 
								LEFT JOIN areas  a ON (t2.trip_from = a.id)
						WHERE t2.type_rate = ? 
							AND t2.trip_from = 1 
							AND t2.trip_to = ? 
							AND fecha = ? 
							AND t1.trip_no = ? 
							AND t1.estado = '1' 
						ORDER BY t2.trip_departure ASC";

            $rs = Doo::db()->query($sql, array($type, $area, $fechasalida, $trip2)
            );
            $fechas2 = $rs->fetch();
            $toursbooking ['datedeparturetrip2'] = date("g:i A", strtotime($fechas2 ['trip_departure']));
            $toursbooking ['datearrivingtrip2'] = date("g:i A", strtotime($fechas2['trip_arrival']));
            $toursbooking ['equipment2'] = $fechas2 ['equipment'];
            $toursbooking ['service2'] = "SUPER TOURS BUS";
        }

        // //////////////////// services
        $_SESSION["toursbooking"] = $toursbooking;
        //print_r($toursbooking);
        $this->onedaytour_two2(); //Calular valores
        if ($txtAdults + $txtChild > 16) {
            $_SESSION['ErrorOnedayTour'] = "The sum of children ($ " . $txtChild . ") and adults ($ " . $txtAdults . ") has exceeded the maximum number of passengers";
            return Doo::conf()->APP_URL . "1-day-tour";
        } else {
            return Doo::conf()->APP_URL . "onedaytour-park";
        }
    }

    public function onedaytour_two() {
        //die;
        $this->data ['rootUrl'] = Doo::conf()->APP_URL;
        if (isset($_SESSION['step_onedaytour_one']) && isset($_SESSION ["toursbooking"])) {
            /** Imagenes de Magic Kingdom * */

                    //Pickup de orlando;
        $sqlpar = "SELECT * FROM parques_add JOIN parques ON parques_add.idfk_parq = parques.id WHERE estado_parq = 1 AND oneday_parq = 1 ORDER BY id_grupo ASC";
        $parq = Doo::db()->query($sqlpar, array());
        $parques = $parq->fetchAll(PDO::FETCH_ASSOC);

        $sqlgpar = "SELECT gpq.id,gpq.nombre,pqd.estado_parq,pqd.fechacr_parq FROM parques_add pqd JOIN parques pq ON pq.id = pqd.idfk_parq JOIN grupo_parques gpq ON pq.id_grupo = gpq.id WHERE pqd.estado_parq = 1 AND oneday_parq = 1 GROUP BY pq.id_grupo ASC";
        $parqg = Doo::db()->query($sqlgpar, array());
        $parquesg = $parqg->fetchAll(PDO::FETCH_ASSOC);
            // echo '<pre>';
            // print_r($parques);
            // echo '</pre>';
            // die;
            $this->data["grupoparques"] = $parquesg;
            $this->data["parques"] = $parques;
            
            $this->data["op"] = $html_img;
            /** Fin Orlando Premium Outlet Mall */
            $_SESSION['step_onedaytour_two'] = true;

            $this->renderc('/page/2-one-day-tour', $this->data);
        }    else {
            return Doo::conf()->APP_URL . "1-day-tour";
        }
    }



    public function onedaytour_two2() {

         extract($_POST, EXTR_SKIP);
        $toursbooking = $_SESSION ["toursbooking"];
        $fecha = substr($toursbooking['fecha_llegada'], 0, 4) . '-01-01 00:00:00';
        $totaladult = $txtAdults;
        $totalchild = $txtChild;
        $totalpax = $totaladult + $totalchild;
        Doo::loadModel("Agency");
        if (isset($_SESSION['data_agency'])) {
            $dat = new Agency($_SESSION['data_agency']);
            $type = $dat->type_rate;
        } else {
            $dat = new Agency();
            $dat->type_rate = 0;
            $dat->id = -1;
        }
        // /////////////////////////////////services
        if (isset($toursbooking ['trip1'])) {
            if ($dat->type_rate == 1) {// Se busca SpecialNet
                $sql = 'SELECT onet.priceadult,
                            onet.pricechild                              
                            FROM  onetour onet 
                            WHERE onet.type_rate = ? AND id_agency = ? AND annio = ?';
                $type = 2;
                $rs = Doo::db()->query($sql, array($type, $dat->id, $fecha));
                $prices = $rs->fetch();

                if (empty($prices)) {//Si no encuentra Buscamos Net.
                    $sql = 'SELECT onet.priceadult,
                                    onet.pricechild
                                    FROM  onetour onet 
                                    WHERE onet.type_rate = ? AND annio = ?';
                    $type = 1;
                    $rs = Doo::db()->query($sql, array($dat->type_rate, $fecha));
                    $prices = $rs->fetch();
                    $_SESSION ['toursbooking'] ['especial'] = false;
                } else {
                    $_SESSION ['toursbooking'] ['especial'] = true;
                }
            } else {//Buscamos Comi
                $sql = 'SELECT onet.priceadult, onet.pricechild	FROM  onetour onet WHERE onet.type_rate = ? AND annio = ?';
                $type = 0;
                $rs = Doo::db()->query($sql, array($dat->type_rate, $fecha));
                $prices = $rs->fetch();
            }
            if (!empty($prices)) {
                $priceadult = $prices['priceadult'] * $totaladult;
                $pricechild = $prices['pricechild'] * $totalchild;
                $trip1 = number_format($priceadult, 2, '.', '') + number_format($pricechild, 2, '.', '');
            } else {
                $priceadult = 0;
                $pricechild = 0;
            }
        } else {
            $trip1 = 0;
            $priceadult = 0;
            $pricechild = 0;
        }

        $tq = $trip1;

        // //////////////////////////////////cierre services transporte
        $_SESSION ['toursbooking'] ['tsa'] = $tq;
        $_SESSION['toursbooking']['tq'] = $tq; // total a pagar
        $_SESSION['toursbooking']['tqp'] = $tq / $totalpax; // total por personas
        $_SESSION ['toursbooking'] ['np'] = 0;
        $_SESSION ["toursbooking"] ["adults"] = $totaladult;
        $_SESSION ["toursbooking"] ["childs"] = $totalchild;

        $_SESSION ["toursbooking"] ["priceadults"] = $priceadult;
        $_SESSION ["toursbooking"] ["pricechilds"] = $pricechild;
        $_SESSION["toursbooking"]["price_adults"] = $prices['priceadult'];
        $_SESSION["toursbooking"]["price_childs"] = $prices['pricechild'];
        $_SESSION ["toursbooking"] ["totalpax"] = $totalpax;
        $_SESSION ["toursbooking"] ["totaltotal"] = number_format(($totalpax * $_SESSION['toursbooking']['tqp']), 2, '.', '');
    }

    public function onedaytour_four() {

        if (isset($_SESSION ['toursbooking'] ['paso'])) {
            unset($_SESSION ['toursbooking'] ['paso']);
        }

        $post = $_POST;
        $parkes = array();
        $namepark = array();

        if (isset($_POST ['question'])) {
            if ($_POST ['question'] == 1) {

                $_SESSION ['toursbooking'] ['ticketpark'] = 1;
            }
            if ($_POST ['question'] == 0) {
                $_SESSION ['toursbooking'] ['ticketpark'] = 0;
            }
        }

        $contador = 0;
        foreach ($post as $valor) {
            if (strlen($valor) > 1) {
                list ($park, $grupo) = explode(",", $valor);
                $parkes [$contador] = $park;
            }
            $contador++;
        }

        $contador = 0;
        $sql = "SELECT nombre
							FROM parques 
								WHERE id = ?";

        foreach ($parkes as $valor) {

            $rs = Doo::db()->query($sql, array(
                $valor
            ));

            $consulta = $rs->fetch();

            $namepark [$contador] = $consulta['nombre'];
            $contador++;
        }


        $_SESSION['namepark'] = $namepark;
        if($_POST['question'] == 1){
            $_SESSION['toursbooking']['tq'] = $_POST['tqp2'] + $_POST['tikets2'];
            $_SESSION['toursbooking']['parkval'] = $_POST['tikets2'];
            $_SESSION['toursbooking']['transpval'] = $_POST['tqp2'];
            $_SESSION['toursbooking']['question'] = $_POST['question'];
        }else{
            $_SESSION['toursbooking']['tq'] = $_POST['tqp2'];
            $_SESSION['toursbooking']['transpval'] = $_POST['tqp2'];
            unset($_SESSION['toursbooking']['parkval']);
            unset($_SESSION['toursbooking']['question']);
        }
        // echo '<pre>';
        // print_r($_SESSION);
        // echo '</pre>';
        // die;
        if(isset($_SESSION['infoforms']) || isset($_SESSION['signup2'])){
            unset($_SESSION['user']);
            unset($_SESSION['infoforms']);
            unset($_SESSION['signup2']);
        }
        unset($_SESSION['promoida']);
        unset($_SESSION['promoretorno']);

        if(isset($_SESSION ['user']) AND !isset($_SESSION['toursinvi']) ){
            return Doo::conf()->APP_URL . "confirmation_onedaytour";
        }else{
            return Doo::conf()->APP_URL . "tours/userlog2";
        }
    }

    public function onedaytour_step_three() {

        if (isset($_SESSION['step-two']) && isset($_SESSION ['toursbooking'])) {
            $_SESSION['num'] = 0;
            $_SESSION['var'] = '';
            try {
                if (isset($_SESSION ['toursbooking'] ['parktotal'])) {
                    unset($_SESSION ['toursbooking'] ['parktotal']);
                }
                if (isset($_SESSION ['toursbooking'] ['tqp'])) {
                    unset($_SESSION ['toursbooking'] ['tqp']);
                }
                if (isset($_SESSION ['grupos'])) {
                    unset($_SESSION ['grupos']);
                }
                if (isset($_SESSION ['grupos1'])) {
                    unset($_SESSION ['grupos1']);
                }
                if (isset($_SESSION ['toursbooking'] ['ticketpark'])) {
                    unset($_SESSION ['toursbooking'] ['ticketpark']);
                }
                if (isset($_SESSION ['toursbooking'] ['ticketpark'])) {
                    unset($_SESSION ['toursbooking'] ['paso']);
                }

                $this->data ['rootUrl'] = Doo::conf()->APP_URL;
                //print_r($_SESSION["toursbooking"]);
                //echo $_SESSION['toursbooking']['tq']; 
                $this->renderc('/page/2-one-day-tour.php', $this->data);
                $_SESSION ['toursbooking'] ['tqp'] = $_SESSION ['toursbooking'] ['tqp1'];
            } catch (Exception $e) {
                return Doo::conf()->APP_URL . "1-day-tour";
                // procedimiento en caso de reportar errores
            }
        } else {
            return Doo::conf()->APP_URL . "1-day-tour";
        }
    }

    public function onedaytour_confirma() {
//        print_r($_SESSION ['toursbooking']);
//        exit;
        // echo '<pre>';
        // print_r($_SESSION );
        // echo '</pre>';
        // die;
        if ($_SESSION ['user'] || $_SESSION['toursinvi']) {

            if (isset($_SESSION['toursinvi'])) {
                try {
                    $contenido = "";
                            Doo::loadController('DatosMailController');
                            $datosMail = new DatosMailController();
                            $mail = new PHPMailer(true);
    
                            $mail2 = $datosMail->datos();
                    $contenido .= '<pre>' . print_r($_SESSION, true) . '</pre>';
                    $contenido .= "<span style='color:red;'>Cotizacion Transportation con usuario true </span>";
                            $mail->Host = $mail2->Host;
                            $mail->From = $mail2->From;
                            $mail->FromName = "Supertours Of Orlando";
                            $mail->Subject = "Arreglo del ONE user (Invitado)".utf8_decode($_SESSION['toursinvi']->adult[1]['firstname'])." ".utf8_decode($_SESSION['toursinvi']->adult[1]['lastname']);
                            $mail->AddAddress("prodownloadall@gmail.com");    //En este espacio debe ir un correo de respaldo.
                    $mail->AddCC("arturo@supertours.com");    //En este espacio debe ir un correo de respaldo.
            
                    $mail->MsgHTML($contenido);
                    $mail->Send();
                    
                        } catch (phpmailerException $e) {
                            echo $e->errorMessage(); //Errores de PhpMailer
                        } catch (Exception $e) {
                            echo $e->getMessage(); //Errores de cualquier otra cosa.
                        }
            }else{
                try {
                    $contenido = "";
                    Doo::loadController('DatosMailController');
                    $datosMail = new DatosMailController();
                    $mail = new PHPMailer(true);
                    $contenido .="<meta  charset='utf-8' />";
                    $mail2 = $datosMail->datos();
                    $contenido .= '<pre>' . print_r($_SESSION, true) . '</pre>';
                    $contenido .= "<span style='color:red;'>Cotizacion Transportation con usuario true </span>";
                    $mail->Host = $mail2->Host;
                    $mail->From = $mail2->From;
                    $mail->FromName = "Supertours Of Orlando";
                    $mail->Subject = "Arreglo del ONE user (Registrado)".utf8_decode($_SESSION['user']->firstname)." ".utf8_decode($_SESSION['user']->lastname);
                    $mail->AddAddress("prodownloadall@gmail.com");    //En este espacio debe ir un correo de respaldo.
                            $mail->AddCC("arturo@supertours.com");    //En este espacio debe ir un correo de respaldo.
    
                $mail->MsgHTML($contenido);
                $mail->Send();
                
                } catch (phpmailerException $e) {
                    echo $e->errorMessage(); //Errores de PhpMailer
                } catch (Exception $e) {
                    echo $e->getMessage(); //Errores de cualquier otra cosa.
                }
            }
        
        Doo::loadModel("Agency");
        if (isset($_SESSION['data_agency'])) {
            $dat = new Agency($_SESSION['data_agency']);
            $comision = $this->cal_equipament();
            if ($dat->type_rate == 0) {
                $_SESSION ['toursbooking'] ['comision_agency'] = ($_SESSION ['toursbooking'] ['tsa'] * $_SESSION['toursbooking']['totalpax'] );//* ($comision / 100)
            } else {
                $_SESSION ['toursbooking'] ['comision_agency'] = 0;
            }
            Doo::loadController("AgenciaController");
            $agenControl = new AgenciaController();
            $disponible = $agenControl->iscredit();
        } else {
            $_SESSION ['toursbooking']['comision_agency'] = 0;
            $dat = new Agency();
            $dat->type_rate = 0;
            $dat->id = -1;
            $disponible = 0;
        }

        $this->data ['rootUrl'] = Doo::conf()->APP_URL;
        Doo::loadController('admin/ToursOneController');
        $toursOneControl = new ToursOneController();
        $_SESSION['codconf'] = $toursOneControl->codigoConftour(1);

        if (!isset($_SESSION ['toursbooking'] ['ticketpark'])) {
            return Doo::conf()->APP_URL . "tours/onedaytour_step_three";
        }

        #cotizacion 
 
        #fin de cotizacion
        $this->data['disponible'] = $disponible;
        $this->data['dat'] = $dat;

        #Distribucion de precios adultos y ninos
        #tiquetes
        $adultos_tiquetes_price = $_SESSION['toursbooking']['parque_adm_adults'];
        $child_tiquetes_price = $_SESSION['toursbooking']['parque_adm_childs'];
        if (!$_SESSION['toursbooking']['ticketpark']) {
            $adultos_tiquetes_price = 0;
            $child_tiquetes_price = 0;
        }
        #transpor
        $tanspor_adultos_price = $_SESSION['toursbooking']['price_adults'];
        $tanspor_child_price = $_SESSION['toursbooking']['price_childs'];

        #pax
        $adultos = $_SESSION['toursbooking']['adults'];
        $childs = $_SESSION['toursbooking']['childs'];
        $total_pax = $adultos + $childs;

        if (!$_SESSION['toursbooking'] ['especial']) {
            $por_pax_suplemento = $_SESSION['toursbooking']['tranposrLocal'] / $total_pax;
        } else {
            $por_pax_suplemento = 0;
            $adultos_tiquetes_price = $_SESSION['toursbooking']['t_parque_aduls'];
            $child_tiquetes_price = $_SESSION['toursbooking']['t_parque_childs'];
        }
        $total_por_adultos = $adultos_tiquetes_price + $tanspor_adultos_price + $por_pax_suplemento;
        $total_por_childs = $child_tiquetes_price + $tanspor_child_price + $por_pax_suplemento;
        if ($childs == 0) {
            $total_por_childs = 0;
        }
        $this->data["total_por_adultos"] = $total_por_adultos;
        $this->data["total_por_childs"] = $total_por_childs;
    //     echo '<pre>';
    //     print_r($_SESSION ['toursbooking']);
    //    echo '</pre>';
    //     die;
        $this->renderc('/page/shoproute_onedaytour', $this->data);
    }else{
        return Doo::conf()->APP_URL . "tours/userlog2";
    }
    }

	public function slopetoursone(){
		$this->data['rootUrl'] = Doo::conf()->APP_URL;
		$this->view()->renderc('slopeone', $this->data);
	}
	
    public function savesignup(){
        Doo::loadModel("Signup");
        $this->data['rootUrl'] = Doo::conf()->APP_URL;
        $signup = new Signup($_POST);
        $signup->password = trim($signup->password);
        $signup->fecha_r = date("m-d-Y  H:i:s");

        $sql = "SELECT username FROM clientes WHERE  username = ? AND `password` != '' ";
        //Registered user
        $signup2 = new stdclass();
        $signup2->username = $signup->username;
        $signup2->firstname = $signup->firstname;
        $signup2->lastname = $signup->lastname;

        //Billing address
        $signup2->address = $signup->address;
        $signup2->city = $signup->city;
        $signup2->zip = $signup->zip;
        $signup2->phone = $signup->phone;
        $signup2->celphone = $signup->celphone;


        $signup2->error = "";

        // $_SESSION['signup2'] = $signup2; 

        $rs = Doo::db()->query($sql, array($signup->username));
        $reci = $rs->fetch();
  
        if ($reci != NUll) {
            return Doo::conf()->APP_URL . "tours/signupone/slope";
        } else {
            unset($_SESSION['signup2']);
            unset($_SESSION['infoforms']);
            unset($_SESSION ['toursinvi']);


            $new = false;
            if ($signup->birthday != "") {

                $signup->tipo_client = 1;
            } else {
                $signup->tipo_client = 0;
            }
            if ($_POST['id'] == "") {
                $signup->id = Null;
                $new = true;
            }

            $this->data['rootUrl'] = Doo::conf()->APP_URL;
            // echo '<pre>';
            // print_r($signup);
            // echo '</pre>';
            // die;
            if ($signup->tipo_client == 1) {



                try {
                    Doo::loadController('DatosMailController');
                    $datosMail = new DatosMailController();
                    $mail = new PHPMailer(true);
                    $mail = $datosMail->datos();
                    //La direccion a donde mandamos el correo
                    $nombre_destino = 'Supertours Of Orlando';
                    $mail->AddAddress($signup->username, $nombre_destino);
                    //De parte de quien es el correo
                    $mail->Subject = 'Signup / Supertours Of Orlando';
                    //Mensaje alternativo en caso que el destinatario no pueda abrir correos HTML
                    $mail->AltBody = 'Signup / Supertours Of Orlando';

                    $mail->MsgHTML("<div align='center'>
<br />
<table   id='clearTable'> 
<tr>
<td width='401' height='33' rowspan='2' id='titletd3'><img src='".$this->data['rootUrl']."global/estilos/logo.png' width='316' height='88' /></td>
<td colspan='3' align='center' id='titletd3'>Supertours.com</td>
</tr>
<tr>
<td height='35' colspan='3' id='titletd4'>&nbsp;</td>
</tr>
<tr>
<td align='center' height='33' colspan='4' id='titletd2'>SUPER CLUB</td>
</tr>
<tr>


<td colspan='2' align='center' id='titletd6'>Welcome, " . $_POST['username'] . " you are a member of the SUPERCLUB <br />
 The incentive program for frequent passengers <br />
of SUPER TOURS OF ORLANDO, Inc.</td>
</tr>


<tr>
<td colspan='4' ><table id='tableorder3' width='90%'>
<tr>
<td  height='35' colspan='3' id='titlett3'  aling='center' >RECEIPT</td>
</tr>
<tr>
<td width='34%' height='28'>MEMBER NAME:</td>
<td colspan='2'>" . $_POST['firstname'] . " " . $_POST['lastname'] . "</td>
</tr>
<tr>
<td height='31'>MEMBER SINCE:</td>
<td colspan='2'>JUN. 12-2012 / 13:32</td>
</tr>
<tr>
<td height='27'>USERNAME:</td>
<td colspan='2'>" . $_POST['username'] . "</td>
</tr>
<tr>
<td height='27'>PASSWORD:</td>
<td>" . $signup->password . "</td>
</tr>
<tr>
<td height='27'>&nbsp;</td>
<td colspan='2'>&nbsp;</td>
</tr>
</table>
<p><br />
</p></td>
</tr>
<tr>
<td height='37' colspan='4' align='center' id='titletd' ><strong>REDWARS</strong></td>
</tr>

</tr>
<tr>
<td colspan='4'> From this moment you are an official member of our company and you will receive the following benefits:
</td>
<tr>
<td colspan='4'>&bull;  A FREE ticket, after 10 trips paid</td>
</tr>
<tr>
<td colspan='4'>&bull;  A free ticket on your birthday week (you will get this benefit after having traveled for at least one year with us)</td>
</tr>
<tr>
<td colspan='4'>&bull;  Exclusive offers for members of SUPER CLUB </td>
</tr>
<tr>
<td colspan='4'>&nbsp;</td>
</tr>
<tr>
<td colspan='4'>&nbsp;</td>
</tr>
<tr>
<td colspan='4' align='center'> <p align='center' class='titulopago'>THANK YOU FOR CHOOSING US <br />
SUPER TOURS OF ORLANDO,Inc. 5419 International Drive, Orlando Fl. 32819 <br />
Phone: (407) 370-3001 / U.S.A. TOLL FREE 1-800-251-4206 / reservations@supertours.com  

</p>       </td>
</tr>
</table>



</div>");

                    $mail->Send();
                    // echo "Mensaje enviado. Que chivo va vos!!";
                } catch (phpmailerException $e) {
                    echo $e->errorMessage(); //Errores de PhpMailer
                } catch (Exception $e) {
                    echo $e->getMessage(); //Errores de cualquier otra cosa.
                }
            }else {
                try {
                    Doo::loadController('DatosMailController');
                    $datosMail = new DatosMailController();
                    $mai2 = new PHPMailer(true);
                    $mai2 = $datosMail->datos();
                    $nombre_destino = 'Admin';
                    //La direccion a donde mandamos el correo
                    $mai2->AddAddress($signup->username, $nombre_destino);
                    //Asunto del correo
                    $mai2->Subject = 'Signup / Supertours Of Orlando';
                    //Mensaje alternativo en caso que el destinatario no pueda abrir correos HTML
                    $mai2->AltBody = 'Signup / Supertours Of Orlando';


                    $mai2->MsgHTML("<div align='center'>
<br />
<table   id='clearTable'> 
<tr>
<td width='401' height='33' rowspan='2' id='titletd3'><img src='".$this->data['rootUrl']."global/estilos/logo.png' width='316' height='88' /></td>
<td colspan='3' align='center' id='titletd3'>Supertours.com</td>
</tr>
<tr>
<td height='35' colspan='3' id='titletd4'>&nbsp;</td>
</tr>
<tr>
<td align='center' height='33' colspan='4' id='titletd2'>&nbsp;</td>
</tr>
<tr>


<td colspan='2' align='center' id='titletd6'>Welcome, " . $_POST['username'] . "</td>
</tr>


<tr>
<td colspan='4' ><table id='tableorder3' width='90%'>
<tr>
<td  height='35' colspan='3' id='titlett3'  aling='center' >RECEIPT</td>
</tr>
<tr>
<td width='34%' height='28'>MEMBER NAME:</td>
<td colspan='2'>" . $_POST['firstname'] . " " . $_POST['lastname'] . "</td>
</tr>
<tr>
<td height='31'>MEMBER SINCE:</td>
<td colspan='2'>JUN. 12-2012 / 13:32</td>
</tr>
<tr>
<td height='27'>USERNAME:</td>
<td colspan='2'>" . $_POST['username'] . "</td>
</tr>
<tr>
<td height='27'>PASSWORD:</td>
<td>" . $signup->password . "</td>
</tr>
<tr>
<td height='27'>&nbsp;</td>
<td colspan='2'>&nbsp;</td>
</tr>
</table>
<p><br />
</p></td>
</tr>
<tr>
<td colspan='4'>&nbsp;</td>
</tr>
<tr>
<td colspan='4'>&nbsp;</td>
</tr>
<tr>
<td colspan='4' align='center'> <p align='center' class='titulopago'>THANK YOU FOR CHOOSING US <br />
SUPER TOURS OF ORLANDO,Inc. 5419 International Drive, Orlando Fl. 32819 <br />
Phone: (407) 370-3001 / U.S.A. TOLL FREE 1-800-251-4206 / reservations@supertours.com  

</p>       </td>
</tr>
</table>



</div>");
                    $mai2->Send();
                    // echo "Mensaje enviado. Que chivo va vos!!";
                } catch (phpmailerException $e) {
                    echo $e->errorMessage(); //Errores de PhpMailer
                } catch (Exception $e) {
                    echo $e->getMessage(); //Errores de cualquier otra cosa.
                }
            }

            // echo '<pre>';
            // print_r($mai2);
            // echo '</pre>';
            // die;
            if ($new) {
                Doo::db()->insert($signup);
                if (isset($_POST['username']) && isset($_POST['firstname'])) {
                    $login = new stdclass();
                    $login->username = $signup->username;
                    $login->firstname = $signup->firstname;
                    $login->lastname = $signup->lastname;
//                    $login->state = $signup->state;
//                    $login->address = $signup->address;
                    $login->tipo_client = $signup->tipo_client;
                    $login->zip = $signup->zip;
                    $login->phone = $signup->phone;
                    $login->celphone = $signup->celphone;
                    $login->address = $signup->address;
                    $login->state = $signup->state;
                    $login->city = $signup->city;
                    $login->country = $signup->country;
                    $login->id = Doo::db()->lastInsertId();
                    $_SESSION['user'] = $login;
                    return Doo::conf()->APP_URL . "confirmation_onedaytour";
                
                }
            }
        }

    }

    /*
      Seleccionar el trip para tour de un dia.
     */

    public function identificador() {
        do {
            $s = date("s");
            $iden = $s . rand(0, 9);
            $a = $this->db()->find('Reservas_trip_puestos', array('where' => 'usuario = ?',
                'limit' => 1,
                'select' => 'usuario',
                'estado' => 'USING',
                'param' => array($iden)
                    )
            );
            return $iden;
        } while ($a != null);
    }

    public function onetourPax($totalpax, $fecha2, $iden) {
        //$iden = $this->identificador();
        $totalPax = $totalpax;
        $fecha_trip = $fecha2;
        //echo $totalPax .'/'.$fecha.'/'.$iden;
        //echo $result;
    }

    public function revisarPuestos() {
        $iden = $this->params['iden'];
        echo $iden;
        /* $find = "SELECT * FROM resevas_trip_puestos WHERE usuario = '".$_SESSION['toursbooking']['iden']."'";
          $re = Doo::db()->query($find);
          $result = $re->rowCount(); */
        //print_r($result);
    }

    public function quitarOneDay() {
        $iden = $this->params['iden'];
        $update = "UPDATE reservas_trip_puestos SET estado = 'CANCELED' WHERE usuario = '" . $iden . "'";
        Doo::db()->query($update);
    }
    public function quitarmultiDay() {
        $iden = $this->params['iden'];
        $tipo = $this->params['tipo'];
        $update = "UPDATE reservas_trip_puestos SET estado = 'CANCELED' WHERE usuario = '" . $iden . "' AND tipo = '" . $tipo . "' ";
        Doo::db()->query($update);
    }

    public function selectTrip() {
        
        //             list ($mes2, $dia2, $anyo2) = explode("-", $fecha_retorno);
        // $salida = $anyo2 . "-" . $mes2 . "-" . $dia2;
        Doo::loadModel("Reservas_trip_puestos");

        if (isset($this->params["sentido"])) {
            $sentido = $this->params["sentido"];
        }
        if (isset($this->params['iden'])) {
            $iden = $this->params['iden'];
        }
        if (isset($this->params["idArea"])) {
            $idArea = $this->params["idArea"];
        }
        
        if (isset($this->params["fechaS"])) {
            $fechaS = $this->params["fechaS"];

            list ($mes, $dia, $anyo) = explode("-", $fechaS);
            $fecha2 = $anyo . "-" . $mes . "-" . $dia;

            $stt = strtotime($fecha2); 

        }
        if (isset($this->params["totalpax"])) {
            $totalpax = $this->params["totalpax"];
        } else {
            $totalpax = 1;
        }

        $iduser = $_SESSION["booking"]["iden"] ;
        
        $trip301 = 301;

  
        //die;
        // echo '<pre>';
        // print_r($this->params);
        // echo '</pre>';
        //echo 'identificador =>'. $iden;
        echo '<script>
                    // function myFunction() {
                    //     var x = document.getElementById("area").value;
                    //     //alert(x);
                    //     document.getElementById("area2").value = x;
                    //     if(x == 0){
                    //         document.getElementById("pickup").value = 0;
                    //         document.getElementById("pickup2").value = 0;
                    //     }
                    // }
              </script>';

        list ($mes, $dia, $anyo) = explode("-", $fechaS);
        $fecha2 = $anyo . "-" . $mes . "-" . $dia;
        
        //echo date('Y-m-d h:i A');
        $f0 = strtotime(date('Y-m-d h:i A'));
        $f1 = strtotime($fecha2);
        $resultado = ($f1 - $f0);
        $resultado = ($resultado / 60 / 60);
        $resultado = round($resultado);
        if ($resultado > 2) {
            $tiempo = true;
            $mensaje = '';
        } else {
            $tiempo = false;
            $mensaje = "The maximum period for reservation of one-day-tours be until 10:00 PM the day prior to the date of departure";
        }
        $url = Doo::conf()->APP_URL;

        
        if ($sentido == 1) {
            // Salida
            $tipo = 1;
         
            // date_default_timezone_set('America/New_York');
            $reservas_trip_puestos = new Reservas_trip_puestos;
            $reservas_trip_puestos->trip_to = 301;
            $reservas_trip_puestos->tipo = 2;
            $reservas_trip_puestos->fecha_trip = $fecha2;
            $reservas_trip_puestos->cantidad = $totalpax;
            $reservas_trip_puestos->fecha_usado = date('Y-m-d h:i:s');
            $reservas_trip_puestos->fecha_actividad = date('Y-m-d h:i:s');
            $reservas_trip_puestos->usuario = $iduser;
            $reservas_trip_puestos->estado = 'USING';
            $reservas_trip_puestos->tarifa = '7';
            //print_r($reservas_trip_puestos);
            $sql = "SELECT * FROM reservas_trip_puestos WHERE usuario = '" . $iduser . "' AND tipo='2' ";
            $re = Doo::db()->query($sql);
            $result = $re->rowCount();
            // echo date('y-m-d h:i:s');
            // var_dump($_SESSION['booking']);
            // echo '$idArea =>' . $idArea;
            if($idArea == '' || $idArea == 0){
                $z = "SELECT now() as timet";
                $zrt = Doo::db()->query($z);
                foreach ($zrt as $t):
                    $Tt=$t['timet'];
                endforeach;
                $_SESSION['booking']['dateT2']=$Tt;

                $update = "UPDATE reservas_trip_puestos SET estado='CANCELED',fecha_actividad = now(),tarifa = 7,trip_to = 301 WHERE usuario = '" . $iduser . "' AND tipo = '2' ";
                Doo::db()->query($update);
                // $del = "DELETE FROM reservas_trip_puestos WHERE usuario = '" . $iduser . "' AND tipo = '2' AND tarifa = '7'";
                // Doo::db()->query($del);
            }else{

                if ($result == 0) {
                    $z = "SELECT now() as timet";
                    $zrt = Doo::db()->query($z);
                    foreach ($zrt as $t):
                        $Tt=$t['timet'];
                    endforeach;
                    $_SESSION['booking']['dateT2']=$Tt;

                    $insert = "INSERT INTO reservas_trip_puestos (id, trip_to, tipo, fecha_trip, cantidad, fecha_usado, usuario, estado, fecha_actividad,tarifa) 
                    VALUES(NULL, 301, 2, '".$fecha2."', $totalpax, now(), $iduser, 'USING', now(),7)";
                    // echo $Tt;
                    // die;
                    Doo::db()->query($insert);
                } else{
                    $z = "SELECT now() as timet";
                    $zrt = Doo::db()->query($z);
                    foreach ($zrt as $t):
                        $Tt=$t['timet'];
                    endforeach;
                    $_SESSION['booking']['dateT2']=$Tt;

                    $update = "UPDATE reservas_trip_puestos SET cantidad = '" . $totalpax . "', fecha_trip = '" . $fecha2 . "', fecha_usado = now() , estado='USING',fecha_actividad = now(),tarifa = 7,trip_to = 301 WHERE usuario = '" . $iden . "' AND tipo = '2'  ";
                    Doo::db()->query($update);
                }
            }
            
   //$this->onetourPax($totalpax, $fecha2, $iden);
            //saca la cantidad asignada de puestos para tures
            // echo '<pre>';
            // print_r($update);
            // echo '</pre>';
            // die;
            $sqlcap_301 = "SELECT DISTINCT seats_remain,capacity, capacity2, capacity3, capacity4, capacity5 FROM routes WHERE fecha_ini = '$fecha2' AND fecha_fin = '$fecha2'  AND trip_no = '$trip301' ";
            $rscap_301 = Doo::db()->query($sqlcap_301);
            $capac_301 = $rscap_301->fetchAll();
            foreach ($capac_301 as $c) {
                $capacity = $c['capacity'];
                $capacity2 = $c['capacity2'];
                $capacity3 = $c['capacity3'];
                $capacity4 = $c['capacity4'];
                $capacity5 = $c['capacity5'];
                // $seat = $capacity + $capacity2 +$capacity3 +$capacity4 +$capacity5;
            }
            $sql2 = "SELECT
            SUM(cantidad) AS cantTours
            FROM reservas_trip_puestos WHERE fecha_trip = ?
            AND trip_to = ?
            AND (tipo = '1' OR tipo = '2')
            AND ( estado = 'USING' OR estado = 'RENEWED' )  ";
            $rs2 = Doo::db()->query($sql2, array($fecha2,$trip301));
            $puestos2 = $rs2->fetchAll(PDO::FETCH_ASSOC);
            $cantTours12 =  $puestos2[0]['cantTours'];

            $sql_spcida = "SELECT
            (sum(pax) + sum(pax2)) AS superespecial
          FROM reservas  WHERE trip_no = ? AND fecha_salida = ?
          AND estado != 'QUOTE'
          AND estado != 'CANCELED'
          AND estado != 'NOT SHOW W/ CHARGE'
          AND estado != 'NOT SHOW W/O CHARGE'
          AND estado != 'NO SHOW'
          AND type_tour = 'ONE'";
            $trips = Doo::db()->query($sql_spcida, array($trip301,$fecha2));
            $r_spcida = $trips->fetchAll();
            $superespecial = $r_spcida[0]['superespecial'];

            $totalCapacity = ($capacity + $capacity2 + $capacity3 + $capacity4 + $capacity5);
            $totalseat = $totalCapacity - $cantTours12 - $superespecial ;

            $puestosDisponibles = ($totalCapacity - $totalpax);
            //  echo 'puestos disponibles =>' . $totalseat;

             if ($totalseat  < 0) {
              echo '<br />
              <table width="100%" border="1" class="table-light table-sm table-hover table2 table table-bordered table-striped"><thead><tr style="height: 40px;text-align: center;"><th width="10%" style="text-align: center"><b class="txt2">Trip</b></th><th width="25%" style="text-align: center"><b class="txt2">Departure</b></th><!--<th width="25%" style="text-align: center"><b>Arrive</b></th><th width="30%" style="text-align: center"><b>Equipment</b></th>--></tr></thead><tbody><tr><td colspan="7" style="    text-align: center;"><input type="hidden" name="trip1" id="trip1" value="-1" class="trip1">Quotas sold out for this date And this trip, Try again with another date</td></tr></tbody></table>';
              die;
              }

            // var_dump($idArea != '' AND $idArea != 0);

            $type = 0; //sin Agencia
            $sql = 'SELECT p.trip_no, r.id, p.fecha,  a1.nombre AS trip_from,  a2.nombre AS trip_to,  r.trip_departure,  r.trip_arrival, t.equipment, p.estado, r.type_rate  
		FROM programacion p LEFT JOIN routes r ON (p.trip_no = r.trip_no)  
                            LEFT JOIN trips  t ON (p.trip_no = t.trip_no)
                            LEFT JOIN areas  a1 ON (r.trip_from = a1.id)
                            LEFT JOIN areas  a2 ON  (r.trip_to  = a2.id)
		WHERE p.trip_no = "301"  
			AND r.trip_to = "1"
			AND r.trip_departure > "" 
			AND p.estado = "1" 
			AND p.trip_no = "301" 
			AND r.type_rate = ? 
			AND r.trip_from = ? 
			AND p.fecha = ?
                ORDER BY r.trip_departure ASC';
            $rs = Doo::db()->query($sql, array($type, $idArea, $fechaS));
            $llegada = $rs->fetchAll();
            echo '<div align="center">
                    <table width="100%" border="1" class="table-light table-sm table-hover table2 table table-bordered table-striped">
                        <thead>
                            <tr style="height: 40px;text-align: center;">
                                <th width="10%" style="display:none; text-align: center"><b class="txt2">Trip</b></th>
                                <th width="25%" style="text-align: center"><b class="txt2">Departure</b></th>
                                <!--<th width="25%" style="text-align: center"><b>Arrive</b></th>
                                <th width="30%" style="text-align: center"><b>Equipment</b></th>-->
                            </tr>
                        </thead>';
            $num = count($llegada);
            if ($num > 0 && $tiempo) {
                $e = $llegada[0];
                Doo::loadController('MainController');
                $main = new MainController();
                $disponible1 = $main->disponible('301', $fecha2);
                // echo '<pre>';
                // print_r($disponible1);
                // echo '</pre>';
                if (false) {
                    echo '  <tr class="nodisponible" title="Trip not available">';
                    echo '<td width="10%" style="display:none; font-weight: bold;color: white;background-color: #1f2b58;text-align: center">301</td>';
                } else {
                    echo '<tr class="" style="height: 34px">';
                    echo '<td width="10%" style="display:none; font-weight: bold;color: white;background-color: #1f2b58;text-align: center" >301
                                <input type="hidden" name="trip1" id="trip1"  value="301"  class="trip1"/>
                                <input name="sarrival" type="hidden"  value="1"/>
                        </td>';
                }
                if (isset($e)) {
                    echo '<td style="text-align: center "><strong style="font-size: 50px;">' . date("g:i A", strtotime($e['trip_departure'])) . '</strong></td>
                    <!--<td style="text-align: center">' . date("g:i A", strtotime($e ['trip_arrival'])) . '</td>
                            <td width="30%" style="text-align: center">BUS</td>-->
                          </tr>';
                } else {
                    echo '<script>
                    <!-- $(function(){ 
                                    $("#fecha_salida").val(""); 
                                    alert("no trips for this date") 
                                    $("#from").val(0); 
                                    $("#to2").val(0);
                                });-->
                            </script>';
                }
            } else {
                echo '<tr>
								<td colspan="7" style="    text-align: center;">
								<input type="hidden" name="trip1" id="trip1"  value="-1"  class="trip1"/>
								No tours available</td> 
							  </tr> ';
            }
            if (isset($e)) {
                echo ' </table>
				    <b style="color:#F00" >' . $mensaje . '</b>
                    <input type="hidden" value = "' . date("H:i", strtotime($e['trip_departure'])) . '" id="deptime1" name="deptime1">
                    <input type="hidden" value = "' . date("H:i", strtotime($e['trip_arrival'])) . '" id="arrtime1" name="arrtime1">
				</div>';
            } else {
                echo '<!--<script>$(function(){ $("#fecha_salida").val(""); alert("no trips for this date") 
                    $("#from").val(0); $("#to2").val(0);
                    })
                    </script>-->';
            }
        } else if ($sentido == 2) {

// echo '<pre>';
// print_r($insert);
// echo '</pre>';
// die;
        $type = 0; // sin Agencia 
        $tipo = 1;
        $trip300 = 300;

        // $totalseat = $totalCapacity2 - $cantTours12 - $superespecial - $totalpax;
            $reservas_trip_puestos1 = new Reservas_trip_puestos;
            $reservas_trip_puestos1->trip_to = 300;
            $reservas_trip_puestos1->tipo = 1;
            $reservas_trip_puestos1->fecha_trip = $fecha2;
            $reservas_trip_puestos1->cantidad = $totalpax;
            $reservas_trip_puestos1->fecha_usado = date('y-m-d h:i:s');
            $reservas_trip_puestos1->fecha_actividad = date('y-m-d h:i:s');
            $reservas_trip_puestos1->usuario = $iduser;
            $reservas_trip_puestos1->estado = 'USING';
            $reservas_trip_puestos1->tarifa = 7;
            //print_r($reservas_trip_puestos);
            $sql1 = "SELECT * FROM reservas_trip_puestos WHERE usuario = '" . $iduser . "' AND tipo = '1'";
            $re1 = Doo::db()->query($sql1);
            $result1 = $re1->rowCount();
            //echo $result1;

            if($idArea == '' || $idArea == 0){
                $z = "SELECT now() as timet";
                $zrt = Doo::db()->query($z);
                foreach ($zrt as $t):
                    $Tt=$t['timet'];
                endforeach;
                $_SESSION['booking']['dateT1']=$Tt;
                $update1 = "UPDATE reservas_trip_puestos SET estado='CANCELED',fecha_actividad = NOW(),tarifa = 7,trip_to = 300,fecha_usado = NOW() WHERE usuario = '" . $iduser . "' AND tipo = '1'  ";
                    Doo::db()->query($update1);
                    // $del1 = "DELETE FROM reservas_trip_puestos WHERE usuario = '" . $iduser . "' AND tipo = '1' AND tarifa = '7'";
                    // Doo::db()->query($del1);
                }else{
   
                if ($result1 == 0) {
                    $z = "SELECT now() as timet";
                    $zrt = Doo::db()->query($z);
                    foreach ($zrt as $t):
                        $Tt=$t['timet'];
                    endforeach;
                    $_SESSION['booking']['dateT1']=$Tt;

                    $insert2 = "INSERT INTO reservas_trip_puestos (id, trip_to, tipo, fecha_trip, cantidad, fecha_usado, usuario, estado, fecha_actividad,tarifa) 
                    VALUES(NULL, 300, 1, '".$fecha2."', '$totalpax', NOW(), $iduser, 'USING', NOW(),7)";
                    Doo::db()->query($insert2);
                    // echo '<pre>';
                    // print_r($insert2);
                    // echo '</pre>';
                    // die;
                } else {
                    $z = "SELECT now() as timet";
                    $zrt = Doo::db()->query($z);
                    foreach ($zrt as $t):
                        $Tt=$t['timet'];
                    endforeach;
                    $_SESSION['booking']['dateT1']=$Tt;
                    $update1 = "UPDATE reservas_trip_puestos SET cantidad = '" . $totalpax . "', fecha_trip = '" . $fecha2 . "', fecha_usado = NOW(), estado='USING',fecha_actividad = NOW(),tarifa = 7,trip_to = 300 WHERE usuario = '" . $iden . "' AND tipo = '1'  ";
                    Doo::db()->query($update1);
                }
            }

            $sqlcap_300 = "SELECT DISTINCT seats_remain,capacity, capacity2, capacity3, capacity4, capacity5 FROM routes WHERE fecha_ini = '$fecha2' AND fecha_fin = '$fecha2'  AND trip_no = '$trip300' ";
            $rscap_300 = Doo::db()->query($sqlcap_300);
            $capac_300 = $rscap_300->fetchAll();
            foreach ($capac_300 as $c2) {
                // $seats2 = $c2['seats_remain'];
                $capacity2 = $c2['capacity'];
                $capacity22 = $c2['capacity2'];
                $capacity32 = $c2['capacity3'];
                $capacity42 = $c2['capacity4'];
                $capacity52 = $c2['capacity5'];
            }
    
                $sql2 = "SELECT
            SUM(cantidad) AS cantTours
            FROM reservas_trip_puestos WHERE fecha_trip = ?
            AND trip_to = ?
            AND (tipo = '1' OR tipo = '2')
            AND ( estado = 'USING' OR estado = 'RENEWED' ) ";
            $rs22 = Doo::db()->query($sql2, array($fecha2,$trip300));
            $puestos22 = $rs22->fetchAll(PDO::FETCH_ASSOC);
            $cantTours122 =  $puestos22[0]['cantTours'];
    
            $sql_spcida2 = "SELECT
            (sum(pax_r) + sum(pax2_r)) AS superespecial
          FROM reservas  WHERE trip_no2 = ? AND fecha_retorno = ?
          AND estado != 'QUOTE'
          AND estado != 'CANCELED'
          AND estado != 'NOT SHOW W/ CHARGE'
          AND estado != 'NOT SHOW W/O CHARGE'
          AND estado != 'NO SHOW'
          AND type_tour = 'ONE'";
            $trips2 = Doo::db()->query($sql_spcida2, array($trip300,$fecha2));
            $r_spcida2 = $trips2->fetchAll();
            $superespecial2 = $r_spcida2[0]['superespecial'];
    
            $totalCapacity2 = ($capacity2 + $capacity22 + $capacity32 + $capacity42 + $capacity52);
            $totalseat2 = $totalCapacity2  - $cantTours122 -$superespecial2 ;
            $totalCapacity300 = ($capacity2 + $capacity22 + $capacity32 + $capacity42 + $capacity52);
            //echo $totalCapacity300;
            $puestosDisponibles2 = ($totalCapacity300 - $totalpax);
            // echo 'puestos disponibles =>' . $totalseat2;
            // echo '<pre>';
            // print_r($reservas_trip_puestos1);
            // echo '</pre>';
    
             if ( $totalseat2 < 0) {
                // echo '<br />Quotas sold out for this date And this trip, Try again with another date';
                die;
              } 
    
            //$this->onetourPax($totalpax, $fecha2, $iden);
            $sql = 'SELECT p.trip_no, r.id, p.fecha,  a1.nombre AS trip_from,  a2.nombre AS trip_to,  r.trip_departure,  r.trip_arrival, t.equipment, p.estado, r.type_rate  
                            FROM programacion p 
                            LEFT JOIN routes r ON (p.trip_no = r.trip_no)  
                            LEFT JOIN trips  t ON (p.trip_no = t.trip_no)
                            LEFT JOIN areas  a1 ON (r.trip_from = a1.id)
                            LEFT JOIN areas  a2 ON  (r.trip_to  = a2.id)
                            WHERE p.trip_no = "300"  
                            AND r.trip_from =  "1"
                            AND r.trip_departure >  ""
                            AND p.estado =  "1"
                            AND r.type_rate =  ?
                            AND r.trip_to =  ?
                            AND  p.fecha = ?
		  ORDER BY r.trip_departure ASC';
            $rs = Doo::db()->query($sql, array(
                $type, $idArea, $fechaS
            ));
            echo '<div align="center" style="display:none"> 
                        <table width="100%" border="1" class="table-light table-sm table-hover table2 table table-bordered table-striped">
		 		<thead>
                                    <tr style="height: 40px;text-align: center; display:none">
                                        <th width="10%" style="text-align: center"><b>Trip</b></th>
                                        <th width="25%" style="text-align: center"><b>Departure</b></th>
                                        <th width="25%" style="text-align: center"><b>Arrive</b></th>
                                        <th width="40%" style="text-align: center"><b>Equipment</b></th>
                                    </tr>
				</thead>';
            $salida = $rs->fetchAll();
            $num = count($salida);
            if ($num > 0 && $tiempo) {
                $e = $salida[0];
                Doo::loadController('MainController');
                $main = new MainController();
                $disponible1 = $main->disponible('301', $fecha2);
                if ($totalpax > $disponible1) {
                    echo '  <tr class="nodisponible">';
                    echo '	<td width="10%" style="font-weight: bold;color: white;background-color: #dc3545;text-align: center">301</td>';
                } else {
                    echo '  <tr class="" style="height: 34px">';
                    echo '  <td width="10%" style="font-weight: bold;color: white;background-color: #dc3545;text-align: center">300
                                <input type="hidden" name="trip2" id="trip2"  value="300"  class="trip2"/>
                                <input name="sdeparture" type="hidden"  value="1"/>
                            </td>';
                }

                echo ' <td width="25%" style="text-align: center">' . date("g:i A", strtotime($e['trip_departure'])) . '</td>
			<td width="29%" style="text-align: center">' . date("g:i A", strtotime($e['trip_arrival'])) . '</td>
			<td width="30%" style="text-align: center">BUS</td>
							</tr>';
            } else {
                echo '<tr>
								<td colspan="7" style="display:none; text-align: center;">
								<input type="hidden" name="trip2" id="trip2"  value="-1"  class="trip1"/>
								No tours available</td> 
							  </tr> ';
            }
            if (isset($e)) {
                echo ' </table>
                     <input type="hidden" value = "' . date("H:i", strtotime($e['trip_departure'])) . '" id="deptime2" name="deptime2" />
                     <input type="hidden" value = "' . date("H:i", strtotime($e['trip_arrival'])) . '" id="arrtime2" name="arrtime2" />
				 </div> 
                    ';
            }
        }
      

    }

    public function selectArea() {

        if (isset($_SESSION['data_agency'])) {
            Doo::loadModel("Agency");
            $dat = new Agency($_SESSION['data_agency']);
        } else {
            Doo::loadModel("Agency");
            $dat = new Agency();
            $dat->id = -1;
        }
        //Tipo de pickup_dropoff;
        if ($dat->id == -1) {
            $type_web = 1;
        } else {
            $type_web = 0;
        }
        $id = $this->params ['id'];
        $idArea = $this->params ['idArea'];
        $sql = "SELECT DISTINCT t1.trip_to, t2.nombre  FROM routes t1
                LEFT JOIN areas t2 ON (t1.trip_to = t2.id)
                WHERE t1.type_rate = 0 and t1.trip_from = 1 ";
        $sql2 = "SELECT id,place,address
FROM pickup_dropoff
WHERE id_area = ? AND type_web = ? ORDER BY id ASC";

        $rs = Doo::db()->query($sql);
        $rs2 = Doo::db()->query($sql2, array(
            9, $type_web
        ));
        $rs3 = Doo::db()->query($sql2, array(
            1, $type_web
        ));
        $pickupdropof = $rs2->fetchAll();
        $areas = $rs->fetchAll();
        $pikuporlando = $rs3->fetchAll();
        if ($id == 0) {
            echo '<script> $("#pickups").css("display", "block"); </script>';
            echo "<table width='80%' border='0' cellspacing='1' aling='center'>
  <tr>
    <td width='20%'>Area:</td>
    <td width='20%'>";
            echo "<select name='area' id='area'>";
            foreach ($areas as $e) {
                echo '<option value="' . $e ['trip_to'] . '" ' . (($idArea == $e ['trip_to']) ? 'selected' : '') . ' >' . $e ['nombre'] . '</option>';
            }

            echo "</select>";
            echo "</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Pickup Point:</td>
    <td>";
            echo "<select name='pickup' id='pickup' style='width:195px;'>";
            foreach ($pickupdropof as $e) {
                echo '<option value="' . $e ['id'] . '"  >' . $e ['place'] . '  ' . $e ['address'] . '</option>';
            }

            echo "</select>";
            echo "</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <!--tr>
    <td>Drop Off Point: </td>
    <td>";

            // gropoff orlando
            echo "<select name='pickup' id='pickup' style='width:195px;'>";
            foreach ($pikuporlando as $e) {

                echo '<option value="' . $e ['id'] . '"  >' . $e ['place'] . '  ' . $e ['address'] . '</option>';
            }

            echo "</select>";
            echo "</td>
  </tr-->
</table>";

            $url = Doo::conf()->APP_URL;

            echo '<script>
	
$("#area").change(function() {			

	var id = $(this).val();	  
	$("#area2").attr("value",id);
				
	$("#pickup").load("' . $url . 'tours/question15/" + id );
	$("#pickup2").load("' . $url . 'tours/question15/" + id );
	var sentido = 1;
	var idArea = $(this).val();
	var fechaS = $("#txtfecha_salida").val();
	 var opcionPickup = 0;
    $("#trip1_onedaytour").load("' . $url . 'tours/onedaytour/" + sentido +"/"+ idArea +"/"+ fechaS +"/"+ opcionPickup);
	var sentido = 2;
	$("#trip2_onedaytour").load("' . $url . 'tours/onedaytour/" + sentido +"/"+ idArea +"/"+ fechaS +"/"+ opcionPickup);
			
});
</script>';
        } else {
            echo '<script>$("#conte2").css("display", "none");$("#pickups2").css("display", "block"); </script>';

            // ////////////

            echo "<table width='80%' border='0' cellspacing='1' aling='center'>
  <tr>
    <td width='20%'>Area:</td>
    <td width='20%'>";
            echo "<select name='area2' id='area2'>";
            foreach ($areas as $e) {
                echo '<option value="' . $e ['trip_to'] . '" ' . (($idArea == $e ['trip_to']) ? 'selected' : '') . ' >' . $e ['nombre'] . '</option>';
            }

            echo "</select>";
            echo "</td>
  </tr>
  <!--tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr-->
  <!--tr>
    <td>Pickup Point:</td>
    <td>";
            echo "<select name='pickup2'class='form-control1 form-control form-control-sm input-areas' id='pickup' style='width:195px;'>";
            foreach ($pikuporlando as $e) {
                echo '<option value="' . $e ['id'] . '"  >' . $e ['place'] . '  ' . $e ['address'] . '</option>';
            }

            echo "</select>";
            echo "</td>
  </tr-->
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Drop Off Point:</td>
    <td>";

            // gropoff area escogida
            echo "<select name='pickup2' class='form-control1 form-control form-control-sm input-areas' id='pickup2' style='width:195px;'>";
            foreach ($pickupdropof as $e) {
                echo '<option value="' . $e ['id'] . '"  >' . $e ['place'] . '  ' . $e ['address'] . '</option>';
            }

            echo "</select>";
            echo "</td>
  </tr>
</table>";
            $url = Doo::conf()->APP_URL;
            echo '<script>
	
			$("#area2").change(function() {
			   var id = $(this).val();
			   $("#pickup2").load("' . $url . 'tours/question15/" + id );
			   var sentido = 2;
			   var idArea = id;
			   var sentido = 2;
			   var opcionPickup = 0;
			$("#trip2_onedaytour").load("' . $url . 'tours/onedaytour/" + sentido +"/"+ idArea +"/"+ fechaS +"/" opcionPickup);
			});
</script>';
        }
    }

    public function ajaxparks_onedaytour() {

        try {

            $tikes = $this->params ["resp"];
            

            $identificadores = $this->params["id"];
            //echo $identificadores;
            
            $toursbooking = $_SESSION ["toursbooking"];
            //echo 'siempre salao';
            $fecha = substr($toursbooking['fecha_salida'], 0, 4) . '-01-01 00:00:00';
            
            if (isset($_SESSION ['toursbooking']['ticketpark'])) {
                unset($_SESSION ['toursbooking']['ticketpark']);
            }

            $arreglo = array();
            if (isset($this->params["id"])) {
                $dato = $this->params["id"];
                list ($park, $grupo) = explode(",", $dato);
                $dato = $park;
            }



            if (isset($this->params ["ides"])) {

                $dato = $this->params ["ides"];
                list ($park, $grupo) = explode(",", $dato);

                $dato = $park;
            }
            
            /** Codigo para que el parke kennedy space cter, para  este parque es necesario como minimo 2 pasajeros* */
            if ($dato == 19) {
                if ($_SESSION ['toursbooking']['totalpax'] < 2) {

                    // echo "<script>$('#tqp').html('$" . round($_SESSION ['toursbooking'] ['tqp']) . "');</script>";
                    echo "<script>$('#" . $dato . "').remove();</script>";
                    echo "<script>$('#tqp').html('$" . number_format(0,2) . "');</script>";
                    echo "<script>$('#tqp2').val('" . 0 . "');</script>";
                    echo '<script type="text/javascript">
                         $("input[type=\'checkbox\'").attr("checked",false).change();
                         alert("For Kennedy Space Center you need a minimum of two people");
                       $("#dialog-message-new").dialog({
                             modal: true,
                             buttons: {
                             Ok: function() {  $( this ).dialog( "close" );  }
                             }
                        }); 
                                
                      </script>';
                    exit;
                }
            }
            /*             * ******************** */

            $sql = 'SELECT t1.id,t1.nombre,t2.nombre AS grupo,t3.adult,t3.child
                        FROM parques t1
                        LEFT JOIN grupo_parques t2 ON (t1.id_grupo = t2.id)
                        LEFT JOIN parques_tarifasgrupo t3 ON (t1.id_grupo = t3.id_grupo)
                    WHERE t1.id = ?';

            $rs = Doo::db()->query($sql, array(
                $dato
            ));
            
            $parkdatos = $rs->fetch();

           
            // die;
            /* print_r(Doo::db()->showSQL());
              exit; */
               
            if (isset($this->params["ides"])){
                $park = $this->params["ides"];
                
                if ($parkdatos['adult'] && $parkdatos['child']) {
                    $tqp = ($toursbooking ['tq'] / $toursbooking ['totalpax']) + ($_SESSION ['toursbooking'] ['parktotal'] / $toursbooking ['totalpax']);
                    $_SESSION ['toursbooking']['ticketpark'] = 0;
                    $_SESSION ['toursbooking']['np'] = 0;
                    /* $this->tours_tow_onedaytour(); */
                    if ($tikes == 1) {
                        $sumatike = $_SESSION ['toursbooking'] ['ticketpark'] / $_SESSION ['toursbooking'] ['totalpax'];
                    } else {
                        $sumatike = 0;
                    }
                    //print_r($sumatike);
                    // $_SESSION ['toursbooking'] ['tsa'] = $tqp;
                    //$_SESSION ['toursbooking'] ['tqp'] = ($_SESSION ['toursbooking']['ticketpark'] + $_SESSION['toursbooking']['tq']) / $toursbooking ['totalpax'];
                     echo "<script>$('#tqp').html('$" . number_format(0,2) . "');</script>";
                     echo "<script>$('#tqp2').val('" . 0 . "');</script>";
                     echo "<script>$('#resp2').attr('checked',true);;</script>";
                    echo "<script>$('#" . $dato . "').remove();</script>";
                    echo "<script>$('#chiltransp').html('Tansportation per Child $ " . number_format(0,2) . "');</script>";
                    echo "<script>$('#adulttransp').html('Tansportation per Adults: $ " . number_format(0,2) . "');</script>";
                }
            } else {
               
                if (!isset($_SESSION ['toursbooking']['parktotal'])) {
                    $_SESSION ['toursbooking']['parktotal'] = 0;
                }
                
                if ($parkdatos['adult'] && $parkdatos['child']) {
                    $especial = false;
                    $_SESSION ['toursbooking'] ['parktotal'] = 1;
                    $_SESSION ['grupos'] ['id'] = $grupo;
                    $_SESSION ['grupos']['idParque'] = $dato;
                    $_SESSION ['toursbooking'] ['np'] = 1;
                    $this->tours_tow_onedaytour();
                    if ($tikes == 1) {
                        $sumatike = $_SESSION ['toursbooking'] ['ticketpark'];
                        $_SESSION ['toursbooking'] ['paso'] = "";
                    } else {
                        $sumatike = 0;
                    }
                    

                    $toursbooking = $_SESSION ["toursbooking"];
                    $fecha = substr($toursbooking['fecha_llegada'], 0, 4) . '-01-01 00:00:00';
                    $totaladult = $toursbooking["adults"];
                    $totalchild = $toursbooking["childs"];
                    $totalpax = $totaladult + $totalchild;
                    Doo::loadModel("Agency");
                    if (isset($_SESSION['data_agency'])) {
                        $dat = new Agency($_SESSION['data_agency']);
                        $type = $dat->type_rate;
                    } else {
                        $dat = new Agency();
                        $dat->type_rate = 0;
                        $dat->id = -1;
                    }
                     $stt = strtotime($toursbooking['fecha_llegada']); 
                     
                    //echo 'type_rate = '.$dat->type_rate;
                    //////////////////////////////////services
                   
                    if (isset($toursbooking['trip1'])) {
                        if ($dat->type_rate ==1) {// Se busca SpecialNet
                            $sql = 'SELECT onet.priceadult,
                                    onet.pricechild,
                                    onet.suplemag_adult,
                                    onet.suplemag_child,
                                    onet.suplepcot_adult,
                                    onet.suplepcot_child,
                                    onet.suplehollywood_adult,
                                    onet.suplehollywood_child,
                                    onet.supleanimalk_adult,
                                    onet.supleanimalk_child,
                                    onet.suplemuniv_adult,
                                    onet.suplemuniv_child,
                                    onet.suplemisland_adult,
                                    onet.suplemisland_child,
                                    onet.suplemseaw_adult,
                                    onet.suplemseaw_child,
                                    onet.suplemaquat_adult,
                                    onet.suplemaquat_child,
                                    onet.suplemwetn_adult,
                                    onet.suplemwetn_child,
                                    onet.suplembliz_adult,
                                    onet.suplembliz_child,
                                    onet.suplemkennedy_adult,
                                    onet.suplemkennedy_child,
                                    onet.suplemholy_adult,
                                    onet.suplemholy_child
                                    FROM  onetour onet 
                                    WHERE onet.type_rate = ? AND id_agency = ? AND start_date <= ? AND end_date >= ?';
                            $type = 2;
                            $rs = Doo::db()->query($sql, array($type, $dat->id, $stt, $stt));
                            $prices = $rs->fetch();
                            
                            if (empty($prices)) {//Si no encuentra Buscamos Net.
                                $sql = "SELECT onet.priceadult, onet.pricechild,onet.pricechild,
                                    onet.suplemag_adult,
                                    onet.suplemag_child,
                                    onet.suplepcot_adult,
                                    onet.suplepcot_child,
                                    onet.suplehollywood_adult,
                                    onet.suplehollywood_child,
                                    onet.supleanimalk_adult,
                                    onet.supleanimalk_child,
                                    onet.suplemuniv_adult,
                                    onet.suplemuniv_child,
                                    onet.suplemisland_adult,
                                    onet.suplemisland_child,
                                    onet.suplemseaw_adult,
                                    onet.suplemseaw_child,
                                    onet.suplemaquat_adult,
                                    onet.suplemaquat_child,
                                    onet.suplemwetn_adult,
                                    onet.suplemwetn_child,
                                    onet.suplembliz_adult,
                                    onet.suplembliz_child,
                                    onet.suplemkennedy_adult,
                                    onet.suplemkennedy_child,
                                    onet.suplemholy_adult,
                                    onet.suplemholy_child	
                                    FROM  onetour onet 
                                    WHERE onet.type_rate = ? AND start_date <= ? AND end_date >= ? ";
                                $type = 1;
                                $rs = Doo::db()->query($sql, array($dat->type_rate, $stt, $stt));
                                $prices = $rs->fetch();
                            } else {
                                $especial = true;
                            }
                        } else {
                            //Buscamos Comi
                           // echo 'type_rate = '.$dat->type_rate;
                           
                            $sql = "SELECT onet.priceadult, onet.pricechild,onet.pricechild,
                                    onet.suplemag_adult,
                                    onet.suplemag_child,
                                    onet.suplepcot_adult,
                                    onet.suplepcot_child,
                                    onet.suplehollywood_adult,
                                    onet.suplehollywood_child,
                                    onet.supleanimalk_adult,
                                    onet.supleanimalk_child,
                                    onet.suplemuniv_adult,
                                    onet.suplemuniv_child,
                                    onet.suplemisland_adult,
                                    onet.suplemisland_child,
                                    onet.suplemseaw_adult,
                                    onet.suplemseaw_child,
                                    onet.suplemaquat_adult,
                                    onet.suplemaquat_child,
                                    onet.suplemwetn_adult,
                                    onet.suplemwetn_child,
                                    onet.suplembliz_adult,
                                    onet.suplembliz_child,
                                    onet.suplemkennedy_adult,
                                    onet.suplemkennedy_child,
                                    onet.suplemholy_adult,
                                    onet.suplemholy_child,
                                    onet.priceadult_WDW,
                                    onet.pricechild_WDW,
                                    onet.priceadult_UNIVP,
                                    onet.pricechild_UNIVP,
                                    onet.priceadult_SEAW,
                                    onet.pricechild_SEAW,
                                    onet.priceadult_WATERP,
                                    onet.pricechild_WATERP,
                                    onet.priceadult_HOLYLAND,
                                    onet.pricechild_HOLYLAND,
                                    onet.priceadult_KENNEDYSPC,
                                    onet.pricechild_KENNEDYSPC
                                    FROM  onetour onet
                                    WHERE onet.type_rate = ? AND start_date <= ? AND end_date >= ? ";
                                   
                            $type = 0;
                            $rs = Doo::db()->query($sql, array($dat->type_rate, $stt, $stt));
                            $prices = $rs->fetchAll();
                           
                            foreach ($prices as $price) {

                                //precio para los parques de disney
                                $priceadult_WDW = $price['priceadult_WDW'];
                                $pricechild_WDW = $price['pricechild_WDW'];

                                //precio para los parques de universal 
                                $priceadult_UNIVP = $price['priceadult_UNIVP'];
                                $pricechild_UNIVP = $price['pricechild_UNIVP'];

                                //precio para los parques de sea world
                                $priceadult_SEAW = $price['priceadult_SEAW'];
                                $pricechild_SEAW = $price['pricechild_SEAW'];

                                //precio para los parques de whater
                                $priceadult_WATERP = $price['priceadult_WATERP'];
                                $pricechild_WATERP = $price['pricechild_WATERP'];

                                //precio para los parques de holyland

                                $priceadult_HOLYLAND = $price['priceadult_HOLYLAND'];
                                $pricechild_HOLYLAND = $price['pricechild_HOLYLAND'];

                                //precio para el kennedy space center
                                $priceadult_KENNEDYSPC = $price['priceadult_KENNEDYSPC'];
                                $pricechild_KENNEDYSPC = $price['pricechild_KENNEDYSPC'];
                            }

                        }
                        
                        list ($id_park, $id_grupo) = explode(",", $identificadores);
                        $idpark = $id_park;
                        $idgrupo = $id_grupo;
                        
                        //echo 'id del parque = '.$idpark.'<br />id del grupo = '.$idgrupo;
                        //echo 'Grupo=>'.$idgrupo.' ';
                        
                        if ($idgrupo == 4 || $idgrupo == 5 || $idgrupo == 6) {
                            /*
                             * En esta parte del condicional estarán los parque de Disney, los de universal y sea word.
                             */
                            $totalA = $priceadult_WDW;
                            $totalN = $pricechild_WDW;
                            $precionetoadult = $prices[0]['priceadult_WDW'];
                            $precionetochild= $prices[0]['pricechild_WDW'];
                        } else if ($idgrupo == 7 || $idgrupo == 12) {
                            /*
                             * En esta parte del condicional estarán los parques de agua y el holy land.
                             */
                            $totalA = $priceadult_WATERP;
                            $totalN = $pricechild_WATERP;
                            $precionetoadult = $prices[0]['priceadult_WATERP'];
                            $precionetochild= $prices[0]['pricechild_WATERP'];
                        } else if ($idgrupo == 11) {
                            /*
                             * Solo ira el kennedy space center.
                             */
                            $totalA = $priceadult_KENNEDYSPC;
                            $totalN = $pricechild_KENNEDYSPC;
                            $precionetoadult = $prices[0]['priceadult_KENNEDYSPC'];
                            $precionetochild= $prices[0]['pricechild_KENNEDYSPC'];
                        }
                        //echo 'el total adulto es ='.$totalA;
                        //echo 'el total nino es ='.$totalN.'<br />';
                       
                        if (!empty($prices)) {

                            $priceadult = $prices['priceadult'] * $totaladult;
                            $pricechild = $prices['pricechild'] * $totalchild;
                            $trip1 = number_format($priceadult, 2, '.', '') + number_format($pricechild, 2, '.', '');
                        } else {
                            $priceadult = 0;
                            $pricechild = 0;
                        }
                    } else {
                        $trip1 = 0;
                        $priceadult = 0;
                        $pricechild = 0;
                    }
                    // die;
                    if ($especial) {
                        $tq = $trip1;

                        // //////////////////////////////////cierre services transporte

                        $_SESSION['toursbooking']['tsa'] = $tq;
                        $_SESSION['toursbooking']['tq'] = $tq; // total a pagar
                        $_SESSION['toursbooking']['tqp'] = $tq / $totalpax; // total por personas
                        $_SESSION['toursbooking']['np'] = 0;
                        $_SESSION["toursbooking"]["adults"] = $totaladult;
                        $_SESSION["toursbooking"]["childs"] = $totalchild;
                        $_SESSION["toursbooking"]["price_adults"] = $prices['priceadult'];
                        $_SESSION["toursbooking"]["price_childs"] = $prices['pricechild'];
                        $_SESSION["toursbooking"]["pricechilds"] = $pricechild;
                        $_SESSION["toursbooking"]["totalpax"] = $totalpax;
                        $_SESSION["toursbooking"]["totaltotal"] = number_format(($totalpax * $_SESSION['toursbooking']['tqp']), 2, '.', '');

                        $array_parks_asoc_price_adult = array(7 => $prices["suplemag_adult"],
                            8 => $prices["suplepcot_adult"],
                            9 => $prices["suplehollywood_adult"],
                            10 => $prices["supleanimalk_adult"],
                            14 => $prices["suplemuniv_adult"],
                            15 => $prices["suplemisland_adult"],
                            11 => $prices["suplemseaw_adult"],
                            13 => $prices["suplemaquat_adult"],
                            16 => $prices["suplemwetn_adult"],
                            17 => $prices["suplembliz_adult"],
                            19 => $prices["suplemkennedy_adult"],
                            20 => $prices["suplemholy_adult"]);

                        $array_parks_asoc_price_child = array(7 => $prices["suplemag_child"],
                            8 => $prices["suplepcot_child"],
                            9 => $prices["suplehollywood_child"],
                            10 => $prices["supleanimalk_child"],
                            14 => $prices["suplemuniv_child"],
                            15 => $prices["suplemisland_child"],
                            11 => $prices["suplemseaw_child"],
                            13 => $prices["suplemaquat_child"],
                            16 => $prices["suplemwetn_child"],
                            17 => $prices["suplembliz_child"],
                            19 => $prices["suplemkennedy_child"],
                            20 => $prices["suplemholy_child"]);

                        if ($especial) {
                            $_SESSION['toursbooking']['t_parque_aduls'] = $array_parks_asoc_price_adult[$dato];
                            $_SESSION['toursbooking']['t_parque_childs'] = $array_parks_asoc_price_child[$dato];
                            $totalperson = $totaladult + $totalchild;
                            $sumatike = ($array_parks_asoc_price_adult[$dato] * $totaladult) + ($array_parks_asoc_price_child[$dato] * $totalchild);
                        }
                        $_SESSION['toursbooking']['ticketpark'] = 1;
                    }

                    
                    if ($dato == '19' && $especial == false) {
                        //transport local une day
                        $tranposrLocal = 60 * $toursbooking['totalpax'];
                        $_SESSION['toursbooking']['tranposrLocal'] = $tranposrLocal;
                        //////////////// **** ///// *** 
                    } else {
                        $tranposrLocal = 0;
                        $_SESSION['toursbooking']['tranposrLocal'] = $tranposrLocal;
                    }

                    //echo 'tpq='.$_SESSION['toursbooking']['tqp'];
                    // print_r($_SESSION['grupos']);
                    if ($idpark == 15 && $idgrupo == 6) {
                        $_SESSION['toursbooking']['tq'];
                    }
                    
                //    echo '<pre>';
                //        print_r($idgrupo);
                //    echo '</pre>';
                    //if($_SESSION['toursbooking']['childs'] == 0){
                    //$totalN = 0;
                    //}

                    $_SESSION['toursbooking']['transpor_adult'] = $totalA*$_SESSION['toursbooking']['adults']; //TRANSPORTE ADULTO
                    $_SESSION['toursbooking']['transpor_Child'] = $totalN*$_SESSION['toursbooking']['childs']; //TRANSPORTE NINIO
                    $_SESSION['toursbooking']['precionetoadult'] = $precionetoadult;
                    $_SESSION['toursbooking']['precionetochild'] = $precionetochild;
                    $transpor_total = $_SESSION['toursbooking']['transpor_adult'] + $_SESSION['toursbooking']['transpor_Child'] ;
                    //echo '<br />Fecha=>' . $fecha;
                    //echo '<br />Type Rate=>' . $dat->type_rate;
                    // if ($_SESSION['toursbooking']['childs'] == 0) {
                    //     $_SESSION['toursbooking']['tq'] = $totalA;
                    // } else {
                        $_SESSION['toursbooking']['tq'] = $transpor_total;
                    // }

                    
                        if($_SESSION['toursbooking']['childs'] > 0){
                            $transpn = number_format($_SESSION['toursbooking']['transpor_Child']/$_SESSION['toursbooking']['childs'],2);
                        }else{
                            $transpn = number_format(0,2);
                        }
                    $_SESSION ['toursbooking']['tqp'] = ($sumatike + $_SESSION['toursbooking']['tq'] + $_SESSION['toursbooking']['tranposrLocal']); // $toursbooking ['totalpax'];
                    $_SESSION ['toursbooking']['tsa'] = $_SESSION ['toursbooking'] ['tqp'];
                        
                    //echo "<script>$('#tqp').html('$" . round($_SESSION['toursbooking']['tqp']) . "');</script>";
                    echo "<script>$('#tqp').html('$" . number_format(($_SESSION['toursbooking']['tq']),2) . " (Admission Not Included)');</script>";
                    echo "<script>$('#tqp2').val('" . ($_SESSION['toursbooking']['tq']) . "');</script>";
                    echo "<script>$('#chiltransp').html('Tansportation per Child $ " . $transpn . "');</script>";
                    echo "<script>$('#adulttransp').html('Tansportation per Adults: $ " . number_format($_SESSION['toursbooking']['transpor_adult']/$_SESSION['toursbooking']['adults'],2) . "');</script>";
                    echo "<script>$('#resp2').attr('checked',true);</script>";
                    
                    echo "<script>$('#" . $dato . "').remove();</script>";
                    echo "<script>$('#collapseT').slideDown('slow');</script>";
                    //print_r($_SESSION['toursbooking']);
                }
                // echo '<pre>';
                // print_r($_SESSION['toursbooking']['childs']);
                // echo '</pre>';
                echo "<script>$('#attractions2').append('<span id=" . $dato . "><b >" . $parkdatos['nombre'] . "</b></span>');</script>";
            }
        } catch (Exception $e) {
            // procedimiento en caso de reportar errores
        }
    }

    /*
      Agregar tiquete a la factura de one day tour
     */

    public function ques_agregarTiquete() {
        $pregunta = $this->params["resp"];
        if ($pregunta == 1) {
            $this->tours_tow_onedaytour();
            $sumatike = $_SESSION ['toursbooking'] ['ticketpark'];
            //echo '<pre>';
            //print_r($_SESSION['toursbooking']);
            //echo '</pre>';
            $_SESSION ['toursbooking'] ['tqp'] = ($_SESSION ['toursbooking'] ['tq'] + $sumatike + $_SESSION ['toursbooking'] ['tranposrLocal']) / $_SESSION ['toursbooking'] ['totalpax'];
            $_SESSION ['toursbooking'] ['paso'] = "";
            // echo "<script>$('#tickes').html('INCLUDED in tour price ');$('#tqp').html('$" . round($_SESSION ['toursbooking'] ['tqp']) . "');";
        } else {
            $this->tours_tow_onedaytour();
            if (isset($_SESSION ['toursbooking'] ['paso'])) {
                $_SESSION ['toursbooking'] ['tqp'] = ($_SESSION ['toursbooking'] ['tq'] + $_SESSION ['toursbooking'] ['tranposrLocal']) / $_SESSION ['toursbooking'] ['totalpax'];
                unset($_SESSION ['toursbooking'] ['paso']);
                // echo "<script>$('#tickes').html('NOT INCLUDED in tour price ');$('#tqp').html('$" . round($_SESSION ['toursbooking'] ['tqp']) . "');</script>";
            }
        }
    }

    public function tours_tow_onedaytour() {
        try {
            unset($_SESSION ['toursbooking'] ['ticketpark']);

            $_SESSION['toursbooking'] ['ticketpark'] = 0;

            extract($_POST, EXTR_SKIP);

            $fecha = substr($_SESSION['toursbooking']['fecha_llegada'], 0, 4);
            $fecha1 = strtotime($_SESSION['toursbooking']['fecha_llegada']); //strtotim
            //
            //e($_SESSION['toursbooking']['fecha_llegada']);
            Doo::loadModel("Agency");
            if (isset($_SESSION['data_agency'])) {
                $dat = new Agency($_SESSION['data_agency']);
            } else {
                $dat = new Agency();
                $net_rate = false;
                $dat->type_rate = 0;
                $dat->id = -1;
            }
            $divporpax = 0;
            if ($_SESSION ['toursbooking'] ['np'] == 0 && $_SESSION ['toursbooking'] ['parktotal'] == 1) {
                $_SESSION['toursbooking']['ticketpark'] = 0;
                $divporpax = 0;
            } else {
                $grupos = $_SESSION ['grupos'];
                $toursbooking = $_SESSION ['toursbooking'];
                $clave = $_SESSION ['grupos']['id'];
                $park = $_SESSION ['grupos']['idParque'];
                $sql = 'SELECT id,adults,child,id_grupo,id_parque,cantidad
								FROM admin_parques_tarifa
								WHERE type_rate = 1 AND id_agency = -1 AND id_parque = "' . $park . '" AND  id_grupo = "' . trim($clave) . '" AND cantidad = 1 and fecha_ini <= "' . $fecha1 . '" and fecha_fin >= "' . $fecha1 . '"';
                $sql0 = 'SELECT id,adults,child,id_grupo,id_parque,cantidad,type_rate, id_agency
						FROM admin_parques_tarifa
						WHERE type_rate = 2 AND id_parque = ? AND  id_grupo = ? AND id_agency = ? AND cantidad = 1 and annio = ?';
                if ($dat->id != -1) {
                    $rs = Doo::db()->query($sql0, array(
                        trim($park), trim($clave), $dat->id, $fecha
                    ));
                    $consulta = $rs->fetch();
                    $val = $rs->rowCount();
                    if (empty($consulta)) {
                        $rs = Doo::db()->query($sql, array(
                            trim($park), trim($clave), $fecha
                        ));
                        $consulta = $rs->fetch();
                        $val = $rs->rowCount();
                    }
                } else {

                    $rs = Doo::db()->query($sql);
                    $consulta = $rs->fetch();
                    //print_r($consulta);
                    $val = $rs->rowCount();
                }

                
                if ($val > 0) {
                    $vard = "0";
                    $priceadult = $toursbooking ['adults'] * $consulta['adults'];
                    $priceachild = $toursbooking ['childs'] * $consulta['child'];
                    $_SESSION ['toursbooking'] ['ticketpark'] = $priceadult + $priceachild;
                    $divporpax = $_SESSION['toursbooking']['ticketpark']; // $toursbooking ['totalpax'];
                    //$totporpax = $_SESSION['toursbooking']['ticketpark'] ;
                    $_SESSION ['toursbooking']['parkAdult'] = $priceadult;
                    $_SESSION ['toursbooking']['parkChilds'] = $priceachild;
                    $_SESSION ['toursbooking']['parque_adm_adults'] = $consulta ['adults'];
                    $_SESSION ['toursbooking']['parque_adm_childs'] = $consulta ['child'];
                    // echo '<pre>';
                    // print_r($totporpax);
                    // echo '</pre>';
                    // exit;
                } else {
                    $clave = $_SESSION ['grupos']['id'];
                    $park = $_SESSION ['grupos']['idParque'];
                    $sql = 'SELECT id,adults,child,id_grupo,id_parque,cantidad
								FROM admin_parques_tarifa
								WHERE type_rate = 1 AND id_agency = -1 AND id_parque = "' . $park . '" AND  id_grupo = "' . trim($clave) . '" AND cantidad = 1 and year = "' . $fecha . '" and fecha_ini <= "' . $fecha1 . '" and fecha_fin >= "' . $fecha1 . '"';
                    $sql0 = 'SELECT id,adults,child,id_grupo,id_parque,cantidad
								FROM admin_parques_tarifa
								WHERE type_rate = 1 AND id_agency = -1 AND id_parque = 0 AND  id_grupo = "' . trim($clave) . '" AND cantidad = 1 and year = "' . $fecha . '" and fecha_ini <= "' . $fecha1 . '" and fecha_fin >= "' . $fecha1 . '"'; //echo '$dat->id = '.$dat->id;
                    if ($dat->id != -1) {
                        $rs = Doo::db()->query($sql0);
                        $consulta = $rs->fetch();

                        $val = $rs->rowCount();
                        $vard = "1";
                        if (empty($consulta)) {
                            $rs = Doo::db()->query($sql, array(
                                trim($clave), $fecha
                            ));
                            $consulta = $rs->fetch();
                            $val = $rs->rowCount();
                        }
                    } else {
                        //echo 'trim($clave) = '.trim($clave).'<br />';
                        $vard = "2";
                        //echo $fecha1;
                        $rs = Doo::db()->query($sql);
                        $consulta = $rs->fetchAll();
                        //print_r($consulta);
                        $val = $rs->rowCount();
                    }

                    if ($val == 0) {
                        $vard = "3";
                        $priceadult = $toursbooking ['adults'] * $consulta ['adults'];
                        $priceachild = $toursbooking ['childs'] * $consulta ['child'];
                        $_SESSION['toursbooking']['ticketpark'] = $priceadult + $priceachild;
                        $divporpax = $_SESSION['toursbooking']['ticketpark']; // $toursbooking ['totalpax'];
                        $_SESSION['toursbooking']['parkAdult'] = $priceadult;
                        $_SESSION['toursbooking']['parkChilds'] = $priceachild;
                        $_SESSION['toursbooking']['parque_adm_adults'] = $consulta ['adults'];
                        $_SESSION['toursbooking']['parque_adm_childs'] = $consulta ['child'];
                    } else {
                        $vard = "4";
                        $_SESSION['toursbooking']['ticketpark'] = 0;
                        $_SESSION['toursbooking']['parkAdult'] = 0;
                        $_SESSION['toursbooking']['parkChilds'] = 0;
                        $_SESSION['toursbooking']['parque_adm_adults'] = $consulta ['adults'];
                        $_SESSION['toursbooking']['parque_adm_childs'] = $consulta ['child'];
                        $divporpax = $val;
                    }
                }
            }


             
            //echo '$divporpax =>'.$divporpax;
            if ($divporpax > 0 ) {//cambia valores de precio onedaytour-park
                $_SESSION['toursbooking']['divporpax'] = $divporpax;
                $_SESSION['toursbooking']['np'] = 1;
                echo "<script>$('#tikets').html('$ " . round($divporpax) . "'); $('#tikets2').val('" . round($divporpax) . "'); $('#tiketskids').html('$ " . round($priceachild) . ".00'); $('#tiketsadult').html('$ " . round($priceadult) . ".00');
					 if(suma == parcks && $('#admision-pregunta').val()==0) {
						  $('#admision-pregunta').val('1');
						  var ckresp1 = $('#resp1').attr('checked');
                          var ckresp2 = $('#resp2').attr('checked');
                         
						  if(!ckresp1 && !ckresp2){
							$('#tiketsMess').html($('#tikets').html());
							$( '#dialog-message6' ).dialog({
									modal: true,
									width: 500
									});
						}
					  }
		</script>";
            } else {
                echo '<script type="text/javascript">
                      $("#dialog-message7").dialog({
                                    modal: true,
                                    buttons: {
                                    Ok: function() {  $( this ).dialog( "close" );  }
                                    }
                      });
                      $("#attractions").load("' . Doo::conf()->APP_URL . 'onedaytour-park2/' . $_SESSION ['grupos']['idParque'] . ',' . $clave = $_SESSION ['grupos']['id'] . '/3");
                      $("input[type=\'checkbox\'").attr("checked",false).change();
                      </script>';

                ;
            }
        } catch (Exception $e) {
            echo $e;
            // procedimiento en caso de reportar errores
        }
    }

    public function pagoOnedaytour() {
        if (isset($_SESSION ['toursbooking'])) {
            Doo::loadModel("Agency");
            if (isset($_SESSION['data_agency'])) {
                $dat = new Agency($_SESSION['data_agency']);
                $tpoNormal = 'Passanger Credit Card';
            } else {
                $dat = new Agency();
                $dat->id = -1;
                $dat->type_rate = 0;
                $tpoNormal = 'Credit Card';
            }

            $op = array("1" => array("PRED-PAID" => "Agency Credit Card"),
                "2" => array("PRED-PAID" => $tpoNormal),
                "3" => array("COLLECT ON BOARD" => "Credit Card+ 4 % FEE"),
                "4" => array("COLLECT ON BOARD" => "Cash"),
                "5" => array("VOUCHER" => "Credit Voucher"),
            );
            if (isset($_REQUEST['opcion_pago'])) {
                $pago = $_REQUEST['opcion_pago'];
            } else {
                $pago = 1;
            }
            Doo::loadController('admin/ToursOneController');
            $toursOneControl = new ToursOneController();
            $_SESSION['codconf'] = $toursOneControl->codigoConftour(1);

            if ($pago < "2") {
                if ($a != NULL) {
                    $this->pago();
                }

                if (isset($_SESSION ['user'])) {
                    $user = $_SESSION ['user'];
                    $tourstick = array(
                        "firstname" => $user->firstname,
                        "lastname" => $user->firstname,
                        "email" => $user->username,
                        "cellphone" => $user->celphone,
                        "phone" => $user->phone
                    );
                    $_SESSION ["tourstick"] = $tourstick;

                    $this->data['rootUrl'] = Doo::conf()->APP_URL;

                    $this->view()->renderc('tours/pago', $this->data);
                } else {
                    // $this->logUser();
                }
            } else {
                Doo::loadModel("Agency");
                $dat = new Agency($_SESSION['data_agency']);
                Doo::loadModel("Reserve");
                Doo::loadModel("Transfer");

                $sdeparture = (isset($_SESSION['toursbooking']['sdeparture']) ? $_SESSION['toursbooking']['sdeparture'] : 0);
                $sarrival = (isset($_SESSION['toursbooking']['sarrival']) ? $_SESSION['toursbooking']['sarrival'] : 0);


                Doo::loadModel("Hotel_Reserves");
                $hotel = new Hotel_Reserves();
                $hotel->additional_night = 0;
                $hotel->adult = $_SESSION['toursbooking']['adults'];
                $hotel->category = $_SESSION['categoria'];
                $hotel->child = $_SESSION['toursbooking']['childs'];
                $hotel->days = $_SESSION['toursbooking']['dias'];
                $hotel->id_agencia = $dat->id;
                $hotel->id_cliente = $login->id;
                $hotel->id_hotel = $_SESSION['toursbooking']['hotelid'];
                $hotel->nights = $_SESSION['toursbooking']['noches'];
                $hotel->room1_adult = $_SESSION ["toursbooking"]['adult_r1'];
                $hotel->room2_adult = $_SESSION ["toursbooking"]['adult_r2'];
                $hotel->room3_adult = $_SESSION ["toursbooking"]['adult_r3'];
                $hotel->room4_adult = $_SESSION ["toursbooking"]['adult_r4'];
                $hotel->room1_child = $_SESSION ["toursbooking"]['child_r1'];
                $hotel->room2_child = $_SESSION ["toursbooking"]['child_r2'];
                $hotel->room3_child = $_SESSION ["toursbooking"]['child_r3'];
                $hotel->room4_child = $_SESSION ["toursbooking"]['child_r4'];
                $hotel->roooms = $_SESSION['toursbooking']['rooms'];
                $hotel->total_paid = $_SESSION['toursbooking']['totalhotel'];
                $hotel->total_persons = $_SESSION['toursbooking']['totalpax'];
                $hotel->type = 0;
                Doo::db()->insert($hotel) or die("Error Ingresando Datos de Hotel");
                $id_hotel_reserves = Doo::db()->lastInsertId();

                Doo::loadModel("Tours");
                $tours = new Tours();
                $tours->id_agency = $dat->id;
                $tours->id_client = $login->id;
                $tours->id_hotel_reserve = $id_hotel_reserves;
                $tours->id_transfer_in = (isset($inTrans) ? $inTrans : "-1");
                $tours->id_transfer_out = (isset($outTrans) ? $outTrans : "-1");

                $tours->agency_employee = $dat->id;
                $tours->code_conf = $_SESSION['codconf'];
                $tours->creation_date = date("Y-m-d");
                $tours->ending_date = $_SESSION['toursbooking']['fecha_llegada'];
                $tours->starting_date = $_SESSION['toursbooking']['fecha_salida'];
                $tours->length_day = $_SESSION['toursbooking']['dias'];
                $tours->length_nights = $_SESSION['toursbooking']['noches'];
                Doo::db()->insert($tours) or die("Error Ingresando Datos de Tours");
                $id_tours = Doo::db()->lastInsertId();


                $group = $_SESSION ['grupos'];
                $group1 = $_SESSION ['grupos1'];

                $i = 0;
                Doo::loadModel("Attraction_Trafic");
                Doo::loadModel('Parques');
                $key = array_keys($group);
                while ($i < count($key)) {
                    $grou = explode(',', $group1['park' . $key[$i]]);
                    $j = 0;
                    while ($j < count($grou)) {
                        $attraction = new Attraction_Trafic();
                        $attraction->admission = $_SESSION['toursbooking']['question'];
                        $attraction->id_tours = $id_tours;
                        $attraction->adult = $_SESSION['toursbooking']['adults'];
                        $attraction->child = $_SESSION['toursbooking']['childs'];
                        $attraction->group = $key[$i];
                        $attraction->id_agencia = $dat->id;
                        $attraction->id_cliente = $login->id;
                        $attraction->id_park = $grou[$j];
                        $attraction->total_paid = $_SESSION['toursbooking']['parktotal'];
                        $attraction->total_person = $_SESSION['toursbooking']['totalpax'];
                        $attraction->trafic = 0;
                        Doo::db()->insert($attraction) or die("Error Ingresando Datos de Attractions");
                        ;
                        if ($attraction->admission == 1) {
                            $parque = new Parques();
                            $parque->id = $attraction->id_park;
                            $parque = Doo::db()->getOne($parque);
                            $parque->stock = intval($parque->stock) - 1;
                            $parque->update();
                        }
                        $j++;
                    }
                    $i++;
                }


                if (($sarrival == 1) || ($sdeparture == 1)) {
                    $reserves = new Reserve();
                    $arval = array_values($op[$pago]);
                    $arkey = array_keys($op[$pago]);
                    $reserves->agen = $dat->id;
                    $reserves->agency = $dat->id;
                    $reserves->arrtime1 = (isset($_SESSION['toursbooking']['datearrivingtrip1']) ? $_SESSION['toursbooking']['datearrivingtrip1'] : "");
                    $reserves->arrtime2 = (isset($_SESSION['toursbooking']['datearrivingtrip2']) ? $_SESSION['toursbooking']['datearrivingtrip2'] : "");
                    $reserves->codconf = (isset($_SESSION['code']) ? $_SESSION['code'] : -1);

                    $reserves->comments;
                    $reserves->deptime1 = (isset($_SESSION['toursbooking']['datedeparturetrip1']) ? $_SESSION['toursbooking']['datedeparturetrip1'] : "");
                    $reserves->deptime2 = (isset($_SESSION['toursbooking']['datedeparturetrip1']) ? $_SESSION['toursbooking']['datedeparturetrip2'] : "");
                    $reserves->fecha_retorno = (isset($_SESSION['toursbooking']['fecha_salida']) ? $_SESSION['toursbooking']['fecha_salida'] : "");
                    $reserves->fecha_salida = (isset($_SESSION['toursbooking']['fecha_llegada']) ? $_SESSION['toursbooking']['fecha_llegada'] : "");
                    $reserves->agen = $dat->id;
                    $reserves->codconf = (isset($_SESSION['code']) ? $_SESSION['code'] : -1);
                    $reserves->dropoff1 = (isset($_SESSION['pickup2']) ? $_SESSION['pickup2'] : 0);
                    $reserves->fecha_ini = date("Y-m-d");
                    $reserves->fecha_retorno = (isset($_SESSION['toursbooking']['fecha_llegada']) ? $_SESSION['toursbooking']['fecha_llegada'] : "");
                    $reserves->fecha_salida = (isset($_SESSION['toursbooking']['fecha_salida']) ? $_SESSION['toursbooking']['fecha_salida'] : "");
                    $reserves->firsname = $_REQUEST['firstname_tick'];
                    $reserves->hora = date("H:i:s");
                    $reserves->id_clientes = $user->id;
                    $reserves->tipo_pago = $arkey[0];
                    $reserves->pago = $arval[0];
                    $reserves->lasname = $_REQUEST['lastname_tick'];
                    $reserves->email = $_REQUEST['email_tick'];
                    $reserves->dropoff1 = (isset($_SESSION['dropoff1']) ? $_SESSION['dropoff1'] : 0);

                    $reserves->dropoff2 = (isset($_SESSION['dropoff2']) ? $_SESSION['dropoff2'] : 0);

                    $reserves->pickup1 = (isset($_SESSION['pickup1']) ? $_SESSION['pickup1'] : 0);

                    $reserves->pickup2 = (isset($_SESSION['pickup2']) ? $_SESSION['pickup2'] : 0);

                    $reserves->id_tours = $id_tours;
                    $reserves->tipo_ticket = (($sarrival == 1) && ($sdeparture == 1)) ? "roundtrip" : "oneway";
                    $reserves->totaltotal = (isset($_SESSION['toursbooking']['trasport_total2']) ? $_SESSION['toursbooking']['trasport_total2'] : 0) + (isset($_SESSION['toursbooking']['trasport_total1']) ? $_SESSION['toursbooking']['trasport_total1'] : 0);
                    $reserves->trip_no = (isset($_SESSION['toursbooking']['trip1']) ? $_SESSION['toursbooking']['trip1'] : "");
                    $reserves->trip_no2 = (isset($_SESSION['toursbooking']['trip2']) ? $_SESSION['toursbooking']['trip2'] : "");
                    Doo::db()->insert($reserves) or die("Error Ingresando Datos de Trasnporte Por Bus");
                    $id_reserva = Doo::db()->lastInsertId();
                }

                Doo::loadModel("Tours_Agency");
                $tours_reserv = new Tours_Agency();
                $comision = $this->cal_equipament();
                $totalouta = ($_SESSION ['toursbooking'] ['tsa'] * $_SESSION['toursbooking']['totalpax']);
                if ($_SESSION ['toursbooking']['comision_agency'] != 0) {
                    $total = ($totalouta - (($totalouta * $_SESSION ['toursbooking']['comision_agency']) / 100));
                } else {
                    $total = $totalouta;
                }
                $tours_reserv->id_agency = $dat->id;
                $tours_reserv->comision = $comision;
                $tours_reserv->id_reserva = $id_reserva;
                $tours_reserv->id_tours = $id_tours;
                $arval = array_values($op[$pago]);
                $arkey = array_keys($op[$pago]);
                $tours_reserv->tipo_pago = $arkey[0];
                $tours_reserv->pago = $arval[0];
                $tours_reserv->type_rate = $dat->type_rate;
                $tours_reserv->total = $total;
            }
        } else {
            return Doo::conf()->APP_URL . "agency/";
        }
    }

    public function logUser_onedaytour() {
        $toursbooking = $_SESSION['toursbooking'];
        extract($_POST, EXTR_SKIP);
        if (isset($_SESSION['toursbooking'])) {
            if (isset($_SESSION['onedaytour'])) {
                if ($_SESSION['onedaytour'] == "" OR $_SESSION['onedaytour'] == false) {
                    return Doo::conf()->APP_URL . "tours";
                    exit;
                }
            }
 
            $_SESSION['onedaytour'] = true;
            Doo::loadModel("Agency");
            if (isset($_SESSION['data_agency'])) {
                $dat = new Agency($_SESSION['data_agency']);
                $net_rate = ($dat->type_rate == 1) ? true : false;
                $tpoNormal = 'Passanger Credit Card';
            } else {
                $dat = new Agency();
                $dat->id = -1;
                $net_rate = false;
                $dat->type_rate = 0;
                $tpoNormal = 'Credit Card';
            }

            if (!isset($_SESSION ['user']) || isset($_SESSION ['toursinvi']) AND !$_POST['shopr'] == 1) {
                $this->data['rootUrl'] = Doo::conf()->APP_URL;
                $this->renderc('tours/loginuser', $this->data);
            } else {
                if(isset($_SESSION ['toursinvi'])){
                    unset($_SESSION ['user']);
                    $login = $user = $_SESSION ['toursinvi'];                    
                }else{
                    // $login = $user = $_SESSION ['user'];
                    for($i = 1;$i <= $toursbooking['adults'];$i++ ){
                        $adulrt[$i]['firstname'] = $_POST['firstname'.$i];
                        $adulrt[$i]['lastname'] = $_POST['lastname'.$i];
                        if($i == 1){
                        $adulrt[$i]['username'] = $_POST['username'];
                        }
                        $_SESSION['user']->adult = $adulrt;
                    }
                
                    if($toursbooking['childs'] >= 1){
                        for($i = 1;$i <= $toursbooking['childs'];$i++ ){
                            $chil[$i]['firstname'] = $_POST['childName'.$i];
                            $chil[$i]['lastname'] = $_POST['childlast'.$i];
                            $chil[$i]['ages'] = $_POST['edad'.$i];
                        }
                        $_SESSION['user']->child = $chil;
                    }
                    
                }

                
        // echo "<pre>";
        // // print_r($_POST);
        // // session_destroy();
        // // print_r( $_SESSION['toursinvi']);
        // print_r( $_SESSION['user']);
        // echo "</pre>";
        // die;
                $tourstick = array(
                    "firstname" => $user->firstname,
                    "lastname" => $user->lastname,
                    "email" => $user->username,
                    "cellphone" => $user->celphone,
                        //"phone" => $user->phone
                );

                $_SESSION ["tourstick"] = $tourstick;

                $op = $this->types_payments();
                if (isset($_REQUEST['opcion_pago'])) {
                    $pago = $_REQUEST['opcion_pago'];
                } else {
                    if ($dat->id == -1) {//Paga el usurio
                        $pago = isset($_POST['opcion_pago']) ? $_POST['opcion_pago'] : 2;
                    } else {
                        $pago = isset($_POST['opcion_pago']) ? $_POST['opcion_pago'] : 1;
                    }
                }

                if (isset($_REQUEST['opcion_pago_saldo'])) {
                    $tipo_saldo = $_REQUEST['opcion_pago_saldo'];
                } else {
                    $tipo_saldo = 1;
                }
                if ($tipo_saldo == 2) {
                    $opcion_saldo = 'BALANCE';
                } else {
                    $opcion_saldo = 'FULL';
                }

                $total = $_SESSION['toursbooking']['tq']; //$_SESSION['toursbooking']['tqp'] * $_SESSION['toursbooking']['totalpax'];
                if (true) {// Calculamos el recargo Fee 4 %
                    $fee = $total * 0.04;
                    $_SESSION['priceFee'] = $fee;
                } else {
                    $fee = 0;
                    $_SESSION['priceFee'] = 0;
                }
                if (isset($_SESSION['toursbooking']['comision_agency'])) {
                    $valorComision = $_SESSION['toursbooking']['comision_agency'];
                } else {
                    $valorComision = 0.00;
                }
                if ($pago == 1 || $tipo_saldo == 2) {
                    $totaltotal = $total - $valorComision;
                } else {
                    $totaltotal = $total;
                }
                if (isset($_REQUEST['comentarios'])) {
                    $_SESSION['toursbooking']['comentarios'] = $_REQUEST['comentarios'];
                } else {
                    $_SESSION['toursbooking']['comentarios'] = "";
                }
                $totaltotal = $totaltotal + $fee;
                if (isset($_REQUEST['otheramount'])) {
                    $otheramount = (is_numeric($_REQUEST['otheramount'])) ? $_REQUEST['otheramount'] : 0;
                } else {
                    $otheramount = 0;
                }
                $_SESSION['toursbooking']['otheramount'] = $otheramount;
                $_SESSION['toursbooking']['totalouta'] = $totaltotal;
                $_SESSION['toursbooking']['otheramount'] = $otheramount;
                //Codigo de confirmacion
                // Doo::loadController('admin/ToursOneController');
                // $toursOneControl = new ToursOneController();
                // $_SESSION['codconf'] = $toursOneControl->codigoConftour(1);
                //echo 'pago = ' . $pago = 5;
                // echo '<pre>';
                // print_r($login);
                // echo '</pre>'; 
                // die;

                if ($pago < "3") {
  
                    unset($_SESSION['pagoListo']);
                    $arval = array_values($op[$pago]);

                    if ($otheramount == 0) {
                        $_SESSION['toursbooking']['pago_pred'] = $totaltotal;
                    } else {
                        $_SESSION['toursbooking']['pago_pred'] = $otheramount;
                    }
                    $_SESSION['toursbooking']['opcionPago'] = $arval[0] . '-' . $opcion_saldo;

                    $this->data['rootUrl'] = Doo::conf()->APP_URL;
                    $this->view()->renderc('tours/pago', $this->data);
                    die;
                } 
            }
        } else {
            if (isset($_SESSION['data_agency'])) {
                return Doo::conf()->APP_URL . "agency/";
            } else {
                return Doo::conf()->APP_URL . "1-day-tour/";
            }
        }
    }

    public function enviarCorreo($cotenido, $destinatarios) {
        try {
            Doo::loadController('DatosMailController');
            $datosMail = new DatosMailController();
            $mail = new PHPMailer(true);
            $mail = $datosMail->datos();
            foreach ($destinatarios as $row) {
                $mail->AddAddress($row['email'], $row['nombre']);
            }
            $mail->Subject = 'Reservations Super Tours OF Orlando'; // Mensaje alternativo en caso que el destinatario no pueda abrir        // correos HTML
            $mail->AltBody = 'Reservations Super Tours OF Orlando'; // El cuerpo del mensaje, puede ser con etiquetas HTML
            $mail->MsgHTML($cotenido);
            $mail->Send();
        } catch (phpmailerException $e) {
            echo $e->errorMessage(); // Errores de PhpMailer
        } catch (Exception $e) {
            echo $e->getMessage(); // Errores de cualquier otra cosa.
        }
    }

    function quotationOnedayTour() {
        try {
            extract($_POST, EXTR_SKIP);
            if (!(isset($firstname_tick) && isset($lastname_tick) && isset($email_tick) && isset($cellular_tick) && isset($phone_tick) && isset($_SESSION['toursbooking']))) {
                if (isset($_SESSION['data_agency'])) {
                    return Doo::conf()->APP_URL . "agency/#tours2";
                } else {
                    return Doo::conf()->APP_URL . "1-day-tour/";
                }
            }
            Doo::loadController('admin/ToursOneController');
            $toursOneControl = new ToursOneController();
            $_SESSION['codcuot'] = $toursOneControl->codigoConftour(0);
            $_SESSION['codconf'] = $_SESSION['codcuot'];

            if (!isset($_SESSION ['user'])) {
                $tourstick = array(
                    "firstname" => $firstname_tick,
                    "lastname" => $lastname_tick,
                    "email" => $email_tick,
                    "cellphone" => $cellular_tick,
                    "phone" => $phone_tick
                );
                $_SESSION ["tourstick"] = $tourstick;
            } else {
                $user = $_SESSION ['user'];
                if (isset($_SESSION['data_agency'])) {
                    $tourstick = array(
                        "firstname" => $firstname_tick,
                        "lastname" => $lastname_tick,
                        "email" => $email_tick,
                        "cellphone" => $cellular_tick,
                        "phone" => $phone_tick
                    );
                    $_SESSION ["tourstick"] = $tourstick;
                } else {
                    if (!isset($user->celphone)) {
                        $user->celphone = '';
                    }
                    if (!isset($user->phone)) {
                        $user->phone = '';
                    }
                    $tourstick = array(
                        "firstname" => $user->firstname,
                        "lastname" => $user->lastname,
                        "email" => $user->username,
                        "cellphone" => $user->celphone,
                        "phone" => $user->phone
                    );
                    $_SESSION["tourstick"] = $tourstick;
                }
            }
            $this->correo_onedaytour();
            unset($_SESSION['toursbooking']);
            $_SESSION['tourPagoMulDay'] = "No";
            if (isset($_SESSION['tourPagoOneDay'])) {
                $_SESSION['tourPagoOneDay'] == 'No';
            }
            $this->data['rootUrl'] = Doo::conf()->APP_URL;
            $this->view()->renderc('tours/quotation', $this->data);
        } catch (Exception $e) {
            echo $e->getMessage();
        }
    }

    public function correo_onedaytour() {
        if (isset($_SESSION['data_agency'])) {
            $dat = new Agency($_SESSION['data_agency']);
            Doo::loadModel("UserA");
            $datos = unserialize($_SESSION['uagency']);

            $agencia_name = $dat->company_name;
            $agencia_usuario = $datos->firstname . " " . $datos->lastname;
        } else {
            $agencia_name = "N/A";
            $agencia_usuario = "N/A";
        }
        // Doo::db()->query($query); 
        if (isset($_SESSION ['toursbooking'])) {
            $toursbooking = $_SESSION ['toursbooking'];
        } else {
            return;
        }
        //print_r($toursbooking);
        $question = $toursbooking['ticketpark'];
        $buffet = isset($_SESSION['bufet']) ? $_SESSION['bufet'] : 0;
        if (isset($_SESSION['area'])) {
            $area = $_SESSION['area'];
        } else {
            $area = "";
        }
        if (isset($_SESSION['area2'])) {
            $area2 = $_SESSION['area2'];
        } else {
            $area2 = "";
        }
        if (isset($_SESSION['pickup'])) {
            $pickup = $_SESSION['pickup'];
        } else {
            $pickup = "";
        }

        if (isset($_SESSION['pickup2'])) {
            $pickup2 = $_SESSION['pickup2'];
        } else {
            $pickup2 = "";
        }

        $login = $_SESSION ["tourstick"];

        $desayuno = "";
        $namepark = $_SESSION ['namepark'];
        $npark = "";
        foreach ($namepark as $value) {
            $npark .= "<li>" . $value . "</li>";
        }

        if (isset($_SESSION['tourPagoOneDay'])) {
            if ($_SESSION['tourPagoOneDay'] == 'ok') {
                $estado = 'PAID';
                $titulo = 'ONE DAY TOUR CONFIRMATION';
            }
        } else {
            $estado = 'QUOTE';
            $titulo = 'ONE DAY TOUR QUOTATION';
        }
        $cotenido = "<title>Documento sin t�tulo</title>
<style type='text/css'>
#clearTable {
	width: 800px;
	font-size: 13px;
	font-family: Verdana, Geneva, sans-serif;
}
#clearTable tr #titletd3 {
	font-family: Verdana, Geneva, sans-serif;
}
#clearTable tr #titletd2 {
	font-size: 20px;
}
#clearTable tr td p {
	text-align: center;
}

#content #center-column #tdgris {
	background-color: #F0F0F0;
}
#content #center-column #tdrojo {
	background-color: #FFE6E6;
}
#content #center-column1 #titletd {
	background-color: #F5EDEB;
	padding-left: 5px;
	font-size: 12px;
}
 #titlett {
	background-color: #E8E8E8;
	padding-left: 5px;
	font-size: 12px;
}
 #titlell {
	padding-left: 5px;
	font-size: 12px;
	border-bottom-width: 1px;
	border-left-width: 1px;
	border-bottom-style: solid;
	border-left-style: solid;
	border-bottom-color: #E6E6E6;
	border-left-color: #E6E6E6;
}
#titlelp {
	padding-left: 5px;
	font-size: 12px;
	border-bottom-width: 1px;
	border-bottom-style: solid;
	border-bottom-color: #E6E6E6;
}
 #titlelr {
	padding-left: 5px;
	font-size: 12px;
	border-top-width: 1px;
	border-top-style: solid;
	border-top-color: #CE0000;
	color: #CE0000;
}
 #tdgristable {
	background-color: #FFF;
	padding-left: 5px;
}



.Estilo1 {color: #FF0000}
</style>
</head><div align='center'>
<br />
<table   id='clearTable'> 
     <tr>
       <td width='316' height='33' rowspan='3' id='titletd3'><img src='https://www.supertours.com/Logo-Supertours-mail.jpg' width='316' height='88' /></td>
       <td colspan='3' align='center' id='titletd3'>Supertours.com</td>
     </tr>
     <tr>
       <td height='35' colspan='3' id='titletd7'>Fecha:" . date("M-d-Y") . " / Hora:" . date("g:i A") . " </td>
     </tr>
     <tr>
       <td height='35' colspan='3' id='titletd4'>Agency: <span style='color: #BD1515'>$agencia_name</span>, Usuario : <span style='color: #BD1515'>$agencia_usuario</span></td>
    </tr>
     <tr>
       <td align='center' height='33' colspan='4' id='titletd2'> <h3>" . $titulo . "</h3></td>
     </tr>
     <tr>
       <td height='15' id='titletd6'>
       LEAD TRAVELER:
       <br/><br/>
       <strong>User Name: </strong>" . $login['email'] . "
       <br/><br/>
       <strong>Firstname: </strong>" . $login['firstname'] . "
       <br/><br/>
       <strong>Lastname: </strong>" . $login['lastname'] . "
       <br/><br/>
       <strong>Phone: </strong>" . $login['phone'] . "
        <br/><br/>
       <strong>Cellphone: </strong>" . $login['cellphone'] . "    
       </td>
       <td width='145' height='15' id='titletd6'>&nbsp;</td>
       <td colspan='2' id='titletd6'><strong>AD :</strong>" . $_SESSION['toursbooking']['adults'] . " <strong>CHD :</strong>" . $_SESSION['toursbooking']['childs'] . "  <strong> TOTAL :</strong>" . $_SESSION['toursbooking']['totalpax'] . "<br/><br/><strong>Status :</strong> " . $estado . "<br/><br/><strong> Code Quotation :</Strong> " . $_SESSION['codconf'] . "</td>
     </tr>
      <tr>
    <td height='45' colspan='4' id='titletd'> <p><strong>ORDER&nbsp;  QUOTATION</strong></p></td>
  </tr>
  <tr><td colspan=\"3\">
     <table width=\"100%\" height=\"90\" id=\"tableorder\">
      <tr>
        <td height=\"35\" colspan=\"3\" id=\"titlett\"  ><strong ><div align=\"left\" > ITINERARY ARRIVAL</div></strong></td>
        </tr>
      <tr>
        <td height=\"47\" colspan=\"3\"><br/><p>"
                . (($toursbooking['sarrival'] == 1) ? " Date Arrival <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_llegada'])) . "</strong> &#45; Pick up time <strong>" . date("g:i A", strtotime($toursbooking['datedeparturetrip1'])) . "</strong> &#45; Trip <strong>" . $toursbooking['trip1'] . "</strong>, Luxury <strong>" . $toursbooking['equipment1'] . "</strong> &#45; transportation from <strong>" . $area . '-' . $pickup . "</strong>, to Super Tours of orlando Terminal, arriving at <strong>" . date("h:s A", strtotime($toursbooking['datearrivingtrip1'])) . "</strong> , you will be greeted by your tour guide/driver in Orlando. 

<br>
<strong > <div align=\"left\" > LOCAL TRANSFERS TO PARKS</div></strong>
Local Round Trip Transfers from Super Tours Orlando Terminal to
<ul>" . $npark . "</ul>" . (($question == 1) ? "<strong>Includes tickets to parks.</strong>" : "<strong>Not includes tickets to parks.</strong>") . "<hr>" : "") . (($toursbooking['sarrival'] == 2) ? "Date Arrival <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_llegada'])) . "</strong> &#45;you have choosen <strong>" . date("h:s A", strtotime($toursbooking['hora1'])) . "</strong>, on a luxury private transportation from <strong>" . $toursbooking['city'] . "</strong>, <strong>" . $toursbooking['address'] . "</strong> ,<strong>" . $area . "</strong> to <strong>" . $toursbooking['hotel'] . "</strong><hr><strong > <div align=\"left\" > ACCOMMODATION</div></strong><br>Hotel accommodation at the <strong>" . $toursbooking['hotel'] . "</strong> in <strong>" . $toursbooking['rooms'] . "</strong> room(s). for <strong>" . $toursbooking['noches'] . "</strong> night(s) from <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_llegada'])) . "</strong> Check In Time is 4:00pm . To<strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong> Check Out Time is 11:00am." . (($desayuno != 0) ? " FREE DAILY CONTINENTAL BREKFAST. " : "") . "Taxes are Included.<br>" . (($buffet == 1 && $_SESSION['categoria'] != 2 ) ? "<br><br>Daily SUPER BREKFAST BUFFET at your hotel." : "") . "<br><hr><br><strong > <div align=\"left\" > LOCAL TRANSFERS TO PARKS</div></strong>
<strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong> Check Out Time is 11:00am." . (($desayuno != 0) ? " FREE DAILY CONTINENTAL BREKFAST. " : "") . "Taxes are Included.<br>" . (($buffet == 1 && $_SESSION['categoria'] != 2 ) ? "<br><br>Daily SUPER BREKFAST BUFFET at your hotel." : "") . "<br><hr><br><strong > <div align=\"left\" > LOCAL TRANSFERS TO PARKS</div></strong>
Local Round Trip Transfers from Super Tours Orlando Terminal to
<ul>" . $npark . "</ul>" . (($question == 1) ? "<strong>Includes tickets to parks.</strong>" : "<strong>Not includes tickets to parks.</strong>") . "<hr>
    " : "") . (($toursbooking['sarrival'] == 3) ? "<br />Date Arrival <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_llegada'])) . "</strong> &#45; Arriving: By plane  at Orlando International Airport 
Data Transfer In  :   Airline: <strong>" . $toursbooking['airlinearrival'] . "</strong>   Flight #:   <strong>" . $toursbooking['flightarrival'] . "</strong> Arrival Time:<strong>" . date("h:s A", strtotime($toursbooking['hora1'])) . "</strong>
. You will be greeted by your tour guide/driver in orlando to take you to  <strong>" . $toursbooking['hotel'] . "
<hr><strong > <div align=\"left\" > ACCOMMODATION</div></strong><br>
Hotel accommodation at the <strong>" . $toursbooking['hotel'] . "</strong> in <strong>" . $toursbooking['rooms'] . "</strong> room(s). for <strong>" . $toursbooking['noches'] . "</strong> night(s) from <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_llegada'])) . "</strong> Check In Time is 4:00pm . To
<strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong> Check Out Time is 11:00am." . (( $desayuno != 0) ? " FREE DAILY CONTINENTAL BREKFAST. " : "") . " Taxes are Included.
   <br>" . (($buffet == 1 && $_SESSION['categoria'] != 2) ? "<br><br>Daily SUPER BREKFAST BUFFET at your hotel." : "") . "<br>
<hr><br>
<strong > <div align=\"left\" > LOCAL TRANSFERS TO PARKS</div></strong>
Local Round Trip Transfers from Super Tours Orlando Terminal to<ul>" . $npark . "</ul>" . (($question == 1) ? "<strong>Includes tickets to parks.</strong>" : "<strong>Not includes tickets to parks.</strong>") . "<hr>" : "")
                . (($toursbooking['sarrival'] == 4) ? "<br />
Date Arrival <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_llegada'])) . "</strong> PLEASE, LET US KNOW ABOUT YOUR ARRIVAL TO ORLANDO BY  DIALING  OUR TOLL FREE 1800-251-4206, TO PLACE YOUR TICKETS AT  <strong>" . $toursbooking['hotel'] . "</strong> OR FIGURE OUT ABOUT OTHER SERVICES. WE WILL PLEASED TO ASSIST YOU. 
<hr>
<strong > <div align=\"left\" > ACCOMMODATION</div></strong><br>

Hotel accommodation at the <strong>" . $toursbooking['hotel'] . "</strong> in <strong>" . $toursbooking['rooms'] . "</strong> room(s). for <strong>" . $toursbooking['noches'] . "</strong> night(s) from <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_llegada'])) . "</strong> Check In Time is 4:00pm . To
<strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong> Check Out Time is 11:00am." . (( $desayuno != 0) ? " FREE DAILY CONTINENTAL BREKFAST. " : "") . " Taxes are Included.
 <br>" . (($buffet == 1 && $_SESSION['categoria'] != 2) ? "<br><br>Daily SUPER BREKFAST BUFFET at your hotel." : "") . "<br>
<br>
<strong > <div align=\"left\" > LOCAL TRANSFERS TO PARKS</div></strong>
<ul>" . $npark . "</ul>" . (($question == 1) ? "<strong>Includes tickets to parks.</strong>" : "<strong>Not includes tickets to parks.</strong>") . "<hr>" : "") . "
        </p>
        <p>" . (($toursbooking['sdeparture'] == 1) ? "<strong > <div align=\"left\" > ITINERARY DEPARTURE</div></strong><br>
          Date departure <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong> &#45; <strong>" . date("h:s A", strtotime($toursbooking ['datedeparturetrip2'])) . "</strong> &#45;  Trip <strong>" . $toursbooking['trip2'] . "</strong>, Luxury <strong>" . $toursbooking['equipment2'] . "</strong> &#45; transportation from Orlando Super Tours Terminal to  <strong> " . $area2 . '-' . $pickup2 . " </strong> arriving at <strong>" . date("h:s A", strtotime($toursbooking ['datearrivingtrip2'])) . "</strong>, Thank you for choosing us !. <br />
           " : "") . (($toursbooking['sdeparture'] == 2) ? "<strong > <div align=\"left\" > ITINERARY DEPARTURE</div></strong>
         <br>Date departure <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong> &#45; Drop Off Time:  <strong>" . date("h:s A", strtotime($toursbooking['hora2'])) . "</strong>, PRIVATE SERVICE  &#45; transportation VIP from Orlando, to MIAMI BEACH SOUTH 
        <br />
          " : "") . (($toursbooking['sdeparture'] == 3) ? "<strong > <div align=\"left\" > ITINERARY DEPARTURE</div></strong>
         <br>
Date departure <strong>" . $toursbooking['fecha_salida'] . "</strong>  &#45; Departure: By Plane at Orlando International Airport 
Data Transfer Out:   Airline: <strong>" . $toursbooking['airlinedeparture'] . "</strong>   Flight #:   <strong>" . $toursbooking['flightdeparture'] . "</strong> Arrival Time: <strong>" . date("h:s A", strtotime($toursbooking['hora2'])) . "</strong>



        <br />
          " : "") . (($toursbooking['sdeparture'] == 4) ? "<strong > <div align=\"left\" > ITINERARY DEPARTURE</div></strong>
         <br>
     Date departure <strong>" . date("M-d-Y", strtotime($toursbooking['fecha_salida'])) . "</strong> <br> Departure: By Car   


        <br />
          " : "") . "
          
            <br />
              <br />
            </p></td>
        </tr>
    </table>
      </td>
  </tr>
  <tr>
    <td height='33' colspan='4' id='titletd5' ><h4><span style='color: #326AC0'>Comentarios:</span>&nbsp; </h4>
      <span style='color:rgb(223, 44, 44);'>" . $_SESSION['toursbooking']['comentarios'] . "</span></td>
  </tr>
  <tr>
    <td height='33' colspan='4' id='titletd' ><strong>PRICE</strong></td>
  </tr>
  <tr>
    <td colspan='4'><table width='90%' border='0'>
      <tr>
        <td height='32' align='center'><strong>TOTAL AMOUNT for THIS TOUR:</strong> <span id=tqprice' >$" . $toursbooking ['tqp'] * $toursbooking ['totalpax'] . "</span> </td>
      </tr>
      <tr>
        <td height='40' align='center' ><span class='Estilo1'>CHECK YOUR TOUR BEFORE PROCEEDING WITH  PAY TOUR</span></td>
      </tr>
      <tr>
        <td align='center'>Once you select the PAY TOUR button, you can no longer make changes to your TOUR  online. You must call (407) 370-3001 and speak with our  Call Center.<br /></td>
      </tr>
    </table>
    <p>&nbsp;</p>
    <p>Non-refundable - non-transferable - no changes are allowed on dates or time of departure - no pets allowed on board -<br />
      luggage restrictions apply - Please read the terms of transportation at www.supertours.com<br />
      THANK YOU FOR CHOOSING US<br />
      HAVE A NICE TRIP<br />
      SUPER TOURS OF ORLANDO,Inc. 5419 International Drive, Orlando Fl. 32819<br />
      Phone: (407) 370-3001 / U.S.A. TOLL FREE 1-800-251-4206 / arturo@supertours.com
    
    </p></td>
  </tr>
  <tr>
    <td height='18' colspan='4' align='center'> <p align='center' class='titulopago'> 
    
</p>       </td>

  </tr>
  </table></div>";

        $destiEmail = $login['email'];
        $destiName = $login['firstname'] . ' ' . $login['lastname'];
        $dest = array("email" => $login['email'], "nombre" => $login['firstname'] . ' ' . $login['lastname']);
        $cont = 0;
        $destinatarios[$cont++] = $dest;

        if (isset($_SESSION['data_agency'])) {
            Doo::loadModel("UserA");
            $user = unserialize($_SESSION ['uagency']);
            $dest = array("email" => $user->email, "nombre" => $user->firstname . ' ' . $user->lastname);
            $destinatarios[$cont++] = $dest;
        }

        if (isset($_SESSION['tourPagoOneDay'])) {
            $correo_emisor = "websales@supertours.com";
            $nombre_emisor = "Supertours Of Orlando";
            $dest = array("email" => $correo_emisor, "nombre" => $nombre_emisor);
            //$destinatarios[$cont++] = $dest;
        }
        $this->enviarCorreo($cotenido, $destinatarios);
    }

    function response_approval_onedaytour() {
        if (!empty($_SESSION['toursbooking'])) {

            if ((isset($_SESSION['user']) && isset($_REQUEST['ssl_approval_code'])) && isset($_SESSION['toursbooking'])) {
                (isset($_SESSION['user'])) or die("Page No Found Error 404");
                $_SESSION['codconf'] = $_SESSION['codconf'] . "_" . $_REQUEST['ssl_approval_code'];
                Doo::loadModel("Reserve");
                Doo::loadModel("Transfer");
                Doo::loadModel("Agency");
                Doo::loadModel("Clientes");
                $user = $_SESSION ['user'];
                if (isset($_SESSION['data_agency'])) {
                    $dat = new Agency($_SESSION['data_agency']);
                } else {
                    $dat = new Agency();
                    $dat->id = -1;
                    $dat->type_rate = 0;
                }
                $tourstick = $_SESSION ["tourstick"];
                //Cargando Datos cliente
                Doo::loadModel("Clientes");
                if ($dat->id != -1) {
                    $cliente = new Clientes();
                    $cliente->username = $tourstick['email'];
                    $cliente = Doo::db()->find($cliente, array('limit' => 1));
                    if (empty($cliente)) {
                        $cliente = new Clientes();
                        $cliente->username = $tourstick['email'];
                        $cliente->firstname = $tourstick['firstname'];
                        $cliente->lastname = $tourstick['lastname'];
                        $cliente->phone = $tourstick['phone'];
                        $cliente->celphone = $tourstick['cellphone'];
                        Doo::db()->insert($cliente) or die("Error Ingresando Datos de Cliente");
                        $id_cliente = Doo::db()->lastInsertId();
                        $cliente->id = $id_cliente;
                    }
                } else {
                    $cliente = new Clientes();
                    $cliente->username = $user->username;
                    $cliente = Doo::db()->find($cliente, array('limit' => 1));
                }

                $type_tour = 'ONE';
                // Guardar Tour
                Doo::loadModel("Tour_oneday");
                $total = $_SESSION['toursbooking']['tqp'] * $_SESSION['toursbooking']['totalpax'];
                $tours = new Tour_oneday();
                $tours->id_client = $cliente->id;
                $tours->type_client = $cliente->tipo_client;
                $tours->id_agency = $dat->id;
                $tours->agency_employee = ($dat->id != -1) ? $user->id : -1;
                $tours->code_conf = $_SESSION['codconf'];
                $tours->creation_date = date("Y-m-d H:i");
                $tours->starting_date = $_SESSION['toursbooking']['fecha_llegada'];
                $tours->ending_date = $_SESSION['toursbooking']['fecha_salida'];
                $tours->length_day = $_SESSION['toursbooking']['dias'];
                $tours->length_nights = $_SESSION['toursbooking']['noches'];
                $tours->adult = $_SESSION['toursbooking']['adults'];
                $tours->child = $_SESSION['toursbooking']['childs'];
                $tours->id_reserva = -5;
                $tours->id_transfer_in = -1;
                $tours->id_transfer_out = -1;
                $tours->comments = '';
                /** Discriminacion de precios */
                $tours->t_price_adult = $_SESSION["toursbooking"]["price_adults"];
                $tours->t_price_child = $_SESSION["toursbooking"]["price_childs"];

                $tours->entradas_price_adult = $_SESSION["toursbooking"]["parque_adm_adults"];
                $tours->entradas_price_child = $_SESSION["toursbooking"]["parque_adm_childs"];

                /** fin discriminacion de precios */
                $tours->total = $total;
                $tours->totalouta = $total;

                $tours->otheramount = $_SESSION['toursbooking']['otheramount'];
                $tours->extra_charge = 0;
                $tours->descuento_procentaje = 0;
                $tours->descuento_valor = 0;
                $tours->canal = 'WEBSALE';
                $tours->estado = 'CONFIRMED';
                $tours->include_park = $_SESSION['toursbooking']['ticketpark'];

                Doo::db()->insert($tours) or die("Error Ingresando Datos de Tours");
                $id_tours = Doo::db()->lastInsertId();
                // Fin Guardar Tour
                // Guardar parque
                $group = $_SESSION ['grupos']['id'];
                $park = $_SESSION ['grupos']['idParque'];
                Doo::loadModel("Attraction_Trafic");
                $attraction = new Attraction_Trafic();
                $attraction->id_tours = $id_tours;
                $attraction->type_tour = $type_tour;
                $attraction->id_park = $park;
                $attraction->group = $group;
                $attraction->creation_date = date("Y-m-d H:i");
                $attraction->starting_date = $_SESSION['toursbooking']['fecha_llegada'];
                $attraction->ending_date = $_SESSION['toursbooking']['fecha_salida'];
                $attraction->admission = $_SESSION ['toursbooking'] ['ticketpark'];
                $attraction->trafic = 1;
                $attraction->id_cliente = $cliente->id;
                $attraction->type_client = $cliente->tipo_client;
                $attraction->id_agencia = $dat->id;
                $attraction->adult = $_SESSION['toursbooking']['adults'];
                $attraction->child = $_SESSION['toursbooking']['childs'];
                $attraction->total_person = $_SESSION['toursbooking']['totalpax'];
                if ($attraction->admission == 1) {
                    $attraction->admission_child = $_SESSION ['toursbooking']['parkChilds'];
                    $attraction->admission_adtul = $_SESSION ['toursbooking']['parkAdult'];
                } else {
                    $attraction->admission_child = 0;
                    $attraction->admission_adtul = 0;
                }
                $attraction->totalAdmission = $attraction->admission_adtul + $attraction->admission_child;
                if ($park == '19') {
                    $attraction->totalTraspor = 60 * $_SESSION['toursbooking']['totalpax'];
                } else {
                    $attraction->totalTraspor = 0;
                }
                $attraction->total_paid = $attraction->totalAdmission + $attraction->totalTraspor;
                Doo::db()->insert($attraction) or die("Error Ingresando Datos de Attractions");
                Doo::loadModel('Parques');
                if ($attraction->admission == 1) {
                    $parque = new Parques();
                    $parque->id = $attraction->id_park;
                    $parque = Doo::db()->getOne($parque);
                    $parque->stock = intval($parque->stock) - 1;
                    $parque->update();
                }
                // Fin - Guardar parque
                //Guardamos la reserva
                $reserves = new Reserve();
                $reserves->id_tours = $id_tours;
                $reserves->type_tour = $type_tour;
                $reserves->fecha_ini = date("Y-m-d");
                $reserves->trip_no = (isset($_SESSION['toursbooking']['trip1']) ? $_SESSION['toursbooking']['trip1'] : "");
                $reserves->trip_no2 = (isset($_SESSION['toursbooking']['trip2']) ? $_SESSION['toursbooking']['trip2'] : "");
                $reserves->tipo_ticket = "roundtrip";
                $reserves->fromt = (isset($_SESSION['toursbooking']['area1']) ? $_SESSION['toursbooking']['area1'] : "");
                $reserves->tot = 1;
                $reserves->fromt2 = 1;
                $reserves->tot2 = (isset($_SESSION['toursbooking']['area2']) ? $_SESSION['toursbooking']['area2'] : "");
                $reserves->firsname = $tourstick['firstname'];
                $reserves->lasname = $tourstick['lastname'];
                $reserves->email = $tourstick['email'];
                $reserves->deptime1 = (isset($_SESSION['toursbooking']['datedeparturetrip1']) ? $_SESSION['toursbooking']['datedeparturetrip1'] : "");
                $reserves->deptime2 = (isset($_SESSION['toursbooking']['datedeparturetrip1']) ? $_SESSION['toursbooking']['datedeparturetrip2'] : "");
                $reserves->arrtime1 = (isset($_SESSION['toursbooking']['datearrivingtrip1']) ? $_SESSION['toursbooking']['datearrivingtrip1'] : "");
                $reserves->arrtime2 = (isset($_SESSION['toursbooking']['datearrivingtrip2']) ? $_SESSION['toursbooking']['datearrivingtrip2'] : "");
                $reserves->precioA = (isset($_SESSION['toursbooking']['priceadults']) ? $_SESSION['toursbooking']['priceadults'] : "");
                $reserves->precioN = (isset($_SESSION['toursbooking']['pricechilds']) ? $_SESSION['toursbooking']['pricechilds'] : "");

                $reserves->fecha_retorno = (isset($_SESSION['toursbooking']['fecha_salida']) ? $_SESSION['toursbooking']['fecha_salida'] : "");
                $reserves->fecha_salida = (isset($_SESSION['toursbooking']['fecha_llegada']) ? $_SESSION['toursbooking']['fecha_llegada'] : "");
                $reserves->pax = (isset($_SESSION['toursbooking']['adults']) ? $_SESSION['toursbooking']['adults'] : 0);
                $reserves->pax2 = (isset($_SESSION['toursbooking']['childs']) ? $_SESSION['toursbooking']['childs'] : 0);
                $reserves->id_clientes = $cliente->id;
                $reserves->pickup1 = (isset($_SESSION['toursbooking']['pickup1']) ? $_SESSION['toursbooking']['pickup1'] : 0);
                $reserves->dropoff1 = (isset($_SESSION['toursbooking']['dropoff1']) ? $_SESSION['toursbooking']['dropoff1'] : 0);
                $reserves->pickup2 = (isset($_SESSION['toursbooking']['pickup2']) ? $_SESSION['toursbooking']['pickup2'] : 0);
                $reserves->dropoff2 = (isset($_SESSION['toursbooking']['dropoff2']) ? $_SESSION['toursbooking']['dropoff2'] : 0);

                $reserves->tipo_pago = "PRED-PAID";
                $reserves->pago = $_SESSION ['toursbooking']['opcionPago'];
                $reserves->totaltotal = $reserves->precioA + $reserves->precioN;
                $reserves->otheramount = 0;
                $reserves->extra_charge = 0;
                $reserves->descuento_procentaje = 0;
                $reserves->descuento_valor = 0;
                $reserves->total2 = $reserves->precioA + $reserves->precioN;
                $reserves->codconf = (isset($_SESSION['codconf']) ? $_SESSION['codconf'] : -1);
                $reserves->hora = date("H:i:s");
                $reserves->comments = '';
                $reserves->resident = 0;
                $reserves->agen = ($dat->id != -1) ? $login->id : -1;
                $reserves->tipo_client = $cliente->tipo_client;
                $reserves->reward_id = 1;
                $reserves->agency = $dat->id;
                $reserves->luggage1 = -1;
                $reserves->luggage2 = -1;
                $reserves->canal = 'WEBSALE';
                $reserves->estado = 'CONFIRMED';
                Doo::db()->insert($reserves) or die("Error Ingresando Datos de Trasnporte Por Bus");
                $id_reserva = Doo::db()->lastInsertId();
                //Fin Guardamos la reserva
                //Actualizamos tours
                $tours->id = $id_tours;
                $tours->id_reserva = $id_reserva;
                Doo::db()->update($tours);

                //REgistraos pago y rastro
                Doo::loadController('admin/ReservasController');
                $reseControl = new ReservasController();
                $reserves->id = $id_reserva;
                $login = $_SESSION['user'];
                $login->tipo = 'AGENCY';
                $reseControl->registrar_pago($reserves, NULL, $login);
                $reseControl->rastro_reserva('CREATE', NULL, $reserves, $login);
                //generamos la factura
                Doo::loadModel('Factura');
                Doo::loadModel('FacturaServicio');
                Doo::loadModel('CollectService');

                $factura = new Factura(); //aqui
                $factura->id_agency = $tours->id_agency;
                $factura->subtotal = $tours->total;
                $factura->collect = $tours->totalouta;
                $factura->total = $factura->subtotal - $factura->collect;
                $factura->estado = "PAID";
                $factura->creation_date = date('Y-m-d');
                $factura->id = $factura->insert();
                $fs = new FacturaServicio();
                $fs->id_servicio = $id_tours;
                $fs->id_factura = $factura->id;
                $fs->tipo_servicio = 'ONE';
                $fs->id = $fs->insert();
                $coll = new CollectService();
                $coll->tipo_servicio = 'ONE';
                $coll->id_servicio = $id_tours;
                $coll->monto_pagado = $tours->totalouta;
                $coll->id = $coll->insert();
                Doo::loadModel('Pago');
                $pago = new Pago();
                $pago->factura = $factura->id;
                $pago->monto = $tours->totalouta;
                $pago->tipo = 'FULL';
                $pago->transnu = 0;
                $pago->adjunto = 'online-paid';
                $pago->descuento = 0;
                $pago->per_descuento = 0;
                $pago->fecha = date('Y-m-d h:m:s');
                $pago->metodo = 4;
                $pago->id = $pago->insert();

                if (isset($_SESSION['data_agency'])) {
                    //Fin Guardamos datos del tours referente a la agencia
                    Doo::loadModel("Tours_Agency");
                    $comision = $this->cal_equipament();
                    if (isset($_SESSION ['toursbooking']['comision_agency'])) {
                        $valorComision = $_SESSION ['toursbooking']['comision_agency'];
                    } else {
                        $valorComision = 0;
                    }
                    $tours_reserv = new Tours_Agency();
                    $tours_reserv->id_agencia = $dat->id;
                    $tours_reserv->comision = $comision;
                    $tours_reserv->id_reserva = $id_reserva;
                    $tours_reserv->id_tours = $id_tours;
                    $tours_reserv->type_tour = $type_tour;
                    $tours_reserv->tipo_pago = "PRED-PAID";
                    $tours_reserv->pago = $_SESSION ['toursbooking']['opcionPago'];
                    $tours_reserv->type_rate = $dat->type_rate;
                    $tours_reserv->agency_fee = $valorComision;
                    $tours_reserv->total = $total;
                    $tours_reserv->totalouta = $_SESSION['toursbooking']['totalouta'];
                    $tours_reserv->otheramount = $_SESSION['toursbooking']['otheramount'];
                    Doo::db()->insert($tours_reserv);
                }
                //$_SESSION['pago']
                $_SESSION['tourPagoOneDay'] = 'ok';
                $this->correo_onedaytour();
                unset($_SESSION['toursbooking']);
                //session_destroy();
            } else {
                if (isset($_SESSION['data_agency'])) {
                    return Doo::conf()->APP_URL . "agency/";
                } else {
                    return Doo::conf()->APP_URL . "1-day-tour/";
                }
            }
        }
    }

    public function validarFechaTours() {
        if (isset($this->params ["fecha"])) {
            $fecha = $this->params ["fecha"];
            list ($mes, $dia, $anyo) = explode("-", $fecha);
            $fecha2 = $anyo . "-" . $mes . "-" . $dia;
            $f0 = strtotime(date('Y-m-d h:i A'));
            $f1 = strtotime($fecha2);
            $resultado = ($f1 - $f0);
            $resultado = ($resultado / 60 / 60) + 1;
            $resultado = round($resultado);
            echo 'ok';
            if ($resultado > 2) {
                $disponible = true;
                $mensaje = '';
            } else {
                $disponible = false;
                $mensaje = "The maximum period for reservation of one-day-tours be until 10:00 PM the day prior to the date of departure";
            }
        }
    }

    public function types_payments() {
        return $op = array("1" => array("PRED-PAID" => "Agency Credit Card"),
            "2" => array("PRED-PAID" => 'Passenger Credit Card'),
            "3" => array("COLLECT ON BOARD" => "Credit Card+ 4 % FEE"),
            "4" => array("COLLECT ON BOARD" => "Cash"),
            "5" => array("VOUCHER" => "Credit Voucher")
        );
    }

    public function tipoHabitacion($room1, $room2, $room3, $room4) {
        //TIPOS DE HABITACIONES
        $sgl = $dbl = $tpl = $qua = 0;
        switch ($room1) {
            case 1:
                $sgl++;
                break;
            case 2:
                $dbl++;
                break;
            case 3:
                $tpl++;
                break;
            case 4:
                $qua++;
                break;
        }

        switch ($room2) {
            case 1:
                $sgl++;
                break;
            case 2:
                $dbl++;
                break;
            case 3:
                $tpl++;
                break;
            case 4:
                $qua++;
                break;
        }
        switch ($room3) {
            case 1:
                $sgl++;
                break;
            case 2:
                $dbl++;
                break;
            case 3:
                $tpl++;
                break;
            case 4:
                $qua++;
                break;
        }

        switch ($room4) {
            case 1:
                $sgl++;
                break;
            case 2:
                $dbl++;
                break;
            case 3:
                $tpl++;
                break;
            case 4:
                $qua++;
                break;
        }
        $tipos = array();
        $tipos['sgl'] = $sgl;
        $tipos['dbl'] = $dbl;
        $tipos['tpl'] = $tpl;
        $tipos['qua'] = $qua;
        return $tipos;
    }

}
